const __vite__fileDeps=["assets/Home-9BF4fQiD.js","assets/logo-DBgTG2k7.js","assets/Home-KcWzUXV1.css","assets/About-CL7R6oQV.js","assets/SettingsContainer-vLkCKPKC.js","assets/Changelog-CpiSnnLL.js","assets/Settings-ogcWmvv1.js","assets/Contact-BmppTCHn.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var cd=Object.defineProperty;var ld=(e,t,n)=>t in e?cd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var g=(e,t,n)=>(ld(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Oa(e,t){const n=new Set(e.split(","));return r=>n.has(r)}const Ke={},Mr=[],Kt=()=>{},ud=()=>!1,zi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Aa=e=>e.startsWith("onUpdate:"),dt=Object.assign,Ia=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},fd=Object.prototype.hasOwnProperty,$e=(e,t)=>fd.call(e,t),Ie=Array.isArray,Lr=e=>Hs(e)==="[object Map]",Vi=e=>Hs(e)==="[object Set]",Ec=e=>Hs(e)==="[object Date]",Re=e=>typeof e=="function",at=e=>typeof e=="string",Mn=e=>typeof e=="symbol",Ve=e=>e!==null&&typeof e=="object",Fu=e=>(Ve(e)||Re(e))&&Re(e.then)&&Re(e.catch),ju=Object.prototype.toString,Hs=e=>ju.call(e),hd=e=>Hs(e).slice(8,-1),$u=e=>Hs(e)==="[object Object]",Pa=e=>at(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=Oa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},dd=/-(\w)/g,vn=Wi(e=>e.replace(dd,(t,n)=>n?n.toUpperCase():"")),md=/\B([A-Z])/g,vr=Wi(e=>e.replace(md,"-$1").toLowerCase()),Gi=Wi(e=>e.charAt(0).toUpperCase()+e.slice(1)),yo=Wi(e=>e?`on${Gi(e)}`:""),Zn=(e,t)=>!Object.is(e,t),hi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Du=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Ei=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let vc;const Uu=()=>vc||(vc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ta(e){if(Ie(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=at(r)?bd(r):Ta(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(at(e)||Ve(e))return e}const pd=/;(?![^(]*\))/g,gd=/:([^]+)/,_d=/\/\*[^]*?\*\//g;function bd(e){const t={};return e.replace(_d,"").split(pd).forEach(n=>{if(n){const r=n.split(gd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function xn(e){let t="";if(at(e))t=e;else if(Ie(e))for(let n=0;n<e.length;n++){const r=xn(e[n]);r&&(t+=r+" ")}else if(Ve(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const yd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xd=Oa(yd);function Bu(e){return!!e||e===""}function wd(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Ki(e[r],t[r]);return n}function Ki(e,t){if(e===t)return!0;let n=Ec(e),r=Ec(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Mn(e),r=Mn(t),n||r)return e===t;if(n=Ie(e),r=Ie(t),n||r)return n&&r?wd(e,t):!1;if(n=Ve(e),r=Ve(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!Ki(e[o],t[o]))return!1}}return String(e)===String(t)}function Ed(e,t){return e.findIndex(n=>Ki(n,t))}const on=e=>at(e)?e:e==null?"":Ie(e)||Ve(e)&&(e.toString===ju||!Re(e.toString))?JSON.stringify(e,qu,2):String(e),qu=(e,t)=>t&&t.__v_isRef?qu(e,t.value):Lr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[xo(r,i)+" =>"]=s,n),{})}:Vi(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xo(n))}:Mn(t)?xo(t):Ve(t)&&!Ie(t)&&!$u(t)?String(t):t,xo=(e,t="")=>{var n;return Mn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ut;class Hu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ut,!t&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ut;try{return Ut=this,t()}finally{Ut=n}}}on(){Ut=this}off(){Ut=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function vd(e){return new Hu(e)}function Sd(e,t=Ut){t&&t.active&&t.effects.push(e)}function zu(){return Ut}function kd(e){Ut&&Ut.cleanups.push(e)}let br;class Na{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Sd(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,nr();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(Cd(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),rr()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Jn,n=br;try{return Jn=!0,br=this,this._runnings++,Sc(this),this.fn()}finally{kc(this),this._runnings--,br=n,Jn=t}}stop(){this.active&&(Sc(this),kc(this),this.onStop&&this.onStop(),this.active=!1)}}function Cd(e){return e.value}function Sc(e){e._trackId++,e._depsLength=0}function kc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Vu(e.deps[t],e);e.deps.length=e._depsLength}}function Vu(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Jn=!0,zo=0;const Wu=[];function nr(){Wu.push(Jn),Jn=!1}function rr(){const e=Wu.pop();Jn=e===void 0?!0:e}function Ra(){zo++}function Ma(){for(zo--;!zo&&Vo.length;)Vo.shift()()}function Gu(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Vu(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Vo=[];function Ku(e,t,n){Ra();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Vo.push(r.scheduler)))}Ma()}const Ju=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},vi=new WeakMap,yr=Symbol(""),Wo=Symbol("");function jt(e,t,n){if(Jn&&br){let r=vi.get(e);r||vi.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Ju(()=>r.delete(n))),Gu(br,s)}}function Nn(e,t,n,r,s,i){const o=vi.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Ie(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!Mn(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Ie(e)?Pa(n)&&a.push(o.get("length")):(a.push(o.get(yr)),Lr(e)&&a.push(o.get(Wo)));break;case"delete":Ie(e)||(a.push(o.get(yr)),Lr(e)&&a.push(o.get(Wo)));break;case"set":Lr(e)&&a.push(o.get(yr));break}Ra();for(const c of a)c&&Ku(c,4);Ma()}function Od(e,t){const n=vi.get(e);return n&&n.get(t)}const Ad=Oa("__proto__,__v_isRef,__isVue"),Yu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mn)),Cc=Id();function Id(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ue(this);for(let i=0,o=this.length;i<o;i++)jt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Ue)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){nr(),Ra();const r=Ue(this)[t].apply(this,n);return Ma(),rr(),r}}),e}function Pd(e){Mn(e)||(e=String(e));const t=Ue(this);return jt(t,"has",e),t.hasOwnProperty(e)}class Xu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Hd:tf:i?ef:Zu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Ie(t);if(!s){if(o&&$e(Cc,n))return Reflect.get(Cc,n,r);if(n==="hasOwnProperty")return Pd}const a=Reflect.get(t,n,r);return(Mn(n)?Yu.has(n):Ad(n))||(s||jt(t,"get",n),i)?a:gt(a)?o&&Pa(n)?a:a.value:Ve(a)?s?Xi(a):Yi(a):a}}class Qu extends Xu{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Os(i);if(!Si(r)&&!Os(r)&&(i=Ue(i),r=Ue(r)),!Ie(t)&&gt(i)&&!gt(r))return c?!1:(i.value=r,!0)}const o=Ie(t)&&Pa(n)?Number(n)<t.length:$e(t,n),a=Reflect.set(t,n,r,s);return t===Ue(s)&&(o?Zn(r,i)&&Nn(t,"set",n,r):Nn(t,"add",n,r)),a}deleteProperty(t,n){const r=$e(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Nn(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Mn(n)||!Yu.has(n))&&jt(t,"has",n),r}ownKeys(t){return jt(t,"iterate",Ie(t)?"length":yr),Reflect.ownKeys(t)}}class Td extends Xu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Nd=new Qu,Rd=new Td,Md=new Qu(!0);const La=e=>e,Ji=e=>Reflect.getPrototypeOf(e);function Xs(e,t,n=!1,r=!1){e=e.__v_raw;const s=Ue(e),i=Ue(t);n||(Zn(t,i)&&jt(s,"get",t),jt(s,"get",i));const{has:o}=Ji(s),a=r?La:n?$a:As;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Qs(e,t=!1){const n=this.__v_raw,r=Ue(n),s=Ue(e);return t||(Zn(e,s)&&jt(r,"has",e),jt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Zs(e,t=!1){return e=e.__v_raw,!t&&jt(Ue(e),"iterate",yr),Reflect.get(e,"size",e)}function Oc(e){e=Ue(e);const t=Ue(this);return Ji(t).has.call(t,e)||(t.add(e),Nn(t,"add",e,e)),this}function Ac(e,t){t=Ue(t);const n=Ue(this),{has:r,get:s}=Ji(n);let i=r.call(n,e);i||(e=Ue(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Zn(t,o)&&Nn(n,"set",e,t):Nn(n,"add",e,t),this}function Ic(e){const t=Ue(this),{has:n,get:r}=Ji(t);let s=n.call(t,e);s||(e=Ue(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Nn(t,"delete",e,void 0),i}function Pc(){const e=Ue(this),t=e.size!==0,n=e.clear();return t&&Nn(e,"clear",void 0,void 0),n}function ei(e,t){return function(r,s){const i=this,o=i.__v_raw,a=Ue(o),c=t?La:e?$a:As;return!e&&jt(a,"iterate",yr),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function ti(e,t,n){return function(...r){const s=this.__v_raw,i=Ue(s),o=Lr(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?La:t?$a:As;return!t&&jt(i,"iterate",c?Wo:yr),{next(){const{value:f,done:h}=l.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Bn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ld(){const e={get(i){return Xs(this,i)},get size(){return Zs(this)},has:Qs,add:Oc,set:Ac,delete:Ic,clear:Pc,forEach:ei(!1,!1)},t={get(i){return Xs(this,i,!1,!0)},get size(){return Zs(this)},has:Qs,add:Oc,set:Ac,delete:Ic,clear:Pc,forEach:ei(!1,!0)},n={get(i){return Xs(this,i,!0)},get size(){return Zs(this,!0)},has(i){return Qs.call(this,i,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:ei(!0,!1)},r={get(i){return Xs(this,i,!0,!0)},get size(){return Zs(this,!0)},has(i){return Qs.call(this,i,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:ei(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ti(i,!1,!1),n[i]=ti(i,!0,!1),t[i]=ti(i,!1,!0),r[i]=ti(i,!0,!0)}),[e,n,t,r]}const[Fd,jd,$d,Dd]=Ld();function Fa(e,t){const n=t?e?Dd:$d:e?jd:Fd;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get($e(n,s)&&s in r?n:r,s,i)}const Ud={get:Fa(!1,!1)},Bd={get:Fa(!1,!0)},qd={get:Fa(!0,!1)};const Zu=new WeakMap,ef=new WeakMap,tf=new WeakMap,Hd=new WeakMap;function zd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vd(e){return e.__v_skip||!Object.isExtensible(e)?0:zd(hd(e))}function Yi(e){return Os(e)?e:ja(e,!1,Nd,Ud,Zu)}function nf(e){return ja(e,!1,Md,Bd,ef)}function Xi(e){return ja(e,!0,Rd,qd,tf)}function ja(e,t,n,r,s){if(!Ve(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Vd(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function hs(e){return Os(e)?hs(e.__v_raw):!!(e&&e.__v_isReactive)}function Os(e){return!!(e&&e.__v_isReadonly)}function Si(e){return!!(e&&e.__v_isShallow)}function rf(e){return e?!!e.__v_raw:!1}function Ue(e){const t=e&&e.__v_raw;return t?Ue(t):e}function Wd(e){return Object.isExtensible(e)&&Du(e,"__v_skip",!0),e}const As=e=>Ve(e)?Yi(e):e,$a=e=>Ve(e)?Xi(e):e;class sf{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Na(()=>t(this._value),()=>ds(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Ue(this);return(!t._cacheable||t.effect.dirty)&&Zn(t._value,t._value=t.effect.run())&&ds(t,4),Da(t),t.effect._dirtyLevel>=2&&ds(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Gd(e,t,n=!1){let r,s;const i=Re(e);return i?(r=e,s=Kt):(r=e.get,s=e.set),new sf(r,s,i||!s,n)}function Da(e){var t;Jn&&br&&(e=Ue(e),Gu(br,(t=e.dep)!=null?t:e.dep=Ju(()=>e.dep=void 0,e instanceof sf?e:void 0)))}function ds(e,t=4,n){e=Ue(e);const r=e.dep;r&&Ku(r,t)}function gt(e){return!!(e&&e.__v_isRef===!0)}function Ct(e){return of(e,!1)}function Ua(e){return of(e,!0)}function of(e,t){return gt(e)?e:new Kd(e,t)}class Kd{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ue(t),this._value=n?t:As(t)}get value(){return Da(this),this._value}set value(t){const n=this.__v_isShallow||Si(t)||Os(t);t=n?t:Ue(t),Zn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:As(t),ds(this,4))}}function Ze(e){return gt(e)?e.value:e}const Jd={get:(e,t,n)=>Ze(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return gt(s)&&!gt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function af(e){return hs(e)?e:new Proxy(e,Jd)}class Yd{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>Da(this),()=>ds(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Xd(e){return new Yd(e)}class Qd{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Od(Ue(this._object),this._key)}}class Zd{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function em(e,t,n){return gt(e)?e:Re(e)?new Zd(e):Ve(e)&&arguments.length>1?tm(e,t,n):Ct(e)}function tm(e,t,n){const r=e[t];return gt(r)?r:new Qd(e,t,n)}/**
* @vue/runtime-core v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yn(e,t,n,r){try{return r?e(...r):e()}catch(s){Qi(s,t,n)}}function fn(e,t,n,r){if(Re(e)){const s=Yn(e,t,n,r);return s&&Fu(s)&&s.catch(i=>{Qi(i,t,n)}),s}if(Ie(e)){const s=[];for(let i=0;i<e.length;i++)s.push(fn(e[i],t,n,r));return s}}function Qi(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){nr(),Yn(c,null,10,[e,o,a]),rr();return}}nm(e,n,s,r)}function nm(e,t,n,r=!0){console.error(e)}let Is=!1,Go=!1;const St=[];let _n=0;const Fr=[];let zn=null,mr=0;const cf=Promise.resolve();let Ba=null;function Yr(e){const t=Ba||cf;return e?t.then(this?e.bind(this):e):t}function rm(e){let t=_n+1,n=St.length;for(;t<n;){const r=t+n>>>1,s=St[r],i=Ps(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function qa(e){(!St.length||!St.includes(e,Is&&e.allowRecurse?_n+1:_n))&&(e.id==null?St.push(e):St.splice(rm(e.id),0,e),lf())}function lf(){!Is&&!Go&&(Go=!0,Ba=cf.then(ff))}function sm(e){const t=St.indexOf(e);t>_n&&St.splice(t,1)}function im(e){Ie(e)?Fr.push(...e):(!zn||!zn.includes(e,e.allowRecurse?mr+1:mr))&&Fr.push(e),lf()}function Tc(e,t,n=Is?_n+1:0){for(;n<St.length;n++){const r=St[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;St.splice(n,1),n--,r()}}}function uf(e){if(Fr.length){const t=[...new Set(Fr)].sort((n,r)=>Ps(n)-Ps(r));if(Fr.length=0,zn){zn.push(...t);return}for(zn=t,mr=0;mr<zn.length;mr++)zn[mr]();zn=null,mr=0}}const Ps=e=>e.id==null?1/0:e.id,om=(e,t)=>{const n=Ps(e)-Ps(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function ff(e){Go=!1,Is=!0,St.sort(om);try{for(_n=0;_n<St.length;_n++){const t=St[_n];t&&t.active!==!1&&Yn(t,null,14)}}finally{_n=0,St.length=0,uf(),Is=!1,Ba=null,(St.length||Fr.length)&&ff()}}function am(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ke;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=r[u]||Ke;h&&(s=n.map(d=>at(d)?d.trim():d)),f&&(s=n.map(Ei))}let a,c=r[a=yo(t)]||r[a=yo(vn(t))];!c&&i&&(c=r[a=yo(vr(t))]),c&&fn(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,fn(l,e,6,s)}}function hf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Re(e)){const c=l=>{const u=hf(l,t,!0);u&&(a=!0,dt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(Ve(e)&&r.set(e,null),null):(Ie(i)?i.forEach(c=>o[c]=null):dt(o,i),Ve(e)&&r.set(e,o),o)}function Zi(e,t){return!e||!zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,vr(t))||$e(e,t))}let it=null,eo=null;function ki(e){const t=it;return it=e,eo=e&&e.type.__scopeId||null,t}function _E(e){eo=e}function bE(){eo=null}function Jt(e,t=it,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&qc(-1);const i=ki(t);let o;try{o=e(...s)}finally{ki(i),r._d&&qc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function wo(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:f,data:h,setupState:d,ctx:E,inheritAttrs:P}=e,L=ki(e);let I,N;try{if(n.shapeFlag&4){const M=s||r,U=M;I=gn(l.call(U,M,u,f,d,h,E)),N=a}else{const M=t;I=gn(M.length>1?M(f,{attrs:a,slots:o,emit:c}):M(f,null)),N=t.props?a:cm(a)}}catch(M){_s.length=0,Qi(M,e,1),I=ze(er)}let O=I;if(N&&P!==!1){const M=Object.keys(N),{shapeFlag:U}=O;M.length&&U&7&&(i&&M.some(Aa)&&(N=lm(N,i)),O=qr(O,N,!1,!0))}return n.dirs&&(O=qr(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),I=O,ki(L),I}const cm=e=>{let t;for(const n in e)(n==="class"||n==="style"||zi(n))&&((t||(t={}))[n]=e[n]);return t},lm=(e,t)=>{const n={};for(const r in e)(!Aa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function um(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Nc(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==r[h]&&!Zi(l,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Nc(r,o,l):!0:!!o;return!1}function Nc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Zi(n,i))return!0}return!1}function fm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const hm="components";function to(e,t){return mm(hm,e,!0,t)||e}const dm=Symbol.for("v-ndc");function mm(e,t,n=!0,r=!1){const s=it||mt;if(s){const i=s.type;{const a=ap(i,!1);if(a&&(a===t||a===vn(t)||a===Gi(vn(t))))return i}const o=Rc(s[e]||i[e],t)||Rc(s.appContext[e],t);return!o&&r?i:o}}function Rc(e,t){return e&&(e[t]||e[vn(t)]||e[Gi(vn(t))])}const pm=e=>e.__isSuspense;function gm(e,t){t&&t.pendingBranch?Ie(e)?t.effects.push(...e):t.effects.push(e):im(e)}const _m=Symbol.for("v-scx"),bm=()=>Yt(_m);function ym(e,t){return Ha(e,null,t)}const ni={};function Lt(e,t,n){return Ha(e,t,n)}function Ha(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Ke){if(t&&i){const k=t;t=(...V)=>{k(...V),U()}}const c=mt,l=k=>r===!0?k:gr(k,r===!1?1:void 0);let u,f=!1,h=!1;if(gt(e)?(u=()=>e.value,f=Si(e)):hs(e)?(u=()=>l(e),f=!0):Ie(e)?(h=!0,f=e.some(k=>hs(k)||Si(k)),u=()=>e.map(k=>{if(gt(k))return k.value;if(hs(k))return l(k);if(Re(k))return Yn(k,c,2)})):Re(e)?t?u=()=>Yn(e,c,2):u=()=>(d&&d(),fn(e,c,3,[E])):u=Kt,t&&r){const k=u;u=()=>gr(k())}let d,E=k=>{d=O.onStop=()=>{Yn(k,c,4),d=O.onStop=void 0}},P;if(ro)if(E=Kt,t?n&&fn(t,c,3,[u(),h?[]:void 0,E]):u(),s==="sync"){const k=bm();P=k.__watcherHandles||(k.__watcherHandles=[])}else return Kt;let L=h?new Array(e.length).fill(ni):ni;const I=()=>{if(!(!O.active||!O.dirty))if(t){const k=O.run();(r||f||(h?k.some((V,X)=>Zn(V,L[X])):Zn(k,L)))&&(d&&d(),fn(t,c,3,[k,L===ni?void 0:h&&L[0]===ni?[]:L,E]),L=k)}else O.run()};I.allowRecurse=!!t;let N;s==="sync"?N=I:s==="post"?N=()=>Mt(I,c&&c.suspense):(I.pre=!0,c&&(I.id=c.uid),N=()=>qa(I));const O=new Na(u,Kt,N),M=zu(),U=()=>{O.stop(),M&&Ia(M.effects,O)};return t?n?I():L=O.run():s==="post"?Mt(O.run.bind(O),c&&c.suspense):O.run(),P&&P.push(U),U}function xm(e,t,n){const r=this.proxy,s=at(e)?e.includes(".")?df(r,e):()=>r[e]:e.bind(r,r);let i;Re(t)?i=t:(i=t.handler,n=t);const o=Gs(this),a=Ha(s,i.bind(r),n);return o(),a}function df(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function gr(e,t=1/0,n){if(t<=0||!Ve(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,gt(e))gr(e.value,t,n);else if(Ie(e))for(let r=0;r<e.length;r++)gr(e[r],t,n);else if(Vi(e)||Lr(e))e.forEach(r=>{gr(r,t,n)});else if($u(e))for(const r in e)gr(e[r],t,n);return e}function yE(e,t){if(it===null)return e;const n=so(it)||it.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=Ke]=t[s];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&gr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function ur(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(nr(),fn(c,n,8,[e.el,a,e,t]),rr())}}/*! #__NO_SIDE_EFFECTS__ */function mn(e,t){return Re(e)?dt({name:e.name},t,{setup:e}):e}const ms=e=>!!e.type.__asyncLoader,mf=e=>e.type.__isKeepAlive;function wm(e,t){pf(e,"a",t)}function Em(e,t){pf(e,"da",t)}function pf(e,t,n=mt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(no(t,r,n),n){let s=n.parent;for(;s&&s.parent;)mf(s.parent.vnode)&&vm(r,t,n,s),s=s.parent}}function vm(e,t,n,r){const s=no(t,e,r,!0);za(()=>{Ia(r[t],s)},n)}function no(e,t,n=mt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;nr();const a=Gs(n),c=fn(t,n,e,o);return a(),rr(),c});return r?s.unshift(i):s.push(i),i}}const jn=e=>(t,n=mt)=>(!ro||e==="sp")&&no(e,(...r)=>t(...r),n),Sm=jn("bm"),zs=jn("m"),km=jn("bu"),Cm=jn("u"),Om=jn("bum"),za=jn("um"),Am=jn("sp"),Im=jn("rtg"),Pm=jn("rtc");function Tm(e,t=mt){no("ec",e,t)}function xE(e,t,n,r){let s;const i=n;if(Ie(e)||at(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i)}else if(Ve(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i)}}else s=[];return s}function di(e,t,n={},r,s){if(it.isCE||it.parent&&ms(it.parent)&&it.parent.isCE)return ze("slot",n,r);let i=e[t];i&&i._c&&(i._d=!1),pt();const o=i&&gf(i(n)),a=wr(Bt,{key:n.key||o&&o.key||`_${t}`},o||[],o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function gf(e){return e.some(t=>Oi(t)?!(t.type===er||t.type===Bt&&!gf(t.children)):!0)?e:null}const Ko=e=>e?Nf(e)?so(e)||e.proxy:Ko(e.parent):null,ps=dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ko(e.parent),$root:e=>Ko(e.root),$emit:e=>e.emit,$options:e=>Va(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,qa(e.update)}),$nextTick:e=>e.n||(e.n=Yr.bind(e.proxy)),$watch:e=>xm.bind(e)}),Eo=(e,t)=>e!==Ke&&!e.__isScriptSetup&&$e(e,t),Nm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Eo(r,t))return o[t]=1,r[t];if(s!==Ke&&$e(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&$e(l,t))return o[t]=3,i[t];if(n!==Ke&&$e(n,t))return o[t]=4,n[t];Jo&&(o[t]=0)}}const u=ps[t];let f,h;if(u)return t==="$attrs"&&jt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Ke&&$e(n,t))return o[t]=4,n[t];if(h=c.config.globalProperties,$e(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Eo(s,t)?(s[t]=n,!0):r!==Ke&&$e(r,t)?(r[t]=n,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Ke&&$e(e,o)||Eo(t,o)||(a=i[0])&&$e(a,o)||$e(r,o)||$e(ps,o)||$e(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:$e(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Mc(e){return Ie(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Jo=!0;function Rm(e){const t=Va(e),n=e.proxy,r=e.ctx;Jo=!1,t.beforeCreate&&Lc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:E,activated:P,deactivated:L,beforeDestroy:I,beforeUnmount:N,destroyed:O,unmounted:M,render:U,renderTracked:k,renderTriggered:V,errorCaptured:X,serverPrefetch:Q,expose:ae,inheritAttrs:se,components:Z,directives:we,filters:Ne}=t;if(l&&Mm(l,r,null),o)for(const ve in o){const Ce=o[ve];Re(Ce)&&(r[ve]=Ce.bind(n))}if(s){const ve=s.call(n,n);Ve(ve)&&(e.data=Yi(ve))}if(Jo=!0,i)for(const ve in i){const Ce=i[ve],qe=Re(Ce)?Ce.bind(n,n):Re(Ce.get)?Ce.get.bind(n,n):Kt,m=!Re(Ce)&&Re(Ce.set)?Ce.set.bind(n):Kt,A=We({get:qe,set:m});Object.defineProperty(r,ve,{enumerable:!0,configurable:!0,get:()=>A.value,set:oe=>A.value=oe})}if(a)for(const ve in a)_f(a[ve],r,n,ve);if(c){const ve=Re(c)?c.call(n):c;Reflect.ownKeys(ve).forEach(Ce=>{mi(Ce,ve[Ce])})}u&&Lc(u,e,"c");function Te(ve,Ce){Ie(Ce)?Ce.forEach(qe=>ve(qe.bind(n))):Ce&&ve(Ce.bind(n))}if(Te(Sm,f),Te(zs,h),Te(km,d),Te(Cm,E),Te(wm,P),Te(Em,L),Te(Tm,X),Te(Pm,k),Te(Im,V),Te(Om,N),Te(za,M),Te(Am,Q),Ie(ae))if(ae.length){const ve=e.exposed||(e.exposed={});ae.forEach(Ce=>{Object.defineProperty(ve,Ce,{get:()=>n[Ce],set:qe=>n[Ce]=qe})})}else e.exposed||(e.exposed={});U&&e.render===Kt&&(e.render=U),se!=null&&(e.inheritAttrs=se),Z&&(e.components=Z),we&&(e.directives=we)}function Mm(e,t,n=Kt){Ie(e)&&(e=Yo(e));for(const r in e){const s=e[r];let i;Ve(s)?"default"in s?i=Yt(s.from||r,s.default,!0):i=Yt(s.from||r):i=Yt(s),gt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Lc(e,t,n){fn(Ie(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function _f(e,t,n,r){const s=r.includes(".")?df(n,r):()=>n[r];if(at(e)){const i=t[e];Re(i)&&Lt(s,i)}else if(Re(e))Lt(s,e.bind(n));else if(Ve(e))if(Ie(e))e.forEach(i=>_f(i,t,n,r));else{const i=Re(e.handler)?e.handler.bind(n):t[e.handler];Re(i)&&Lt(s,i,e)}}function Va(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>Ci(c,l,o,!0)),Ci(c,t,o)),Ve(t)&&i.set(t,c),c}function Ci(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ci(e,i,n,!0),s&&s.forEach(o=>Ci(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=Lm[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Lm={data:Fc,props:jc,emits:jc,methods:cs,computed:cs,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:cs,directives:cs,watch:jm,provide:Fc,inject:Fm};function Fc(e,t){return t?e?function(){return dt(Re(e)?e.call(this,this):e,Re(t)?t.call(this,this):t)}:t:e}function Fm(e,t){return cs(Yo(e),Yo(t))}function Yo(e){if(Ie(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ot(e,t){return e?[...new Set([].concat(e,t))]:t}function cs(e,t){return e?dt(Object.create(null),e,t):t}function jc(e,t){return e?Ie(e)&&Ie(t)?[...new Set([...e,...t])]:dt(Object.create(null),Mc(e),Mc(t??{})):t}function jm(e,t){if(!e)return t;if(!t)return e;const n=dt(Object.create(null),e);for(const r in t)n[r]=Ot(e[r],t[r]);return n}function bf(){return{app:null,config:{isNativeTag:ud,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $m=0;function Dm(e,t){return function(r,s=null){Re(r)||(r=dt({},r)),s!=null&&!Ve(s)&&(s=null);const i=bf(),o=new WeakSet;let a=!1;const c=i.app={_uid:$m++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:lp,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Re(l.install)?(o.add(l),l.install(c,...u)):Re(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,f){if(!a){const h=ze(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(h,l):e(h,l,f),a=!0,c._container=l,l.__vue_app__=c,so(h.component)||h.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){const u=gs;gs=c;try{return l()}finally{gs=u}}};return c}}let gs=null;function mi(e,t){if(mt){let n=mt.provides;const r=mt.parent&&mt.parent.provides;r===n&&(n=mt.provides=Object.create(r)),n[e]=t}}function Yt(e,t,n=!1){const r=mt||it;if(r||gs){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:gs._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Re(t)?t.call(r&&r.proxy):t}}const yf={},xf=()=>Object.create(yf),wf=e=>Object.getPrototypeOf(e)===yf;function Um(e,t,n,r=!1){const s={},i=xf();e.propsDefaults=Object.create(null),Ef(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:nf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Bm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=Ue(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Zi(e.emitsOptions,h))continue;const d=t[h];if(c)if($e(i,h))d!==i[h]&&(i[h]=d,l=!0);else{const E=vn(h);s[E]=Xo(c,a,E,d,e,!1)}else d!==i[h]&&(i[h]=d,l=!0)}}}else{Ef(e,t,s,i)&&(l=!0);let u;for(const f in a)(!t||!$e(t,f)&&((u=vr(f))===f||!$e(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Xo(c,a,f,void 0,e,!0)):delete s[f]);if(i!==a)for(const f in i)(!t||!$e(t,f))&&(delete i[f],l=!0)}l&&Nn(e.attrs,"set","")}function Ef(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(fs(c))continue;const l=t[c];let u;s&&$e(s,u=vn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Zi(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Ue(n),l=a||Ke;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Xo(s,c,f,l[f],e,!$e(l,f))}}return o}function Xo(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=$e(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Re(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=Gs(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===vr(n))&&(r=!0))}return r}function vf(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!Re(e)){const u=f=>{c=!0;const[h,d]=vf(f,t,!0);dt(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return Ve(e)&&r.set(e,Mr),Mr;if(Ie(i))for(let u=0;u<i.length;u++){const f=vn(i[u]);$c(f)&&(o[f]=Ke)}else if(i)for(const u in i){const f=vn(u);if($c(f)){const h=i[u],d=o[f]=Ie(h)||Re(h)?{type:h}:dt({},h);if(d){const E=Bc(Boolean,d.type),P=Bc(String,d.type);d[0]=E>-1,d[1]=P<0||E<P,(E>-1||$e(d,"default"))&&a.push(f)}}}const l=[o,a];return Ve(e)&&r.set(e,l),l}function $c(e){return e[0]!=="$"&&!fs(e)}function Dc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Uc(e,t){return Dc(e)===Dc(t)}function Bc(e,t){return Ie(t)?t.findIndex(n=>Uc(n,e)):Re(t)&&Uc(t,e)?0:-1}const Sf=e=>e[0]==="_"||e==="$stable",Wa=e=>Ie(e)?e.map(gn):[gn(e)],qm=(e,t,n)=>{if(t._n)return t;const r=Jt((...s)=>Wa(t(...s)),n);return r._c=!1,r},kf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Sf(s))continue;const i=e[s];if(Re(i))t[s]=qm(s,i,r);else if(i!=null){const o=Wa(i);t[s]=()=>o}}},Cf=(e,t)=>{const n=Wa(t);e.slots.default=()=>n},Hm=(e,t)=>{const n=e.slots=xf();if(e.vnode.shapeFlag&32){const r=t._;r?(dt(n,t),Du(n,"_",r,!0)):kf(t,n)}else t&&Cf(e,t)},zm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Ke;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(dt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,kf(t,s)),o=t}else t&&(Cf(e,t),o={default:1});if(i)for(const a in s)!Sf(a)&&o[a]==null&&delete s[a]};function Qo(e,t,n,r,s=!1){if(Ie(e)){e.forEach((h,d)=>Qo(h,t&&(Ie(t)?t[d]:t),n,r,s));return}if(ms(r)&&!s)return;const i=r.shapeFlag&4?so(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Ke?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==c&&(at(l)?(u[l]=null,$e(f,l)&&(f[l]=null)):gt(l)&&(l.value=null)),Re(c))Yn(c,a,12,[o,u]);else{const h=at(c),d=gt(c);if(h||d){const E=()=>{if(e.f){const P=h?$e(f,c)?f[c]:u[c]:c.value;s?Ie(P)&&Ia(P,i):Ie(P)?P.includes(i)||P.push(i):h?(u[c]=[i],$e(f,c)&&(f[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else h?(u[c]=o,$e(f,c)&&(f[c]=o)):d&&(c.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,Mt(E,n)):E()}}}const Mt=gm;function Vm(e){return Wm(e)}function Wm(e,t){const n=Uu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Kt,insertStaticContent:E}=e,P=(y,S,D,W=null,z=null,ne=null,ce=void 0,_=null,x=!!S.dynamicChildren)=>{if(y===S)return;y&&!ns(y,S)&&(W=F(y),oe(y,z,ne,!0),y=null),S.patchFlag===-2&&(x=!1,S.dynamicChildren=null);const{type:T,ref:G,shapeFlag:ie}=S;switch(T){case Vs:L(y,S,D,W);break;case er:I(y,S,D,W);break;case So:y==null&&N(S,D,W,ce);break;case Bt:Z(y,S,D,W,z,ne,ce,_,x);break;default:ie&1?U(y,S,D,W,z,ne,ce,_,x):ie&6?we(y,S,D,W,z,ne,ce,_,x):(ie&64||ie&128)&&T.process(y,S,D,W,z,ne,ce,_,x,ee)}G!=null&&z&&Qo(G,y&&y.ref,ne,S||y,!S)},L=(y,S,D,W)=>{if(y==null)r(S.el=a(S.children),D,W);else{const z=S.el=y.el;S.children!==y.children&&l(z,S.children)}},I=(y,S,D,W)=>{y==null?r(S.el=c(S.children||""),D,W):S.el=y.el},N=(y,S,D,W)=>{[y.el,y.anchor]=E(y.children,S,D,W,y.el,y.anchor)},O=({el:y,anchor:S},D,W)=>{let z;for(;y&&y!==S;)z=h(y),r(y,D,W),y=z;r(S,D,W)},M=({el:y,anchor:S})=>{let D;for(;y&&y!==S;)D=h(y),s(y),y=D;s(S)},U=(y,S,D,W,z,ne,ce,_,x)=>{S.type==="svg"?ce="svg":S.type==="math"&&(ce="mathml"),y==null?k(S,D,W,z,ne,ce,_,x):Q(y,S,z,ne,ce,_,x)},k=(y,S,D,W,z,ne,ce,_)=>{let x,T;const{props:G,shapeFlag:ie,transition:te,dirs:j}=y;if(x=y.el=o(y.type,ne,G&&G.is,G),ie&8?u(x,y.children):ie&16&&X(y.children,x,null,W,z,vo(y,ne),ce,_),j&&ur(y,null,W,"created"),V(x,y,y.scopeId,ce,W),G){for(const _e in G)_e!=="value"&&!fs(_e)&&i(x,_e,null,G[_e],ne,y.children,W,z,fe);"value"in G&&i(x,"value",null,G.value,ne),(T=G.onVnodeBeforeMount)&&pn(T,W,y)}j&&ur(y,null,W,"beforeMount");const q=Gm(z,te);q&&te.beforeEnter(x),r(x,S,D),((T=G&&G.onVnodeMounted)||q||j)&&Mt(()=>{T&&pn(T,W,y),q&&te.enter(x),j&&ur(y,null,W,"mounted")},z)},V=(y,S,D,W,z)=>{if(D&&d(y,D),W)for(let ne=0;ne<W.length;ne++)d(y,W[ne]);if(z){let ne=z.subTree;if(S===ne){const ce=z.vnode;V(y,ce,ce.scopeId,ce.slotScopeIds,z.parent)}}},X=(y,S,D,W,z,ne,ce,_,x=0)=>{for(let T=x;T<y.length;T++){const G=y[T]=_?Vn(y[T]):gn(y[T]);P(null,G,S,D,W,z,ne,ce,_)}},Q=(y,S,D,W,z,ne,ce)=>{const _=S.el=y.el;let{patchFlag:x,dynamicChildren:T,dirs:G}=S;x|=y.patchFlag&16;const ie=y.props||Ke,te=S.props||Ke;let j;if(D&&fr(D,!1),(j=te.onVnodeBeforeUpdate)&&pn(j,D,S,y),G&&ur(S,y,D,"beforeUpdate"),D&&fr(D,!0),T?ae(y.dynamicChildren,T,_,D,W,vo(S,z),ne):ce||Ce(y,S,_,null,D,W,vo(S,z),ne,!1),x>0){if(x&16)se(_,S,ie,te,D,W,z);else if(x&2&&ie.class!==te.class&&i(_,"class",null,te.class,z),x&4&&i(_,"style",ie.style,te.style,z),x&8){const q=S.dynamicProps;for(let _e=0;_e<q.length;_e++){const ke=q[_e],Me=ie[ke],Je=te[ke];(Je!==Me||ke==="value")&&i(_,ke,Me,Je,z,y.children,D,W,fe)}}x&1&&y.children!==S.children&&u(_,S.children)}else!ce&&T==null&&se(_,S,ie,te,D,W,z);((j=te.onVnodeUpdated)||G)&&Mt(()=>{j&&pn(j,D,S,y),G&&ur(S,y,D,"updated")},W)},ae=(y,S,D,W,z,ne,ce)=>{for(let _=0;_<S.length;_++){const x=y[_],T=S[_],G=x.el&&(x.type===Bt||!ns(x,T)||x.shapeFlag&70)?f(x.el):D;P(x,T,G,null,W,z,ne,ce,!0)}},se=(y,S,D,W,z,ne,ce)=>{if(D!==W){if(D!==Ke)for(const _ in D)!fs(_)&&!(_ in W)&&i(y,_,D[_],null,ce,S.children,z,ne,fe);for(const _ in W){if(fs(_))continue;const x=W[_],T=D[_];x!==T&&_!=="value"&&i(y,_,T,x,ce,S.children,z,ne,fe)}"value"in W&&i(y,"value",D.value,W.value,ce)}},Z=(y,S,D,W,z,ne,ce,_,x)=>{const T=S.el=y?y.el:a(""),G=S.anchor=y?y.anchor:a("");let{patchFlag:ie,dynamicChildren:te,slotScopeIds:j}=S;j&&(_=_?_.concat(j):j),y==null?(r(T,D,W),r(G,D,W),X(S.children||[],D,G,z,ne,ce,_,x)):ie>0&&ie&64&&te&&y.dynamicChildren?(ae(y.dynamicChildren,te,D,z,ne,ce,_),(S.key!=null||z&&S===z.subTree)&&Of(y,S,!0)):Ce(y,S,D,G,z,ne,ce,_,x)},we=(y,S,D,W,z,ne,ce,_,x)=>{S.slotScopeIds=_,y==null?S.shapeFlag&512?z.ctx.activate(S,D,W,ce,x):Ne(S,D,W,z,ne,ce,x):Oe(y,S,x)},Ne=(y,S,D,W,z,ne,ce)=>{const _=y.component=np(y,W,z);if(mf(y)&&(_.ctx.renderer=ee),rp(_),_.asyncDep){if(z&&z.registerDep(_,Te),!y.el){const x=_.subTree=ze(er);I(null,x,S,D)}}else Te(_,y,S,D,z,ne,ce)},Oe=(y,S,D)=>{const W=S.component=y.component;if(um(y,S,D))if(W.asyncDep&&!W.asyncResolved){ve(W,S,D);return}else W.next=S,sm(W.update),W.effect.dirty=!0,W.update();else S.el=y.el,W.vnode=S},Te=(y,S,D,W,z,ne,ce)=>{const _=()=>{if(y.isMounted){let{next:G,bu:ie,u:te,parent:j,vnode:q}=y;{const rt=Af(y);if(rt){G&&(G.el=q.el,ve(y,G,ce)),rt.asyncDep.then(()=>{y.isUnmounted||_()});return}}let _e=G,ke;fr(y,!1),G?(G.el=q.el,ve(y,G,ce)):G=q,ie&&hi(ie),(ke=G.props&&G.props.onVnodeBeforeUpdate)&&pn(ke,j,G,q),fr(y,!0);const Me=wo(y),Je=y.subTree;y.subTree=Me,P(Je,Me,f(Je.el),F(Je),y,z,ne),G.el=Me.el,_e===null&&fm(y,Me.el),te&&Mt(te,z),(ke=G.props&&G.props.onVnodeUpdated)&&Mt(()=>pn(ke,j,G,q),z)}else{let G;const{el:ie,props:te}=S,{bm:j,m:q,parent:_e}=y,ke=ms(S);if(fr(y,!1),j&&hi(j),!ke&&(G=te&&te.onVnodeBeforeMount)&&pn(G,_e,S),fr(y,!0),ie&&Se){const Me=()=>{y.subTree=wo(y),Se(ie,y.subTree,y,z,null)};ke?S.type.__asyncLoader().then(()=>!y.isUnmounted&&Me()):Me()}else{const Me=y.subTree=wo(y);P(null,Me,D,W,y,z,ne),S.el=Me.el}if(q&&Mt(q,z),!ke&&(G=te&&te.onVnodeMounted)){const Me=S;Mt(()=>pn(G,_e,Me),z)}(S.shapeFlag&256||_e&&ms(_e.vnode)&&_e.vnode.shapeFlag&256)&&y.a&&Mt(y.a,z),y.isMounted=!0,S=D=W=null}},x=y.effect=new Na(_,Kt,()=>qa(T),y.scope),T=y.update=()=>{x.dirty&&x.run()};T.id=y.uid,fr(y,!0),T()},ve=(y,S,D)=>{S.component=y;const W=y.vnode.props;y.vnode=S,y.next=null,Bm(y,S.props,W,D),zm(y,S.children,D),nr(),Tc(y),rr()},Ce=(y,S,D,W,z,ne,ce,_,x=!1)=>{const T=y&&y.children,G=y?y.shapeFlag:0,ie=S.children,{patchFlag:te,shapeFlag:j}=S;if(te>0){if(te&128){m(T,ie,D,W,z,ne,ce,_,x);return}else if(te&256){qe(T,ie,D,W,z,ne,ce,_,x);return}}j&8?(G&16&&fe(T,z,ne),ie!==T&&u(D,ie)):G&16?j&16?m(T,ie,D,W,z,ne,ce,_,x):fe(T,z,ne,!0):(G&8&&u(D,""),j&16&&X(ie,D,W,z,ne,ce,_,x))},qe=(y,S,D,W,z,ne,ce,_,x)=>{y=y||Mr,S=S||Mr;const T=y.length,G=S.length,ie=Math.min(T,G);let te;for(te=0;te<ie;te++){const j=S[te]=x?Vn(S[te]):gn(S[te]);P(y[te],j,D,null,z,ne,ce,_,x)}T>G?fe(y,z,ne,!0,!1,ie):X(S,D,W,z,ne,ce,_,x,ie)},m=(y,S,D,W,z,ne,ce,_,x)=>{let T=0;const G=S.length;let ie=y.length-1,te=G-1;for(;T<=ie&&T<=te;){const j=y[T],q=S[T]=x?Vn(S[T]):gn(S[T]);if(ns(j,q))P(j,q,D,null,z,ne,ce,_,x);else break;T++}for(;T<=ie&&T<=te;){const j=y[ie],q=S[te]=x?Vn(S[te]):gn(S[te]);if(ns(j,q))P(j,q,D,null,z,ne,ce,_,x);else break;ie--,te--}if(T>ie){if(T<=te){const j=te+1,q=j<G?S[j].el:W;for(;T<=te;)P(null,S[T]=x?Vn(S[T]):gn(S[T]),D,q,z,ne,ce,_,x),T++}}else if(T>te)for(;T<=ie;)oe(y[T],z,ne,!0),T++;else{const j=T,q=T,_e=new Map;for(T=q;T<=te;T++){const ct=S[T]=x?Vn(S[T]):gn(S[T]);ct.key!=null&&_e.set(ct.key,T)}let ke,Me=0;const Je=te-q+1;let rt=!1,Qt=0;const _t=new Array(Je);for(T=0;T<Je;T++)_t[T]=0;for(T=j;T<=ie;T++){const ct=y[T];if(Me>=Je){oe(ct,z,ne,!0);continue}let bt;if(ct.key!=null)bt=_e.get(ct.key);else for(ke=q;ke<=te;ke++)if(_t[ke-q]===0&&ns(ct,S[ke])){bt=ke;break}bt===void 0?oe(ct,z,ne,!0):(_t[bt-q]=T+1,bt>=Qt?Qt=bt:rt=!0,P(ct,S[bt],D,null,z,ne,ce,_,x),Me++)}const kn=rt?Km(_t):Mr;for(ke=kn.length-1,T=Je-1;T>=0;T--){const ct=q+T,bt=S[ct],$n=ct+1<G?S[ct+1].el:W;_t[T]===0?P(null,bt,D,$n,z,ne,ce,_,x):rt&&(ke<0||T!==kn[ke]?A(bt,D,$n,2):ke--)}}},A=(y,S,D,W,z=null)=>{const{el:ne,type:ce,transition:_,children:x,shapeFlag:T}=y;if(T&6){A(y.component.subTree,S,D,W);return}if(T&128){y.suspense.move(S,D,W);return}if(T&64){ce.move(y,S,D,ee);return}if(ce===Bt){r(ne,S,D);for(let ie=0;ie<x.length;ie++)A(x[ie],S,D,W);r(y.anchor,S,D);return}if(ce===So){O(y,S,D);return}if(W!==2&&T&1&&_)if(W===0)_.beforeEnter(ne),r(ne,S,D),Mt(()=>_.enter(ne),z);else{const{leave:ie,delayLeave:te,afterLeave:j}=_,q=()=>r(ne,S,D),_e=()=>{ie(ne,()=>{q(),j&&j()})};te?te(ne,q,_e):_e()}else r(ne,S,D)},oe=(y,S,D,W=!1,z=!1)=>{const{type:ne,props:ce,ref:_,children:x,dynamicChildren:T,shapeFlag:G,patchFlag:ie,dirs:te}=y;if(_!=null&&Qo(_,null,D,y,!0),G&256){S.ctx.deactivate(y);return}const j=G&1&&te,q=!ms(y);let _e;if(q&&(_e=ce&&ce.onVnodeBeforeUnmount)&&pn(_e,S,y),G&6)Ee(y.component,D,W);else{if(G&128){y.suspense.unmount(D,W);return}j&&ur(y,null,S,"beforeUnmount"),G&64?y.type.remove(y,S,D,z,ee,W):T&&(ne!==Bt||ie>0&&ie&64)?fe(T,S,D,!1,!0):(ne===Bt&&ie&384||!z&&G&16)&&fe(x,S,D),W&&v(y)}(q&&(_e=ce&&ce.onVnodeUnmounted)||j)&&Mt(()=>{_e&&pn(_e,S,y),j&&ur(y,null,S,"unmounted")},D)},v=y=>{const{type:S,el:D,anchor:W,transition:z}=y;if(S===Bt){me(D,W);return}if(S===So){M(y);return}const ne=()=>{s(D),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(y.shapeFlag&1&&z&&!z.persisted){const{leave:ce,delayLeave:_}=z,x=()=>ce(D,ne);_?_(y.el,ne,x):x()}else ne()},me=(y,S)=>{let D;for(;y!==S;)D=h(y),s(y),y=D;s(S)},Ee=(y,S,D)=>{const{bum:W,scope:z,update:ne,subTree:ce,um:_}=y;W&&hi(W),z.stop(),ne&&(ne.active=!1,oe(ce,y,S,D)),_&&Mt(_,S),Mt(()=>{y.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},fe=(y,S,D,W=!1,z=!1,ne=0)=>{for(let ce=ne;ce<y.length;ce++)oe(y[ce],S,D,W,z)},F=y=>y.shapeFlag&6?F(y.component.subTree):y.shapeFlag&128?y.suspense.next():h(y.anchor||y.el);let K=!1;const B=(y,S,D)=>{y==null?S._vnode&&oe(S._vnode,null,null,!0):P(S._vnode||null,y,S,null,null,null,D),K||(K=!0,Tc(),uf(),K=!1),S._vnode=y},ee={p:P,um:oe,m:A,r:v,mt:Ne,mc:X,pc:Ce,pbc:ae,n:F,o:e};let pe,Se;return{render:B,hydrate:pe,createApp:Dm(B,pe)}}function vo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fr({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Gm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Of(e,t,n=!1){const r=e.children,s=t.children;if(Ie(r)&&Ie(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Vn(s[i]),a.el=o.el),n||Of(o,a)),a.type===Vs&&(a.el=o.el)}}function Km(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Af(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Af(t)}const Jm=e=>e.__isTeleport,Bt=Symbol.for("v-fgt"),Vs=Symbol.for("v-txt"),er=Symbol.for("v-cmt"),So=Symbol.for("v-stc"),_s=[];let cn=null;function pt(e=!1){_s.push(cn=e?null:[])}function Ym(){_s.pop(),cn=_s[_s.length-1]||null}let Ts=1;function qc(e){Ts+=e}function If(e){return e.dynamicChildren=Ts>0?cn||Mr:null,Ym(),Ts>0&&cn&&cn.push(e),e}function Sn(e,t,n,r,s,i){return If(Ye(e,t,n,r,s,i,!0))}function wr(e,t,n,r,s){return If(ze(e,t,n,r,s,!0))}function Oi(e){return e?e.__v_isVNode===!0:!1}function ns(e,t){return e.type===t.type&&e.key===t.key}const Pf=({key:e})=>e??null,pi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?at(e)||gt(e)||Re(e)?{i:it,r:e,k:t,f:!!n}:e:null);function Ye(e,t=null,n=null,r=0,s=null,i=e===Bt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pf(t),ref:t&&pi(t),scopeId:eo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:it};return a?(Ka(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=at(n)?8:16),Ts>0&&!o&&cn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&cn.push(c),c}const ze=Xm;function Xm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===dm)&&(e=er),Oi(e)){const a=qr(e,t,!0);return n&&Ka(a,n),Ts>0&&!i&&cn&&(a.shapeFlag&6?cn[cn.indexOf(e)]=a:cn.push(a)),a.patchFlag|=-2,a}if(cp(e)&&(e=e.__vccOpts),t){t=Qm(t);let{class:a,style:c}=t;a&&!at(a)&&(t.class=xn(a)),Ve(c)&&(rf(c)&&!Ie(c)&&(c=dt({},c)),t.style=Ta(c))}const o=at(e)?1:pm(e)?128:Jm(e)?64:Ve(e)?4:Re(e)?2:0;return Ye(e,t,n,r,s,o,i,!0)}function Qm(e){return e?rf(e)||wf(e)?dt({},e):e:null}function qr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=e,l=t?Zm(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Pf(l),ref:t&&t.ref?n&&i?Ie(i)?i.concat(pi(t)):[i,pi(t)]:pi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Bt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qr(e.ssContent),ssFallback:e.ssFallback&&qr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&(u.transition=c.clone(u)),u}function Ga(e=" ",t=0){return ze(Vs,null,e,t)}function Tf(e="",t=!1){return t?(pt(),wr(er,null,e)):ze(er,null,e)}function gn(e){return e==null||typeof e=="boolean"?ze(er):Ie(e)?ze(Bt,null,e.slice()):typeof e=="object"?Vn(e):ze(Vs,null,String(e))}function Vn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:qr(e)}function Ka(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ie(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ka(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!wf(t)?t._ctx=it:s===3&&it&&(it.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Re(t)?(t={default:t,_ctx:it},n=32):(t=String(t),r&64?(n=16,t=[Ga(t)]):n=8);e.children=t,e.shapeFlag|=n}function Zm(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=xn([t.class,r.class]));else if(s==="style")t.style=Ta([t.style,r.style]);else if(zi(s)){const i=t[s],o=r[s];o&&i!==o&&!(Ie(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function pn(e,t,n,r=null){fn(e,t,7,[n,r])}const ep=bf();let tp=0;function np(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||ep,i={uid:tp++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vf(r,s),emitsOptions:hf(r,s),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=am.bind(null,i),e.ce&&e.ce(i),i}let mt=null;const Ws=()=>mt||it;let Ai,Zo;{const e=Uu(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ai=t("__VUE_INSTANCE_SETTERS__",n=>mt=n),Zo=t("__VUE_SSR_SETTERS__",n=>ro=n)}const Gs=e=>{const t=mt;return Ai(e),e.scope.on(),()=>{e.scope.off(),Ai(t)}},Hc=()=>{mt&&mt.scope.off(),Ai(null)};function Nf(e){return e.vnode.shapeFlag&4}let ro=!1;function rp(e,t=!1){t&&Zo(t);const{props:n,children:r}=e.vnode,s=Nf(e);Um(e,n,s,t),Hm(e,r);const i=s?sp(e,t):void 0;return t&&Zo(!1),i}function sp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Nm);const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?op(e):null,i=Gs(e);nr();const o=Yn(r,e,0,[e.props,s]);if(rr(),i(),Fu(o)){if(o.then(Hc,Hc),t)return o.then(a=>{zc(e,a,t)}).catch(a=>{Qi(a,e,0)});e.asyncDep=o}else zc(e,o,t)}else Rf(e,t)}function zc(e,t,n){Re(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ve(t)&&(e.setupState=af(t)),Rf(e,n)}let Vc;function Rf(e,t,n){const r=e.type;if(!e.render){if(!t&&Vc&&!r.render){const s=r.template||Va(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=dt(dt({isCustomElement:i,delimiters:a},o),c);r.render=Vc(s,l)}}e.render=r.render||Kt}{const s=Gs(e);nr();try{Rm(e)}finally{rr(),s()}}}const ip={get(e,t){return jt(e,"get",""),e[t]}};function op(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ip),slots:e.slots,emit:e.emit,expose:t}}function so(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(af(Wd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ps)return ps[n](e)},has(t,n){return n in t||n in ps}}))}function ap(e,t=!0){return Re(e)?e.displayName||e.name:e.name||t&&e.__name}function cp(e){return Re(e)&&"__vccOpts"in e}const We=(e,t)=>Gd(e,t,ro);function io(e,t,n){const r=arguments.length;return r===2?Ve(t)&&!Ie(t)?Oi(t)?ze(e,null,[t]):ze(e,t):ze(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oi(n)&&(n=[n]),ze(e,t,n))}const lp="3.4.26";/**
* @vue/runtime-dom v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const up="http://www.w3.org/2000/svg",fp="http://www.w3.org/1998/Math/MathML",Wn=typeof document<"u"?document:null,Wc=Wn&&Wn.createElement("template"),hp={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Wn.createElementNS(up,e):t==="mathml"?Wn.createElementNS(fp,e):Wn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Wn.createTextNode(e),createComment:e=>Wn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Wn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Wc.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Wc.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},dp=Symbol("_vtc");function mp(e,t,n){const r=e[dp];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ii=Symbol("_vod"),Mf=Symbol("_vsh"),wE={beforeMount(e,{value:t},{transition:n}){e[Ii]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):rs(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),rs(e,!0),r.enter(e)):r.leave(e,()=>{rs(e,!1)}):rs(e,t))},beforeUnmount(e,{value:t}){rs(e,t)}};function rs(e,t){e.style.display=t?e[Ii]:"none",e[Mf]=!t}const pp=Symbol(""),gp=/(^|;)\s*display\s*:/;function _p(e,t,n){const r=e.style,s=at(n);let i=!1;if(n&&!s){if(t)if(at(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&gi(r,a,"")}else for(const o in t)n[o]==null&&gi(r,o,"");for(const o in n)o==="display"&&(i=!0),gi(r,o,n[o])}else if(s){if(t!==n){const o=r[pp];o&&(n+=";"+o),r.cssText=n,i=gp.test(n)}}else t&&e.removeAttribute("style");Ii in e&&(e[Ii]=i?r.display:"",e[Mf]&&(r.display="none"))}const Gc=/\s*!important$/;function gi(e,t,n){if(Ie(n))n.forEach(r=>gi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=bp(e,t);Gc.test(n)?e.setProperty(vr(r),n.replace(Gc,""),"important"):e[r]=n}}const Kc=["Webkit","Moz","ms"],ko={};function bp(e,t){const n=ko[t];if(n)return n;let r=vn(t);if(r!=="filter"&&r in e)return ko[t]=r;r=Gi(r);for(let s=0;s<Kc.length;s++){const i=Kc[s]+r;if(i in e)return ko[t]=i}return t}const Jc="http://www.w3.org/1999/xlink";function yp(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Jc,t.slice(6,t.length)):e.setAttributeNS(Jc,t,n);else{const i=xd(t);n==null||i&&!Bu(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function xp(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Bu(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function pr(e,t,n,r){e.addEventListener(t,n,r)}function wp(e,t,n,r){e.removeEventListener(t,n,r)}const Yc=Symbol("_vei");function Ep(e,t,n,r,s=null){const i=e[Yc]||(e[Yc]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=vp(t);if(r){const l=i[t]=Cp(r,s);pr(e,a,l,c)}else o&&(wp(e,a,o,c),i[t]=void 0)}}const Xc=/(?:Once|Passive|Capture)$/;function vp(e){let t;if(Xc.test(e)){t={};let r;for(;r=e.match(Xc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):vr(e.slice(2)),t]}let Co=0;const Sp=Promise.resolve(),kp=()=>Co||(Sp.then(()=>Co=0),Co=Date.now());function Cp(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;fn(Op(r,n.value),t,5,[r])};return n.value=e,n.attached=kp(),n}function Op(e,t){if(Ie(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Qc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ap=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?mp(e,r,l):t==="style"?_p(e,n,r):zi(t)?Aa(t)||Ep(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ip(e,t,r,l))?xp(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),yp(e,t,r,l))};function Ip(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qc(t)&&Re(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Qc(t)&&at(n)?!1:t in e}const Pi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ie(t)?n=>hi(t,n):t};function Pp(e){e.target.composing=!0}function Zc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const jr=Symbol("_assign"),EE={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[jr]=Pi(s);const i=r||s.props&&s.props.type==="number";pr(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Ei(a)),e[jr](a)}),n&&pr(e,"change",()=>{e.value=e.value.trim()}),t||(pr(e,"compositionstart",Pp),pr(e,"compositionend",Zc),pr(e,"change",Zc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[jr]=Pi(i),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?Ei(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},vE={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Vi(t);pr(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Ei(Ti(o)):Ti(o));e[jr](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Yr(()=>{e._assigning=!1})}),e[jr]=Pi(r)},mounted(e,{value:t,modifiers:{number:n}}){el(e,t)},beforeUpdate(e,t,n){e[jr]=Pi(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||el(e,t)}};function el(e,t,n){const r=e.multiple,s=Ie(t);if(!(r&&!s&&!Vi(t))){for(let i=0,o=e.options.length;i<o;i++){const a=e.options[i],c=Ti(a);if(r)if(s){const l=typeof c;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(c)):a.selected=Ed(t,c)>-1}else a.selected=t.has(c);else if(Ki(Ti(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ti(e){return"_value"in e?e._value:e.value}const Tp=["ctrl","shift","alt","meta"],Np={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Tp.some(n=>e[`${n}Key`]&&!t.includes(n))},SE=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=Np[t[o]];if(a&&a(s,t))return}return e(s,...i)})},Rp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},kE=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=vr(s.key);if(t.some(o=>o===i||Rp[o]===i))return e(s)})},Mp=dt({patchProp:Ap},hp);let tl;function Lp(){return tl||(tl=Vm(Mp))}const Fp=(...e)=>{const t=Lp().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=$p(r);if(!s)return;const i=t._component;!Re(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,jp(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function jp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $p(e){return at(e)?document.querySelector(e):e}function Ja(e){return zu()?(kd(e),!0):!1}function oo(e){return typeof e=="function"?e():Ze(e)}const Dp=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Up=Object.prototype.toString,Bp=e=>Up.call(e)==="[object Object]",Lf=()=>{};function qp(e,t){function n(...r){return new Promise((s,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(i)})}return n}const Ff=e=>e();function Hp(e=Ff){const t=Ct(!0);function n(){t.value=!1}function r(){t.value=!0}const s=(...i)=>{t.value&&e(...i)};return{isActive:Xi(t),pause:n,resume:r,eventFilter:s}}function zp(e){return Ws()}function Vp(...e){if(e.length!==1)return em(...e);const t=e[0];return typeof t=="function"?Xi(Xd(()=>({get:t,set:Lf}))):Ct(t)}function Wp(e,t,n={}){const{eventFilter:r=Ff,...s}=n;return Lt(e,qp(r,t),s)}function Gp(e,t,n={}){const{eventFilter:r,...s}=n,{eventFilter:i,pause:o,resume:a,isActive:c}=Hp(r);return{stop:Wp(e,t,{...s,eventFilter:i}),pause:o,resume:a,isActive:c}}function Ya(e,t=!0,n){zp()?zs(e,n):t?e():Yr(e)}function Kn(e){var t;const n=oo(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Er=Dp?window:void 0;function nl(...e){let t,n,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,s]=e,t=Er):[t,n,r,s]=e,!t)return Lf;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,f,h,d)=>(u.addEventListener(f,h,d),()=>u.removeEventListener(f,h,d)),c=Lt(()=>[Kn(t),oo(s)],([u,f])=>{if(o(),!u)return;const h=Bp(f)?{...f}:f;i.push(...n.flatMap(d=>r.map(E=>a(u,d,E,h))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return Ja(l),l}function Kp(){const e=Ct(!1),t=Ws();return t&&zs(()=>{e.value=!0},t),e}function jf(e){const t=Kp();return We(()=>(t.value,!!e()))}function Jp(e,t={}){const{window:n=Er}=t,r=jf(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const i=Ct(!1),o=l=>{i.value=l.matches},a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},c=ym(()=>{r.value&&(a(),s=n.matchMedia(oo(e)),"addEventListener"in s?s.addEventListener("change",o):s.addListener(o),i.value=s.matches)});return Ja(()=>{c(),a(),s=void 0}),i}const ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},si="__vueuse_ssr_handlers__",Yp=Xp();function Xp(){return si in ri||(ri[si]=ri[si]||{}),ri[si]}function $f(e,t){return Yp[e]||t}function Qp(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Zp={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},rl="vueuse-storage";function Ns(e,t,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:f=Er,eventFilter:h,onError:d=ae=>{console.error(ae)},initOnMounted:E}=r,P=(u?Ua:Ct)(typeof t=="function"?t():t);if(!n)try{n=$f("getDefaultStorage",()=>{var ae;return(ae=Er)==null?void 0:ae.localStorage})()}catch(ae){d(ae)}if(!n)return P;const L=oo(t),I=Qp(L),N=(s=r.serializer)!=null?s:Zp[I],{pause:O,resume:M}=Gp(P,()=>k(P.value),{flush:i,deep:o,eventFilter:h});f&&a&&Ya(()=>{nl(f,"storage",X),nl(f,rl,Q),E&&X()}),E||X();function U(ae,se){f&&f.dispatchEvent(new CustomEvent(rl,{detail:{key:e,oldValue:ae,newValue:se,storageArea:n}}))}function k(ae){try{const se=n.getItem(e);if(ae==null)U(se,null),n.removeItem(e);else{const Z=N.write(ae);se!==Z&&(n.setItem(e,Z),U(se,Z))}}catch(se){d(se)}}function V(ae){const se=ae?ae.newValue:n.getItem(e);if(se==null)return c&&L!=null&&n.setItem(e,N.write(L)),L;if(!ae&&l){const Z=N.read(se);return typeof l=="function"?l(Z,L):I==="object"&&!Array.isArray(Z)?{...L,...Z}:Z}else return typeof se!="string"?se:N.read(se)}function X(ae){if(!(ae&&ae.storageArea!==n)){if(ae&&ae.key==null){P.value=L;return}if(!(ae&&ae.key!==e)){O();try{(ae==null?void 0:ae.newValue)!==N.write(P.value)&&(P.value=V(ae))}catch(se){d(se)}finally{ae?Yr(M):M()}}}}function Q(ae){X(ae.detail)}return P}function eg(e){return Jp("(prefers-color-scheme: dark)",e)}function tg(e={}){const{selector:t="html",attribute:n="class",initialValue:r="auto",window:s=Er,storage:i,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:c,emitAuto:l,disableTransition:u=!0}=e,f={auto:"",light:"light",dark:"dark",...e.modes||{}},h=eg({window:s}),d=We(()=>h.value?"dark":"light"),E=c||(o==null?Vp(r):Ns(o,r,i,{window:s,listenToStorageChanges:a})),P=We(()=>E.value==="auto"?d.value:E.value),L=$f("updateHTMLAttrs",(M,U,k)=>{const V=typeof M=="string"?s==null?void 0:s.document.querySelector(M):Kn(M);if(!V)return;let X;if(u&&(X=s.document.createElement("style"),X.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),s.document.head.appendChild(X)),U==="class"){const Q=k.split(/\s/g);Object.values(f).flatMap(ae=>(ae||"").split(/\s/g)).filter(Boolean).forEach(ae=>{Q.includes(ae)?V.classList.add(ae):V.classList.remove(ae)})}else V.setAttribute(U,k);u&&(s.getComputedStyle(X).opacity,document.head.removeChild(X))});function I(M){var U;L(t,n,(U=f[M])!=null?U:M)}function N(M){e.onChanged?e.onChanged(M,I):I(M)}Lt(P,N,{flush:"post",immediate:!0}),Ya(()=>N(P.value));const O=We({get(){return l?E.value:P.value},set(M){E.value=M}});try{return Object.assign(O,{store:E,system:d,state:P})}catch{return O}}function ng(e,t,n={}){const{window:r=Er,...s}=n;let i;const o=jf(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},c=We(()=>Array.isArray(e)?e.map(f=>Kn(f)):[Kn(e)]),l=Lt(c,f=>{if(a(),o.value&&r){i=new ResizeObserver(t);for(const h of f)h&&i.observe(h,s)}},{immediate:!0,flush:"post"}),u=()=>{a(),l()};return Ja(u),{isSupported:o,stop:u}}function CE(e,t={width:0,height:0},n={}){const{window:r=Er,box:s="content-box"}=n,i=We(()=>{var f,h;return(h=(f=Kn(e))==null?void 0:f.namespaceURI)==null?void 0:h.includes("svg")}),o=Ct(t.width),a=Ct(t.height),{stop:c}=ng(e,([f])=>{const h=s==="border-box"?f.borderBoxSize:s==="content-box"?f.contentBoxSize:f.devicePixelContentBoxSize;if(r&&i.value){const d=Kn(e);if(d){const E=r.getComputedStyle(d);o.value=Number.parseFloat(E.width),a.value=Number.parseFloat(E.height)}}else if(h){const d=Array.isArray(h)?h:[h];o.value=d.reduce((E,{inlineSize:P})=>E+P,0),a.value=d.reduce((E,{blockSize:P})=>E+P,0)}else o.value=f.contentRect.width,a.value=f.contentRect.height},n);Ya(()=>{const f=Kn(e);f&&(o.value="offsetWidth"in f?f.offsetWidth:t.width,a.value="offsetHeight"in f?f.offsetHeight:t.height)});const l=Lt(()=>Kn(e),f=>{o.value=f?t.width:0,a.value=f?t.height:0});function u(){c(),l()}return{width:o,height:a,stop:u}}const sl=document.createElement("i");function Df(e){const t="&"+e+";";sl.innerHTML=t;const n=sl.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ln(e,t,n,r){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function vt(e,t){return e.length>0?(Ln(e,e.length,0,t),e):t}const ea={}.hasOwnProperty;function rg(e){const t={};let n=-1;for(;++n<e.length;)sg(t,e[n]);return t}function sg(e,t){let n;for(n in t){const s=(ea.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){ea.call(s,o)||(s[o]=[]);const a=i[o];ig(s[o],Array.isArray(a)?a:a?[a]:[])}}}function ig(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ln(e,0,0,r)}function og(e){const t={};let n=-1;for(;++n<e.length;)ag(t,e[n]);return t}function ag(e,t){let n;for(n in t){const s=(ea.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i)s[o]=i[o]}}function cg(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const lg={'"':"quot","&":"amp","<":"lt",">":"gt"};function Uf(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+lg[n]+";"}}function Rs(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bn=sr(/[A-Za-z]/),qt=sr(/[\dA-Za-z]/),ug=sr(/[#-'*+\--9=?A-Z^-~]/);function ta(e){return e!==null&&(e<32||e===127)}const na=sr(/\d/),fg=sr(/[\dA-Fa-f]/),hg=sr(/[!-/:-@[-`{-~]/);function Pe(e){return e!==null&&e<-2}function Ft(e){return e!==null&&(e<0||e===32)}function De(e){return e===-2||e===-1||e===32}const dg=sr(new RegExp("\\p{P}|\\p{S}","u")),mg=sr(/\s/);function sr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ii(e,t){const n=Uf(pg(e||""));if(!t)return n;const r=n.indexOf(":"),s=n.indexOf("?"),i=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||s>-1&&r>s||i>-1&&r>i||t.test(n.slice(0,r))?n:""}function pg(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&qt(e.charCodeAt(n+1))&&qt(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=e.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}const il={}.hasOwnProperty,ol=/^(https?|ircs?|mailto|xmpp)$/i,gg=/^https?$/i;function _g(e){const t=e||{};let n=!0;const r={},s=[[]],i=[],o=[],c=og([{enter:{blockQuote:Oe,codeFenced:qe,codeFencedFenceInfo:L,codeFencedFenceMeta:L,codeIndented:oe,codeText:ct,content:_,definition:S,definitionDestinationString:W,definitionLabelString:L,definitionTitleString:L,emphasis:_t,htmlFlow:Je,htmlText:Qt,image:me,label:L,link:Ee,listItemMarker:se,listItemValue:ae,listOrdered:X,listUnordered:Q,paragraph:ve,reference:L,resource:B,resourceDestinationString:ee,resourceTitleString:L,setextHeading:T,strong:kn},exit:{atxHeading:ie,atxHeadingSequence:x,autolinkEmail:Ys,autolinkProtocol:ts,blockQuote:Te,characterEscapeValue:q,characterReferenceMarkerHexadecimal:ar,characterReferenceMarkerNumeric:ar,characterReferenceValue:es,codeFenced:v,codeFencedFence:A,codeFencedFenceInfo:m,codeFencedFenceMeta:V,codeFlowValue:ke,codeIndented:v,codeText:bt,codeTextData:q,data:q,definition:ce,definitionDestinationString:z,definitionLabelString:D,definitionTitleString:ne,emphasis:$n,hardBreakEscape:Me,hardBreakTrailing:Me,htmlFlow:rt,htmlFlowData:q,htmlText:rt,htmlTextData:q,image:y,label:F,labelText:fe,lineEnding:_e,link:y,listOrdered:Z,listUnordered:we,paragraph:Ce,reference:V,referenceString:K,resource:V,resourceDestinationString:pe,resourceTitleString:Se,setextHeading:j,setextHeadingLineSequence:te,setextHeadingText:G,strong:Or,thematicBreak:Zr}}].concat(t.htmlExtensions||[])),l={tightStack:o,definitions:r},u={lineEndingIfNeeded:U,options:t,encode:k,raw:O,tag:N,buffer:L,resume:I,setData:E,getData:P};let f=t.defaultLineEnding;return h;function h(le){let xe=-1,lt=0;const yt=[];let xt=[],wt=[];for(;++xe<le.length;)!f&&(le[xe][1].type==="lineEnding"||le[xe][1].type==="lineEndingBlank")&&(f=le[xe][2].sliceSerialize(le[xe][1])),(le[xe][1].type==="listOrdered"||le[xe][1].type==="listUnordered")&&(le[xe][0]==="enter"?yt.push(xe):d(le.slice(yt.pop(),xe))),le[xe][1].type==="definition"&&(le[xe][0]==="enter"?(wt=vt(wt,le.slice(lt,xe)),lt=xe):(xt=vt(xt,le.slice(lt,xe+1)),lt=xe+1));xt=vt(xt,wt),xt=vt(xt,le.slice(lt)),xe=-1;const Et=xt;for(c.enter.null&&c.enter.null.call(u);++xe<le.length;){const cr=c[Et[xe][0]],Dn=Et[xe][1].type,Un=cr[Dn];il.call(cr,Dn)&&Un&&Un.call(Object.assign({sliceSerialize:Et[xe][2].sliceSerialize},u),Et[xe][1])}return c.exit.null&&c.exit.null.call(u),s[0].join("")}function d(le){const xe=le.length;let lt=0,yt=0,xt=!1,wt;for(;++lt<xe;){const Et=le[lt];if(Et[1]._container)wt=void 0,Et[0]==="enter"?yt++:yt--;else switch(Et[1].type){case"listItemPrefix":{Et[0]==="exit"&&(wt=!0);break}case"linePrefix":break;case"lineEndingBlank":{Et[0]==="enter"&&!yt&&(wt?wt=void 0:xt=!0);break}default:wt=void 0}}le[0][1]._loose=xt}function E(le,xe){l[le]=xe}function P(le){return l[le]}function L(){s.push([])}function I(){return s.pop().join("")}function N(le){n&&(E("lastWasTag",!0),s[s.length-1].push(le))}function O(le){E("lastWasTag"),s[s.length-1].push(le)}function M(){O(f||`
`)}function U(){const le=s[s.length-1],xe=le[le.length-1],lt=xe?xe.charCodeAt(xe.length-1):null;lt===10||lt===13||lt===null||M()}function k(le){return P("ignoreEncode")?le:Uf(le)}function V(){I()}function X(le){o.push(!le._loose),U(),N("<ol"),E("expectFirstItem",!0)}function Q(le){o.push(!le._loose),U(),N("<ul"),E("expectFirstItem",!0)}function ae(le){if(P("expectFirstItem")){const xe=Number.parseInt(this.sliceSerialize(le),10);xe!==1&&N(' start="'+k(String(xe))+'"')}}function se(){P("expectFirstItem")?N(">"):Ne(),U(),N("<li>"),E("expectFirstItem"),E("lastWasTag")}function Z(){Ne(),o.pop(),M(),N("</ol>")}function we(){Ne(),o.pop(),M(),N("</ul>")}function Ne(){P("lastWasTag")&&!P("slurpAllLineEndings")&&U(),N("</li>"),E("slurpAllLineEndings")}function Oe(){o.push(!1),U(),N("<blockquote>")}function Te(){o.pop(),U(),N("</blockquote>"),E("slurpAllLineEndings")}function ve(){o[o.length-1]||(U(),N("<p>")),E("slurpAllLineEndings")}function Ce(){o[o.length-1]?E("slurpAllLineEndings",!0):N("</p>")}function qe(){U(),N("<pre><code"),E("fencesCount",0)}function m(){const le=I();N(' class="language-'+le+'"')}function A(){const le=P("fencesCount")||0;le||(N(">"),E("slurpOneLineEnding",!0)),E("fencesCount",le+1)}function oe(){U(),N("<pre><code>")}function v(){const le=P("fencesCount");le!==void 0&&le<2&&l.tightStack.length>0&&!P("lastWasTag")&&M(),P("flowCodeSeenData")&&U(),N("</code></pre>"),le!==void 0&&le<2&&U(),E("flowCodeSeenData"),E("fencesCount"),E("slurpOneLineEnding")}function me(){i.push({image:!0}),n=void 0}function Ee(){i.push({})}function fe(le){i[i.length-1].labelId=this.sliceSerialize(le)}function F(){i[i.length-1].label=I()}function K(le){i[i.length-1].referenceId=this.sliceSerialize(le)}function B(){L(),i[i.length-1].destination=""}function ee(){L(),E("ignoreEncode",!0)}function pe(){i[i.length-1].destination=I(),E("ignoreEncode")}function Se(){i[i.length-1].title=I()}function y(){let le=i.length-1;const xe=i[le],lt=xe.referenceId||xe.labelId,yt=xe.destination===void 0?r[Rs(lt)]:xe;for(n=!0;le--;)if(i[le].image){n=void 0;break}xe.image?(N('<img src="'+ii(yt.destination,t.allowDangerousProtocol?void 0:gg)+'" alt="'),O(xe.label),N('"')):N('<a href="'+ii(yt.destination,t.allowDangerousProtocol?void 0:ol)+'"'),N(yt.title?' title="'+yt.title+'"':""),xe.image?N(" />"):(N(">"),O(xe.label),N("</a>")),i.pop()}function S(){L(),i.push({})}function D(le){I(),i[i.length-1].labelId=this.sliceSerialize(le)}function W(){L(),E("ignoreEncode",!0)}function z(){i[i.length-1].destination=I(),E("ignoreEncode")}function ne(){i[i.length-1].title=I()}function ce(){const le=i[i.length-1],xe=Rs(le.labelId);I(),il.call(r,xe)||(r[xe]=i[i.length-1]),i.pop()}function _(){E("slurpAllLineEndings",!0)}function x(le){P("headingRank")||(E("headingRank",this.sliceSerialize(le).length),U(),N("<h"+P("headingRank")+">"))}function T(){L(),E("slurpAllLineEndings")}function G(){E("slurpAllLineEndings",!0)}function ie(){N("</h"+P("headingRank")+">"),E("headingRank")}function te(le){E("headingRank",this.sliceSerialize(le).charCodeAt(0)===61?1:2)}function j(){const le=I();U(),N("<h"+P("headingRank")+">"),O(le),N("</h"+P("headingRank")+">"),E("slurpAllLineEndings"),E("headingRank")}function q(le){O(k(this.sliceSerialize(le)))}function _e(le){if(!P("slurpAllLineEndings")){if(P("slurpOneLineEnding")){E("slurpOneLineEnding");return}if(P("inCodeText")){O(" ");return}O(k(this.sliceSerialize(le)))}}function ke(le){O(k(this.sliceSerialize(le))),E("flowCodeSeenData",!0)}function Me(){N("<br />")}function Je(){U(),Qt()}function rt(){E("ignoreEncode")}function Qt(){t.allowDangerousHtml&&E("ignoreEncode",!0)}function _t(){N("<em>")}function kn(){N("<strong>")}function ct(){E("inCodeText",!0),N("<code>")}function bt(){E("inCodeText"),N("</code>")}function $n(){N("</em>")}function Or(){N("</strong>")}function Zr(){U(),N("<hr />")}function ar(le){E("characterReferenceType",le.type)}function es(le){let xe=this.sliceSerialize(le);xe=P("characterReferenceType")?cg(xe,P("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):Df(xe),O(k(xe)),E("characterReferenceType")}function ts(le){const xe=this.sliceSerialize(le);N('<a href="'+ii(xe,t.allowDangerousProtocol?void 0:ol)+'">'),O(k(xe)),N("</a>")}function Ys(le){const xe=this.sliceSerialize(le);N('<a href="'+ii("mailto:"+xe)+'">'),O(k(xe)),N("</a>")}}function Ge(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return De(c)?(e.enter(n),a(c)):t(c)}function a(c){return De(c)&&i++<s?(e.consume(c),a):(e.exit(n),t(c))}}const bg={tokenize:yg};function yg(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ge(e,t,"linePrefix")}function s(a){return e.enter("paragraph"),i(a)}function i(a){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Pe(a)?(e.consume(a),e.exit("chunkText"),i):(e.consume(a),o)}}const xg={tokenize:wg},al={tokenize:Eg};function wg(e){const t=this,n=[];let r=0,s,i,o;return a;function a(O){if(r<n.length){const M=n[r];return t.containerState=M[1],e.attempt(M[0].continuation,c,l)(O)}return l(O)}function c(O){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&N();const M=t.events.length;let U=M,k;for(;U--;)if(t.events[U][0]==="exit"&&t.events[U][1].type==="chunkFlow"){k=t.events[U][1].end;break}I(r);let V=M;for(;V<t.events.length;)t.events[V][1].end=Object.assign({},k),V++;return Ln(t.events,U+1,0,t.events.slice(M)),t.events.length=V,l(O)}return a(O)}function l(O){if(r===n.length){if(!s)return h(O);if(s.currentConstruct&&s.currentConstruct.concrete)return E(O);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(al,u,f)(O)}function u(O){return s&&N(),I(r),h(O)}function f(O){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,E(O)}function h(O){return t.containerState={},e.attempt(al,d,E)(O)}function d(O){return r++,n.push([t.currentConstruct,t.containerState]),h(O)}function E(O){if(O===null){s&&N(),I(0),e.consume(O);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:s}),P(O)}function P(O){if(O===null){L(e.exit("chunkFlow"),!0),I(0),e.consume(O);return}return Pe(O)?(e.consume(O),L(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(O),P)}function L(O,M){const U=t.sliceStream(O);if(M&&U.push(null),O.previous=i,i&&(i.next=O),i=O,s.defineSkip(O.start),s.write(U),t.parser.lazy[O.start.line]){let k=s.events.length;for(;k--;)if(s.events[k][1].start.offset<o&&(!s.events[k][1].end||s.events[k][1].end.offset>o))return;const V=t.events.length;let X=V,Q,ae;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){if(Q){ae=t.events[X][1].end;break}Q=!0}for(I(r),k=V;k<t.events.length;)t.events[k][1].end=Object.assign({},ae),k++;Ln(t.events,X+1,0,t.events.slice(V)),t.events.length=k}}function I(O){let M=n.length;for(;M-- >O;){const U=n[M];t.containerState=U[1],U[0].exit.call(t,e)}n.length=O}function N(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Eg(e,t,n){return Ge(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cl(e){if(e===null||Ft(e)||mg(e))return 1;if(dg(e))return 2}function Xa(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const ra={name:"attention",tokenize:Sg,resolveAll:vg};function vg(e,t){let n=-1,r,s,i,o,a,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),h=Object.assign({},e[n][1].start);ll(f,-c),ll(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:h},i={type:c>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s={type:c>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=vt(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=vt(l,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=vt(l,Xa(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=vt(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=vt(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,Ln(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Sg(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=cl(r);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),a(c)}function a(c){if(c===i)return e.consume(c),a;const l=e.exit("attentionSequence"),u=cl(c),f=!u||u===2&&s||n.includes(c),h=!s||s===2&&u||n.includes(r);return l._open=!!(i===42?f:f&&(s||!h)),l._close=!!(i===42?h:h&&(u||!f)),t(c)}}function ll(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const kg={name:"autolink",tokenize:Cg};function Cg(e,t,n){let r=0;return s;function s(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(d){return bn(d)?(e.consume(d),o):d===64?n(d):l(d)}function o(d){return d===43||d===45||d===46||qt(d)?(r=1,a(d)):l(d)}function a(d){return d===58?(e.consume(d),r=0,c):(d===43||d===45||d===46||qt(d))&&r++<32?(e.consume(d),a):(r=0,l(d))}function c(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||ta(d)?n(d):(e.consume(d),c)}function l(d){return d===64?(e.consume(d),u):ug(d)?(e.consume(d),l):n(d)}function u(d){return qt(d)?f(d):n(d)}function f(d){return d===46?(e.consume(d),r=0,u):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):h(d)}function h(d){if((d===45||qt(d))&&r++<63){const E=d===45?h:f;return e.consume(d),E}return n(d)}}const ao={tokenize:Og,partial:!0};function Og(e,t,n){return r;function r(i){return De(i)?Ge(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||Pe(i)?t(i):n(i)}}const Bf={name:"blockQuote",tokenize:Ag,continuation:{tokenize:Ig},exit:Pg};function Ag(e,t,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return De(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Ig(e,t,n){const r=this;return s;function s(o){return De(o)?Ge(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(Bf,t,n)(o)}}function Pg(e){e.exit("blockQuote")}const qf={name:"characterEscape",tokenize:Tg};function Tg(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return hg(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const Hf={name:"characterReference",tokenize:Ng};function Ng(e,t,n){const r=this;let s=0,i,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=qt,u(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=fg,u):(e.enter("characterReferenceValue"),i=7,o=na,u(f))}function u(f){if(f===59&&s){const h=e.exit("characterReferenceValue");return o===qt&&!Df(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&s++<i?(e.consume(f),u):n(f)}}const ul={tokenize:Mg,partial:!0},fl={name:"codeFenced",tokenize:Rg,concrete:!0};function Rg(e,t,n){const r=this,s={tokenize:U,partial:!0};let i=0,o=0,a;return c;function c(k){return l(k)}function l(k){const V=r.events[r.events.length-1];return i=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,a=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(k)}function u(k){return k===a?(o++,e.consume(k),u):o<3?n(k):(e.exit("codeFencedFenceSequence"),De(k)?Ge(e,f,"whitespace")(k):f(k))}function f(k){return k===null||Pe(k)?(e.exit("codeFencedFence"),r.interrupt?t(k):e.check(ul,P,M)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===null||Pe(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(k)):De(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ge(e,d,"whitespace")(k)):k===96&&k===a?n(k):(e.consume(k),h)}function d(k){return k===null||Pe(k)?f(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),E(k))}function E(k){return k===null||Pe(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(k)):k===96&&k===a?n(k):(e.consume(k),E)}function P(k){return e.attempt(s,M,L)(k)}function L(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),I}function I(k){return i>0&&De(k)?Ge(e,N,"linePrefix",i+1)(k):N(k)}function N(k){return k===null||Pe(k)?e.check(ul,P,M)(k):(e.enter("codeFlowValue"),O(k))}function O(k){return k===null||Pe(k)?(e.exit("codeFlowValue"),N(k)):(e.consume(k),O)}function M(k){return e.exit("codeFenced"),t(k)}function U(k,V,X){let Q=0;return ae;function ae(Oe){return k.enter("lineEnding"),k.consume(Oe),k.exit("lineEnding"),se}function se(Oe){return k.enter("codeFencedFence"),De(Oe)?Ge(k,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Oe):Z(Oe)}function Z(Oe){return Oe===a?(k.enter("codeFencedFenceSequence"),we(Oe)):X(Oe)}function we(Oe){return Oe===a?(Q++,k.consume(Oe),we):Q>=o?(k.exit("codeFencedFenceSequence"),De(Oe)?Ge(k,Ne,"whitespace")(Oe):Ne(Oe)):X(Oe)}function Ne(Oe){return Oe===null||Pe(Oe)?(k.exit("codeFencedFence"),V(Oe)):X(Oe)}}}function Mg(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Oo={name:"codeIndented",tokenize:Fg},Lg={tokenize:jg,partial:!0};function Fg(e,t,n){const r=this;return s;function s(l){return e.enter("codeIndented"),Ge(e,i,"linePrefix",5)(l)}function i(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?c(l):Pe(l)?e.attempt(Lg,o,c)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Pe(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function c(l){return e.exit("codeIndented"),t(l)}}function jg(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Pe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ge(e,i,"linePrefix",5)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Pe(o)?s(o):n(o)}}const $g={name:"codeText",tokenize:Bg,resolve:Dg,previous:Ug};function Dg(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function Ug(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Bg(e,t,n){let r=0,s,i;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(i=e.enter("codeTextSequence"),s=0,u(f)):Pe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Pe(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),l)}function u(f){return f===96?(e.consume(f),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",l(f))}}class qg{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ss(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ss(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ss(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ss(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ss(this.left,n.reverse())}}}function ss(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function zf(e){const t={};let n=-1,r,s,i,o,a,c,l;const u=new qg(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Hg(u,n)),n=t[n],l=!0);else if(r[1]._container){for(i=n,s=void 0;i--&&(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);s&&(r[1].end=Object.assign({},u.get(s)[1].start),a=u.slice(s,n),a.unshift(r),u.splice(s,n-s+1,a))}}return Ln(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function Hg(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,c=[],l={};let u,f,h=-1,d=n,E=0,P=0;const L=[P];for(;d;){for(;e.get(++s)[1]!==d;);i.push(s),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),f&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=d,d=d.next}for(d=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(P=h+1,L.push(P),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):L.pop(),h=L.length;h--;){const I=a.slice(L[h],L[h+1]),N=i.pop();c.push([N,N+I.length-1]),e.splice(N,2,I)}for(c.reverse(),h=-1;++h<c.length;)l[E+c[h][0]]=E+c[h][1],E+=c[h][1]-c[h][0]-1;return l}const zg={tokenize:Gg,resolve:Wg},Vg={tokenize:Kg,partial:!0};function Wg(e){return zf(e),e}function Gg(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Pe(a)?e.check(Vg,o,i)(a):(e.consume(a),s)}function i(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Kg(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ge(e,i,"linePrefix")}function i(o){if(o===null||Pe(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Vf(e,t,n,r,s,i,o,a,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return f;function f(I){return I===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(I),e.exit(i),h):I===null||I===32||I===41||ta(I)?n(I):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),P(I))}function h(I){return I===62?(e.enter(i),e.consume(I),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),d(I))}function d(I){return I===62?(e.exit("chunkString"),e.exit(a),h(I)):I===null||I===60||Pe(I)?n(I):(e.consume(I),I===92?E:d)}function E(I){return I===60||I===62||I===92?(e.consume(I),d):d(I)}function P(I){return!u&&(I===null||I===41||Ft(I))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(I)):u<l&&I===40?(e.consume(I),u++,P):I===41?(e.consume(I),u--,P):I===null||I===32||I===40||ta(I)?n(I):(e.consume(I),I===92?L:P)}function L(I){return I===40||I===41||I===92?(e.consume(I),P):P(I)}}function Wf(e,t,n,r,s,i){const o=this;let a=0,c;return l;function l(d){return e.enter(r),e.enter(s),e.consume(d),e.exit(s),e.enter(i),u}function u(d){return a>999||d===null||d===91||d===93&&!c||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(e.exit(i),e.enter(s),e.consume(d),e.exit(s),e.exit(r),t):Pe(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(d))}function f(d){return d===null||d===91||d===93||Pe(d)||a++>999?(e.exit("chunkString"),u(d)):(e.consume(d),c||(c=!De(d)),d===92?h:f)}function h(d){return d===91||d===92||d===93?(e.consume(d),a++,f):f(d)}}function Gf(e,t,n,r,s,i){let o;return a;function a(h){return h===34||h===39||h===40?(e.enter(r),e.enter(s),e.consume(h),e.exit(s),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):(e.enter(i),l(h))}function l(h){return h===o?(e.exit(i),c(o)):h===null?n(h):Pe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Ge(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||Pe(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?f:u)}function f(h){return h===o||h===92?(e.consume(h),u):u(h)}}function bs(e,t){let n;return r;function r(s){return Pe(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):De(s)?Ge(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const Jg={name:"definition",tokenize:Xg},Yg={tokenize:Qg,partial:!0};function Xg(e,t,n){const r=this;let s;return i;function i(d){return e.enter("definition"),o(d)}function o(d){return Wf.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return s=Rs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),c):n(d)}function c(d){return Ft(d)?bs(e,l)(d):l(d)}function l(d){return Vf(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return e.attempt(Yg,f,f)(d)}function f(d){return De(d)?Ge(e,h,"whitespace")(d):h(d)}function h(d){return d===null||Pe(d)?(e.exit("definition"),r.parser.defined.push(s),t(d)):n(d)}}function Qg(e,t,n){return r;function r(a){return Ft(a)?bs(e,s)(a):n(a)}function s(a){return Gf(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return De(a)?Ge(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Pe(a)?t(a):n(a)}}const Zg={name:"hardBreakEscape",tokenize:e_};function e_(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return Pe(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const t_={name:"headingAtx",tokenize:r_,resolve:n_};function n_(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ln(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function r_(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||Ft(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||Pe(u)?(e.exit("atxHeading"),t(u)):De(u)?Ge(e,a,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),a(u))}function l(u){return u===null||u===35||Ft(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),l)}}const s_=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hl=["pre","script","style","textarea"],i_={name:"htmlFlow",tokenize:l_,resolveTo:c_,concrete:!0},o_={tokenize:f_,partial:!0},a_={tokenize:u_,partial:!0};function c_(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function l_(e,t,n){const r=this;let s,i,o,a,c;return l;function l(v){return u(v)}function u(v){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(v),f}function f(v){return v===33?(e.consume(v),h):v===47?(e.consume(v),i=!0,P):v===63?(e.consume(v),s=3,r.interrupt?t:m):bn(v)?(e.consume(v),o=String.fromCharCode(v),L):n(v)}function h(v){return v===45?(e.consume(v),s=2,d):v===91?(e.consume(v),s=5,a=0,E):bn(v)?(e.consume(v),s=4,r.interrupt?t:m):n(v)}function d(v){return v===45?(e.consume(v),r.interrupt?t:m):n(v)}function E(v){const me="CDATA[";return v===me.charCodeAt(a++)?(e.consume(v),a===me.length?r.interrupt?t:Z:E):n(v)}function P(v){return bn(v)?(e.consume(v),o=String.fromCharCode(v),L):n(v)}function L(v){if(v===null||v===47||v===62||Ft(v)){const me=v===47,Ee=o.toLowerCase();return!me&&!i&&hl.includes(Ee)?(s=1,r.interrupt?t(v):Z(v)):s_.includes(o.toLowerCase())?(s=6,me?(e.consume(v),I):r.interrupt?t(v):Z(v)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(v):i?N(v):O(v))}return v===45||qt(v)?(e.consume(v),o+=String.fromCharCode(v),L):n(v)}function I(v){return v===62?(e.consume(v),r.interrupt?t:Z):n(v)}function N(v){return De(v)?(e.consume(v),N):ae(v)}function O(v){return v===47?(e.consume(v),ae):v===58||v===95||bn(v)?(e.consume(v),M):De(v)?(e.consume(v),O):ae(v)}function M(v){return v===45||v===46||v===58||v===95||qt(v)?(e.consume(v),M):U(v)}function U(v){return v===61?(e.consume(v),k):De(v)?(e.consume(v),U):O(v)}function k(v){return v===null||v===60||v===61||v===62||v===96?n(v):v===34||v===39?(e.consume(v),c=v,V):De(v)?(e.consume(v),k):X(v)}function V(v){return v===c?(e.consume(v),c=null,Q):v===null||Pe(v)?n(v):(e.consume(v),V)}function X(v){return v===null||v===34||v===39||v===47||v===60||v===61||v===62||v===96||Ft(v)?U(v):(e.consume(v),X)}function Q(v){return v===47||v===62||De(v)?O(v):n(v)}function ae(v){return v===62?(e.consume(v),se):n(v)}function se(v){return v===null||Pe(v)?Z(v):De(v)?(e.consume(v),se):n(v)}function Z(v){return v===45&&s===2?(e.consume(v),Te):v===60&&s===1?(e.consume(v),ve):v===62&&s===4?(e.consume(v),A):v===63&&s===3?(e.consume(v),m):v===93&&s===5?(e.consume(v),qe):Pe(v)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(o_,oe,we)(v)):v===null||Pe(v)?(e.exit("htmlFlowData"),we(v)):(e.consume(v),Z)}function we(v){return e.check(a_,Ne,oe)(v)}function Ne(v){return e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),Oe}function Oe(v){return v===null||Pe(v)?we(v):(e.enter("htmlFlowData"),Z(v))}function Te(v){return v===45?(e.consume(v),m):Z(v)}function ve(v){return v===47?(e.consume(v),o="",Ce):Z(v)}function Ce(v){if(v===62){const me=o.toLowerCase();return hl.includes(me)?(e.consume(v),A):Z(v)}return bn(v)&&o.length<8?(e.consume(v),o+=String.fromCharCode(v),Ce):Z(v)}function qe(v){return v===93?(e.consume(v),m):Z(v)}function m(v){return v===62?(e.consume(v),A):v===45&&s===2?(e.consume(v),m):Z(v)}function A(v){return v===null||Pe(v)?(e.exit("htmlFlowData"),oe(v)):(e.consume(v),A)}function oe(v){return e.exit("htmlFlow"),t(v)}}function u_(e,t,n){const r=this;return s;function s(o){return Pe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function f_(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(ao,t,n)}}const h_={name:"htmlText",tokenize:d_};function d_(e,t,n){const r=this;let s,i,o;return a;function a(m){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(m),c}function c(m){return m===33?(e.consume(m),l):m===47?(e.consume(m),U):m===63?(e.consume(m),O):bn(m)?(e.consume(m),X):n(m)}function l(m){return m===45?(e.consume(m),u):m===91?(e.consume(m),i=0,E):bn(m)?(e.consume(m),N):n(m)}function u(m){return m===45?(e.consume(m),d):n(m)}function f(m){return m===null?n(m):m===45?(e.consume(m),h):Pe(m)?(o=f,ve(m)):(e.consume(m),f)}function h(m){return m===45?(e.consume(m),d):f(m)}function d(m){return m===62?Te(m):m===45?h(m):f(m)}function E(m){const A="CDATA[";return m===A.charCodeAt(i++)?(e.consume(m),i===A.length?P:E):n(m)}function P(m){return m===null?n(m):m===93?(e.consume(m),L):Pe(m)?(o=P,ve(m)):(e.consume(m),P)}function L(m){return m===93?(e.consume(m),I):P(m)}function I(m){return m===62?Te(m):m===93?(e.consume(m),I):P(m)}function N(m){return m===null||m===62?Te(m):Pe(m)?(o=N,ve(m)):(e.consume(m),N)}function O(m){return m===null?n(m):m===63?(e.consume(m),M):Pe(m)?(o=O,ve(m)):(e.consume(m),O)}function M(m){return m===62?Te(m):O(m)}function U(m){return bn(m)?(e.consume(m),k):n(m)}function k(m){return m===45||qt(m)?(e.consume(m),k):V(m)}function V(m){return Pe(m)?(o=V,ve(m)):De(m)?(e.consume(m),V):Te(m)}function X(m){return m===45||qt(m)?(e.consume(m),X):m===47||m===62||Ft(m)?Q(m):n(m)}function Q(m){return m===47?(e.consume(m),Te):m===58||m===95||bn(m)?(e.consume(m),ae):Pe(m)?(o=Q,ve(m)):De(m)?(e.consume(m),Q):Te(m)}function ae(m){return m===45||m===46||m===58||m===95||qt(m)?(e.consume(m),ae):se(m)}function se(m){return m===61?(e.consume(m),Z):Pe(m)?(o=se,ve(m)):De(m)?(e.consume(m),se):Q(m)}function Z(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),s=m,we):Pe(m)?(o=Z,ve(m)):De(m)?(e.consume(m),Z):(e.consume(m),Ne)}function we(m){return m===s?(e.consume(m),s=void 0,Oe):m===null?n(m):Pe(m)?(o=we,ve(m)):(e.consume(m),we)}function Ne(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||Ft(m)?Q(m):(e.consume(m),Ne)}function Oe(m){return m===47||m===62||Ft(m)?Q(m):n(m)}function Te(m){return m===62?(e.consume(m),e.exit("htmlTextData"),e.exit("htmlText"),t):n(m)}function ve(m){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Ce}function Ce(m){return De(m)?Ge(e,qe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):qe(m)}function qe(m){return e.enter("htmlTextData"),o(m)}}const Qa={name:"labelEnd",tokenize:y_,resolveTo:b_,resolveAll:__},m_={tokenize:x_},p_={tokenize:w_},g_={tokenize:E_};function __(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function b_(e,t){let n=e.length,r=0,s,i,o,a;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[o][1].end)},u={type:"labelText",start:Object.assign({},e[i+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",c,t],["enter",l,t]],a=vt(a,e.slice(i+1,i+r+3)),a=vt(a,[["enter",u,t]]),a=vt(a,Xa(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),a=vt(a,[["exit",u,t],e[o-2],e[o-1],["exit",l,t]]),a=vt(a,e.slice(o+1)),a=vt(a,[["exit",c,t]]),Ln(e,i,e.length,a),e}function y_(e,t,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(h){return i?i._inactive?f(h):(o=r.parser.defined.includes(Rs(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(m_,u,o?u:f)(h):h===91?e.attempt(p_,u,o?l:f)(h):o?u(h):f(h)}function l(h){return e.attempt(g_,u,f)(h)}function u(h){return t(h)}function f(h){return i._balanced=!0,n(h)}}function x_(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return Ft(f)?bs(e,i)(f):i(f)}function i(f){return f===41?u(f):Vf(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Ft(f)?bs(e,c)(f):u(f)}function a(f){return n(f)}function c(f){return f===34||f===39||f===40?Gf(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function l(f){return Ft(f)?bs(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function w_(e,t,n){const r=this;return s;function s(a){return Wf.call(r,e,i,o,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Rs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function E_(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const v_={name:"labelStartImage",tokenize:S_,resolveAll:Qa.resolveAll};function S_(e,t,n){const r=this;return s;function s(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),i}function i(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const k_={name:"labelStartLink",tokenize:C_,resolveAll:Qa.resolveAll};function C_(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Ao={name:"lineEnding",tokenize:O_};function O_(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ge(e,t,"linePrefix")}}const _i={name:"thematicBreak",tokenize:A_};function A_(e,t,n){let r=0,s;return i;function i(l){return e.enter("thematicBreak"),o(l)}function o(l){return s=l,a(l)}function a(l){return l===s?(e.enter("thematicBreakSequence"),c(l)):r>=3&&(l===null||Pe(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===s?(e.consume(l),r++,c):(e.exit("thematicBreakSequence"),De(l)?Ge(e,a,"whitespace")(l):a(l))}}const Rt={name:"list",tokenize:T_,continuation:{tokenize:N_},exit:M_},I_={tokenize:L_,partial:!0},P_={tokenize:R_,partial:!0};function T_(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(d){const E=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:na(d)){if(r.containerState.type||(r.containerState.type=E,e.enter(E,{_container:!0})),E==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(_i,n,l)(d):l(d);if(!r.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(d)}return n(d)}function c(d){return na(d)&&++o<10?(e.consume(d),c):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),l(d)):n(d)}function l(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,e.check(ao,r.interrupt?n:u,e.attempt(I_,h,f))}function u(d){return r.containerState.initialBlankLine=!0,i++,h(d)}function f(d){return De(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),h):n(d)}function h(d){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function N_(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ao,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ge(e,t,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!De(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(P_,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ge(e,e.attempt(Rt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function R_(e,t,n){const r=this;return Ge(e,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function M_(e){e.exit(this.containerState.type)}function L_(e,t,n){const r=this;return Ge(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!De(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const dl={name:"setextUnderline",tokenize:j_,resolveTo:F_};function F_(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[i][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function j_(e,t,n){const r=this;let s;return i;function i(l){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),s=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===s?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),De(l)?Ge(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||Pe(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const $_={tokenize:D_};function D_(e){const t=this,n=e.attempt(ao,r,e.attempt(this.parser.constructs.flowInitial,s,Ge(e,e.attempt(this.parser.constructs.flow,s,e.attempt(zg,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const U_={resolveAll:Jf()},B_=Kf("string"),q_=Kf("text");function Kf(e){return{tokenize:t,resolveAll:Jf(e==="text"?H_:void 0)};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,o,a);return o;function o(u){return l(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),i(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const f=s[u];let h=-1;if(f)for(;++h<f.length;){const d=f[h];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function Jf(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function H_(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,o=-1,a=0,c;for(;i--;){const l=s[i];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)c=!0,a++;else if(l!==-1){i++;break}}if(a){const l={type:n===e.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+i,_bufferIndex:i?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function z_(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let o=[],a=[];const c={consume:N,enter:O,exit:M,attempt:V(U),check:V(k),interrupt:V(k,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:h,now:E,defineSkip:P,write:f};let u=t.tokenize.call(l,c);return t.resolveAll&&i.push(t),l;function f(se){return o=vt(o,se),L(),o[o.length-1]!==null?[]:(X(t,0),l.events=Xa(i,l.events,l),l.events)}function h(se,Z){return W_(d(se),Z)}function d(se){return V_(o,se)}function E(){const{line:se,column:Z,offset:we,_index:Ne,_bufferIndex:Oe}=r;return{line:se,column:Z,offset:we,_index:Ne,_bufferIndex:Oe}}function P(se){s[se.line]=se.column,ae()}function L(){let se;for(;r._index<o.length;){const Z=o[r._index];if(typeof Z=="string")for(se=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===se&&r._bufferIndex<Z.length;)I(Z.charCodeAt(r._bufferIndex));else I(Z)}}function I(se){u=u(se)}function N(se){Pe(se)?(r.line++,r.column=1,r.offset+=se===-3?2:1,ae()):se!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=se}function O(se,Z){const we=Z||{};return we.type=se,we.start=E(),l.events.push(["enter",we,l]),a.push(we),we}function M(se){const Z=a.pop();return Z.end=E(),l.events.push(["exit",Z,l]),Z}function U(se,Z){X(se,Z.from)}function k(se,Z){Z.restore()}function V(se,Z){return we;function we(Ne,Oe,Te){let ve,Ce,qe,m;return Array.isArray(Ne)?oe(Ne):"tokenize"in Ne?oe([Ne]):A(Ne);function A(fe){return F;function F(K){const B=K!==null&&fe[K],ee=K!==null&&fe.null,pe=[...Array.isArray(B)?B:B?[B]:[],...Array.isArray(ee)?ee:ee?[ee]:[]];return oe(pe)(K)}}function oe(fe){return ve=fe,Ce=0,fe.length===0?Te:v(fe[Ce])}function v(fe){return F;function F(K){return m=Q(),qe=fe,fe.partial||(l.currentConstruct=fe),fe.name&&l.parser.constructs.disable.null.includes(fe.name)?Ee():fe.tokenize.call(Z?Object.assign(Object.create(l),Z):l,c,me,Ee)(K)}}function me(fe){return se(qe,m),Oe}function Ee(fe){return m.restore(),++Ce<ve.length?v(ve[Ce]):Te}}}function X(se,Z){se.resolveAll&&!i.includes(se)&&i.push(se),se.resolve&&Ln(l.events,Z,l.events.length-Z,se.resolve(l.events.slice(Z),l)),se.resolveTo&&(l.events=se.resolveTo(l.events,l))}function Q(){const se=E(),Z=l.previous,we=l.currentConstruct,Ne=l.events.length,Oe=Array.from(a);return{restore:Te,from:Ne};function Te(){r=se,l.previous=Z,l.currentConstruct=we,l.events.length=Ne,a=Oe,ae()}}function ae(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function V_(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,i)];else{if(o=e.slice(n,s),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function W_(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}const G_={42:Rt,43:Rt,45:Rt,48:Rt,49:Rt,50:Rt,51:Rt,52:Rt,53:Rt,54:Rt,55:Rt,56:Rt,57:Rt,62:Bf},K_={91:Jg},J_={[-2]:Oo,[-1]:Oo,32:Oo},Y_={35:t_,42:_i,45:[dl,_i],60:i_,61:dl,95:_i,96:fl,126:fl},X_={38:Hf,92:qf},Q_={[-5]:Ao,[-4]:Ao,[-3]:Ao,33:v_,38:Hf,42:ra,60:[kg,h_],91:k_,92:[Zg,qf],93:Qa,95:ra,96:$g},Z_={null:[ra,U_]},e0={null:[42,95]},t0={null:[]},n0=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:e0,contentInitial:K_,disable:t0,document:G_,flow:Y_,flowInitial:J_,insideSpan:Z_,string:X_,text:Q_},Symbol.toStringTag,{value:"Module"}));function r0(e){const n=rg([n0,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:s(bg),document:s(xg),flow:s($_),string:s(B_),text:s(q_)};return r;function s(i){return o;function o(a){return z_(r,i,a)}}}function s0(e){for(;!zf(e););return e}const ml=/[\0\t\n\r]/g;function i0(){let e=1,t="",n=!0,r;return s;function s(i,o,a){const c=[];let l,u,f,h,d;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),f=0,t="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(ml.lastIndex=f,l=ml.exec(i),h=l&&l.index!==void 0?l.index:i.length,d=i.charCodeAt(h),!l){t=i.slice(f);break}if(d===10&&f===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<h&&(c.push(i.slice(f,h)),e+=h-f),d){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return a&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}function o0(e,t,n){return typeof t!="string"&&(n=t,t=void 0),_g(n)(s0(r0(n).document().write(i0()(e,t,!0))))}/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Ni=typeof window<"u",ir=(e,t=!1)=>t?Symbol.for(e):Symbol(e),a0=(e,t,n)=>c0({l:e,k:t,s:n}),c0=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ft=e=>typeof e=="number"&&isFinite(e),l0=e=>Xf(e)==="[object Date]",Ri=e=>Xf(e)==="[object RegExp]",co=e=>Fe(e)&&Object.keys(e).length===0,kt=Object.assign;let pl;const Za=()=>pl||(pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gl(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const u0=Object.prototype.hasOwnProperty;function Mi(e,t){return u0.call(e,t)}const ot=Array.isArray,nt=e=>typeof e=="function",ye=e=>typeof e=="string",et=e=>typeof e=="boolean",Be=e=>e!==null&&typeof e=="object",f0=e=>Be(e)&&nt(e.then)&&nt(e.catch),Yf=Object.prototype.toString,Xf=e=>Yf.call(e),Fe=e=>{if(!Be(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},h0=e=>e==null?"":ot(e)||Fe(e)&&e.toString===Yf?JSON.stringify(e,null,2):String(e);function d0(e,t=""){return e.reduce((n,r,s)=>s===0?n+r:n+t+r,"")}function lo(e){let t=e;return()=>++t}function m0(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const oi=e=>!Be(e)||ot(e);function bi(e,t){if(oi(e)||oi(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{oi(r[i])||oi(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function p0(e,t,n){return{line:e,column:t,offset:n}}function Li(e,t,n){return{start:e,end:t}}const g0=/\{([0-9a-zA-Z]+)\}/g;function Qf(e,...t){return t.length===1&&_0(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(g0,(n,r)=>t.hasOwnProperty(r)?t[r]:"")}const Zf=Object.assign,_l=e=>typeof e=="string",_0=e=>e!==null&&typeof e=="object";function eh(e,t=""){return e.reduce((n,r,s)=>s===0?n+r:n+t+r,"")}const ec={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},b0={[ec.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function y0(e,t,...n){const r=Qf(b0[e],...n||[]),s={message:String(r),code:e};return t&&(s.location=t),s}const Ae={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},x0={[Ae.EXPECTED_TOKEN]:"Expected token: '{0}'",[Ae.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Ae.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Ae.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Ae.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Ae.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Ae.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Ae.EMPTY_PLACEHOLDER]:"Empty placeholder",[Ae.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Ae.INVALID_LINKED_FORMAT]:"Invalid linked format",[Ae.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Ae.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Ae.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Ae.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Ae.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Ae.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Xr(e,t,n={}){const{domain:r,messages:s,args:i}=n,o=Qf((s||x0)[e]||"",...i||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=r,a}function w0(e){throw e}const On=" ",E0="\r",At=`
`,v0="\u2028",S0="\u2029";function k0(e){const t=e;let n=0,r=1,s=1,i=0;const o=V=>t[V]===E0&&t[V+1]===At,a=V=>t[V]===At,c=V=>t[V]===S0,l=V=>t[V]===v0,u=V=>o(V)||a(V)||c(V)||l(V),f=()=>n,h=()=>r,d=()=>s,E=()=>i,P=V=>o(V)||c(V)||l(V)?At:t[V],L=()=>P(n),I=()=>P(n+i);function N(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,t[n]}function O(){return o(n+i)&&i++,i++,t[n+i]}function M(){n=0,r=1,s=1,i=0}function U(V=0){i=V}function k(){const V=n+i;for(;V!==n;)N();i=0}return{index:f,line:h,column:d,peekOffset:E,charAt:P,currentChar:L,currentPeek:I,next:N,peek:O,reset:M,resetPeek:U,skipToPeek:k}}const qn=void 0,C0=".",bl="'",O0="tokenizer";function A0(e,t={}){const n=t.location!==!1,r=k0(e),s=()=>r.index(),i=()=>p0(r.line(),r.column(),r.index()),o=i(),a=s(),c={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:u}=t;function f(_,x,T,...G){const ie=l();if(x.column+=T,x.offset+=T,u){const te=n?Li(ie.startLoc,x):null,j=Xr(_,te,{domain:O0,args:G});u(j)}}function h(_,x,T){_.endLoc=i(),_.currentType=x;const G={type:x};return n&&(G.loc=Li(_.startLoc,_.endLoc)),T!=null&&(G.value=T),G}const d=_=>h(_,14);function E(_,x){return _.currentChar()===x?(_.next(),x):(f(Ae.EXPECTED_TOKEN,i(),0,x),"")}function P(_){let x="";for(;_.currentPeek()===On||_.currentPeek()===At;)x+=_.currentPeek(),_.peek();return x}function L(_){const x=P(_);return _.skipToPeek(),x}function I(_){if(_===qn)return!1;const x=_.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x===95}function N(_){if(_===qn)return!1;const x=_.charCodeAt(0);return x>=48&&x<=57}function O(_,x){const{currentType:T}=x;if(T!==2)return!1;P(_);const G=I(_.currentPeek());return _.resetPeek(),G}function M(_,x){const{currentType:T}=x;if(T!==2)return!1;P(_);const G=_.currentPeek()==="-"?_.peek():_.currentPeek(),ie=N(G);return _.resetPeek(),ie}function U(_,x){const{currentType:T}=x;if(T!==2)return!1;P(_);const G=_.currentPeek()===bl;return _.resetPeek(),G}function k(_,x){const{currentType:T}=x;if(T!==8)return!1;P(_);const G=_.currentPeek()===".";return _.resetPeek(),G}function V(_,x){const{currentType:T}=x;if(T!==9)return!1;P(_);const G=I(_.currentPeek());return _.resetPeek(),G}function X(_,x){const{currentType:T}=x;if(!(T===8||T===12))return!1;P(_);const G=_.currentPeek()===":";return _.resetPeek(),G}function Q(_,x){const{currentType:T}=x;if(T!==10)return!1;const G=()=>{const te=_.currentPeek();return te==="{"?I(_.peek()):te==="@"||te==="%"||te==="|"||te===":"||te==="."||te===On||!te?!1:te===At?(_.peek(),G()):Z(_,!1)},ie=G();return _.resetPeek(),ie}function ae(_){P(_);const x=_.currentPeek()==="|";return _.resetPeek(),x}function se(_){const x=P(_),T=_.currentPeek()==="%"&&_.peek()==="{";return _.resetPeek(),{isModulo:T,hasSpace:x.length>0}}function Z(_,x=!0){const T=(ie=!1,te="",j=!1)=>{const q=_.currentPeek();return q==="{"?te==="%"?!1:ie:q==="@"||!q?te==="%"?!0:ie:q==="%"?(_.peek(),T(ie,"%",!0)):q==="|"?te==="%"||j?!0:!(te===On||te===At):q===On?(_.peek(),T(!0,On,j)):q===At?(_.peek(),T(!0,At,j)):!0},G=T();return x&&_.resetPeek(),G}function we(_,x){const T=_.currentChar();return T===qn?qn:x(T)?(_.next(),T):null}function Ne(_){const x=_.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36}function Oe(_){return we(_,Ne)}function Te(_){const x=_.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36||x===45}function ve(_){return we(_,Te)}function Ce(_){const x=_.charCodeAt(0);return x>=48&&x<=57}function qe(_){return we(_,Ce)}function m(_){const x=_.charCodeAt(0);return x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102}function A(_){return we(_,m)}function oe(_){let x="",T="";for(;x=qe(_);)T+=x;return T}function v(_){L(_);const x=_.currentChar();return x!=="%"&&f(Ae.EXPECTED_TOKEN,i(),0,x),_.next(),"%"}function me(_){let x="";for(;;){const T=_.currentChar();if(T==="{"||T==="}"||T==="@"||T==="|"||!T)break;if(T==="%")if(Z(_))x+=T,_.next();else break;else if(T===On||T===At)if(Z(_))x+=T,_.next();else{if(ae(_))break;x+=T,_.next()}else x+=T,_.next()}return x}function Ee(_){L(_);let x="",T="";for(;x=ve(_);)T+=x;return _.currentChar()===qn&&f(Ae.UNTERMINATED_CLOSING_BRACE,i(),0),T}function fe(_){L(_);let x="";return _.currentChar()==="-"?(_.next(),x+=`-${oe(_)}`):x+=oe(_),_.currentChar()===qn&&f(Ae.UNTERMINATED_CLOSING_BRACE,i(),0),x}function F(_){return _!==bl&&_!==At}function K(_){L(_),E(_,"'");let x="",T="";for(;x=we(_,F);)x==="\\"?T+=B(_):T+=x;const G=_.currentChar();return G===At||G===qn?(f(Ae.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),G===At&&(_.next(),E(_,"'")),T):(E(_,"'"),T)}function B(_){const x=_.currentChar();switch(x){case"\\":case"'":return _.next(),`\\${x}`;case"u":return ee(_,x,4);case"U":return ee(_,x,6);default:return f(Ae.UNKNOWN_ESCAPE_SEQUENCE,i(),0,x),""}}function ee(_,x,T){E(_,x);let G="";for(let ie=0;ie<T;ie++){const te=A(_);if(!te){f(Ae.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${x}${G}${_.currentChar()}`);break}G+=te}return`\\${x}${G}`}function pe(_){return _!=="{"&&_!=="}"&&_!==On&&_!==At}function Se(_){L(_);let x="",T="";for(;x=we(_,pe);)T+=x;return T}function y(_){let x="",T="";for(;x=Oe(_);)T+=x;return T}function S(_){const x=T=>{const G=_.currentChar();return G==="{"||G==="%"||G==="@"||G==="|"||G==="("||G===")"||!G||G===On?T:(T+=G,_.next(),x(T))};return x("")}function D(_){L(_);const x=E(_,"|");return L(_),x}function W(_,x){let T=null;switch(_.currentChar()){case"{":return x.braceNest>=1&&f(Ae.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),_.next(),T=h(x,2,"{"),L(_),x.braceNest++,T;case"}":return x.braceNest>0&&x.currentType===2&&f(Ae.EMPTY_PLACEHOLDER,i(),0),_.next(),T=h(x,3,"}"),x.braceNest--,x.braceNest>0&&L(_),x.inLinked&&x.braceNest===0&&(x.inLinked=!1),T;case"@":return x.braceNest>0&&f(Ae.UNTERMINATED_CLOSING_BRACE,i(),0),T=z(_,x)||d(x),x.braceNest=0,T;default:{let ie=!0,te=!0,j=!0;if(ae(_))return x.braceNest>0&&f(Ae.UNTERMINATED_CLOSING_BRACE,i(),0),T=h(x,1,D(_)),x.braceNest=0,x.inLinked=!1,T;if(x.braceNest>0&&(x.currentType===5||x.currentType===6||x.currentType===7))return f(Ae.UNTERMINATED_CLOSING_BRACE,i(),0),x.braceNest=0,ne(_,x);if(ie=O(_,x))return T=h(x,5,Ee(_)),L(_),T;if(te=M(_,x))return T=h(x,6,fe(_)),L(_),T;if(j=U(_,x))return T=h(x,7,K(_)),L(_),T;if(!ie&&!te&&!j)return T=h(x,13,Se(_)),f(Ae.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,T.value),L(_),T;break}}return T}function z(_,x){const{currentType:T}=x;let G=null;const ie=_.currentChar();switch((T===8||T===9||T===12||T===10)&&(ie===At||ie===On)&&f(Ae.INVALID_LINKED_FORMAT,i(),0),ie){case"@":return _.next(),G=h(x,8,"@"),x.inLinked=!0,G;case".":return L(_),_.next(),h(x,9,".");case":":return L(_),_.next(),h(x,10,":");default:return ae(_)?(G=h(x,1,D(_)),x.braceNest=0,x.inLinked=!1,G):k(_,x)||X(_,x)?(L(_),z(_,x)):V(_,x)?(L(_),h(x,12,y(_))):Q(_,x)?(L(_),ie==="{"?W(_,x)||G:h(x,11,S(_))):(T===8&&f(Ae.INVALID_LINKED_FORMAT,i(),0),x.braceNest=0,x.inLinked=!1,ne(_,x))}}function ne(_,x){let T={type:14};if(x.braceNest>0)return W(_,x)||d(x);if(x.inLinked)return z(_,x)||d(x);switch(_.currentChar()){case"{":return W(_,x)||d(x);case"}":return f(Ae.UNBALANCED_CLOSING_BRACE,i(),0),_.next(),h(x,3,"}");case"@":return z(_,x)||d(x);default:{if(ae(_))return T=h(x,1,D(_)),x.braceNest=0,x.inLinked=!1,T;const{isModulo:ie,hasSpace:te}=se(_);if(ie)return te?h(x,0,me(_)):h(x,4,v(_));if(Z(_))return h(x,0,me(_));break}}return T}function ce(){const{currentType:_,offset:x,startLoc:T,endLoc:G}=c;return c.lastType=_,c.lastOffset=x,c.lastStartLoc=T,c.lastEndLoc=G,c.offset=s(),c.startLoc=i(),r.currentChar()===qn?h(c,14):ne(r,c)}return{nextToken:ce,currentOffset:s,currentPosition:i,context:l}}const I0="parser",P0=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function T0(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(t||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function N0(e={}){const t=e.location!==!1,{onError:n,onWarn:r}=e;function s(O,M,U,k,...V){const X=O.currentPosition();if(X.offset+=k,X.column+=k,n){const Q=t?Li(U,X):null,ae=Xr(M,Q,{domain:I0,args:V});n(ae)}}function i(O,M,U,k,...V){const X=O.currentPosition();if(X.offset+=k,X.column+=k,r){const Q=t?Li(U,X):null;r(y0(M,Q,V))}}function o(O,M,U){const k={type:O};return t&&(k.start=M,k.end=M,k.loc={start:U,end:U}),k}function a(O,M,U,k){t&&(O.end=M,O.loc&&(O.loc.end=U))}function c(O,M){const U=O.context(),k=o(3,U.offset,U.startLoc);return k.value=M,a(k,O.currentOffset(),O.currentPosition()),k}function l(O,M){const U=O.context(),{lastOffset:k,lastStartLoc:V}=U,X=o(5,k,V);return X.index=parseInt(M,10),O.nextToken(),a(X,O.currentOffset(),O.currentPosition()),X}function u(O,M,U){const k=O.context(),{lastOffset:V,lastStartLoc:X}=k,Q=o(4,V,X);return Q.key=M,U===!0&&(Q.modulo=!0),O.nextToken(),a(Q,O.currentOffset(),O.currentPosition()),Q}function f(O,M){const U=O.context(),{lastOffset:k,lastStartLoc:V}=U,X=o(9,k,V);return X.value=M.replace(P0,T0),O.nextToken(),a(X,O.currentOffset(),O.currentPosition()),X}function h(O){const M=O.nextToken(),U=O.context(),{lastOffset:k,lastStartLoc:V}=U,X=o(8,k,V);return M.type!==12?(s(O,Ae.UNEXPECTED_EMPTY_LINKED_MODIFIER,U.lastStartLoc,0),X.value="",a(X,k,V),{nextConsumeToken:M,node:X}):(M.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,U.lastStartLoc,0,en(M)),X.value=M.value||"",a(X,O.currentOffset(),O.currentPosition()),{node:X})}function d(O,M){const U=O.context(),k=o(7,U.offset,U.startLoc);return k.value=M,a(k,O.currentOffset(),O.currentPosition()),k}function E(O){const M=O.context(),U=o(6,M.offset,M.startLoc);let k=O.nextToken();if(k.type===9){const V=h(O);U.modifier=V.node,k=V.nextConsumeToken||O.nextToken()}switch(k.type!==10&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(k)),k=O.nextToken(),k.type===2&&(k=O.nextToken()),k.type){case 11:k.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(k)),U.key=d(O,k.value||"");break;case 5:k.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(k)),U.key=u(O,k.value||"");break;case 6:k.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(k)),U.key=l(O,k.value||"");break;case 7:k.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(k)),U.key=f(O,k.value||"");break;default:{s(O,Ae.UNEXPECTED_EMPTY_LINKED_KEY,M.lastStartLoc,0);const V=O.context(),X=o(7,V.offset,V.startLoc);return X.value="",a(X,V.offset,V.startLoc),U.key=X,a(U,V.offset,V.startLoc),{nextConsumeToken:k,node:U}}}return a(U,O.currentOffset(),O.currentPosition()),{node:U}}function P(O){const M=O.context(),U=M.currentType===1?O.currentOffset():M.offset,k=M.currentType===1?M.endLoc:M.startLoc,V=o(2,U,k);V.items=[];let X=null,Q=null;do{const Z=X||O.nextToken();switch(X=null,Z.type){case 0:Z.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(Z)),V.items.push(c(O,Z.value||""));break;case 6:Z.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(Z)),V.items.push(l(O,Z.value||""));break;case 4:Q=!0;break;case 5:Z.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(Z)),V.items.push(u(O,Z.value||"",!!Q)),Q&&(i(O,ec.USE_MODULO_SYNTAX,M.lastStartLoc,0,en(Z)),Q=null);break;case 7:Z.value==null&&s(O,Ae.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,en(Z)),V.items.push(f(O,Z.value||""));break;case 8:{const we=E(O);V.items.push(we.node),X=we.nextConsumeToken||null;break}}}while(M.currentType!==14&&M.currentType!==1);const ae=M.currentType===1?M.lastOffset:O.currentOffset(),se=M.currentType===1?M.lastEndLoc:O.currentPosition();return a(V,ae,se),V}function L(O,M,U,k){const V=O.context();let X=k.items.length===0;const Q=o(1,M,U);Q.cases=[],Q.cases.push(k);do{const ae=P(O);X||(X=ae.items.length===0),Q.cases.push(ae)}while(V.currentType!==14);return X&&s(O,Ae.MUST_HAVE_MESSAGES_IN_PLURAL,U,0),a(Q,O.currentOffset(),O.currentPosition()),Q}function I(O){const M=O.context(),{offset:U,startLoc:k}=M,V=P(O);return M.currentType===14?V:L(O,U,k,V)}function N(O){const M=A0(O,Zf({},e)),U=M.context(),k=o(0,U.offset,U.startLoc);return t&&k.loc&&(k.loc.source=O),k.body=I(M),e.onCacheKey&&(k.cacheKey=e.onCacheKey(O)),U.currentType!==14&&s(M,Ae.UNEXPECTED_LEXICAL_ANALYSIS,U.lastStartLoc,0,O[U.offset]||""),a(k,M.currentOffset(),M.currentPosition()),k}return{parse:N}}function en(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function R0(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function yl(e,t){for(let n=0;n<e.length;n++)tc(e[n],t)}function tc(e,t){switch(e.type){case 1:yl(e.cases,t),t.helper("plural");break;case 2:yl(e.items,t);break;case 6:{tc(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function M0(e,t={}){const n=R0(e);n.helper("normalize"),e.body&&tc(e.body,n);const r=n.context();e.helpers=Array.from(r.helpers)}function L0(e){const t=e.body;return t.type===2?xl(t):t.cases.forEach(n=>xl(n)),e}function xl(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const r=e.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;t.push(r.value)}if(t.length===e.items.length){e.static=eh(t);for(let n=0;n<e.items.length;n++){const r=e.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const F0="minifier";function Tr(e){switch(e.t=e.type,e.type){case 0:{const t=e;Tr(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let r=0;r<n.length;r++)Tr(n[r]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let r=0;r<n.length;r++)Tr(n[r]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;Tr(t.key),t.k=t.key,delete t.key,t.modifier&&(Tr(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw Xr(Ae.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:F0,args:[e.type]})}delete e.type}const j0="parser";function $0(e,t){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=t,o=t.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&e.loc&&(a.source=e.loc.source);const c=()=>a;function l(L,I){a.code+=L}function u(L,I=!0){const N=I?s:"";l(i?N+"  ".repeat(L):N)}function f(L=!0){const I=++a.indentLevel;L&&u(I)}function h(L=!0){const I=--a.indentLevel;L&&u(I)}function d(){u(a.indentLevel)}return{context:c,push:l,indent:f,deindent:h,newline:d,helper:L=>`_${L}`,needIndent:()=>a.needIndent}}function D0(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Hr(e,t.key),t.modifier?(e.push(", "),Hr(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function U0(e,t){const{helper:n,needIndent:r}=e;e.push(`${n("normalize")}([`),e.indent(r());const s=t.items.length;for(let i=0;i<s&&(Hr(e,t.items[i]),i!==s-1);i++)e.push(", ");e.deindent(r()),e.push("])")}function B0(e,t){const{helper:n,needIndent:r}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(r());const s=t.cases.length;for(let i=0;i<s&&(Hr(e,t.cases[i]),i!==s-1);i++)e.push(", ");e.deindent(r()),e.push("])")}}function q0(e,t){t.body?Hr(e,t.body):e.push("null")}function Hr(e,t){const{helper:n}=e;switch(t.type){case 0:q0(e,t);break;case 1:B0(e,t);break;case 2:U0(e,t);break;case 6:D0(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw Xr(Ae.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:j0,args:[t.type]})}}const H0=(e,t={})=>{const n=_l(t.mode)?t.mode:"normal",r=_l(t.filename)?t.filename:"message.intl",s=!!t.sourceMap,i=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,o=t.needIndent?t.needIndent:n!=="arrow",a=e.helpers||[],c=$0(e,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});c.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(o),a.length>0&&(c.push(`const { ${eh(a.map(f=>`${f}: _${f}`),", ")} } = ctx`),c.newline()),c.push("return "),Hr(c,e),c.deindent(o),c.push("}"),delete e.helpers;const{code:l,map:u}=c.context();return{ast:e,code:l,map:u?u.toJSON():void 0}};function z0(e,t={}){const n=Zf({},t),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=N0(n).parse(e);return r?(i&&L0(a),s&&Tr(a),{ast:a,code:""}):(M0(a,n),H0(a,n))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function V0(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Za().__INTLIFY_PROD_DEVTOOLS__=!1)}const or=[];or[0]={w:[0],i:[3,0],"[":[4],o:[7]};or[1]={w:[1],".":[2],"[":[4],o:[7]};or[2]={w:[2],i:[3,0],0:[3,0]};or[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};or[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};or[5]={"'":[4,0],o:8,l:[5,0]};or[6]={'"':[4,0],o:8,l:[6,0]};const W0=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function G0(e){return W0.test(e)}function K0(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function J0(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Y0(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:G0(t)?K0(t):"*"+t}function X0(e){const t=[];let n=-1,r=0,s=0,i,o,a,c,l,u,f;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,r=4,h[0]();else{if(s=0,o===void 0||(o=Y0(o),o===!1))return!1;h[1]()}};function d(){const E=e[n+1];if(r===5&&E==="'"||r===6&&E==='"')return n++,a="\\"+E,h[0](),!0}for(;r!==null;)if(n++,i=e[n],!(i==="\\"&&d())){if(c=J0(i),f=or[r],l=f[c]||f.l||8,l===8||(r=l[0],l[1]!==void 0&&(u=h[l[1]],u&&(a=i,u()===!1))))return;if(r===7)return t}}const wl=new Map;function Q0(e,t){return Be(e)?e[t]:null}function Z0(e,t){if(!Be(e))return null;let n=wl.get(t);if(n||(n=X0(t),n&&wl.set(t,n)),!n)return null;const r=n.length;let s=e,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||nt(s))return null;s=o,i++}return s}const eb=e=>e,tb=e=>"",nb="text",rb=e=>e.length===0?"":d0(e),sb=h0;function El(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function ib(e){const t=ft(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(ft(e.named.count)||ft(e.named.n))?ft(e.named.count)?e.named.count:ft(e.named.n)?e.named.n:t:t}function ob(e,t){t.count||(t.count=e),t.n||(t.n=e)}function ab(e={}){const t=e.locale,n=ib(e),r=Be(e.pluralRules)&&ye(t)&&nt(e.pluralRules[t])?e.pluralRules[t]:El,s=Be(e.pluralRules)&&ye(t)&&nt(e.pluralRules[t])?El:void 0,i=I=>I[r(n,I.length,s)],o=e.list||[],a=I=>o[I],c=e.named||{};ft(e.pluralIndex)&&ob(n,c);const l=I=>c[I];function u(I){const N=nt(e.messages)?e.messages(I):Be(e.messages)?e.messages[I]:!1;return N||(e.parent?e.parent.message(I):tb)}const f=I=>e.modifiers?e.modifiers[I]:eb,h=Fe(e.processor)&&nt(e.processor.normalize)?e.processor.normalize:rb,d=Fe(e.processor)&&nt(e.processor.interpolate)?e.processor.interpolate:sb,E=Fe(e.processor)&&ye(e.processor.type)?e.processor.type:nb,L={list:a,named:l,plural:i,linked:(I,...N)=>{const[O,M]=N;let U="text",k="";N.length===1?Be(O)?(k=O.modifier||k,U=O.type||U):ye(O)&&(k=O||k):N.length===2&&(ye(O)&&(k=O||k),ye(M)&&(U=M||U));const V=u(I)(L),X=U==="vnode"&&ot(V)&&k?V[0]:V;return k?f(k)(X,U):X},message:u,type:E,interpolate:d,normalize:h,values:kt({},o,c)};return L}let Ms=null;function cb(e){Ms=e}function lb(e,t,n){Ms&&Ms.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const ub=fb("function:translate");function fb(e){return t=>Ms&&Ms.emit(e,t)}const th=ec.__EXTEND_POINT__,hr=lo(th),hb={NOT_FOUND_KEY:th,FALLBACK_TO_TRANSLATE:hr(),CANNOT_FORMAT_NUMBER:hr(),FALLBACK_TO_NUMBER_FORMAT:hr(),CANNOT_FORMAT_DATE:hr(),FALLBACK_TO_DATE_FORMAT:hr(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:hr(),__EXTEND_POINT__:hr()},nh=Ae.__EXTEND_POINT__,dr=lo(nh),wn={INVALID_ARGUMENT:nh,INVALID_DATE_ARGUMENT:dr(),INVALID_ISO_DATE_ARGUMENT:dr(),NOT_SUPPORT_NON_STRING_MESSAGE:dr(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:dr(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:dr(),NOT_SUPPORT_LOCALE_TYPE:dr(),__EXTEND_POINT__:dr()};function Pn(e){return Xr(e,null,void 0)}function nc(e,t){return t.locale!=null?vl(t.locale):vl(e.locale)}let Io;function vl(e){if(ye(e))return e;if(nt(e)){if(e.resolvedOnce&&Io!=null)return Io;if(e.constructor.name==="Function"){const t=e();if(f0(t))throw Pn(wn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Io=t}else throw Pn(wn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Pn(wn.NOT_SUPPORT_LOCALE_TYPE)}function db(e,t,n){return[...new Set([n,...ot(t)?t:Be(t)?Object.keys(t):ye(t)?[t]:[n]])]}function rh(e,t,n){const r=ye(n)?n:Fi,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ot(o);)o=Sl(i,o,t);const a=ot(t)||!Fe(t)?t:t.default?t.default:null;o=ye(a)?[a]:a,ot(o)&&Sl(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Sl(e,t,n){let r=!0;for(let s=0;s<t.length&&et(r);s++){const i=t[s];ye(i)&&(r=mb(e,t[s],n))}return r}function mb(e,t,n){let r;const s=t.split("-");do{const i=s.join("-");r=pb(e,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function pb(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r=t[t.length-1]!=="!";const s=t.replace(/!/g,"");e.push(s),(ot(n)||Fe(n))&&n[s]&&(r=n[s])}return r}const gb="9.13.1",uo=-1,Fi="en-US",kl="",Cl=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function _b(){return{upper:(e,t)=>t==="text"&&ye(e)?e.toUpperCase():t==="vnode"&&Be(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&ye(e)?e.toLowerCase():t==="vnode"&&Be(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&ye(e)?Cl(e):t==="vnode"&&Be(e)&&"__v_isVNode"in e?Cl(e.children):e}}let sh;function bb(e){sh=e}let ih;function yb(e){ih=e}let oh;function xb(e){oh=e}let ah=null;const wb=e=>{ah=e},Eb=()=>ah;let ch=null;const Ol=e=>{ch=e},vb=()=>ch;let Al=0;function Sb(e={}){const t=nt(e.onWarn)?e.onWarn:m0,n=ye(e.version)?e.version:gb,r=ye(e.locale)||nt(e.locale)?e.locale:Fi,s=nt(r)?Fi:r,i=ot(e.fallbackLocale)||Fe(e.fallbackLocale)||ye(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s,o=Fe(e.messages)?e.messages:{[s]:{}},a=Fe(e.datetimeFormats)?e.datetimeFormats:{[s]:{}},c=Fe(e.numberFormats)?e.numberFormats:{[s]:{}},l=kt({},e.modifiers||{},_b()),u=e.pluralRules||{},f=nt(e.missing)?e.missing:null,h=et(e.missingWarn)||Ri(e.missingWarn)?e.missingWarn:!0,d=et(e.fallbackWarn)||Ri(e.fallbackWarn)?e.fallbackWarn:!0,E=!!e.fallbackFormat,P=!!e.unresolving,L=nt(e.postTranslation)?e.postTranslation:null,I=Fe(e.processor)?e.processor:null,N=et(e.warnHtmlMessage)?e.warnHtmlMessage:!0,O=!!e.escapeParameter,M=nt(e.messageCompiler)?e.messageCompiler:sh,U=nt(e.messageResolver)?e.messageResolver:ih||Q0,k=nt(e.localeFallbacker)?e.localeFallbacker:oh||db,V=Be(e.fallbackContext)?e.fallbackContext:void 0,X=e,Q=Be(X.__datetimeFormatters)?X.__datetimeFormatters:new Map,ae=Be(X.__numberFormatters)?X.__numberFormatters:new Map,se=Be(X.__meta)?X.__meta:{};Al++;const Z={version:n,cid:Al,locale:r,fallbackLocale:i,messages:o,modifiers:l,pluralRules:u,missing:f,missingWarn:h,fallbackWarn:d,fallbackFormat:E,unresolving:P,postTranslation:L,processor:I,warnHtmlMessage:N,escapeParameter:O,messageCompiler:M,messageResolver:U,localeFallbacker:k,fallbackContext:V,onWarn:t,__meta:se};return Z.datetimeFormats=a,Z.numberFormats=c,Z.__datetimeFormatters=Q,Z.__numberFormatters=ae,__INTLIFY_PROD_DEVTOOLS__&&lb(Z,n,se),Z}function rc(e,t,n,r,s){const{missing:i,onWarn:o}=e;if(i!==null){const a=i(e,n,t,s);return ye(a)?a:t}else return t}function is(e,t,n){const r=e;r.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function kb(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function Cb(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let r=n+1;r<t.length;r++)if(kb(e,t[r]))return!0;return!1}function Po(e){return n=>Ob(n,e)}function Ob(e,t){const n=t.b||t.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return e.plural(s.reduce((i,o)=>[...i,Il(e,o)],[]))}else return Il(e,n)}function Il(e,t){const n=t.s||t.static;if(n)return e.type==="text"?n:e.normalize([n]);{const r=(t.i||t.items).reduce((s,i)=>[...s,sa(e,i)],[]);return e.normalize(r)}}function sa(e,t){const n=t.t||t.type;switch(n){case 3:{const r=t;return r.v||r.value}case 9:{const r=t;return r.v||r.value}case 4:{const r=t;return e.interpolate(e.named(r.k||r.key))}case 5:{const r=t;return e.interpolate(e.list(r.i!=null?r.i:r.index))}case 6:{const r=t,s=r.m||r.modifier;return e.linked(sa(e,r.k||r.key),s?sa(e,s):void 0,e.type)}case 7:{const r=t;return r.v||r.value}case 8:{const r=t;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const Ab=e=>e;let ai=Object.create(null);const zr=e=>Be(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function Ib(e,t={}){let n=!1;const r=t.onError||w0;return t.onError=s=>{n=!0,r(s)},{...z0(e,t),detectError:n}}function Pb(e,t){if(ye(e)){et(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||Ab)(e),s=ai[r];if(s)return s;const{ast:i,detectError:o}=Ib(e,{...t,location:!1,jit:!0}),a=Po(i);return o?a:ai[r]=a}else{const n=e.cacheKey;if(n){const r=ai[n];return r||(ai[n]=Po(e))}else return Po(e)}}const Pl=()=>"",Gt=e=>nt(e);function Tl(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=e,[c,l]=ia(...t),u=et(l.missingWarn)?l.missingWarn:e.missingWarn,f=et(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,h=et(l.escapeParameter)?l.escapeParameter:e.escapeParameter,d=!!l.resolvedMessage,E=ye(l.default)||et(l.default)?et(l.default)?i?c:()=>c:l.default:n?i?c:()=>c:"",P=n||E!=="",L=nc(e,l);h&&Tb(l);let[I,N,O]=d?[c,L,a[L]||{}]:lh(e,c,L,o,f,u),M=I,U=c;if(!d&&!(ye(M)||zr(M)||Gt(M))&&P&&(M=E,U=M),!d&&(!(ye(M)||zr(M)||Gt(M))||!ye(N)))return s?uo:c;let k=!1;const V=()=>{k=!0},X=Gt(M)?M:uh(e,c,N,M,U,V);if(k)return M;const Q=Mb(e,N,O,l),ae=ab(Q),se=Nb(e,X,ae),Z=r?r(se,c):se;if(__INTLIFY_PROD_DEVTOOLS__){const we={timestamp:Date.now(),key:ye(c)?c:Gt(M)?M.key:"",locale:N||(Gt(M)?M.locale:""),format:ye(M)?M:Gt(M)?M.source:"",message:Z};we.meta=kt({},e.__meta,Eb()||{}),ub(we)}return Z}function Tb(e){ot(e.list)?e.list=e.list.map(t=>ye(t)?gl(t):t):Be(e.named)&&Object.keys(e.named).forEach(t=>{ye(e.named[t])&&(e.named[t]=gl(e.named[t]))})}function lh(e,t,n,r,s,i){const{messages:o,onWarn:a,messageResolver:c,localeFallbacker:l}=e,u=l(e,r,n);let f={},h,d=null;const E="translate";for(let P=0;P<u.length&&(h=u[P],f=o[h]||{},(d=c(f,t))===null&&(d=f[t]),!(ye(d)||zr(d)||Gt(d)));P++)if(!Cb(h,u)){const L=rc(e,t,h,i,E);L!==t&&(d=L)}return[d,h,f]}function uh(e,t,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Gt(r)){const l=r;return l.locale=l.locale||n,l.key=l.key||t,l}if(o==null){const l=()=>r;return l.locale=n,l.key=t,l}const c=o(r,Rb(e,n,s,r,a,i));return c.locale=n,c.key=t,c.source=r,c}function Nb(e,t,n){return t(n)}function ia(...e){const[t,n,r]=e,s={};if(!ye(t)&&!ft(t)&&!Gt(t)&&!zr(t))throw Pn(wn.INVALID_ARGUMENT);const i=ft(t)?String(t):(Gt(t),t);return ft(n)?s.plural=n:ye(n)?s.default=n:Fe(n)&&!co(n)?s.named=n:ot(n)&&(s.list=n),ft(r)?s.plural=r:ye(r)?s.default=r:Fe(r)&&kt(s,r),[i,s]}function Rb(e,t,n,r,s,i){return{locale:t,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>a0(t,n,o)}}function Mb(e,t,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=e,h={locale:t,modifiers:s,pluralRules:i,messages:d=>{let E=o(n,d);if(E==null&&u){const[,,P]=lh(u,d,t,a,c,l);E=o(P,d)}if(ye(E)||zr(E)){let P=!1;const I=uh(e,d,t,E,d,()=>{P=!0});return P?Pl:I}else return Gt(E)?E:Pl}};return e.processor&&(h.processor=e.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),ft(r.plural)&&(h.pluralIndex=r.plural),h}function Nl(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[c,l,u,f]=oa(...t),h=et(u.missingWarn)?u.missingWarn:e.missingWarn;et(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const d=!!u.part,E=nc(e,u),P=o(e,s,E);if(!ye(c)||c==="")return new Intl.DateTimeFormat(E,f).format(l);let L={},I,N=null;const O="datetime format";for(let k=0;k<P.length&&(I=P[k],L=n[I]||{},N=L[c],!Fe(N));k++)rc(e,c,I,h,O);if(!Fe(N)||!ye(I))return r?uo:c;let M=`${I}__${c}`;co(f)||(M=`${M}__${JSON.stringify(f)}`);let U=a.get(M);return U||(U=new Intl.DateTimeFormat(I,kt({},N,f)),a.set(M,U)),d?U.formatToParts(l):U.format(l)}const fh=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function oa(...e){const[t,n,r,s]=e,i={};let o={},a;if(ye(t)){const c=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Pn(wn.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw Pn(wn.INVALID_ISO_DATE_ARGUMENT)}}else if(l0(t)){if(isNaN(t.getTime()))throw Pn(wn.INVALID_DATE_ARGUMENT);a=t}else if(ft(t))a=t;else throw Pn(wn.INVALID_ARGUMENT);return ye(n)?i.key=n:Fe(n)&&Object.keys(n).forEach(c=>{fh.includes(c)?o[c]=n[c]:i[c]=n[c]}),ye(r)?i.locale=r:Fe(r)&&(o=r),Fe(s)&&(o=s),[i.key||"",a,i,o]}function Rl(e,t,n){const r=e;for(const s in n){const i=`${t}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Ml(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=e,{__numberFormatters:a}=e,[c,l,u,f]=aa(...t),h=et(u.missingWarn)?u.missingWarn:e.missingWarn;et(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const d=!!u.part,E=nc(e,u),P=o(e,s,E);if(!ye(c)||c==="")return new Intl.NumberFormat(E,f).format(l);let L={},I,N=null;const O="number format";for(let k=0;k<P.length&&(I=P[k],L=n[I]||{},N=L[c],!Fe(N));k++)rc(e,c,I,h,O);if(!Fe(N)||!ye(I))return r?uo:c;let M=`${I}__${c}`;co(f)||(M=`${M}__${JSON.stringify(f)}`);let U=a.get(M);return U||(U=new Intl.NumberFormat(I,kt({},N,f)),a.set(M,U)),d?U.formatToParts(l):U.format(l)}const hh=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function aa(...e){const[t,n,r,s]=e,i={};let o={};if(!ft(t))throw Pn(wn.INVALID_ARGUMENT);const a=t;return ye(n)?i.key=n:Fe(n)&&Object.keys(n).forEach(c=>{hh.includes(c)?o[c]=n[c]:i[c]=n[c]}),ye(r)?i.locale=r:Fe(r)&&(o=r),Fe(s)&&(o=s),[i.key||"",a,i,o]}function Ll(e,t,n){const r=e;for(const s in n){const i=`${t}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}V0();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Lb="9.13.1";function Fb(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Za().__INTLIFY_PROD_DEVTOOLS__=!1)}const dh=hb.__EXTEND_POINT__,An=lo(dh);An(),An(),An(),An(),An(),An(),An(),An(),An();const mh=wn.__EXTEND_POINT__,Nt=lo(mh),Xt={UNEXPECTED_RETURN_TYPE:mh,INVALID_ARGUMENT:Nt(),MUST_BE_CALL_SETUP_TOP:Nt(),NOT_INSTALLED:Nt(),NOT_AVAILABLE_IN_LEGACY_MODE:Nt(),REQUIRED_VALUE:Nt(),INVALID_VALUE:Nt(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Nt(),NOT_INSTALLED_WITH_PROVIDE:Nt(),UNEXPECTED_ERROR:Nt(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Nt(),BRIDGE_SUPPORT_VUE_2_ONLY:Nt(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Nt(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Nt(),__EXTEND_POINT__:Nt()};function hn(e,...t){return Xr(e,null,void 0)}const ca=ir("__translateVNode"),la=ir("__datetimeParts"),ua=ir("__numberParts"),jb=ir("__setPluralRules"),$b=ir("__injectWithOption"),fa=ir("__dispose");function Ls(e){if(!Be(e))return e;for(const t in e)if(Mi(e,t))if(!t.includes("."))Be(e[t])&&Ls(e[t]);else{const n=t.split("."),r=n.length-1;let s=e,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Be(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=e[t],delete e[t]),Be(s[n[r]])&&Ls(s[n[r]])}return e}function ph(e,t){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=t,o=Fe(n)?n:ot(r)?{}:{[e]:{}};if(ot(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(o[c]=o[c]||{},bi(l,o[c])):bi(l,o)}else ye(a)&&bi(JSON.parse(a),o)}),s==null&&i)for(const a in o)Mi(o,a)&&Ls(o[a]);return o}function gh(e){return e.type}function Db(e,t,n){let r=Be(t.messages)?t.messages:{};"__i18nGlobal"in n&&(r=ph(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{e.mergeLocaleMessage(i,r[i])});{if(Be(t.datetimeFormats)){const i=Object.keys(t.datetimeFormats);i.length&&i.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(Be(t.numberFormats)){const i=Object.keys(t.numberFormats);i.length&&i.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function Fl(e){return ze(Vs,null,e,0)}const jl="__INTLIFY_META__",$l=()=>[],Ub=()=>!1;let Dl=0;function Ul(e){return(t,n,r,s)=>e(n,r,Ws()||void 0,s)}const Bb=()=>{const e=Ws();let t=null;return e&&(t=gh(e)[jl])?{[jl]:t}:null};function _h(e={},t){const{__root:n,__injectWithOption:r}=e,s=n===void 0,i=e.flatJson,o=Ni?Ct:Ua,a=!!e.translateExistCompatible;let c=et(e.inheritLocale)?e.inheritLocale:!0;const l=o(n&&c?n.locale.value:ye(e.locale)?e.locale:Fi),u=o(n&&c?n.fallbackLocale.value:ye(e.fallbackLocale)||ot(e.fallbackLocale)||Fe(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:l.value),f=o(ph(l.value,e)),h=o(Fe(e.datetimeFormats)?e.datetimeFormats:{[l.value]:{}}),d=o(Fe(e.numberFormats)?e.numberFormats:{[l.value]:{}});let E=n?n.missingWarn:et(e.missingWarn)||Ri(e.missingWarn)?e.missingWarn:!0,P=n?n.fallbackWarn:et(e.fallbackWarn)||Ri(e.fallbackWarn)?e.fallbackWarn:!0,L=n?n.fallbackRoot:et(e.fallbackRoot)?e.fallbackRoot:!0,I=!!e.fallbackFormat,N=nt(e.missing)?e.missing:null,O=nt(e.missing)?Ul(e.missing):null,M=nt(e.postTranslation)?e.postTranslation:null,U=n?n.warnHtmlMessage:et(e.warnHtmlMessage)?e.warnHtmlMessage:!0,k=!!e.escapeParameter;const V=n?n.modifiers:Fe(e.modifiers)?e.modifiers:{};let X=e.pluralRules||n&&n.pluralRules,Q;Q=(()=>{s&&Ol(null);const j={version:Lb,locale:l.value,fallbackLocale:u.value,messages:f.value,modifiers:V,pluralRules:X,missing:O===null?void 0:O,missingWarn:E,fallbackWarn:P,fallbackFormat:I,unresolving:!0,postTranslation:M===null?void 0:M,warnHtmlMessage:U,escapeParameter:k,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};j.datetimeFormats=h.value,j.numberFormats=d.value,j.__datetimeFormatters=Fe(Q)?Q.__datetimeFormatters:void 0,j.__numberFormatters=Fe(Q)?Q.__numberFormatters:void 0;const q=Sb(j);return s&&Ol(q),q})(),is(Q,l.value,u.value);function se(){return[l.value,u.value,f.value,h.value,d.value]}const Z=We({get:()=>l.value,set:j=>{l.value=j,Q.locale=l.value}}),we=We({get:()=>u.value,set:j=>{u.value=j,Q.fallbackLocale=u.value,is(Q,l.value,j)}}),Ne=We(()=>f.value),Oe=We(()=>h.value),Te=We(()=>d.value);function ve(){return nt(M)?M:null}function Ce(j){M=j,Q.postTranslation=j}function qe(){return N}function m(j){j!==null&&(O=Ul(j)),N=j,Q.missing=O}const A=(j,q,_e,ke,Me,Je)=>{se();let rt;try{__INTLIFY_PROD_DEVTOOLS__,s||(Q.fallbackContext=n?vb():void 0),rt=j(Q)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(Q.fallbackContext=void 0)}if(_e!=="translate exists"&&ft(rt)&&rt===uo||_e==="translate exists"&&!rt){const[Qt,_t]=q();return n&&L?ke(n):Me(Qt)}else{if(Je(rt))return rt;throw hn(Xt.UNEXPECTED_RETURN_TYPE)}};function oe(...j){return A(q=>Reflect.apply(Tl,null,[q,...j]),()=>ia(...j),"translate",q=>Reflect.apply(q.t,q,[...j]),q=>q,q=>ye(q))}function v(...j){const[q,_e,ke]=j;if(ke&&!Be(ke))throw hn(Xt.INVALID_ARGUMENT);return oe(q,_e,kt({resolvedMessage:!0},ke||{}))}function me(...j){return A(q=>Reflect.apply(Nl,null,[q,...j]),()=>oa(...j),"datetime format",q=>Reflect.apply(q.d,q,[...j]),()=>kl,q=>ye(q))}function Ee(...j){return A(q=>Reflect.apply(Ml,null,[q,...j]),()=>aa(...j),"number format",q=>Reflect.apply(q.n,q,[...j]),()=>kl,q=>ye(q))}function fe(j){return j.map(q=>ye(q)||ft(q)||et(q)?Fl(String(q)):q)}const K={normalize:fe,interpolate:j=>j,type:"vnode"};function B(...j){return A(q=>{let _e;const ke=q;try{ke.processor=K,_e=Reflect.apply(Tl,null,[ke,...j])}finally{ke.processor=null}return _e},()=>ia(...j),"translate",q=>q[ca](...j),q=>[Fl(q)],q=>ot(q))}function ee(...j){return A(q=>Reflect.apply(Ml,null,[q,...j]),()=>aa(...j),"number format",q=>q[ua](...j),$l,q=>ye(q)||ot(q))}function pe(...j){return A(q=>Reflect.apply(Nl,null,[q,...j]),()=>oa(...j),"datetime format",q=>q[la](...j),$l,q=>ye(q)||ot(q))}function Se(j){X=j,Q.pluralRules=X}function y(j,q){return A(()=>{if(!j)return!1;const _e=ye(q)?q:l.value,ke=W(_e),Me=Q.messageResolver(ke,j);return a?Me!=null:zr(Me)||Gt(Me)||ye(Me)},()=>[j],"translate exists",_e=>Reflect.apply(_e.te,_e,[j,q]),Ub,_e=>et(_e))}function S(j){let q=null;const _e=rh(Q,u.value,l.value);for(let ke=0;ke<_e.length;ke++){const Me=f.value[_e[ke]]||{},Je=Q.messageResolver(Me,j);if(Je!=null){q=Je;break}}return q}function D(j){const q=S(j);return q??(n?n.tm(j)||{}:{})}function W(j){return f.value[j]||{}}function z(j,q){if(i){const _e={[j]:q};for(const ke in _e)Mi(_e,ke)&&Ls(_e[ke]);q=_e[j]}f.value[j]=q,Q.messages=f.value}function ne(j,q){f.value[j]=f.value[j]||{};const _e={[j]:q};if(i)for(const ke in _e)Mi(_e,ke)&&Ls(_e[ke]);q=_e[j],bi(q,f.value[j]),Q.messages=f.value}function ce(j){return h.value[j]||{}}function _(j,q){h.value[j]=q,Q.datetimeFormats=h.value,Rl(Q,j,q)}function x(j,q){h.value[j]=kt(h.value[j]||{},q),Q.datetimeFormats=h.value,Rl(Q,j,q)}function T(j){return d.value[j]||{}}function G(j,q){d.value[j]=q,Q.numberFormats=d.value,Ll(Q,j,q)}function ie(j,q){d.value[j]=kt(d.value[j]||{},q),Q.numberFormats=d.value,Ll(Q,j,q)}Dl++,n&&Ni&&(Lt(n.locale,j=>{c&&(l.value=j,Q.locale=j,is(Q,l.value,u.value))}),Lt(n.fallbackLocale,j=>{c&&(u.value=j,Q.fallbackLocale=j,is(Q,l.value,u.value))}));const te={id:Dl,locale:Z,fallbackLocale:we,get inheritLocale(){return c},set inheritLocale(j){c=j,j&&n&&(l.value=n.locale.value,u.value=n.fallbackLocale.value,is(Q,l.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:Ne,get modifiers(){return V},get pluralRules(){return X||{}},get isGlobal(){return s},get missingWarn(){return E},set missingWarn(j){E=j,Q.missingWarn=E},get fallbackWarn(){return P},set fallbackWarn(j){P=j,Q.fallbackWarn=P},get fallbackRoot(){return L},set fallbackRoot(j){L=j},get fallbackFormat(){return I},set fallbackFormat(j){I=j,Q.fallbackFormat=I},get warnHtmlMessage(){return U},set warnHtmlMessage(j){U=j,Q.warnHtmlMessage=j},get escapeParameter(){return k},set escapeParameter(j){k=j,Q.escapeParameter=j},t:oe,getLocaleMessage:W,setLocaleMessage:z,mergeLocaleMessage:ne,getPostTranslationHandler:ve,setPostTranslationHandler:Ce,getMissingHandler:qe,setMissingHandler:m,[jb]:Se};return te.datetimeFormats=Oe,te.numberFormats=Te,te.rt=v,te.te=y,te.tm=D,te.d=me,te.n=Ee,te.getDateTimeFormat=ce,te.setDateTimeFormat=_,te.mergeDateTimeFormat=x,te.getNumberFormat=T,te.setNumberFormat=G,te.mergeNumberFormat=ie,te[$b]=r,te[ca]=B,te[la]=pe,te[ua]=ee,te}const sc={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function qb({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,s)=>[...r,...s.type===Bt?s.children:[s]],[]):t.reduce((n,r)=>{const s=e[r];return s&&(n[r]=s()),n},{})}function bh(e){return Bt}const Hb=mn({name:"i18n-t",props:kt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>ft(e)||!isNaN(e)}},sc),setup(e,t){const{slots:n,attrs:r}=t,s=e.i18n||Sr({useScope:e.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(f=>f!=="_"),o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=ye(e.plural)?+e.plural:e.plural);const a=qb(t,i),c=s[ca](e.keypath,a,o),l=kt({},r),u=ye(e.tag)||Be(e.tag)?e.tag:bh();return io(u,l,c)}}}),Bl=Hb;function zb(e){return ot(e)&&!ye(e[0])}function yh(e,t,n,r){const{slots:s,attrs:i}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),ye(e.format)?o.key=e.format:Be(e.format)&&(ye(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((h,d)=>n.includes(d)?kt({},h,{[d]:e.format[d]}):h,{}));const c=r(e.value,o,a);let l=[o.key];ot(c)?l=c.map((h,d)=>{const E=s[h.type],P=E?E({[h.type]:h.value,index:d,parts:c}):[h.value];return zb(P)&&(P[0].key=`${h.type}-${d}`),P}):ye(c)&&(l=[c]);const u=kt({},i),f=ye(e.tag)||Be(e.tag)?e.tag:bh();return io(f,u,l)}}const Vb=mn({name:"i18n-n",props:kt({value:{type:Number,required:!0},format:{type:[String,Object]}},sc),setup(e,t){const n=e.i18n||Sr({useScope:e.scope,__useComponent:!0});return yh(e,t,hh,(...r)=>n[ua](...r))}}),ql=Vb,Wb=mn({name:"i18n-d",props:kt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},sc),setup(e,t){const n=e.i18n||Sr({useScope:e.scope,__useComponent:!0});return yh(e,t,fh,(...r)=>n[la](...r))}}),Hl=Wb;function Gb(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return r!=null?r.__composer:e.global.__composer}}function Kb(e){const t=o=>{const{instance:a,modifiers:c,value:l}=o;if(!a||!a.$)throw hn(Xt.UNEXPECTED_ERROR);const u=Gb(e,a.$),f=zl(l);return[Reflect.apply(u.t,u,[...Vl(f)]),u]};return{created:(o,a)=>{const[c,l]=t(a);Ni&&e.global===l&&(o.__i18nWatcher=Lt(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=l,o.textContent=c},unmounted:o=>{Ni&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const c=o.__composer,l=zl(a);o.textContent=Reflect.apply(c.t,c,[...Vl(l)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function zl(e){if(ye(e))return{path:e};if(Fe(e)){if(!("path"in e))throw hn(Xt.REQUIRED_VALUE,"path");return e}else throw hn(Xt.INVALID_VALUE)}function Vl(e){const{path:t,locale:n,args:r,choice:s,plural:i}=e,o={},a=r||{};return ye(n)&&(o.locale=n),ft(s)&&(o.plural=s),ft(i)&&(o.plural=i),[t,a,o]}function Jb(e,t,...n){const r=Fe(n[0])?n[0]:{},s=!!r.useI18nComponentName;(et(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":Bl.name,"I18nT"].forEach(o=>e.component(o,Bl)),[ql.name,"I18nN"].forEach(o=>e.component(o,ql)),[Hl.name,"I18nD"].forEach(o=>e.component(o,Hl))),e.directive("t",Kb(t))}const Yb=ir("global-vue-i18n");function Xb(e={},t){const n=et(e.globalInjection)?e.globalInjection:!0,r=!0,s=new Map,[i,o]=Qb(e),a=ir("");function c(f){return s.get(f)||null}function l(f,h){s.set(f,h)}function u(f){s.delete(f)}{const f={get mode(){return"composition"},get allowComposition(){return r},async install(h,...d){if(h.__VUE_I18N_SYMBOL__=a,h.provide(h.__VUE_I18N_SYMBOL__,f),Fe(d[0])){const L=d[0];f.__composerExtend=L.__composerExtend,f.__vueI18nExtend=L.__vueI18nExtend}let E=null;n&&(E=oy(h,f.global)),Jb(h,f,...d);const P=h.unmount;h.unmount=()=>{E&&E(),f.dispose(),P()}},get global(){return o},dispose(){i.stop()},__instances:s,__getInstance:c,__setInstance:l,__deleteInstance:u};return f}}function Sr(e={}){const t=Ws();if(t==null)throw hn(Xt.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw hn(Xt.NOT_INSTALLED);const n=Zb(t),r=ty(n),s=gh(t),i=ey(e,s);if(i==="global")return Db(r,e,s),r;if(i==="parent"){let c=ny(n,t,e.__useComponent);return c==null&&(c=r),c}const o=n;let a=o.__getInstance(t);if(a==null){const c=kt({},e);"__i18n"in s&&(c.__i18n=s.__i18n),r&&(c.__root=r),a=_h(c),o.__composerExtend&&(a[fa]=o.__composerExtend(a)),sy(o,t,a),o.__setInstance(t,a)}return a}function Qb(e,t,n){const r=vd();{const s=r.run(()=>_h(e));if(s==null)throw hn(Xt.UNEXPECTED_ERROR);return[r,s]}}function Zb(e){{const t=Yt(e.isCE?Yb:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw hn(e.isCE?Xt.NOT_INSTALLED_WITH_PROVIDE:Xt.UNEXPECTED_ERROR);return t}}function ey(e,t){return co(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function ty(e){return e.mode==="composition"?e.global:e.global.__composer}function ny(e,t,n=!1){let r=null;const s=t.root;let i=ry(t,n);for(;i!=null;){const o=e;if(e.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function ry(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function sy(e,t,n){zs(()=>{},t),za(()=>{const r=n;e.__deleteInstance(t);const s=r[fa];s&&(s(),delete r[fa])},t)}const iy=["locale","fallbackLocale","availableLocales"],Wl=["t","rt","d","n","tm","te"];function oy(e,t){const n=Object.create(null);return iy.forEach(s=>{const i=Object.getOwnPropertyDescriptor(t,s);if(!i)throw hn(Xt.UNEXPECTED_ERROR);const o=gt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),e.config.globalProperties.$i18n=n,Wl.forEach(s=>{const i=Object.getOwnPropertyDescriptor(t,s);if(!i||!i.value)throw hn(Xt.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,i)}),()=>{delete e.config.globalProperties.$i18n,Wl.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}Fb();bb(Pb);yb(Z0);xb(rh);if(__INTLIFY_PROD_DEVTOOLS__){const e=Za();e.__INTLIFY__=!0,cb(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const ay=["href"],To="border-1 hover:border-gray-300 dark:border-gray-400 dark:hover:border-gray-500 rounded p-2 flex items-center justify-center cursor-pointer",xh=mn({__name:"Button",props:{to:{},href:{}},setup(e){return(t,n)=>{const r=to("router-link");return t.to?(pt(),wr(r,{key:0,class:xn(To),to:t.to},{default:Jt(()=>[di(t.$slots,"default")]),_:3},8,["to"])):t.href?(pt(),Sn("a",{key:1,href:t.href,target:"_blank",rel:"noopener noreferrer",class:xn(To)},[di(t.$slots,"default")],8,ay)):(pt(),Sn("button",{key:2,type:"button",class:xn(To)},[di(t.$slots,"default")]))}}}),cy={class:"m-2 flex flex-col rounded-md p-4 bg-white border-1 border-gray-200 shadow-xl z-20 md:w-104 dark:bg-dark-400 dark:text-gray-300 dark:border-dark-800"},wh=mn({__name:"PopupNotice",props:{show:{type:Boolean}},emits:["close"],setup(e){return(t,n)=>t.show?(pt(),Sn("div",{key:0,class:"flex fixed top-0 left-0 right-0 bottom-0 bg-gray-900 bg-opacity-80 z-1000 justify-center items-center",onClick:n[0]||(n[0]=r=>t.$emit("close"))},[Ye("div",cy,[di(t.$slots,"default")])])):Tf("",!0)}}),Fs="kiel_live",ly={liteMode:Ns(`${Fs}.lite`,!1),lastLocation:Ns(`${Fs}.last_location`,{center:[10.1283,54.3166],zoom:14,pitch:0,bearing:0})};function Eh(){return ly}const uy={key:0,class:"flex flex-col text-center gap-4"},fy={class:"text-xl mb-2"},hy=["innerHTML"],dy={class:"flex flex-row w-full justify-center mt-8"},my=mn({__name:"GeneralNotice",setup(e){const{t}=Sr(),n=[{id:"kvg-rbl-umzug",title:" Einschrnkungen bei den Busdaten der KVG",start:new Date("2024-02-20 00:00:00"),end:new Date("2024-02-22 23:59:59"),msg:`Die KVG stellt vom **20. bis zum 22. Februar 2024** ihr rechnergesttztes Betriebsleitsystem (RBL) um,
 sodass es teilweise zu Einschrnkungen bei den Busdaten kommen kann. [weitere Informationen](https://www.kvg-kiel.de/aktuelles/betriebliches/unser-rechnergestuetztes-betriebsleitsystem-rbl-zieht-um).`}],r=Ns(`${Fs}.alerts`,[]),s=We(()=>n.find(a=>{const c=a.start&&a.end?a.start<=new Date&&a.end>=new Date:!0;return!r.value.includes(a.id)&&c}));function i(){s.value&&r.value.push(s.value.id)}const o=We(()=>s.value?o0(s.value.msg.trim()):null);return(a,c)=>(pt(),wr(wh,{show:!!s.value,onClose:i},{default:Jt(()=>[s.value?(pt(),Sn("div",uy,[Ye("span",fy,on(s.value.title),1),Ye("span",{class:"prose",innerHTML:o.value},null,8,hy)])):Tf("",!0),Ye("div",dy,[ze(xh,{onClick:i},{default:Jt(()=>[Ga(on(Ze(t)("ok")),1)]),_:1})])]),_:1},8,["show"]))}}),py={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},gy=Ye("path",{fill:"currentColor",d:"M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6"},null,-1),_y=[gy];function by(e,t){return pt(),Sn("svg",py,[..._y])}const yy={name:"ic-baseline-settings",render:by},xy={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},wy=Ye("path",{fill:"currentColor",d:"m234.29 114.85l-45 38.83L203 211.75a16.4 16.4 0 0 1-24.5 17.82L128 198.49l-50.53 31.08A16.4 16.4 0 0 1 53 211.75l13.76-58.07l-45-38.83A16.46 16.46 0 0 1 31.08 86l59-4.76l22.76-55.08a16.36 16.36 0 0 1 30.27 0l22.75 55.08l59 4.76a16.46 16.46 0 0 1 9.37 28.86Z"},null,-1),Ey=[wy];function vy(e,t){return pt(),Sn("svg",xy,[...Ey])}const Sy={name:"ph-star-fill",render:vy},ky={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Cy=Ye("path",{fill:"currentColor",d:"m16 24l-6.09-8.6A8.14 8.14 0 0 1 16 2a8.08 8.08 0 0 1 8 8.13a8.2 8.2 0 0 1-1.8 5.13Zm0-20a6.07 6.07 0 0 0-6 6.13a6.2 6.2 0 0 0 1.49 4L16 20.52L20.63 14A6.24 6.24 0 0 0 22 10.13A6.07 6.07 0 0 0 16 4"},null,-1),Oy=Ye("circle",{cx:"16",cy:"9",r:"2",fill:"currentColor"},null,-1),Ay=Ye("path",{fill:"currentColor",d:"M28 12h-2v2h2v14H4V14h2v-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2"},null,-1),Iy=[Cy,Oy,Ay];function Py(e,t){return pt(),Sn("svg",ky,[...Iy])}const Ty={name:"carbon-map",render:Py},Ny={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Ry=Ye("path",{fill:"currentColor",d:"M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"},null,-1),My=[Ry];function Ly(e,t){return pt(),Sn("svg",Ny,[...My])}const Fy={name:"ph-magnifying-glass-bold",render:Ly};/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Nr=typeof document<"u";function jy(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const He=Object.assign;function No(e,t){const n={};for(const r in t){const s=t[r];n[r]=dn(s)?s.map(e):e(s)}return n}const ys=()=>{},dn=Array.isArray,vh=/#/g,$y=/&/g,Dy=/\//g,Uy=/=/g,By=/\?/g,Sh=/\+/g,qy=/%5B/g,Hy=/%5D/g,kh=/%5E/g,zy=/%60/g,Ch=/%7B/g,Vy=/%7C/g,Oh=/%7D/g,Wy=/%20/g;function ic(e){return encodeURI(""+e).replace(Vy,"|").replace(qy,"[").replace(Hy,"]")}function Gy(e){return ic(e).replace(Ch,"{").replace(Oh,"}").replace(kh,"^")}function ha(e){return ic(e).replace(Sh,"%2B").replace(Wy,"+").replace(vh,"%23").replace($y,"%26").replace(zy,"`").replace(Ch,"{").replace(Oh,"}").replace(kh,"^")}function Ky(e){return ha(e).replace(Uy,"%3D")}function Jy(e){return ic(e).replace(vh,"%23").replace(By,"%3F")}function Yy(e){return e==null?"":Jy(e).replace(Dy,"%2F")}function js(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Xy=/\/$/,Qy=e=>e.replace(Xy,"");function Ro(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=nx(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:js(o)}}function Zy(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Gl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ex(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Vr(t.matched[r],n.matched[s])&&Ah(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Vr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ah(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!tx(e[n],t[n]))return!1;return!0}function tx(e,t){return dn(e)?Kl(e,t):dn(t)?Kl(t,e):e===t}function Kl(e,t){return dn(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function nx(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var $s;(function(e){e.pop="pop",e.push="push"})($s||($s={}));var xs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(xs||(xs={}));function rx(e){if(!e)if(Nr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Qy(e)}const sx=/^[^#]+#/;function ix(e,t){return e.replace(sx,"#")+t}function ox(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const fo=()=>({left:window.scrollX,top:window.scrollY});function ax(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=ox(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Jl(e,t){return(history.state?history.state.position-t:-1)+e}const da=new Map;function cx(e,t){da.set(e,t)}function lx(e){const t=da.get(e);return da.delete(e),t}let ux=()=>location.protocol+"//"+location.host;function Ih(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),Gl(c,"")}return Gl(n,e)+r+s}function fx(e,t,n,r){let s=[],i=[],o=null;const a=({state:h})=>{const d=Ih(e,location),E=n.value,P=t.value;let L=0;if(h){if(n.value=d,t.value=h,o&&o===E){o=null;return}L=P?h.position-P.position:0}else r(d);s.forEach(I=>{I(n.value,E,{delta:L,type:$s.pop,direction:L?L>0?xs.forward:xs.back:xs.unknown})})};function c(){o=n.value}function l(h){s.push(h);const d=()=>{const E=s.indexOf(h);E>-1&&s.splice(E,1)};return i.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(He({},h.state,{scroll:fo()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function Yl(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?fo():null}}function hx(e){const{history:t,location:n}=window,r={value:Ih(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:ux()+e+c;try{t[u?"replaceState":"pushState"](l,"",h),s.value=l}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(c,l){const u=He({},t.state,Yl(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=He({},s.value,t.state,{forward:c,scroll:fo()});i(u.current,u,!0);const f=He({},Yl(r.value,c,null),{position:u.position+1},l);i(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function dx(e){e=rx(e);const t=hx(e),n=fx(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=He({location:"",base:e,go:r,createHref:ix.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function mx(e){return typeof e=="string"||e&&typeof e=="object"}function Ph(e){return typeof e=="string"||typeof e=="symbol"}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Th=Symbol("");var Xl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Xl||(Xl={}));function Wr(e,t){return He(new Error,{type:e,[Th]:!0},t)}function In(e,t){return e instanceof Error&&Th in e&&(t==null||!!(e.type&t))}const Ql="[^/]+?",px={sensitive:!1,strict:!1,start:!0,end:!0},gx=/[.+*?^${}()[\]/\\]/g;function _x(e,t){const n=He({},px,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const h=l[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(gx,"\\$&"),d+=40;else if(h.type===1){const{value:E,repeatable:P,optional:L,regexp:I}=h;i.push({name:E,repeatable:P,optional:L});const N=I||Ql;if(N!==Ql){d+=10;try{new RegExp(`(${N})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${E}" (${N}): `+M.message)}}let O=P?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(O=L&&l.length<2?`(?:/${O})`:"/"+O),L&&(O+="?"),s+=O,d+=20,L&&(d+=-8),P&&(d+=-20),N===".*"&&(d+=-50)}u.push(d)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",E=i[h-1];f[E.name]=d&&E.repeatable?d.split("/"):d}return f}function c(l){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:E,repeatable:P,optional:L}=d,I=E in l?l[E]:"";if(dn(I)&&!P)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const N=dn(I)?I.join("/"):I;if(!N)if(L)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);u+=N}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function bx(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yx(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=bx(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Zl(r))return 1;if(Zl(s))return-1}return s.length-r.length}function Zl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xx={type:0,value:""},wx=/[a-zA-Z0-9_]/;function Ex(e){if(!e)return[[]];if(e==="/")return[[xx]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${l}": ${d}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function f(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:c==="("?n=2:wx.test(c)?h():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}function vx(e,t,n){const r=_x(Ex(e.path),n),s=He(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Sx(e,t){const n=[],r=new Map;t=nu({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,f,h){const d=!h,E=kx(u);E.aliasOf=h&&h.record;const P=nu(t,u),L=[E];if("alias"in u){const O=typeof u.alias=="string"?[u.alias]:u.alias;for(const M of O)L.push(He({},E,{components:h?h.record.components:E.components,path:M,aliasOf:h?h.record:E}))}let I,N;for(const O of L){const{path:M}=O;if(f&&M[0]!=="/"){const U=f.record.path,k=U[U.length-1]==="/"?"":"/";O.path=f.record.path+(M&&k+M)}if(I=vx(O,f,P),h?h.alias.push(I):(N=N||I,N!==I&&N.alias.push(I),d&&u.name&&!tu(I)&&o(u.name)),E.children){const U=E.children;for(let k=0;k<U.length;k++)i(U[k],I,h&&h.children[k])}h=h||I,(I.record.components&&Object.keys(I.record.components).length||I.record.name||I.record.redirect)&&c(I)}return N?()=>{o(N)}:ys}function o(u){if(Ph(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let f=0;for(;f<n.length&&yx(u,n[f])>=0&&(u.record.path!==n[f].record.path||!Nh(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!tu(u)&&r.set(u.record.name,u)}function l(u,f){let h,d={},E,P;if("name"in u&&u.name){if(h=r.get(u.name),!h)throw Wr(1,{location:u});P=h.record.name,d=He(eu(f.params,h.keys.filter(N=>!N.optional).concat(h.parent?h.parent.keys.filter(N=>N.optional):[]).map(N=>N.name)),u.params&&eu(u.params,h.keys.map(N=>N.name))),E=h.stringify(d)}else if(u.path!=null)E=u.path,h=n.find(N=>N.re.test(E)),h&&(d=h.parse(E),P=h.record.name);else{if(h=f.name?r.get(f.name):n.find(N=>N.re.test(f.path)),!h)throw Wr(1,{location:u,currentLocation:f});P=h.record.name,d=He({},f.params,u.params),E=h.stringify(d)}const L=[];let I=h;for(;I;)L.unshift(I.record),I=I.parent;return{name:P,path:E,params:d,matched:L,meta:Ox(L)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function eu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function kx(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Cx(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Cx(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function tu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ox(e){return e.reduce((t,n)=>He(t,n.meta),{})}function nu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Nh(e,t){return t.children.some(n=>n===e||Nh(e,n))}function Ax(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Sh," "),o=i.indexOf("="),a=js(o<0?i:i.slice(0,o)),c=o<0?null:js(i.slice(o+1));if(a in t){let l=t[a];dn(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function ru(e){let t="";for(let n in e){const r=e[n];if(n=Ky(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(dn(r)?r.map(i=>i&&ha(i)):[r&&ha(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Ix(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=dn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Px=Symbol(""),su=Symbol(""),ho=Symbol(""),oc=Symbol(""),ma=Symbol("");function os(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Gn(e,t,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=h=>{h===!1?c(Wr(4,{from:n,to:t})):h instanceof Error?c(h):mx(h)?c(Wr(2,{from:t,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>e.call(r&&r.instances[s],t,n,l));let f=Promise.resolve(u);e.length<3&&(f=f.then(l)),f.catch(h=>c(h))})}function Mo(e,t,n,r,s=i=>i()){const i=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Tx(c)){const u=(c.__vccOpts||c)[t];u&&i.push(Gn(u,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=jy(u)?u.default:u;o.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&Gn(d,n,r,o,a,s)()}))}}return i}function Tx(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function iu(e){const t=Yt(ho),n=Yt(oc),r=We(()=>{const c=Ze(e.to);return t.resolve(c)}),s=We(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(Vr.bind(null,u));if(h>-1)return h;const d=ou(c[l-2]);return l>1&&ou(u)===d&&f[f.length-1].path!==d?f.findIndex(Vr.bind(null,c[l-2])):h}),i=We(()=>s.value>-1&&Lx(n.params,r.value.params)),o=We(()=>s.value>-1&&s.value===n.matched.length-1&&Ah(n.params,r.value.params));function a(c={}){return Mx(c)?t[Ze(e.replace)?"replace":"push"](Ze(e.to)).catch(ys):Promise.resolve()}return{route:r,href:We(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Nx=mn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:iu,setup(e,{slots:t}){const n=Yi(iu(e)),{options:r}=Yt(ho),s=We(()=>({[au(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[au(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:io("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Rx=Nx;function Mx(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Lx(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!dn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function ou(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const au=(e,t,n)=>e??t??n,Fx=mn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Yt(ma),s=We(()=>e.route||r.value),i=Yt(su,0),o=We(()=>{let l=Ze(i);const{matched:u}=s.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=We(()=>s.value.matched[o.value]);mi(su,We(()=>o.value+1)),mi(Px,a),mi(ma,s);const c=Ct();return Lt(()=>[c.value,a.value,e.name],([l,u,f],[h,d,E])=>{u&&(u.instances[f]=l,d&&d!==u&&l&&l===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!Vr(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(P=>P(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return cu(n.default,{Component:h,route:l});const d=f.props[u],E=d?d===!0?l.params:typeof d=="function"?d(l):d:null,L=io(h,He({},E,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return cu(n.default,{Component:L,route:l})||L}}});function cu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const jx=Fx;function $x(e){const t=Sx(e.routes,e),n=e.parseQuery||Ax,r=e.stringifyQuery||ru,s=e.history,i=os(),o=os(),a=os(),c=Ua(Hn);let l=Hn;Nr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=No.bind(null,F=>""+F),f=No.bind(null,Yy),h=No.bind(null,js);function d(F,K){let B,ee;return Ph(F)?(B=t.getRecordMatcher(F),ee=K):ee=F,t.addRoute(ee,B)}function E(F){const K=t.getRecordMatcher(F);K&&t.removeRoute(K)}function P(){return t.getRoutes().map(F=>F.record)}function L(F){return!!t.getRecordMatcher(F)}function I(F,K){if(K=He({},K||c.value),typeof F=="string"){const S=Ro(n,F,K.path),D=t.resolve({path:S.path},K),W=s.createHref(S.fullPath);return He(S,D,{params:h(D.params),hash:js(S.hash),redirectedFrom:void 0,href:W})}let B;if(F.path!=null)B=He({},F,{path:Ro(n,F.path,K.path).path});else{const S=He({},F.params);for(const D in S)S[D]==null&&delete S[D];B=He({},F,{params:f(S)}),K.params=f(K.params)}const ee=t.resolve(B,K),pe=F.hash||"";ee.params=u(h(ee.params));const Se=Zy(r,He({},F,{hash:Gy(pe),path:ee.path})),y=s.createHref(Se);return He({fullPath:Se,hash:pe,query:r===ru?Ix(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:y})}function N(F){return typeof F=="string"?Ro(n,F,c.value.path):He({},F)}function O(F,K){if(l!==F)return Wr(8,{from:K,to:F})}function M(F){return V(F)}function U(F){return M(He(N(F),{replace:!0}))}function k(F){const K=F.matched[F.matched.length-1];if(K&&K.redirect){const{redirect:B}=K;let ee=typeof B=="function"?B(F):B;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=N(ee):{path:ee},ee.params={}),He({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function V(F,K){const B=l=I(F),ee=c.value,pe=F.state,Se=F.force,y=F.replace===!0,S=k(B);if(S)return V(He(N(S),{state:typeof S=="object"?He({},pe,S.state):pe,force:Se,replace:y}),K||B);const D=B;D.redirectedFrom=K;let W;return!Se&&ex(r,ee,B)&&(W=Wr(16,{to:D,from:ee}),A(ee,ee,!0,!1)),(W?Promise.resolve(W):ae(D,ee)).catch(z=>In(z)?In(z,2)?z:m(z):Ce(z,D,ee)).then(z=>{if(z){if(In(z,2))return V(He({replace:y},N(z.to),{state:typeof z.to=="object"?He({},pe,z.to.state):pe,force:Se}),K||D)}else z=Z(D,ee,!0,y,pe);return se(D,ee,z),z})}function X(F,K){const B=O(F,K);return B?Promise.reject(B):Promise.resolve()}function Q(F){const K=me.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(F):F()}function ae(F,K){let B;const[ee,pe,Se]=Dx(F,K);B=Mo(ee.reverse(),"beforeRouteLeave",F,K);for(const S of ee)S.leaveGuards.forEach(D=>{B.push(Gn(D,F,K))});const y=X.bind(null,F,K);return B.push(y),fe(B).then(()=>{B=[];for(const S of i.list())B.push(Gn(S,F,K));return B.push(y),fe(B)}).then(()=>{B=Mo(pe,"beforeRouteUpdate",F,K);for(const S of pe)S.updateGuards.forEach(D=>{B.push(Gn(D,F,K))});return B.push(y),fe(B)}).then(()=>{B=[];for(const S of Se)if(S.beforeEnter)if(dn(S.beforeEnter))for(const D of S.beforeEnter)B.push(Gn(D,F,K));else B.push(Gn(S.beforeEnter,F,K));return B.push(y),fe(B)}).then(()=>(F.matched.forEach(S=>S.enterCallbacks={}),B=Mo(Se,"beforeRouteEnter",F,K,Q),B.push(y),fe(B))).then(()=>{B=[];for(const S of o.list())B.push(Gn(S,F,K));return B.push(y),fe(B)}).catch(S=>In(S,8)?S:Promise.reject(S))}function se(F,K,B){a.list().forEach(ee=>Q(()=>ee(F,K,B)))}function Z(F,K,B,ee,pe){const Se=O(F,K);if(Se)return Se;const y=K===Hn,S=Nr?history.state:{};B&&(ee||y?s.replace(F.fullPath,He({scroll:y&&S&&S.scroll},pe)):s.push(F.fullPath,pe)),c.value=F,A(F,K,B,y),m()}let we;function Ne(){we||(we=s.listen((F,K,B)=>{if(!Ee.listening)return;const ee=I(F),pe=k(ee);if(pe){V(He(pe,{replace:!0}),ee).catch(ys);return}l=ee;const Se=c.value;Nr&&cx(Jl(Se.fullPath,B.delta),fo()),ae(ee,Se).catch(y=>In(y,12)?y:In(y,2)?(V(y.to,ee).then(S=>{In(S,20)&&!B.delta&&B.type===$s.pop&&s.go(-1,!1)}).catch(ys),Promise.reject()):(B.delta&&s.go(-B.delta,!1),Ce(y,ee,Se))).then(y=>{y=y||Z(ee,Se,!1),y&&(B.delta&&!In(y,8)?s.go(-B.delta,!1):B.type===$s.pop&&In(y,20)&&s.go(-1,!1)),se(ee,Se,y)}).catch(ys)}))}let Oe=os(),Te=os(),ve;function Ce(F,K,B){m(F);const ee=Te.list();return ee.length?ee.forEach(pe=>pe(F,K,B)):console.error(F),Promise.reject(F)}function qe(){return ve&&c.value!==Hn?Promise.resolve():new Promise((F,K)=>{Oe.add([F,K])})}function m(F){return ve||(ve=!F,Ne(),Oe.list().forEach(([K,B])=>F?B(F):K()),Oe.reset()),F}function A(F,K,B,ee){const{scrollBehavior:pe}=e;if(!Nr||!pe)return Promise.resolve();const Se=!B&&lx(Jl(F.fullPath,0))||(ee||!B)&&history.state&&history.state.scroll||null;return Yr().then(()=>pe(F,K,Se)).then(y=>y&&ax(y)).catch(y=>Ce(y,F,K))}const oe=F=>s.go(F);let v;const me=new Set,Ee={currentRoute:c,listening:!0,addRoute:d,removeRoute:E,hasRoute:L,getRoutes:P,resolve:I,options:e,push:M,replace:U,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Te.add,isReady:qe,install(F){const K=this;F.component("RouterLink",Rx),F.component("RouterView",jx),F.config.globalProperties.$router=K,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Ze(c)}),Nr&&!v&&c.value===Hn&&(v=!0,M(s.location).catch(pe=>{}));const B={};for(const pe in Hn)Object.defineProperty(B,pe,{get:()=>c.value[pe],enumerable:!0});F.provide(ho,K),F.provide(oc,nf(B)),F.provide(ma,c);const ee=F.unmount;me.add(F),F.unmount=function(){me.delete(F),me.size<1&&(l=Hn,we&&we(),we=null,c.value=Hn,v=!1,ve=!1),ee()}}};function fe(F){return F.reduce((K,B)=>K.then(()=>Q(B)),Promise.resolve())}return Ee}function Dx(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>Vr(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>Vr(l,c))||s.push(c))}return[n,r,s]}function OE(){return Yt(ho)}function Ux(){return Yt(oc)}const Bx={class:"flex w-full justify-center border-t-1 border-gray-200 dark:border-gray-800 dark:bg-dark-400 dark:text-gray-300 shadow-top"},qx={class:"flex w-full justify-around max-w-96"},Hx={class:"mt-auto text-xs"},zx={class:"mt-auto text-xs"},Vx={class:"mt-auto text-xs"},Wx={class:"mt-auto text-xs"},Gx=mn({__name:"AppBarBottom",setup(e){const{t}=Sr(),{liteMode:n}=Eh(),r=Ux(),s=We(()=>r.name==="favorites"?"favorites":r.meta.settings?"settings":"map");return(i,o)=>{const a=Fy,c=to("router-link"),l=Ty,u=Sy,f=yy;return pt(),Sn("nav",Bx,[Ye("div",qx,[Ze(n)?(pt(),wr(c,{key:0,to:{name:"search"},class:xn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="map"}]),"aria-label":Ze(t)("search")},{default:Jt(()=>[ze(a,{class:"w-6 h-6 mb-1"}),Ye("span",Hx,on(Ze(t)("search")),1)]),_:1},8,["class","aria-label"])):(pt(),wr(c,{key:1,to:{name:"home"},class:xn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="map"}]),"aria-label":Ze(t)("map")},{default:Jt(()=>[ze(l,{class:"w-6 h-6 mb-1"}),Ye("span",zx,on(Ze(t)("map")),1)]),_:1},8,["class","aria-label"])),ze(c,{to:{name:"favorites"},class:xn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="favorites"}]),"aria-label":Ze(t)("favorites")},{default:Jt(()=>[ze(u,{class:"w-6 h-6 mb-1"}),Ye("span",Vx,on(Ze(t)("favorites")),1)]),_:1},8,["class","aria-label"]),ze(c,{to:{name:"settings-about"},class:xn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="settings"}]),"aria-label":Ze(t)("settings")},{default:Jt(()=>[ze(f,{class:"w-6 h-6 mb-1"}),Ye("span",Wx,on(Ze(t)("settings")),1)]),_:1},8,["class","aria-label"])])])}}});var ac={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!t.OffscreenCanvas)return!1;var m=new OffscreenCanvas(1,1),A=m.getContext("2d");A.fillRect(0,0,1,1);var oe=m.transferToImageBitmap();try{A.createPattern(oe,"no-repeat")}catch{return!1}return!0}();function c(){}function l(m){var A=n.exports.Promise,oe=A!==void 0?A:t.Promise;return typeof oe=="function"?new oe(m):(m(c,c),null)}var u=function(m,A){return{transform:function(oe){if(m)return oe;if(A.has(oe))return A.get(oe);var v=new OffscreenCanvas(oe.width,oe.height),me=v.getContext("2d");return me.drawImage(oe,0,0),A.set(oe,v),v},clear:function(){A.clear()}}}(a,new Map),f=function(){var m=Math.floor(16.666666666666668),A,oe,v={},me=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(A=function(Ee){var fe=Math.random();return v[fe]=requestAnimationFrame(function F(K){me===K||me+m-1<K?(me=K,delete v[fe],Ee()):v[fe]=requestAnimationFrame(F)}),fe},oe=function(Ee){v[Ee]&&cancelAnimationFrame(v[Ee])}):(A=function(Ee){return setTimeout(Ee,m)},oe=function(Ee){return clearTimeout(Ee)}),{frame:A,cancel:oe}}(),h=function(){var m,A,oe={};function v(me){function Ee(fe,F){me.postMessage({options:fe||{},callback:F})}me.init=function(F){var K=F.transferControlToOffscreen();me.postMessage({canvas:K},[K])},me.fire=function(F,K,B){if(A)return Ee(F,null),A;var ee=Math.random().toString(36).slice(2);return A=l(function(pe){function Se(y){y.data.callback===ee&&(delete oe[ee],me.removeEventListener("message",Se),A=null,u.clear(),B(),pe())}me.addEventListener("message",Se),Ee(F,ee),oe[ee]=Se.bind(null,{data:{callback:ee}})}),A},me.reset=function(){me.postMessage({reset:!0});for(var F in oe)oe[F](),delete oe[F]}}return function(){if(m)return m;if(!r&&i){var me=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{m=new Worker(URL.createObjectURL(new Blob([me])))}catch(Ee){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",Ee),null}v(m)}return m}}(),d={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(m,A){return A?A(m):m}function P(m){return m!=null}function L(m,A,oe){return E(m&&P(m[A])?m[A]:d[A],oe)}function I(m){return m<0?0:Math.floor(m)}function N(m,A){return Math.floor(Math.random()*(A-m))+m}function O(m){return parseInt(m,16)}function M(m){return m.map(U)}function U(m){var A=String(m).replace(/[^0-9a-f]/gi,"");return A.length<6&&(A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]),{r:O(A.substring(0,2)),g:O(A.substring(2,4)),b:O(A.substring(4,6))}}function k(m){var A=L(m,"origin",Object);return A.x=L(A,"x",Number),A.y=L(A,"y",Number),A}function V(m){m.width=document.documentElement.clientWidth,m.height=document.documentElement.clientHeight}function X(m){var A=m.getBoundingClientRect();m.width=A.width,m.height=A.height}function Q(m){var A=document.createElement("canvas");return A.style.position="fixed",A.style.top="0px",A.style.left="0px",A.style.pointerEvents="none",A.style.zIndex=m,A}function ae(m,A,oe,v,me,Ee,fe,F,K){m.save(),m.translate(A,oe),m.rotate(Ee),m.scale(v,me),m.arc(0,0,1,fe,F,K),m.restore()}function se(m){var A=m.angle*(Math.PI/180),oe=m.spread*(Math.PI/180);return{x:m.x,y:m.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:m.startVelocity*.5+Math.random()*m.startVelocity,angle2D:-A+(.5*oe-Math.random()*oe),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:m.color,shape:m.shape,tick:0,totalTicks:m.ticks,decay:m.decay,drift:m.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:m.gravity*3,ovalScalar:.6,scalar:m.scalar,flat:m.flat}}function Z(m,A){A.x+=Math.cos(A.angle2D)*A.velocity+A.drift,A.y+=Math.sin(A.angle2D)*A.velocity+A.gravity,A.velocity*=A.decay,A.flat?(A.wobble=0,A.wobbleX=A.x+10*A.scalar,A.wobbleY=A.y+10*A.scalar,A.tiltSin=0,A.tiltCos=0,A.random=1):(A.wobble+=A.wobbleSpeed,A.wobbleX=A.x+10*A.scalar*Math.cos(A.wobble),A.wobbleY=A.y+10*A.scalar*Math.sin(A.wobble),A.tiltAngle+=.1,A.tiltSin=Math.sin(A.tiltAngle),A.tiltCos=Math.cos(A.tiltAngle),A.random=Math.random()+2);var oe=A.tick++/A.totalTicks,v=A.x+A.random*A.tiltCos,me=A.y+A.random*A.tiltSin,Ee=A.wobbleX+A.random*A.tiltCos,fe=A.wobbleY+A.random*A.tiltSin;if(m.fillStyle="rgba("+A.color.r+", "+A.color.g+", "+A.color.b+", "+(1-oe)+")",m.beginPath(),o&&A.shape.type==="path"&&typeof A.shape.path=="string"&&Array.isArray(A.shape.matrix))m.fill(ve(A.shape.path,A.shape.matrix,A.x,A.y,Math.abs(Ee-v)*.1,Math.abs(fe-me)*.1,Math.PI/10*A.wobble));else if(A.shape.type==="bitmap"){var F=Math.PI/10*A.wobble,K=Math.abs(Ee-v)*.1,B=Math.abs(fe-me)*.1,ee=A.shape.bitmap.width*A.scalar,pe=A.shape.bitmap.height*A.scalar,Se=new DOMMatrix([Math.cos(F)*K,Math.sin(F)*K,-Math.sin(F)*B,Math.cos(F)*B,A.x,A.y]);Se.multiplySelf(new DOMMatrix(A.shape.matrix));var y=m.createPattern(u.transform(A.shape.bitmap),"no-repeat");y.setTransform(Se),m.globalAlpha=1-oe,m.fillStyle=y,m.fillRect(A.x-ee/2,A.y-pe/2,ee,pe),m.globalAlpha=1}else if(A.shape==="circle")m.ellipse?m.ellipse(A.x,A.y,Math.abs(Ee-v)*A.ovalScalar,Math.abs(fe-me)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI):ae(m,A.x,A.y,Math.abs(Ee-v)*A.ovalScalar,Math.abs(fe-me)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI);else if(A.shape==="star")for(var S=Math.PI/2*3,D=4*A.scalar,W=8*A.scalar,z=A.x,ne=A.y,ce=5,_=Math.PI/ce;ce--;)z=A.x+Math.cos(S)*W,ne=A.y+Math.sin(S)*W,m.lineTo(z,ne),S+=_,z=A.x+Math.cos(S)*D,ne=A.y+Math.sin(S)*D,m.lineTo(z,ne),S+=_;else m.moveTo(Math.floor(A.x),Math.floor(A.y)),m.lineTo(Math.floor(A.wobbleX),Math.floor(me)),m.lineTo(Math.floor(Ee),Math.floor(fe)),m.lineTo(Math.floor(v),Math.floor(A.wobbleY));return m.closePath(),m.fill(),A.tick<A.totalTicks}function we(m,A,oe,v,me){var Ee=A.slice(),fe=m.getContext("2d"),F,K,B=l(function(ee){function pe(){F=K=null,fe.clearRect(0,0,v.width,v.height),u.clear(),me(),ee()}function Se(){r&&!(v.width===s.width&&v.height===s.height)&&(v.width=m.width=s.width,v.height=m.height=s.height),!v.width&&!v.height&&(oe(m),v.width=m.width,v.height=m.height),fe.clearRect(0,0,v.width,v.height),Ee=Ee.filter(function(y){return Z(fe,y)}),Ee.length?F=f.frame(Se):pe()}F=f.frame(Se),K=pe});return{addFettis:function(ee){return Ee=Ee.concat(ee),B},canvas:m,promise:B,reset:function(){F&&f.cancel(F),K&&K()}}}function Ne(m,A){var oe=!m,v=!!L(A||{},"resize"),me=!1,Ee=L(A,"disableForReducedMotion",Boolean),fe=i&&!!L(A||{},"useWorker"),F=fe?h():null,K=oe?V:X,B=m&&F?!!m.__confetti_initialized:!1,ee=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,pe;function Se(S,D,W){for(var z=L(S,"particleCount",I),ne=L(S,"angle",Number),ce=L(S,"spread",Number),_=L(S,"startVelocity",Number),x=L(S,"decay",Number),T=L(S,"gravity",Number),G=L(S,"drift",Number),ie=L(S,"colors",M),te=L(S,"ticks",Number),j=L(S,"shapes"),q=L(S,"scalar"),_e=!!L(S,"flat"),ke=k(S),Me=z,Je=[],rt=m.width*ke.x,Qt=m.height*ke.y;Me--;)Je.push(se({x:rt,y:Qt,angle:ne,spread:ce,startVelocity:_,color:ie[Me%ie.length],shape:j[N(0,j.length)],ticks:te,decay:x,gravity:T,drift:G,scalar:q,flat:_e}));return pe?pe.addFettis(Je):(pe=we(m,Je,K,D,W),pe.promise)}function y(S){var D=Ee||L(S,"disableForReducedMotion",Boolean),W=L(S,"zIndex",Number);if(D&&ee)return l(function(_){_()});oe&&pe?m=pe.canvas:oe&&!m&&(m=Q(W),document.body.appendChild(m)),v&&!B&&K(m);var z={width:m.width,height:m.height};F&&!B&&F.init(m),B=!0,F&&(m.__confetti_initialized=!0);function ne(){if(F){var _={getBoundingClientRect:function(){if(!oe)return m.getBoundingClientRect()}};K(_),F.postMessage({resize:{width:_.width,height:_.height}});return}z.width=z.height=null}function ce(){pe=null,v&&(me=!1,t.removeEventListener("resize",ne)),oe&&m&&(document.body.contains(m)&&document.body.removeChild(m),m=null,B=!1)}return v&&!me&&(me=!0,t.addEventListener("resize",ne,!1)),F?F.fire(S,z,ce):Se(S,z,ce)}return y.reset=function(){F&&F.reset(),pe&&pe.reset()},y}var Oe;function Te(){return Oe||(Oe=Ne(null,{useWorker:!0,resize:!0})),Oe}function ve(m,A,oe,v,me,Ee,fe){var F=new Path2D(m),K=new Path2D;K.addPath(F,new DOMMatrix(A));var B=new Path2D;return B.addPath(K,new DOMMatrix([Math.cos(fe)*me,Math.sin(fe)*me,-Math.sin(fe)*Ee,Math.cos(fe)*Ee,oe,v])),B}function Ce(m){if(!o)throw new Error("path confetti are not supported in this browser");var A,oe;typeof m=="string"?A=m:(A=m.path,oe=m.matrix);var v=new Path2D(A),me=document.createElement("canvas"),Ee=me.getContext("2d");if(!oe){for(var fe=1e3,F=fe,K=fe,B=0,ee=0,pe,Se,y=0;y<fe;y+=2)for(var S=0;S<fe;S+=2)Ee.isPointInPath(v,y,S,"nonzero")&&(F=Math.min(F,y),K=Math.min(K,S),B=Math.max(B,y),ee=Math.max(ee,S));pe=B-F,Se=ee-K;var D=10,W=Math.min(D/pe,D/Se);oe=[W,0,0,W,-Math.round(pe/2+F)*W,-Math.round(Se/2+K)*W]}return{type:"path",path:A,matrix:oe}}function qe(m){var A,oe=1,v="#000000",me='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof m=="string"?A=m:(A=m.text,oe="scalar"in m?m.scalar:oe,me="fontFamily"in m?m.fontFamily:me,v="color"in m?m.color:v);var Ee=10*oe,fe=""+Ee+"px "+me,F=new OffscreenCanvas(Ee,Ee),K=F.getContext("2d");K.font=fe;var B=K.measureText(A),ee=Math.ceil(B.actualBoundingBoxRight+B.actualBoundingBoxLeft),pe=Math.ceil(B.actualBoundingBoxAscent+B.actualBoundingBoxDescent),Se=2,y=B.actualBoundingBoxLeft+Se,S=B.actualBoundingBoxAscent+Se;ee+=Se+Se,pe+=Se+Se,F=new OffscreenCanvas(ee,pe),K=F.getContext("2d"),K.font=fe,K.fillStyle=v,K.fillText(A,y,S);var D=1/oe;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[D,0,0,D,-ee*D/2,-pe*D/2]}}n.exports=function(){return Te().apply(this,arguments)},n.exports.reset=function(){Te().reset()},n.exports.create=Ne,n.exports.shapeFromPath=Ce,n.exports.shapeFromText=qe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ac,!1);const Kx=ac.exports;ac.exports.create;const lu=atob("YW5kcm9pZEBqdTYwLmRl"),AE="04.08.2024 14:38:58",IE="https://boomerang.ju60.de/share/z8KAHmGY/Kiel%20Live",Rh="https://tiles.ju60.de",PE=`${Rh}/styles/gray-matter/style.json`,TE=`${Rh}/styles/bright-matter/style.json`,Jx="wss://api.kiel-live.ju60.de/",Yx={class:"flex flex-col text-center gap-4"},Xx={class:"text-xl mb-2"},Qx=["href"],Zx={href:"https://www.instagram.com/kiel.live/",target:"_blank",class:"underline"},ew={class:"flex flex-row w-full justify-center mt-8"},uu="2.0.0",tw=mn({__name:"UpdateNotice",setup(e){const t=Ns(`${Fs}.version`,"2.0.0"),n=We(()=>t.value!==null&&t.value!==uu),{t:r}=Sr();zs(async()=>{const i=localStorage.getItem("version");i!==null&&(t.value=i,localStorage.removeItem("version"))}),Lt(n,()=>{if(!n.value)return;const i=3*1e3,o=Date.now()+i,a=setInterval(()=>{if(o-Date.now()<=0){clearInterval(a);return}Kx({particleCount:100,spread:70,origin:{y:1.1},startVelocity:90,zIndex:2e3})},250)},{immediate:!0});function s(){t.value=uu}return(i,o)=>{const a=to("i18n-t");return pt(),wr(wh,{show:n.value,onClose:s},{default:Jt(()=>[Ye("div",Yx,[Ye("span",Xx,on(Ze(r)("update_title")),1),Ye("span",null,on(Ze(r)("update_msg")),1),ze(a,{keypath:"feedback",tag:"span"},{email:Jt(()=>[Ye("a",{href:`mailto:${Ze(lu)}`,class:"underline"},on(Ze(lu)),9,Qx)]),instagram:Jt(()=>[Ye("a",Zx,on(Ze(r)("instagram")),1)]),_:1})]),Ye("div",ew,[ze(xh,{onClick:s},{default:Jt(()=>[Ga(on(Ze(r)("nice")),1)]),_:1})])]),_:1},8,["show"])}}}),nw=e=>tg({storageKey:`${Fs}.theme`,...e}),rw={class:"app flex flex-col m-auto w-full h-full bg-white text-black dark:bg-dark-400 dark:text-gray-300"},sw={class:"flex flex-grow min-h-0"},iw=mn({__name:"App",setup(e){nw();const{locale:t}=Sr();return Lt(t,()=>{document.documentElement.setAttribute("lang",t.value)},{immediate:!0}),(n,r)=>{const s=to("router-view"),i=my;return pt(),Sn("div",rw,[Ye("main",sw,[ze(s)]),ze(Gx,{class:"mt-auto flex-shrink-0"}),ze(tw),ze(i)])}}}),ow=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},aw=ow(iw,[["__scopeId","data-v-28f57479"]]),cw="modulepreload",lw=function(e){return"/"+e},fu={},tn=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=lw(a),a in fu)return;fu[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":cw,c||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),c)return new Promise((f,h)=>{u.addEventListener("load",f),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},uw=(e,t,n)=>{const r=e[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})};function fw(){return navigator.language.split("-")[0]}const Mh=fw(),Lh=Xb({legacy:!1,locale:Mh}),hw=async e=>{const{default:t}=await uw(Object.assign({"./locales/de.json":()=>tn(()=>import("./de-B-BehOFm.js"),[]),"./locales/en.json":()=>tn(()=>import("./en-Cngb1GR8.js"),[])}),`./locales/${e}.json`,3);return Lh.global.setLocaleMessage(e,t),Yr()};hw(Mh);let Lo=!0;const dw=[{path:"/",name:"home",component:()=>tn(()=>import("./Home-9BF4fQiD.js"),__vite__mapDeps([0,1,2]))},{path:"/map/:markerType/:markerId",name:"map-marker",component:()=>tn(()=>import("./Home-9BF4fQiD.js"),__vite__mapDeps([0,1,2])),props:!0},{path:"/search",name:"search",component:()=>tn(()=>import("./Home-9BF4fQiD.js"),__vite__mapDeps([0,1,2]))},{path:"/favorites",name:"favorites",component:()=>tn(()=>import("./Home-9BF4fQiD.js"),__vite__mapDeps([0,1,2]))},{path:"/settings/about",name:"settings-about",component:()=>tn(()=>import("./About-CL7R6oQV.js"),__vite__mapDeps([3,1,4])),meta:{settings:!0}},{path:"/settings/changelog",name:"settings-changelog",component:()=>tn(()=>import("./Changelog-CpiSnnLL.js"),__vite__mapDeps([5,4])),meta:{settings:!0}},{path:"/settings/settings",name:"settings-settings",component:()=>tn(()=>import("./Settings-ogcWmvv1.js"),__vite__mapDeps([6,4])),meta:{settings:!0}},{path:"/settings/contact",name:"settings-contact",component:()=>tn(()=>import("./Contact-BmppTCHn.js"),__vite__mapDeps([7,1,4])),meta:{settings:!0}},{path:"/contact",name:"contact",redirect:{name:"settings-contact"}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>tn(()=>import("./NotFound-D2RZ3ij1.js"),[])}],Fh=$x({history:dx(),routes:dw}),{liteMode:mw}=Eh();Fh.beforeEach((e,t,n)=>{if(e.name==="home"&&(Lo||mw.value)){Lo=!1,n({name:"favorites"});return}Lo=!1,n()});const Vt=new Uint8Array(0),kr=new TextEncoder,Ht=new TextDecoder;function pw(...e){let t=0;for(let s=0;s<e.length;s++)t+=e[s].length;const n=new Uint8Array(t);let r=0;for(let s=0;s<e.length;s++)n.set(e[s],r),r+=e[s].length;return n}function ws(...e){const t=[];for(let n=0;n<e.length;n++)t.push(kr.encode(e[n]));return t.length===0?Vt:t.length===1?t[0]:pw(...t)}function hu(e){return!e||e.length===0?"":Ht.decode(e)}const du="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",mu=36,gw=0xcfd41b9100000,pu=33,_w=333,gu=22;function bw(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(Math.random()*255)}function yw(e){var t;(t=globalThis==null?void 0:globalThis.crypto)!=null&&t.getRandomValues?globalThis.crypto.getRandomValues(e):bw(e)}class xw{constructor(){g(this,"buf");g(this,"seq");g(this,"inc");g(this,"inited");this.buf=new Uint8Array(gu),this.inited=!1}init(){this.inited=!0,this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(Math.random()*gw),this.inc=Math.floor(Math.random()*(_w-pu)+pu)}setPre(){const t=new Uint8Array(12);yw(t);for(let n=0;n<12;n++){const r=t[n]%36;this.buf[n]=du.charCodeAt(r)}}fillSeq(){let t=this.seq;for(let n=gu-1;n>=12;n--)this.buf[n]=du.charCodeAt(t%mu),t=Math.floor(t/mu)}next(){return this.inited||this.init(),this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}const Cr=new xw;var an;(function(e){e.Disconnect="disconnect",e.Reconnect="reconnect",e.Update="update",e.LDM="ldm",e.Error="error"})(an||(an={}));var $r;(function(e){e.Reconnecting="reconnecting",e.PingTimer="pingTimer",e.StaleConnection="staleConnection",e.ClientInitiatedReconnect="client initiated reconnect"})($r||($r={}));var ue;(function(e){e.ApiError="BAD API",e.BadAuthentication="BAD_AUTHENTICATION",e.BadCreds="BAD_CREDS",e.BadHeader="BAD_HEADER",e.BadJson="BAD_JSON",e.BadPayload="BAD_PAYLOAD",e.BadSubject="BAD_SUBJECT",e.Cancelled="CANCELLED",e.ConnectionClosed="CONNECTION_CLOSED",e.ConnectionDraining="CONNECTION_DRAINING",e.ConnectionRefused="CONNECTION_REFUSED",e.ConnectionTimeout="CONNECTION_TIMEOUT",e.Disconnect="DISCONNECT",e.InvalidOption="INVALID_OPTION",e.InvalidPayload="INVALID_PAYLOAD",e.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",e.NoResponders="503",e.NotFunction="NOT_FUNC",e.RequestError="REQUEST_ERROR",e.ServerOptionNotAvailable="SERVER_OPT_NA",e.SubClosed="SUB_CLOSED",e.SubDraining="SUB_DRAINING",e.Timeout="TIMEOUT",e.Tls="TLS",e.Unknown="UNKNOWN_ERROR",e.WssRequired="WSS_REQUIRED",e.JetStreamInvalidAck="JESTREAM_INVALID_ACK",e.JetStream404NoMessages="404",e.JetStream408RequestTimeout="408",e.JetStream409MaxAckPendingExceeded="409",e.JetStream409="409",e.JetStreamNotEnabled="503",e.JetStreamIdleHeartBeat="IDLE_HEARTBEAT",e.AuthorizationViolation="AUTHORIZATION_VIOLATION",e.AuthenticationExpired="AUTHENTICATION_EXPIRED",e.ProtocolError="NATS_PROTOCOL_ERR",e.PermissionsViolation="PERMISSIONS_VIOLATION",e.AuthenticationTimeout="AUTHENTICATION_TIMEOUT"})(ue||(ue={}));function ww(e){return typeof e.code=="string"}class jh{constructor(){g(this,"messages");this.messages=new Map,this.messages.set(ue.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(ue.BadJson,"Bad JSON"),this.messages.set(ue.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(t){return Ew.getMessage(t)}getMessage(t){return this.messages.get(t)||t}}const Ew=new jh;class ge extends Error{constructor(n,r,s){super(n);g(this,"name");g(this,"message");g(this,"code");g(this,"permissionContext");g(this,"chainedError");g(this,"api_error");this.name="NatsError",this.message=n,this.code=r,this.chainedError=s}static errorForCode(n,r){const s=jh.getMessage(n);return new ge(s,n,r)}isAuthError(){return this.code===ue.AuthenticationExpired||this.code===ue.AuthorizationViolation}isAuthTimeout(){return this.code===ue.AuthenticationTimeout}isPermissionError(){return this.code===ue.PermissionsViolation}isProtocolError(){return this.code===ue.ProtocolError}isJetStreamError(){return this.api_error!==void 0}jsError(){return this.api_error?this.api_error:null}}var Dt;(function(e){e[e.Exact=0]="Exact",e[e.CanonicalMIME=1]="CanonicalMIME",e[e.IgnoreCase=2]="IgnoreCase"})(Dt||(Dt={}));var ln;(function(e){e.Timer="timer",e.Count="count",e.JitterTimer="jitterTimer",e.SentinelMsg="sentinelMsg"})(ln||(ln={}));var Es;(function(e){e.STATS="io.nats.micro.v1.stats_response",e.INFO="io.nats.micro.v1.info_response",e.PING="io.nats.micro.v1.ping_response"})(Es||(Es={}));const ji="Nats-Service-Error",$i="Nats-Service-Error-Code";class Di extends Error{constructor(n,r){super(r);g(this,"code");this.code=n}static isServiceError(n){return Di.toServiceError(n)!==null}static toServiceError(n){var s,i;const r=((s=n==null?void 0:n.headers)==null?void 0:s.get($i))||"";if(r!==""){const o=parseInt(r)||400,a=((i=n==null?void 0:n.headers)==null?void 0:i.get(ji))||"";return new Di(o,a.length?a:r)}return null}}function En(e=""){if(e=e||"_INBOX",typeof e!="string")throw new Error("prefix must be a string");return e.split(".").forEach(t=>{if(t==="*"||t===">")throw new Error(`inbox prefixes cannot have wildcards '${e}'`)}),`${e}.${Cr.next()}`}const pa="127.0.0.1";var Xn;(function(e){e.PING="PING",e.STATS="STATS",e.INFO="INFO"})(Xn||(Xn={}));function mo(e,...t){for(let n=0;n<t.length;n++){const r=t[n];Object.keys(r).forEach(function(s){e[s]=r[s]})}return e}function ci(e){return Ht.decode(e).replace(/\n/g,"").replace(/\r/g,"")}function Gr(e,t=!0){const n=t?ge.errorForCode(ue.Timeout):null;let r,s;const i=new Promise((o,a)=>{r={cancel:()=>{s&&clearTimeout(s)}},s=setTimeout(()=>{a(n===null?ge.errorForCode(ue.Timeout):n)},e)});return Object.assign(i,r)}function Qr(e=0){let t;const n=new Promise(r=>{const s=setTimeout(()=>{r()},e);t={cancel:()=>{s&&clearTimeout(s)}}});return Object.assign(n,t)}function Xe(){let e={};const t=new Promise((n,r)=>{e={resolve:n,reject:r}});return Object.assign(t,e)}function $h(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function vw(e){return e===0?0:Math.floor(e/2+Math.random()*e)}function cc(e=[0,250,250,500,500,3e3,5e3]){Array.isArray(e)||(e=[0,250,250,500,500,3e3,5e3]);const t=e.length-1;return{backoff(n){return vw(n>t?e[t]:e[n])}}}function tt(e){return e*1e6}function lc(e){return Math.floor(e/1e6)}function _u(e){let r=!0;const s=new Array(e.length);for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o===58||o<33||o>126)throw new ge(`'${e[i]}' is not a valid character for a header key`,ue.BadHeader);r&&97<=o&&o<=122?o-=32:!r&&65<=o&&o<=90&&(o+=32),s[i]=o,r=o==45}return String.fromCharCode(...s)}function Fn(e=0,t=""){if(e===0&&t!==""||e>0&&t==="")throw new Error("setting status requires both code and description");return new Qn(e,t)}const Fo="NATS/1.0";class Qn{constructor(t=0,n=""){g(this,"_code");g(this,"headers");g(this,"_description");this._code=t,this._description=n,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(t){if(t&&this.headers.size===t.headers.size&&this._code===t._code){for(const[n,r]of this.headers){const s=t.values(n);if(r.length!==s.length)return!1;const i=[...r].sort(),o=[...s].sort();for(let a=0;a<i.length;a++)if(i[a]!==o[a])return!1}return!0}return!1}static decode(t){const n=new Qn,s=Ht.decode(t).split(`\r
`),i=s[0];if(i!==Fo){let o=i.replace(Fo,"").trim();if(o.length>0){n._code=parseInt(o,10),isNaN(n._code)&&(n._code=0);const a=n._code.toString();o=o.replace(a,""),n._description=o.trim()}}return s.length>=1&&s.slice(1).map(o=>{if(o){const a=o.indexOf(":");if(a>-1){const c=o.slice(0,a),l=o.slice(a+1).trim();n.append(c,l)}}}),n}toString(){if(this.headers.size===0&&this._code===0)return"";let t=Fo;this._code>0&&this._description!==""&&(t+=` ${this._code} ${this._description}`);for(const[n,r]of this.headers)for(let s=0;s<r.length;s++)t=`${t}\r
${n}: ${r[s]}`;return`${t}\r
\r
`}encode(){return kr.encode(this.toString())}static validHeaderValue(t){if(/[\r\n]/.test(t))throw new ge("invalid header value - \\r and \\n are not allowed.",ue.BadHeader);return t.trim()}keys(){const t=[];for(const n of this.headers.keys())t.push(n);return t}findKeys(t,n=Dt.Exact){const r=this.keys();switch(n){case Dt.Exact:return r.filter(s=>s===t);case Dt.CanonicalMIME:return t=_u(t),r.filter(s=>s===t);default:{const s=t.toLowerCase();return r.filter(i=>s===i.toLowerCase())}}}get(t,n=Dt.Exact){const r=this.findKeys(t,n);if(r.length){const s=this.headers.get(r[0]);if(s)return Array.isArray(s)?s[0]:s}return""}last(t,n=Dt.Exact){const r=this.findKeys(t,n);if(r.length){const s=this.headers.get(r[0]);if(s)return Array.isArray(s)?s[s.length-1]:s}return""}has(t,n=Dt.Exact){return this.findKeys(t,n).length>0}set(t,n,r=Dt.Exact){this.delete(t,r),this.append(t,n,r)}append(t,n,r=Dt.Exact){const s=_u(t);r===Dt.CanonicalMIME&&(t=s);const i=this.findKeys(t,r);t=i.length>0?i[0]:t;const o=Qn.validHeaderValue(n);let a=this.headers.get(t);a||(a=[],this.headers.set(t,a)),a.push(o)}values(t,n=Dt.Exact){const r=[];return this.findKeys(t,n).forEach(i=>{const o=this.headers.get(i);o&&r.push(...o)}),r}delete(t,n=Dt.Exact){this.findKeys(t,n).forEach(s=>{this.headers.delete(s)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){const t={};return this.keys().forEach(n=>{t[n]=this.values(n)}),t}get code(){return this._code}get description(){return this._description}static fromRecord(t){const n=new Qn;for(const r in t)n.headers.set(r,t[r]);return n}}function ga(){return{encode(e){return kr.encode(e)},decode(e){return Ht.decode(e)}}}function un(e){return{encode(t){try{return t===void 0&&(t=null),kr.encode(JSON.stringify(t))}catch(n){throw ge.errorForCode(ue.BadJson,n)}},decode(t){try{return JSON.parse(Ht.decode(t),e)}catch(n){throw ge.errorForCode(ue.BadJson,n)}}}}function Dh(e){var t;return e&&e.data.length===0&&((t=e.headers)==null?void 0:t.code)===503?ge.errorForCode(ue.NoResponders):null}class uc{constructor(t,n,r){g(this,"_headers");g(this,"_msg");g(this,"_rdata");g(this,"_reply");g(this,"_subject");g(this,"publisher");this._msg=t,this._rdata=n,this.publisher=r}get subject(){return this._subject?this._subject:(this._subject=Ht.decode(this._msg.subject),this._subject)}get reply(){return this._reply?this._reply:(this._reply=Ht.decode(this._msg.reply),this._reply)}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const t=this._rdata.subarray(0,this._msg.hdr);this._headers=Qn.decode(t)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(t=Vt,n){return this.reply?(this.publisher.publish(this.reply,t,n),!0):!1}size(){var s;const t=this._msg.subject.length,n=((s=this._msg.reply)==null?void 0:s.length)||0,r=this._msg.size===-1?0:this._msg.size;return t+n+r}json(t){return un(t).decode(this.data)}string(){return Ht.decode(this.data)}requestInfo(){var n;const t=(n=this.headers)==null?void 0:n.get("Nats-Request-Info");return t?JSON.parse(t,function(r,s){return(r==="start"||r==="stop")&&s!==""?new Date(Date.parse(s)):s}):null}}g(uc,"jc");function Dr(e){return fc("durable",e)}function It(e){return fc("stream",e)}function fc(e,t=""){if(t==="")throw Error(`${e} name required`);return[".","*",">","/","\\"," ","	",`
`,"\r"].forEach(r=>{if(t.indexOf(r)!==-1){switch(r){case`
`:r="\\n";break;case"\r":r="\\r";break;case"	":r="\\t";break}throw Error(`invalid ${e} name - ${e} name cannot contain '${r}'`)}}),""}function ls(e,t=""){if(t==="")throw Error(`${e} name required`);const n=Sw(t);if(n.length)throw new Error(`invalid ${e} name - ${e} name ${n}`)}function Sw(e=""){if(e==="")throw Error("name required");const t=/^[-\w]+$/g;if(e.match(t)===null){for(const r of e.split(""))if(r.match(t)===null)return`cannot contain '${r}'`}return""}function _a(e){if(e.data.length>0)return!1;const t=e.headers;return t?t.code>=100&&t.code<200:!1}function ba(e){var t;return _a(e)&&((t=e.headers)==null?void 0:t.description)==="Idle Heartbeat"}function kw(e,t,n){const r=Fn(e,t),s={hdr:1,sid:0,size:0},i=new uc(s,Vt,{});return i._headers=r,i._subject=n,i}function Ur(e){if(e.data.length!==0)return null;const t=e.headers;return t?Uh(t.code,t.description):null}var Wt;(function(e){e.MaxBatchExceeded="exceeded maxrequestbatch of",e.MaxExpiresExceeded="exceeded maxrequestexpires of",e.MaxBytesExceeded="exceeded maxrequestmaxbytes of",e.MaxMessageSizeExceeded="message size exceeds maxbytes",e.PushConsumer="consumer is push based",e.MaxWaitingExceeded="exceeded maxwaiting",e.IdleHeartbeatMissed="idle heartbeats missed",e.ConsumerDeleted="consumer deleted"})(Wt||(Wt={}));function Cw(e){return e.code!==ue.JetStream409?!1:[Wt.MaxBatchExceeded,Wt.MaxExpiresExceeded,Wt.MaxBytesExceeded,Wt.MaxMessageSizeExceeded,Wt.PushConsumer,Wt.IdleHeartbeatMissed,Wt.ConsumerDeleted].find(n=>e.message.indexOf(n)!==-1)!==void 0}function Uh(e,t=""){if(e<300)return null;switch(t=t.toLowerCase(),e){case 404:return new ge(t,ue.JetStream404NoMessages);case 408:return new ge(t,ue.JetStream408RequestTimeout);case 409:{const n=t.startsWith(Wt.IdleHeartbeatMissed)?ue.JetStreamIdleHeartBeat:ue.JetStream409;return new ge(t,n)}case 503:return ge.errorForCode(ue.JetStreamNotEnabled,new Error(t));default:return t===""&&(t=ue.Unknown),new ge(t,`${e}`)}}class ht{constructor(){g(this,"inflight");g(this,"processed");g(this,"received");g(this,"noIterator");g(this,"iterClosed");g(this,"done");g(this,"signal");g(this,"yields");g(this,"filtered");g(this,"pendingFiltered");g(this,"ingestionFilterFn");g(this,"protocolFilterFn");g(this,"dispatchedFn");g(this,"ctx");g(this,"_data");g(this,"err");g(this,"time");g(this,"yielding");this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=Xe(),this.yields=[],this.iterClosed=Xe(),this.time=0,this.yielding=!1}[Symbol.asyncIterator](){return this.iterate()}push(t){if(this.done)return;if(typeof t=="function"){this.yields.push(t),this.signal.resolve();return}const{ingest:n,protocol:r}=this.ingestionFilterFn?this.ingestionFilterFn(t,this.ctx||this):{ingest:!0,protocol:!1};n&&(r&&(this.filtered++,this.pendingFiltered++),this.yields.push(t),this.signal.resolve())}async*iterate(){if(this.noIterator)throw new ge("unsupported iterator",ue.ApiError);if(this.yielding)throw new ge("already yielding",ue.ApiError);this.yielding=!0;try{for(;;){if(this.yields.length===0&&await this.signal,this.err)throw this.err;const t=this.yields;this.inflight=t.length,this.yields=[];for(let n=0;n<t.length;n++){if(typeof t[n]=="function"){const s=t[n];try{s()}catch(i){throw i}if(this.err)throw this.err;continue}if(this.protocolFilterFn?this.protocolFilterFn(t[n]):!0){this.processed++;const s=Date.now();yield t[n],this.time=Date.now()-s,this.dispatchedFn&&t[n]&&this.dispatchedFn(t[n])}else this.pendingFiltered--;this.inflight--}if(this.done)break;this.yields.length===0&&(t.length=0,this.yields=t,this.signal=Xe())}}finally{this.stop()}}stop(t){this.done||(this.err=t,this.done=!0,this.signal.resolve(),this.iterClosed.resolve(t))}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}class hc{constructor(t,n,r={maxOut:2}){g(this,"interval");g(this,"maxOut");g(this,"cancelAfter");g(this,"timer");g(this,"autoCancelTimer");g(this,"last");g(this,"missed");g(this,"count");g(this,"callback");this.interval=t,this.maxOut=(r==null?void 0:r.maxOut)||2,this.cancelAfter=(r==null?void 0:r.cancelAfter)||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=n,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0,this.missed=0}work(){this.last=Date.now(),this.missed=0}_change(t,n=0,r=2){this.interval=t,this.maxOut=r,this.cancelAfter=n,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.last>this.interval&&this.missed++,this.missed>=this.maxOut)try{this.callback(this.missed)===!0&&this.cancel()}catch(t){console.log(t)}},this.interval)}}var ya;(function(e){e.Limits="limits",e.Interest="interest",e.Workqueue="workqueue"})(ya||(ya={}));var Ds;(function(e){e.Old="old",e.New="new"})(Ds||(Ds={}));var xa;(function(e){e.File="file",e.Memory="memory"})(xa||(xa={}));var st;(function(e){e.All="all",e.Last="last",e.New="new",e.StartSequence="by_start_sequence",e.StartTime="by_start_time",e.LastPerSubject="last_per_subject"})(st||(st={}));var ut;(function(e){e.None="none",e.All="all",e.Explicit="explicit",e.NotSet=""})(ut||(ut={}));var Kr;(function(e){e.Instant="instant",e.Original="original"})(Kr||(Kr={}));var tr;(function(e){e.None="none",e.S2="s2"})(tr||(tr={}));var Ui;(function(e){e.CreateOrUpdate="",e.Update="update",e.Create="create"})(Ui||(Ui={}));function Ow(e,t={}){return Object.assign({name:e,deliver_policy:st.All,ack_policy:ut.Explicit,ack_wait:tt(30*1e3),replay_policy:Kr.Instant},t)}var bu;(function(e){e.API="api_audit",e.StreamAction="stream_action",e.ConsumerAction="consumer_action",e.SnapshotCreate="snapshot_create",e.SnapshotComplete="snapshot_complete",e.RestoreCreate="restore_create",e.RestoreComplete="restore_complete",e.MaxDeliver="max_deliver",e.Terminated="terminated",e.Ack="consumer_ack",e.StreamLeaderElected="stream_leader_elected",e.StreamQuorumLost="stream_quorum_lost",e.ConsumerLeaderElected="consumer_leader_elected",e.ConsumerQuorumLost="consumer_quorum_lost"})(bu||(bu={}));var Tt;(function(e){e.StreamSourceHdr="Nats-Stream-Source",e.LastConsumerSeqHdr="Nats-Last-Consumer",e.LastStreamSeqHdr="Nats-Last-Stream",e.ConsumerStalledHdr="Nats-Consumer-Stalled",e.MessageSizeHdr="Nats-Msg-Size",e.RollupHdr="Nats-Rollup",e.RollupValueSubject="sub",e.RollupValueAll="all",e.PendingMessagesHdr="Nats-Pending-Messages",e.PendingBytesHdr="Nats-Pending-Bytes"})(Tt||(Tt={}));var nn;(function(e){e.LastValue="",e.AllHistory="history",e.UpdatesOnly="updates"})(nn||(nn={}));var Rr;(function(e){e.Stream="Nats-Stream",e.Sequence="Nats-Sequence",e.TimeStamp="Nats-Time-Stamp",e.Subject="Nats-Subject"})(Rr||(Rr={}));var yu;(function(e){e.Stream="Nats-Stream",e.Subject="Nats-Subject",e.Sequence="Nats-Sequence",e.LastSequence="Nats-Last-Sequence",e.Size="Nats-Msg-Size"})(yu||(yu={}));const sn="KV_";class Aw{constructor(t){g(this,"config");g(this,"ordered");g(this,"mack");g(this,"stream");g(this,"callbackFn");g(this,"max");g(this,"qname");g(this,"isBind");g(this,"filters");this.stream="",this.mack=!1,this.ordered=!1,this.config=Ow("",t||{})}getOpts(){var n;const t={};if(t.config=Object.assign({},this.config),t.config.filter_subject&&(this.filterSubject(t.config.filter_subject),t.config.filter_subject=void 0),t.config.filter_subjects&&((n=t.config.filter_subjects)==null||n.forEach(r=>{this.filterSubject(r)}),t.config.filter_subjects=void 0),t.mack=this.mack,t.stream=this.stream,t.callbackFn=this.callbackFn,t.max=this.max,t.queue=this.qname,t.ordered=this.ordered,t.config.ack_policy=t.ordered?ut.None:t.config.ack_policy,t.isBind=t.isBind||!1,this.filters)switch(this.filters.length){case 0:break;case 1:t.config.filter_subject=this.filters[0];break;default:t.config.filter_subjects=this.filters}return t}description(t){return this.config.description=t,this}deliverTo(t){return this.config.deliver_subject=t,this}durable(t){return Dr(t),this.config.durable_name=t,this}startSequence(t){if(t<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=st.StartSequence,this.config.opt_start_seq=t,this}startTime(t){return this.config.deliver_policy=st.StartTime,this.config.opt_start_time=t.toISOString(),this}deliverAll(){return this.config.deliver_policy=st.All,this}deliverLastPerSubject(){return this.config.deliver_policy=st.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=st.Last,this}deliverNew(){return this.config.deliver_policy=st.New,this}startAtTimeDelta(t){return this.startTime(new Date(Date.now()-t)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=ut.None,this}ackAll(){return this.config.ack_policy=ut.All,this}ackExplicit(){return this.config.ack_policy=ut.Explicit,this}ackWait(t){return this.config.ack_wait=tt(t),this}maxDeliver(t){return this.config.max_deliver=t,this}filterSubject(t){return this.filters=this.filters||[],this.filters.push(t),this}replayInstantly(){return this.config.replay_policy=Kr.Instant,this}replayOriginal(){return this.config.replay_policy=Kr.Original,this}sample(t){if(t=Math.trunc(t),t<0||t>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${t}%`,this}limit(t){return this.config.rate_limit_bps=t,this}maxWaiting(t){return this.config.max_waiting=t,this}maxAckPending(t){return this.config.max_ack_pending=t,this}idleHeartbeat(t){return this.config.idle_heartbeat=tt(t),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(t){return this.queue(t),this}manualAck(){return this.mack=!0,this}maxMessages(t){return this.max=t,this}callback(t){return this.callbackFn=t,this}queue(t){return this.qname=t,this.config.deliver_group=t,this}orderedConsumer(){return this.ordered=!0,this}bind(t,n){return this.stream=t,this.config.durable_name=n,this.isBind=!0,this}bindStream(t){return this.stream=t,this}inactiveEphemeralThreshold(t){return this.config.inactive_threshold=tt(t),this}maxPullBatch(t){return this.config.max_batch=t,this}maxPullRequestExpires(t){return this.config.max_expires=tt(t),this}memory(){return this.config.mem_storage=!0,this}numReplicas(t){return this.config.num_replicas=t,this}consumerName(t){return this.config.name=t,this}}function Rn(e){return new Aw(e)}function xu(e){return typeof e.getOpts=="function"}class Iw{static encode(t){if(typeof t=="string")return btoa(t);const n=Array.from(t);return btoa(String.fromCharCode(...n))}static decode(t,n=!1){const r=atob(t);return n?Uint8Array.from(r,s=>s.charCodeAt(0)):r}}class vs{static encode(t){return vs.toB64URLEncoding(Iw.encode(t))}static decode(t,n=!1){return vs.decode(vs.fromB64URLEncoding(t),n)}static toB64URLEncoding(t){return t.replace(/\+/g,"-").replace(/\//g,"_")}static fromB64URLEncoding(t){return t.replace(/_/g,"/").replace(/-/g,"+")}}class Jr{constructor(){g(this,"buffers");g(this,"byteLength");this.buffers=[],this.byteLength=0}static concat(...t){let n=0;for(let i=0;i<t.length;i++)n+=t[i].length;const r=new Uint8Array(n);let s=0;for(let i=0;i<t.length;i++)r.set(t[i],s),s+=t[i].length;return r}static fromAscii(t){return t||(t=""),kr.encode(t)}static toAscii(t){return Ht.decode(t)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const t=new Uint8Array(this.byteLength);let n=0;for(let r=0;r<this.buffers.length;r++)t.set(this.buffers[r],n),n+=this.buffers[r].length;this.buffers.length=0,this.buffers.push(t)}}shift(){if(this.buffers.length){const t=this.buffers.shift();if(t)return this.byteLength-=t.length,t}return new Uint8Array(0)}drain(t){if(this.buffers.length){this.pack();const n=this.buffers.pop();if(n){const r=this.byteLength;(t===void 0||t>r)&&(t=r);const s=n.subarray(0,t);return r>t&&this.buffers.push(n.subarray(t)),this.byteLength=r-t,s}}return new Uint8Array(0)}fill(t,...n){t&&(this.buffers.push(t),this.byteLength+=t.length);for(let r=0;r<n.length;r++)n[r]&&n[r].length&&(this.buffers.push(n[r]),this.byteLength+=n[r].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}function wu(e){const t=e.length;let n=e.indexOf("=");n===-1&&(n=t);const r=n===t?0:4-n%4;return[n,r]}function Pw(e,t,n=!1){function r(o,a){return Math.floor((o+a)*3/4-a)}function s(o){return e[o>>18&63]+e[o>>12&63]+e[o>>6&63]+e[o&63]}function i(o,a,c){const l=new Array((c-a)/3);for(let u=a,f=0;u<c;u+=3)l[f++]=s((o[u]<<16)+(o[u+1]<<8)+o[u+2]);return l.join("")}return{byteLength(o){return r.apply(null,wu(o))},toUint8Array(o){const[a,c]=wu(o),l=new Uint8Array(r(a,c)),u=c?a-4:a;let f,h=0,d;for(d=0;d<u;d+=4)f=t[o.charCodeAt(d)]<<18|t[o.charCodeAt(d+1)]<<12|t[o.charCodeAt(d+2)]<<6|t[o.charCodeAt(d+3)],l[h++]=f>>16&255,l[h++]=f>>8&255,l[h++]=f&255;return c===2?(f=t[o.charCodeAt(d)]<<2|t[o.charCodeAt(d+1)]>>4,l[h++]=f&255):c===1&&(f=t[o.charCodeAt(d)]<<10|t[o.charCodeAt(d+1)]<<4|t[o.charCodeAt(d+2)]>>2,l[h++]=f>>8&255,l[h++]=f&255),l},fromUint8Array(o){const c=o.length,l=c%3,u=c-l,f=new Array(Math.ceil(u/16383)+(l?1:0));let h=0,d;for(let P=0;P<u;P+=16383)d=P+16383,f[h++]=i(o,P,d>u?u:d);let E;return l===1?(E=o[u],f[h]=e[E>>2]+e[E<<4&63],n||(f[h]+="==")):l===2&&(E=o[u]<<8|o[u+1]&255,f[h]=e[E>>10]+e[E>>4&63]+e[E<<2&63],n||(f[h]+="=")),f.join("")}}}const Bh=[],qh=[],jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let e=0,t=jo.length;e<t;++e)Bh[e]=jo[e],qh[jo.charCodeAt(e)]=e;const{byteLength:NE,toUint8Array:Tw,fromUint8Array:Nw}=Pw(Bh,qh,!0),Rw=new TextDecoder,Mw=new TextEncoder;function Lw(e){return e.reduce((t,n)=>`${t}${n<16?"0":""}${n.toString(16)}`,"")}function Fw(e){const t=e.length;if(t%2||!/^[0-9a-fA-F]+$/.test(e))throw new TypeError("Invalid hex string.");e=e.toLowerCase();const n=new Uint8Array(Math.floor(t/2)),r=t/2;for(let s=0;s<r;++s)n[s]=parseInt(e.substr(s*2,2),16);return n}function jw(e,t="utf8"){if(/^utf-?8$/i.test(t))return Rw.decode(e);if(/^base64$/i.test(t))return Nw(e);if(/^hex(?:adecimal)?$/i.test(t))return Lw(e);throw new TypeError("Unsupported string encoding.")}function $w(e,t="utf8"){if(/^utf-?8$/i.test(t))return Mw.encode(e);if(/^base64$/i.test(t))return Tw(e);if(/^hex(?:adecimal)?$/i.test(t))return Fw(e);throw new TypeError("Unsupported string encoding.")}class Eu{constructor(){g(this,"hashSize",32);g(this,"_buf");g(this,"_bufIdx");g(this,"_count");g(this,"_K");g(this,"_H");g(this,"_finalized");this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(t,n){if(t===null)throw new TypeError("msg must be a string or Uint8Array.");typeof t=="string"&&(t=$w(t,n));for(let s=0,i=t.length;s<i;s++)this._buf[this._bufIdx++]=t[s],this._bufIdx===64&&(this._transform(),this._bufIdx=0);const r=this._count;return(r[0]+=t.length<<3)<t.length<<3&&r[1]++,r[1]+=t.length>>>29,this}digest(t){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const n=this._buf;let r=this._bufIdx;for(n[r++]=128;r!==56;)r===64&&(this._transform(),r=0),n[r++]=0;const s=this._count;n[56]=s[1]>>>24&255,n[57]=s[1]>>>16&255,n[58]=s[1]>>>8&255,n[59]=s[1]>>>0&255,n[60]=s[0]>>>24&255,n[61]=s[0]>>>16&255,n[62]=s[0]>>>8&255,n[63]=s[0]>>>0&255,this._transform();const i=new Uint8Array(32);for(let o=0;o<8;o++)i[(o<<2)+0]=this._H[o]>>>24&255,i[(o<<2)+1]=this._H[o]>>>16&255,i[(o<<2)+2]=this._H[o]>>>8&255,i[(o<<2)+3]=this._H[o]>>>0&255;return this.init(),t?jw(i,t):i}_transform(){const t=this._H;let n=t[0],r=t[1],s=t[2],i=t[3],o=t[4],a=t[5],c=t[6],l=t[7];const u=new Uint32Array(16);let f;for(f=0;f<16;f++)u[f]=this._buf[(f<<2)+3]|this._buf[(f<<2)+2]<<8|this._buf[(f<<2)+1]<<16|this._buf[f<<2]<<24;for(f=0;f<64;f++){let h;if(f<16)h=u[f];else{let d=u[f+1&15],E=u[f+14&15];h=u[f&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+u[f&15]+u[f+9&15]|0}h=h+l+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(c^o&(a^c))+this._K[f]|0,l=c,c=a,a=o,o=i+h,i=s,s=r,r=n,n=h+(r&s^i&(r^s))+(r>>>2^r>>>13^r>>>22^r<<30^r<<19^r<<10)|0}t[0]=t[0]+n|0,t[1]=t[1]+r|0,t[2]=t[2]+s|0,t[3]=t[3]+i|0,t[4]=t[4]+o|0,t[5]=t[5]+a|0,t[6]=t[6]+c|0,t[7]=t[7]+l|0}}class Hh{constructor(t,n,r=!0){g(this,"token");g(this,"received");g(this,"ctx");g(this,"requestSubject");g(this,"mux");this.mux=t,this.requestSubject=n,this.received=0,this.token=Cr.next(),r&&(this.ctx=new Error)}}class Dw extends Hh{constructor(n,r,s={maxWait:1e3}){super(n,r);g(this,"callback");g(this,"done");g(this,"timer");g(this,"max");g(this,"opts");if(this.opts=s,typeof this.opts.callback!="function")throw new Error("callback is required");this.callback=this.opts.callback,this.max=typeof s.maxMessages=="number"&&s.maxMessages>0?s.maxMessages:-1,this.done=Xe(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},s.maxWait)}cancel(n){n&&this.callback(n,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(n,r){n?(this.ctx&&(n.stack+=`

${this.ctx.stack}`),this.cancel(n)):(this.callback(null,r),this.opts.strategy===ln.Count&&(this.max--,this.max===0&&this.cancel()),this.opts.strategy===ln.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.jitter||300)),this.opts.strategy===ln.SentinelMsg&&r&&r.data.length===0&&this.cancel())}}class zh extends Hh{constructor(n,r,s={timeout:1e3},i=!0){super(n,r,i);g(this,"deferred");g(this,"timer");this.deferred=Xe(),this.timer=Gr(s.timeout,i)}resolver(n,r){this.timer&&this.timer.cancel(),n?(this.ctx&&(n.stack+=`

${this.ctx.stack}`),this.deferred.reject(n)):this.deferred.resolve(r),this.cancel()}cancel(n){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(n||ge.errorForCode(ue.Cancelled))}}const Uw="$JS.API";function Bw(e){return e=e||{},e.domain&&(e.apiPrefix=`$JS.${e.domain}.API`,delete e.domain),mo({apiPrefix:Uw,timeout:5e3},e)}class Ks{constructor(t,n){g(this,"nc");g(this,"opts");g(this,"prefix");g(this,"timeout");g(this,"jc");this.nc=t,this.opts=Bw(n),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=un()}getOptions(){return Object.assign({},this.opts)}_parseOpts(){let t=this.opts.apiPrefix;if(!t||t.length===0)throw new Error("invalid empty prefix");t[t.length-1]==="."&&(t=t.substr(0,t.length-1)),this.opts.apiPrefix=t}async _request(t,n=null,r){r=r||{},r.timeout=this.timeout;let s=Vt;n&&(s=this.jc.encode(n));let{retries:i}=r;i=i||1,i=i===-1?Number.MAX_SAFE_INTEGER:i;const o=cc();for(let a=0;a<i;a++)try{const c=await this.nc.request(t,s,r);return this.parseJsResponse(c)}catch(c){const l=c;if((l.code==="503"||l.code===ue.Timeout)&&a+1<i)await Qr(o.backoff(a));else throw c}}async findStream(t){const n={subject:t},s=await this._request(`${this.prefix}.STREAM.NAMES`,n);if(!s.streams||s.streams.length!==1)throw new Error("no stream matches subject");return s.streams[0]}getConnection(){return this.nc}parseJsResponse(t){const n=this.jc.decode(t.data),r=n;if(r.error){const s=Uh(r.error.code,r.error.description);if(s!==null)throw s.api_error=r.error,s}return n}}class us{constructor(t,n,r,s){g(this,"err");g(this,"offset");g(this,"pageInfo");g(this,"subject");g(this,"jsm");g(this,"filter");g(this,"payload");if(!t)throw new Error("subject is required");this.subject=t,this.jsm=r,this.offset=0,this.pageInfo={},this.filter=n,this.payload=s||{}}async next(){if(this.err)return[];if(this.pageInfo&&this.offset>=this.pageInfo.total)return[];const t={offset:this.offset};this.payload&&Object.assign(t,this.payload);try{const n=await this.jsm._request(this.subject,t,{timeout:this.jsm.timeout});this.pageInfo=n;const r=this.countResponse(n);return r===0?[]:(this.offset+=r,this.filter(n))}catch(n){throw this.err=n,n}}countResponse(t){var n,r,s;switch(t==null?void 0:t.type){case"io.nats.jetstream.api.v1.stream_names_response":case"io.nats.jetstream.api.v1.stream_list_response":return((n=t.streams)==null?void 0:n.length)||0;case"io.nats.jetstream.api.v1.consumer_list_response":return((r=t.consumers)==null?void 0:r.length)||0;default:return console.error(`jslister.ts: unknown API response for paged output: ${t==null?void 0:t.type}`),((s=t.streams)==null?void 0:s.length)||0}return 0}async*[Symbol.asyncIterator](){let t=await this.next();for(;t.length>0;){for(const n of t)yield n;t=await this.next()}}}function xr(e=""){const t=e.match(/(\d+).(\d+).(\d+)/);if(t)return{major:parseInt(t[1]),minor:parseInt(t[2]),micro:parseInt(t[3])};throw new Error(`'${e}' is not a semver value`)}function wa(e,t){return e.major<t.major?-1:e.major>t.major?1:e.minor<t.minor?-1:e.minor>t.minor?1:e.micro<t.micro?-1:e.micro>t.micro?1:0}var je;(function(e){e.JS_KV="js_kv",e.JS_OBJECTSTORE="js_objectstore",e.JS_PULL_MAX_BYTES="js_pull_max_bytes",e.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",e.JS_ALLOW_DIRECT="js_allow_direct",e.JS_MULTIPLE_CONSUMER_FILTER="js_multiple_consumer_filter",e.JS_SIMPLIFICATION="js_simplification",e.JS_STREAM_CONSUMER_METADATA="js_stream_consumer_metadata",e.JS_CONSUMER_FILTER_SUBJECTS="js_consumer_filter_subjects",e.JS_STREAM_FIRST_SEQ="js_stream_first_seq",e.JS_STREAM_SUBJECT_TRANSFORM="js_stream_subject_transform",e.JS_STREAM_SOURCE_SUBJECT_TRANSFORM="js_stream_source_subject_transform",e.JS_STREAM_COMPRESSION="js_stream_compression",e.JS_DEFAULT_CONSUMER_LIMITS="js_default_consumer_limits",e.JS_BATCH_DIRECT_GET="js_batch_direct_get"})(je||(je={}));class qw{constructor(t){g(this,"server");g(this,"features");g(this,"disabled");this.features=new Map,this.disabled=[],this.update(t)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(t){this.disabled.push(t),this.update(this.server)}isDisabled(t){return this.disabled.indexOf(t)!==-1}update(t){typeof t=="string"&&(t=xr(t)),this.server=t,this.set(je.JS_KV,"2.6.2"),this.set(je.JS_OBJECTSTORE,"2.6.3"),this.set(je.JS_PULL_MAX_BYTES,"2.8.3"),this.set(je.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set(je.JS_ALLOW_DIRECT,"2.9.0"),this.set(je.JS_MULTIPLE_CONSUMER_FILTER,"2.10.0"),this.set(je.JS_SIMPLIFICATION,"2.9.4"),this.set(je.JS_STREAM_CONSUMER_METADATA,"2.10.0"),this.set(je.JS_CONSUMER_FILTER_SUBJECTS,"2.10.0"),this.set(je.JS_STREAM_FIRST_SEQ,"2.10.0"),this.set(je.JS_STREAM_SUBJECT_TRANSFORM,"2.10.0"),this.set(je.JS_STREAM_SOURCE_SUBJECT_TRANSFORM,"2.10.0"),this.set(je.JS_STREAM_COMPRESSION,"2.10.0"),this.set(je.JS_DEFAULT_CONSUMER_LIMITS,"2.10.0"),this.set(je.JS_BATCH_DIRECT_GET,"2.11.0"),this.disabled.forEach(n=>{this.features.delete(n)})}set(t,n){this.features.set(t,{min:n,ok:wa(this.server,xr(n))>=0})}get(t){return this.features.get(t)||{min:"unknown",ok:!1}}supports(t){var n;return((n=this.get(t))==null?void 0:n.ok)||!1}require(t){return typeof t=="string"&&(t=xr(t)),wa(this.server,t)>=0}}class dc extends Ks{constructor(t,n){super(t,n)}async add(t,n,r=Ui.Create){if(It(t),n.deliver_group&&n.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(n.deliver_group&&n.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const s={};s.config=n,s.stream_name=t,s.action=r,s.config.durable_name&&Dr(s.config.durable_name);const i=this.nc;let{min:o,ok:a}=i.features.get(je.JS_NEW_CONSUMER_CREATE_API);const c=n.name===""?void 0:n.name;if(c&&!a)throw new Error(`consumer 'name' requires server ${o}`);if(c)try{fc("name",c)}catch(h){const d=h.message,E=d.indexOf("cannot contain");throw E!==-1?new Error(`consumer 'name' ${d.substring(E)}`):h}let l,u="";if(Array.isArray(n.filter_subjects)){const{min:h,ok:d}=i.features.get(je.JS_MULTIPLE_CONSUMER_FILTER);if(!d)throw new Error(`consumer 'filter_subjects' requires server ${h}`);a=!1}if(n.metadata){const{min:h,ok:d}=i.features.get(je.JS_STREAM_CONSUMER_METADATA);if(!d)throw new Error(`consumer 'metadata' requires server ${h}`)}if(a&&(u=n.name??n.durable_name??""),u!==""){let h=n.filter_subject??void 0;h===">"&&(h=void 0),l=h!==void 0?`${this.prefix}.CONSUMER.CREATE.${t}.${u}.${h}`:`${this.prefix}.CONSUMER.CREATE.${t}.${u}`}else l=n.durable_name?`${this.prefix}.CONSUMER.DURABLE.CREATE.${t}.${n.durable_name}`:`${this.prefix}.CONSUMER.CREATE.${t}`;return await this._request(l,s)}async update(t,n,r){const s=await this.info(t,n),i=r;return this.add(t,Object.assign(s.config,i),Ui.Update)}async info(t,n){return It(t),Dr(n),await this._request(`${this.prefix}.CONSUMER.INFO.${t}.${n}`)}async delete(t,n){return It(t),Dr(n),(await this._request(`${this.prefix}.CONSUMER.DELETE.${t}.${n}`)).success}list(t){It(t);const n=s=>s.consumers,r=`${this.prefix}.CONSUMER.LIST.${t}`;return new us(r,n,this)}pause(t,n,r){const s=`${this.prefix}.CONSUMER.PAUSE.${t}.${n}`,i={pause_until:r.toISOString()};return this._request(s,i)}resume(t,n){return this.pause(t,n,new Date(0))}}function Pr(e,t,n=!1){if(n===!0&&!e)throw ge.errorForCode(ue.ApiError,new Error(`${t} is not a function`));if(e&&typeof e!="function")throw ge.errorForCode(ue.ApiError,new Error(`${t} is not a function`))}class Hw extends ht{constructor(n,r,s){super();g(this,"sub");g(this,"adapter");g(this,"subIterDone");Pr(s.adapter,"adapter",!0),this.adapter=s.adapter,s.callback&&Pr(s.callback,"callback"),this.noIterator=typeof s.callback=="function",s.ingestionFilterFn&&(Pr(s.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=s.ingestionFilterFn),s.protocolFilterFn&&(Pr(s.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=s.protocolFilterFn),s.dispatchedFn&&(Pr(s.dispatchedFn,"dispatchedFn"),this.dispatchedFn=s.dispatchedFn),s.cleanupFn&&Pr(s.cleanupFn,"cleanupFn");let i=(u,f)=>{this.callback(u,f)};if(s.callback){const u=s.callback;i=(f,h)=>{const[d,E]=this.adapter(f,h);if(d){u(d,null);return}const{ingest:P}=this.ingestionFilterFn?this.ingestionFilterFn(E,this):{ingest:!0};P&&(!this.protocolFilterFn||this.protocolFilterFn(E))&&(u(d,E),this.dispatchedFn&&E&&this.dispatchedFn(E))}}const{max:o,queue:a,timeout:c}=s,l={queue:a,timeout:c,callback:i};o&&o>0&&(l.max=o),this.sub=n.subscribe(r,l),s.cleanupFn&&(this.sub.cleanupFn=s.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=Xe(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(async u=>{await u.closed,this.stop()})(this.sub).then().catch()}unsubscribe(n){this.sub.unsubscribe(n)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(n,r){this.sub.cancelTimeout();const[s,i]=this.adapter(n,r);s&&this.stop(s),i&&this.push(i)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}let zt;function zw(e){zt=e}function Vh(){return zt!==void 0&&zt.defaultPort!==void 0?zt.defaultPort:4222}function $o(){return zt!==void 0&&zt.urlParseFn?zt.urlParseFn:void 0}function Vw(){if(!zt||typeof zt.factory!="function")throw new Error("transport fn is not set");return zt.factory()}function Wh(){return zt!==void 0&&zt.dnsResolveFn?zt.dnsResolveFn:void 0}const yi=`\r
`,Bi=Jr.fromAscii(yi),Ww=new Uint8Array(Bi)[0],Gw=new Uint8Array(Bi)[1];function Kw(e){for(let t=0;t<e.length;t++){const n=t+1;if(e.byteLength>n&&e[t]===Ww&&e[n]===Gw)return n+1}return 0}function Jw(e){const t=Kw(e);if(t>0){const r=new Uint8Array(e).slice(0,t);return Ht.decode(r)}return""}const Yw=4,Gh=48,Xw=65,Qw=97;function Zw(e,t,n,r){const s=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((o,a)=>{s[a]=o}),s[12]=e,s[13]=t,s[14]=n,s[15]=r,s}function Ea(e){return e1(e)!==void 0}function e1(e){for(let t=0;t<e.length;t++)switch(e[t]){case".":return Kh(e);case":":return t1(e)}}function Kh(e){const t=new Uint8Array(4);for(let n=0;n<4;n++){if(e.length===0)return;if(n>0){if(e[0]!==".")return;e=e.substring(1)}const{n:r,c:s,ok:i}=n1(e);if(!i||r>255)return;e=e.substring(s),t[n]=r}return Zw(t[0],t[1],t[2],t[3])}function t1(e){const t=new Uint8Array(16);let n=-1;if(e.length>=2&&e[0]===":"&&e[1]===":"&&(n=0,e=e.substring(2),e.length===0))return t;let r=0;for(;r<16;){const{n:s,c:i,ok:o}=r1(e);if(!o||s>65535)return;if(i<e.length&&e[i]==="."){if(n<0&&r!=12||r+4>16)return;const a=Kh(e);if(a===void 0)return;t[r]=a[12],t[r+1]=a[13],t[r+2]=a[14],t[r+3]=a[15],e="",r+=Yw;break}if(t[r]=s>>8,t[r+1]=s,r+=2,e=e.substring(i),e.length===0)break;if(e[0]!==":"||e.length==1)return;if(e=e.substring(1),e[0]===":"){if(n>=0)return;if(n=r,e=e.substring(1),e.length===0)break}}if(e.length===0){if(r<16){if(n<0)return;const s=16-r;for(let i=r-1;i>=n;i--)t[i+s]=t[i];for(let i=n+s-1;i>=n;i--)t[i]=0}else if(n>=0)return;return t}}function n1(e){let t=0,n=0;for(t=0;t<e.length&&48<=e.charCodeAt(t)&&e.charCodeAt(t)<=57;t++)if(n=n*10+(e.charCodeAt(t)-Gh),n>=16777215)return{n:16777215,c:t,ok:!1};return t===0?{n:0,c:0,ok:!1}:{n,c:t,ok:!0}}function r1(e){let t=0,n=0;for(n=0;n<e.length;n++){if(48<=e.charCodeAt(n)&&e.charCodeAt(n)<=57)t*=16,t+=e.charCodeAt(n)-Gh;else if(97<=e.charCodeAt(n)&&e.charCodeAt(n)<=102)t*=16,t+=e.charCodeAt(n)-Qw+10;else if(65<=e.charCodeAt(n)&&e.charCodeAt(n)<=70)t*=16,t+=e.charCodeAt(n)-Xw+10;else break;if(t>=16777215)return{n:0,c:n,ok:!1}}return n===0?{n:0,c:n,ok:!1}:{n:t,c:n,ok:!0}}function s1(e){return e.indexOf(".")!==-1?!0:e.indexOf("[")!==-1||e.indexOf("::")!==-1?!1:e.split(":").length<=2}function va(e){return!s1(e)}function i1(e){const t="::FFFF:",n=e.toUpperCase().indexOf(t);if(n!==-1&&e.indexOf(".")!==-1){let r=e.substring(n+t.length);return r=r.replace("[",""),r.replace("]","")}return e}function o1(e){e=e.trim(),e.match(/^(.*:\/\/)(.*)/m)&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2")),e=i1(e),va(e)&&e.indexOf("[")===-1&&(e=`[${e}]`);const t=va(e)?e.match(/(]:)(\d+)/):e.match(/(:)(\d+)/),n=t&&t.length===3&&t[1]&&t[2]?parseInt(t[2]):4222,r=n===80?"https":"http",s=new URL(`${r}://${e}`);s.port=`${n}`;let i=s.hostname;return i.charAt(0)==="["&&(i=i.substring(1,i.length-1)),{listen:s.host,hostname:i,port:n}}class Ss{constructor(t,n=!1){g(this,"src");g(this,"listen");g(this,"hostname");g(this,"port");g(this,"didConnect");g(this,"reconnects");g(this,"lastConnect");g(this,"gossiped");g(this,"tlsName");g(this,"resolves");this.src=t,this.tlsName="";const r=o1(t);this.listen=r.listen,this.hostname=r.hostname,this.port=r.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=n}toString(){return this.listen}async resolve(t){if(!t.fn)return[this];const n=[];if(Ea(this.hostname))return[this];{const r=await t.fn(this.hostname);t.debug&&console.log(`resolve ${this.hostname} = ${r.join(",")}`);for(const s of r){const i=this.port===80?"https":"http",o=new URL(`${i}://${va(s)?"["+s+"]":s}`);o.port=`${this.port}`;const a=new Ss(o.host,!1);a.tlsName=this.hostname,n.push(a)}}return t.randomize&&$h(n),this.resolves=n,n}}class a1{constructor(t=[],n={}){g(this,"firstSelect");g(this,"servers");g(this,"currentServer");g(this,"tlsName");g(this,"randomize");this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=n.randomize||!1;const r=$o();t&&(t.forEach(s=>{s=r?r(s):s,this.servers.push(new Ss(s))}),this.randomize&&(this.servers=$h(this.servers))),this.servers.length===0&&this.addServer(`${pa}:${Vh()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){const t=this.getCurrentServer();Ea(t.hostname)||(this.tlsName=t.hostname,this.servers.forEach(n=>{n.gossiped&&(n.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(t,n=!1){const r=$o();t=r?r(t):t;const s=new Ss(t,n);Ea(s.hostname)&&(s.tlsName=this.tlsName),this.servers.push(s)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const t=this.servers.shift();return t&&(this.servers.push(t),this.currentServer=t),t}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(t){if(t){const n=this.servers.indexOf(t);this.servers.splice(n,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(t,n){const r=[];let s=[];const i=$o(),o=new Map;t.connect_urls&&t.connect_urls.length>0&&t.connect_urls.forEach(c=>{c=i?i(c,n):c;const l=new Ss(c,!0);o.set(c,l)});const a=[];return this.servers.forEach((c,l)=>{const u=c.listen;c.gossiped&&this.currentServer.listen!==u&&o.get(u)===void 0&&a.push(l),o.delete(u)}),a.reverse(),a.forEach(c=>{const l=this.servers.splice(c,1);s=s.concat(l[0].listen)}),o.forEach((c,l)=>{this.servers.push(c),r.push(l)}),{added:r,deleted:s}}}class c1{constructor(){g(this,"baseInbox");g(this,"reqs");this.reqs=new Map}size(){return this.reqs.size}init(t){return this.baseInbox=`${En(t)}.`,this.baseInbox}add(t){isNaN(t.received)||(t.received=0),this.reqs.set(t.token,t)}get(t){return this.reqs.get(t)}cancel(t){this.reqs.delete(t.token)}getToken(t){const n=t.subject||"";return n.indexOf(this.baseInbox)===0?n.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(t,n){if(n&&n.permissionContext){if(t)return this.all().forEach(s=>{s.resolver(n,{})}),!0;const r=n.permissionContext;if(r.operation==="publish"){const s=this.all().find(i=>i.requestSubject===r.subject);if(s)return s.resolver(n,{}),!0}}return!1}dispatcher(){return(t,n)=>{const r=this.getToken(n);if(r){const s=this.get(r);s&&(t===null&&n.headers&&(t=Dh(n)),s.resolver(t,n))}}}close(){const t=ge.errorForCode(ue.Timeout);this.reqs.forEach(n=>{n.resolver(t,{})})}}class l1{constructor(t,n,r){g(this,"ph");g(this,"interval");g(this,"maxOut");g(this,"timer");g(this,"pendings");this.ph=t,this.interval=n,this.maxOut=r,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(t){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),t&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:$r.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut){this.cancel(!0);return}const t=Xe();this.ph.flush(t).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(t),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(t=>(t.resolve(),!1))}}class u1 extends Error{constructor(t){super(t),this.name="AssertionError"}}function f1(e,t="Assertion failed."){if(!e)throw new u1(t)}const vu=32*1024,Do=2**32-2;function li(e,t,n=0){const r=t.byteLength-n;return e.byteLength>r&&(e=e.subarray(0,r)),t.set(e,n),e.byteLength}class Uo{constructor(t){g(this,"_buf");g(this,"_off");if(this._off=0,t==null){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(t)}bytes(t={copy:!0}){return t.copy===!1?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(t){if(t===0){this.reset();return}if(t<0||t>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+t)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(t){const n=this._buf.byteLength;return t<=this.capacity-n?(this._reslice(n+t),n):-1}_reslice(t){f1(t<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,t)}readByte(){const t=new Uint8Array(1);return this.read(t)?t[0]:null}read(t){if(this.empty())return this.reset(),t.byteLength===0?0:null;const n=li(this._buf.subarray(this._off),t);return this._off+=n,n}writeByte(t){return this.write(Uint8Array.of(t))}writeString(t){return this.write(kr.encode(t))}write(t){const n=this._grow(t.byteLength);return li(t,this._buf,n)}_grow(t){const n=this.length;n===0&&this._off!==0&&this.reset();const r=this._tryGrowByReslice(t);if(r>=0)return r;const s=this.capacity;if(t<=Math.floor(s/2)-n)li(this._buf.subarray(this._off),this._buf);else{if(s+t>Do)throw new Error("The buffer cannot be grown beyond the maximum size.");{const i=new Uint8Array(Math.min(2*s+t,Do));li(this._buf.subarray(this._off),i),this._buf=i}}return this._off=0,this._reslice(Math.min(n+t,Do)),n}grow(t){if(t<0)throw Error("Buffer._grow: negative count");const n=this._grow(t);this._reslice(n)}readFrom(t){let n=0;const r=new Uint8Array(vu);for(;;){const s=this.capacity-this.length<vu,i=s?r:new Uint8Array(this._buf.buffer,this.length),o=t.read(i);if(o===null)return n;s?this.write(i.subarray(0,o)):this._reslice(this.length+o),n+=o}}}var Pt;(function(e){e[e.OK=0]="OK",e[e.ERR=1]="ERR",e[e.MSG=2]="MSG",e[e.INFO=3]="INFO",e[e.PING=4]="PING",e[e.PONG=5]="PONG"})(Pt||(Pt={}));function Su(){const e={};return e.sid=-1,e.hdr=-1,e.size=-1,e}const h1=48;class ku{constructor(t){g(this,"dispatcher");g(this,"state");g(this,"as");g(this,"drop");g(this,"hdr");g(this,"ma");g(this,"argBuf");g(this,"msgBuf");this.dispatcher=t,this.state=he.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(t){let n;for(n=0;n<t.length;n++){const r=t[n];switch(this.state){case he.OP_START:switch(r){case de.M:case de.m:this.state=he.OP_M,this.hdr=-1,this.ma=Su();break;case de.H:case de.h:this.state=he.OP_H,this.hdr=0,this.ma=Su();break;case de.P:case de.p:this.state=he.OP_P;break;case de.PLUS:this.state=he.OP_PLUS;break;case de.MINUS:this.state=he.OP_MINUS;break;case de.I:case de.i:this.state=he.OP_I;break;default:throw this.fail(t.subarray(n))}break;case he.OP_H:switch(r){case de.M:case de.m:this.state=he.OP_M;break;default:throw this.fail(t.subarray(n))}break;case he.OP_M:switch(r){case de.S:case de.s:this.state=he.OP_MS;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MS:switch(r){case de.G:case de.g:this.state=he.OP_MSG;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MSG:switch(r){case de.SPACE:case de.TAB:this.state=he.OP_MSG_SPC;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MSG_SPC:switch(r){case de.SPACE:case de.TAB:continue;default:this.state=he.MSG_ARG,this.as=n}break;case he.MSG_ARG:switch(r){case de.CR:this.drop=1;break;case de.NL:{const s=this.argBuf?this.argBuf.bytes():t.subarray(this.as,n-this.drop);this.processMsgArgs(s),this.drop=0,this.as=n+1,this.state=he.MSG_PAYLOAD,n=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;case he.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const s=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:Pt.MSG,msg:this.ma,data:s}),this.argBuf=void 0,this.msgBuf=void 0,this.state=he.MSG_END}else{let s=this.ma.size-this.msgBuf.length;const i=t.length-n;i<s&&(s=i),s>0?(this.msgBuf.write(t.subarray(n,n+s)),n=n+s-1):this.msgBuf.writeByte(r)}else n-this.as>=this.ma.size&&(this.dispatcher.push({kind:Pt.MSG,msg:this.ma,data:t.subarray(this.as,n)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=he.MSG_END);break;case he.MSG_END:switch(r){case de.NL:this.drop=0,this.as=n+1,this.state=he.OP_START;break;default:continue}break;case he.OP_PLUS:switch(r){case de.O:case de.o:this.state=he.OP_PLUS_O;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PLUS_O:switch(r){case de.K:case de.k:this.state=he.OP_PLUS_OK;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PLUS_OK:switch(r){case de.NL:this.dispatcher.push({kind:Pt.OK}),this.drop=0,this.state=he.OP_START;break}break;case he.OP_MINUS:switch(r){case de.E:case de.e:this.state=he.OP_MINUS_E;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MINUS_E:switch(r){case de.R:case de.r:this.state=he.OP_MINUS_ER;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MINUS_ER:switch(r){case de.R:case de.r:this.state=he.OP_MINUS_ERR;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MINUS_ERR:switch(r){case de.SPACE:case de.TAB:this.state=he.OP_MINUS_ERR_SPC;break;default:throw this.fail(t.subarray(n))}break;case he.OP_MINUS_ERR_SPC:switch(r){case de.SPACE:case de.TAB:continue;default:this.state=he.MINUS_ERR_ARG,this.as=n}break;case he.MINUS_ERR_ARG:switch(r){case de.CR:this.drop=1;break;case de.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=t.subarray(this.as,n-this.drop),this.dispatcher.push({kind:Pt.ERR,data:s}),this.drop=0,this.as=n+1,this.state=he.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(r))}break;case he.OP_P:switch(r){case de.I:case de.i:this.state=he.OP_PI;break;case de.O:case de.o:this.state=he.OP_PO;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PO:switch(r){case de.N:case de.n:this.state=he.OP_PON;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PON:switch(r){case de.G:case de.g:this.state=he.OP_PONG;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PONG:switch(r){case de.NL:this.dispatcher.push({kind:Pt.PONG}),this.drop=0,this.state=he.OP_START;break}break;case he.OP_PI:switch(r){case de.N:case de.n:this.state=he.OP_PIN;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PIN:switch(r){case de.G:case de.g:this.state=he.OP_PING;break;default:throw this.fail(t.subarray(n))}break;case he.OP_PING:switch(r){case de.NL:this.dispatcher.push({kind:Pt.PING}),this.drop=0,this.state=he.OP_START;break}break;case he.OP_I:switch(r){case de.N:case de.n:this.state=he.OP_IN;break;default:throw this.fail(t.subarray(n))}break;case he.OP_IN:switch(r){case de.F:case de.f:this.state=he.OP_INF;break;default:throw this.fail(t.subarray(n))}break;case he.OP_INF:switch(r){case de.O:case de.o:this.state=he.OP_INFO;break;default:throw this.fail(t.subarray(n))}break;case he.OP_INFO:switch(r){case de.SPACE:case de.TAB:this.state=he.OP_INFO_SPC;break;default:throw this.fail(t.subarray(n))}break;case he.OP_INFO_SPC:switch(r){case de.SPACE:case de.TAB:continue;default:this.state=he.INFO_ARG,this.as=n}break;case he.INFO_ARG:switch(r){case de.CR:this.drop=1;break;case de.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=t.subarray(this.as,n-this.drop),this.dispatcher.push({kind:Pt.INFO,data:s}),this.drop=0,this.as=n+1,this.state=he.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;default:throw this.fail(t.subarray(n))}}(this.state===he.MSG_ARG||this.state===he.MINUS_ERR_ARG||this.state===he.INFO_ARG)&&!this.argBuf&&(this.argBuf=new Uo(t.subarray(this.as,n-this.drop))),this.state===he.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new Uo(t.subarray(this.as)))}cloneMsgArg(){const t=this.ma.subject.length,n=this.ma.reply?this.ma.reply.length:0,r=new Uint8Array(t+n);r.set(this.ma.subject),this.ma.reply&&r.set(this.ma.reply,t),this.argBuf=new Uo(r),this.ma.subject=r.subarray(0,t),this.ma.reply&&(this.ma.reply=r.subarray(t))}processMsgArgs(t){if(this.hdr>=0)return this.processHeaderMsgArgs(t);const n=[];let r=-1;for(let s=0;s<t.length;s++)switch(t[s]){case de.SPACE:case de.TAB:case de.CR:case de.NL:r>=0&&(n.push(t.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(t.subarray(r)),n.length){case 3:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(n[2]);break;case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.size=this.protoParseInt(n[3]);break;default:throw this.fail(t,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(t,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(t,"processMsgArgs Bad or Missing Size Error")}fail(t,n=""){return n?n=`${n} [${this.state}]`:n=`parse error [${this.state}]`,new Error(`${n}: ${Ht.decode(t)}`)}processHeaderMsgArgs(t){const n=[];let r=-1;for(let s=0;s<t.length;s++)switch(t[s]){case de.SPACE:case de.TAB:case de.CR:case de.NL:r>=0&&(n.push(t.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(t.subarray(r)),n.length){case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(n[2]),this.ma.size=this.protoParseInt(n[3]);break;case 5:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.hdr=this.protoParseInt(n[3]),this.ma.size=this.protoParseInt(n[4]);break;default:throw this.fail(t,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(t){if(t.length===0)return-1;let n=0;for(let r=0;r<t.length;r++){if(t[r]<48||t[r]>57)return-1;n=n*10+(t[r]-h1)}return n}}var he;(function(e){e[e.OP_START=0]="OP_START",e[e.OP_PLUS=1]="OP_PLUS",e[e.OP_PLUS_O=2]="OP_PLUS_O",e[e.OP_PLUS_OK=3]="OP_PLUS_OK",e[e.OP_MINUS=4]="OP_MINUS",e[e.OP_MINUS_E=5]="OP_MINUS_E",e[e.OP_MINUS_ER=6]="OP_MINUS_ER",e[e.OP_MINUS_ERR=7]="OP_MINUS_ERR",e[e.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",e[e.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",e[e.OP_M=10]="OP_M",e[e.OP_MS=11]="OP_MS",e[e.OP_MSG=12]="OP_MSG",e[e.OP_MSG_SPC=13]="OP_MSG_SPC",e[e.MSG_ARG=14]="MSG_ARG",e[e.MSG_PAYLOAD=15]="MSG_PAYLOAD",e[e.MSG_END=16]="MSG_END",e[e.OP_H=17]="OP_H",e[e.OP_P=18]="OP_P",e[e.OP_PI=19]="OP_PI",e[e.OP_PIN=20]="OP_PIN",e[e.OP_PING=21]="OP_PING",e[e.OP_PO=22]="OP_PO",e[e.OP_PON=23]="OP_PON",e[e.OP_PONG=24]="OP_PONG",e[e.OP_I=25]="OP_I",e[e.OP_IN=26]="OP_IN",e[e.OP_INF=27]="OP_INF",e[e.OP_INFO=28]="OP_INFO",e[e.OP_INFO_SPC=29]="OP_INFO_SPC",e[e.INFO_ARG=30]="INFO_ARG"})(he||(he={}));var de;(function(e){e[e.CR=13]="CR",e[e.E=69]="E",e[e.e=101]="e",e[e.F=70]="F",e[e.f=102]="f",e[e.G=71]="G",e[e.g=103]="g",e[e.H=72]="H",e[e.h=104]="h",e[e.I=73]="I",e[e.i=105]="i",e[e.K=75]="K",e[e.k=107]="k",e[e.M=77]="M",e[e.m=109]="m",e[e.MINUS=45]="MINUS",e[e.N=78]="N",e[e.n=110]="n",e[e.NL=10]="NL",e[e.O=79]="O",e[e.o=111]="o",e[e.P=80]="P",e[e.p=112]="p",e[e.PLUS=43]="PLUS",e[e.R=82]="R",e[e.r=114]="r",e[e.S=83]="S",e[e.s=115]="s",e[e.SPACE=32]="SPACE",e[e.TAB=9]="TAB"})(de||(de={}));(function(e){var t=function(p,w){this.hi=p|0,this.lo=w|0},n=function(p){var w,b=new Float64Array(16);if(p)for(w=0;w<p.length;w++)b[w]=p[w];return b},r=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=n(),a=n([1]),c=n([56129,1]),l=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(p,w){return p<<w|p>>>32-w}function P(p,w){var b=p[w+3]&255;return b=b<<8|p[w+2]&255,b=b<<8|p[w+1]&255,b<<8|p[w+0]&255}function L(p,w){var b=p[w]<<24|p[w+1]<<16|p[w+2]<<8|p[w+3],C=p[w+4]<<24|p[w+5]<<16|p[w+6]<<8|p[w+7];return new t(b,C)}function I(p,w,b){var C;for(C=0;C<4;C++)p[w+C]=b&255,b>>>=8}function N(p,w,b){p[w]=b.hi>>24&255,p[w+1]=b.hi>>16&255,p[w+2]=b.hi>>8&255,p[w+3]=b.hi&255,p[w+4]=b.lo>>24&255,p[w+5]=b.lo>>16&255,p[w+6]=b.lo>>8&255,p[w+7]=b.lo&255}function O(p,w,b,C,R){var $,Y=0;for($=0;$<R;$++)Y|=p[w+$]^b[C+$];return(1&Y-1>>>8)-1}function M(p,w,b,C){return O(p,w,b,C,16)}function U(p,w,b,C){return O(p,w,b,C,32)}function k(p,w,b,C,R){var $=new Uint32Array(16),Y=new Uint32Array(16),re=new Uint32Array(16),H=new Uint32Array(4),J,be,Le;for(J=0;J<4;J++)Y[5*J]=P(C,4*J),Y[1+J]=P(b,4*J),Y[6+J]=P(w,4*J),Y[11+J]=P(b,16+4*J);for(J=0;J<16;J++)re[J]=Y[J];for(J=0;J<20;J++){for(be=0;be<4;be++){for(Le=0;Le<4;Le++)H[Le]=Y[(5*be+4*Le)%16];for(H[1]^=E(H[0]+H[3]|0,7),H[2]^=E(H[1]+H[0]|0,9),H[3]^=E(H[2]+H[1]|0,13),H[0]^=E(H[3]+H[2]|0,18),Le=0;Le<4;Le++)$[4*be+(be+Le)%4]=H[Le]}for(Le=0;Le<16;Le++)Y[Le]=$[Le]}if(R){for(J=0;J<16;J++)Y[J]=Y[J]+re[J]|0;for(J=0;J<4;J++)Y[5*J]=Y[5*J]-P(C,4*J)|0,Y[6+J]=Y[6+J]-P(w,4*J)|0;for(J=0;J<4;J++)I(p,4*J,Y[5*J]),I(p,16+4*J,Y[6+J])}else for(J=0;J<16;J++)I(p,4*J,Y[J]+re[J]|0)}function V(p,w,b,C){return k(p,w,b,C,!1),0}function X(p,w,b,C){return k(p,w,b,C,!0),0}var Q=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ae(p,w,b,C,R,$,Y){var re=new Uint8Array(16),H=new Uint8Array(64),J,be;if(!R)return 0;for(be=0;be<16;be++)re[be]=0;for(be=0;be<8;be++)re[be]=$[be];for(;R>=64;){for(V(H,re,Y,Q),be=0;be<64;be++)p[w+be]=(b?b[C+be]:0)^H[be];for(J=1,be=8;be<16;be++)J=J+(re[be]&255)|0,re[be]=J&255,J>>>=8;R-=64,w+=64,b&&(C+=64)}if(R>0)for(V(H,re,Y,Q),be=0;be<R;be++)p[w+be]=(b?b[C+be]:0)^H[be];return 0}function se(p,w,b,C,R){return ae(p,w,null,0,b,C,R)}function Z(p,w,b,C,R){var $=new Uint8Array(32);return X($,C,R,Q),se(p,w,b,C.subarray(16),$)}function we(p,w,b,C,R,$,Y){var re=new Uint8Array(32);return X(re,$,Y,Q),ae(p,w,b,C,R,$.subarray(16),re)}function Ne(p,w){var b,C=0;for(b=0;b<17;b++)C=C+(p[b]+w[b]|0)|0,p[b]=C&255,C>>>=8}var Oe=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function Te(p,w,b,C,R,$){var Y,re,H,J,be=new Uint32Array(17),Le=new Uint32Array(17),Qe=new Uint32Array(17),Zt=new Uint32Array(17),Ir=new Uint32Array(17);for(H=0;H<17;H++)Le[H]=Qe[H]=0;for(H=0;H<16;H++)Le[H]=$[H];for(Le[3]&=15,Le[4]&=252,Le[7]&=15,Le[8]&=252,Le[11]&=15,Le[12]&=252,Le[15]&=15;R>0;){for(H=0;H<17;H++)Zt[H]=0;for(H=0;H<16&&H<R;++H)Zt[H]=b[C+H];for(Zt[H]=1,C+=H,R-=H,Ne(Qe,Zt),re=0;re<17;re++)for(be[re]=0,H=0;H<17;H++)be[re]=be[re]+Qe[H]*(H<=re?Le[re-H]:320*Le[re+17-H]|0)|0|0;for(re=0;re<17;re++)Qe[re]=be[re];for(J=0,H=0;H<16;H++)J=J+Qe[H]|0,Qe[H]=J&255,J>>>=8;for(J=J+Qe[16]|0,Qe[16]=J&3,J=5*(J>>>2)|0,H=0;H<16;H++)J=J+Qe[H]|0,Qe[H]=J&255,J>>>=8;J=J+Qe[16]|0,Qe[16]=J}for(H=0;H<17;H++)Ir[H]=Qe[H];for(Ne(Qe,Oe),Y=-(Qe[16]>>>7)|0,H=0;H<17;H++)Qe[H]^=Y&(Ir[H]^Qe[H]);for(H=0;H<16;H++)Zt[H]=$[H+16];for(Zt[16]=0,Ne(Qe,Zt),H=0;H<16;H++)p[w+H]=Qe[H];return 0}function ve(p,w,b,C,R,$){var Y=new Uint8Array(16);return Te(Y,0,b,C,R,$),M(p,w,Y,0)}function Ce(p,w,b,C,R){var $;if(b<32)return-1;for(we(p,0,w,0,b,C,R),Te(p,16,p,32,b-32,p),$=0;$<16;$++)p[$]=0;return 0}function qe(p,w,b,C,R){var $,Y=new Uint8Array(32);if(b<32||(Z(Y,0,32,C,R),ve(w,16,w,32,b-32,Y)!==0))return-1;for(we(p,0,w,0,b,C,R),$=0;$<32;$++)p[$]=0;return 0}function m(p,w){var b;for(b=0;b<16;b++)p[b]=w[b]|0}function A(p){var w,b;for(b=0;b<16;b++)p[b]+=65536,w=Math.floor(p[b]/65536),p[(b+1)*(b<15?1:0)]+=w-1+37*(w-1)*(b===15?1:0),p[b]-=w*65536}function oe(p,w,b){for(var C,R=~(b-1),$=0;$<16;$++)C=R&(p[$]^w[$]),p[$]^=C,w[$]^=C}function v(p,w){var b,C,R,$=n(),Y=n();for(b=0;b<16;b++)Y[b]=w[b];for(A(Y),A(Y),A(Y),C=0;C<2;C++){for($[0]=Y[0]-65517,b=1;b<15;b++)$[b]=Y[b]-65535-($[b-1]>>16&1),$[b-1]&=65535;$[15]=Y[15]-32767-($[14]>>16&1),R=$[15]>>16&1,$[14]&=65535,oe(Y,$,1-R)}for(b=0;b<16;b++)p[2*b]=Y[b]&255,p[2*b+1]=Y[b]>>8}function me(p,w){var b=new Uint8Array(32),C=new Uint8Array(32);return v(b,p),v(C,w),U(b,0,C,0)}function Ee(p){var w=new Uint8Array(32);return v(w,p),w[0]&1}function fe(p,w){var b;for(b=0;b<16;b++)p[b]=w[2*b]+(w[2*b+1]<<8);p[15]&=32767}function F(p,w,b){var C;for(C=0;C<16;C++)p[C]=w[C]+b[C]|0}function K(p,w,b){var C;for(C=0;C<16;C++)p[C]=w[C]-b[C]|0}function B(p,w,b){var C,R,$=new Float64Array(31);for(C=0;C<31;C++)$[C]=0;for(C=0;C<16;C++)for(R=0;R<16;R++)$[C+R]+=w[C]*b[R];for(C=0;C<15;C++)$[C]+=38*$[C+16];for(C=0;C<16;C++)p[C]=$[C];A(p),A(p)}function ee(p,w){B(p,w,w)}function pe(p,w){var b=n(),C;for(C=0;C<16;C++)b[C]=w[C];for(C=253;C>=0;C--)ee(b,b),C!==2&&C!==4&&B(b,b,w);for(C=0;C<16;C++)p[C]=b[C]}function Se(p,w){var b=n(),C;for(C=0;C<16;C++)b[C]=w[C];for(C=250;C>=0;C--)ee(b,b),C!==1&&B(b,b,w);for(C=0;C<16;C++)p[C]=b[C]}function y(p,w,b){var C=new Uint8Array(32),R=new Float64Array(80),$,Y,re=n(),H=n(),J=n(),be=n(),Le=n(),Qe=n();for(Y=0;Y<31;Y++)C[Y]=w[Y];for(C[31]=w[31]&127|64,C[0]&=248,fe(R,b),Y=0;Y<16;Y++)H[Y]=R[Y],be[Y]=re[Y]=J[Y]=0;for(re[0]=be[0]=1,Y=254;Y>=0;--Y)$=C[Y>>>3]>>>(Y&7)&1,oe(re,H,$),oe(J,be,$),F(Le,re,J),K(re,re,J),F(J,H,be),K(H,H,be),ee(be,Le),ee(Qe,re),B(re,J,re),B(J,H,Le),F(Le,re,J),K(re,re,J),ee(H,re),K(J,be,Qe),B(re,J,c),F(re,re,be),B(J,J,re),B(re,be,Qe),B(be,H,R),ee(H,Le),oe(re,H,$),oe(J,be,$);for(Y=0;Y<16;Y++)R[Y+16]=re[Y],R[Y+32]=J[Y],R[Y+48]=H[Y],R[Y+64]=be[Y];var Zt=R.subarray(32),Ir=R.subarray(16);return pe(Zt,Zt),B(Ir,Ir,Zt),v(p,Ir),0}function S(p,w){return y(p,w,i)}function D(p,w){return r(w,32),S(p,w)}function W(p,w,b){var C=new Uint8Array(32);return y(C,b,w),X(p,s,C,Q)}var z=Ce,ne=qe;function ce(p,w,b,C,R,$){var Y=new Uint8Array(32);return W(Y,R,$),z(p,w,b,C,Y)}function _(p,w,b,C,R,$){var Y=new Uint8Array(32);return W(Y,R,$),ne(p,w,b,C,Y)}function x(){var p=0,w=0,b=0,C=0,R=65535,$,Y,re;for(re=0;re<arguments.length;re++)$=arguments[re].lo,Y=arguments[re].hi,p+=$&R,w+=$>>>16,b+=Y&R,C+=Y>>>16;return w+=p>>>16,b+=w>>>16,C+=b>>>16,new t(b&R|C<<16,p&R|w<<16)}function T(p,w){return new t(p.hi>>>w,p.lo>>>w|p.hi<<32-w)}function G(){var p=0,w=0,b;for(b=0;b<arguments.length;b++)p^=arguments[b].lo,w^=arguments[b].hi;return new t(w,p)}function ie(p,w){var b,C,R=32-w;return w<32?(b=p.hi>>>w|p.lo<<R,C=p.lo>>>w|p.hi<<R):w<64&&(b=p.lo>>>w|p.hi<<R,C=p.hi>>>w|p.lo<<R),new t(b,C)}function te(p,w,b){var C=p.hi&w.hi^~p.hi&b.hi,R=p.lo&w.lo^~p.lo&b.lo;return new t(C,R)}function j(p,w,b){var C=p.hi&w.hi^p.hi&b.hi^w.hi&b.hi,R=p.lo&w.lo^p.lo&b.lo^w.lo&b.lo;return new t(C,R)}function q(p){return G(ie(p,28),ie(p,34),ie(p,39))}function _e(p){return G(ie(p,14),ie(p,18),ie(p,41))}function ke(p){return G(ie(p,1),ie(p,8),T(p,7))}function Me(p){return G(ie(p,19),ie(p,61),T(p,6))}var Je=[new t(1116352408,3609767458),new t(1899447441,602891725),new t(3049323471,3964484399),new t(3921009573,2173295548),new t(961987163,4081628472),new t(1508970993,3053834265),new t(2453635748,2937671579),new t(2870763221,3664609560),new t(3624381080,2734883394),new t(310598401,1164996542),new t(607225278,1323610764),new t(1426881987,3590304994),new t(1925078388,4068182383),new t(2162078206,991336113),new t(2614888103,633803317),new t(3248222580,3479774868),new t(3835390401,2666613458),new t(4022224774,944711139),new t(264347078,2341262773),new t(604807628,2007800933),new t(770255983,1495990901),new t(1249150122,1856431235),new t(1555081692,3175218132),new t(1996064986,2198950837),new t(2554220882,3999719339),new t(2821834349,766784016),new t(2952996808,2566594879),new t(3210313671,3203337956),new t(3336571891,1034457026),new t(3584528711,2466948901),new t(113926993,3758326383),new t(338241895,168717936),new t(666307205,1188179964),new t(773529912,1546045734),new t(1294757372,1522805485),new t(1396182291,2643833823),new t(1695183700,2343527390),new t(1986661051,1014477480),new t(2177026350,1206759142),new t(2456956037,344077627),new t(2730485921,1290863460),new t(2820302411,3158454273),new t(3259730800,3505952657),new t(3345764771,106217008),new t(3516065817,3606008344),new t(3600352804,1432725776),new t(4094571909,1467031594),new t(275423344,851169720),new t(430227734,3100823752),new t(506948616,1363258195),new t(659060556,3750685593),new t(883997877,3785050280),new t(958139571,3318307427),new t(1322822218,3812723403),new t(1537002063,2003034995),new t(1747873779,3602036899),new t(1955562222,1575990012),new t(2024104815,1125592928),new t(2227730452,2716904306),new t(2361852424,442776044),new t(2428436474,593698344),new t(2756734187,3733110249),new t(3204031479,2999351573),new t(3329325298,3815920427),new t(3391569614,3928383900),new t(3515267271,566280711),new t(3940187606,3454069534),new t(4118630271,4000239992),new t(116418474,1914138554),new t(174292421,2731055270),new t(289380356,3203993006),new t(460393269,320620315),new t(685471733,587496836),new t(852142971,1086792851),new t(1017036298,365543100),new t(1126000580,2618297676),new t(1288033470,3409855158),new t(1501505948,4234509866),new t(1607167915,987167468),new t(1816402316,1246189591)];function rt(p,w,b){var C=[],R=[],$=[],Y=[],re,H,J;for(H=0;H<8;H++)C[H]=$[H]=L(p,8*H);for(var be=0;b>=128;){for(H=0;H<16;H++)Y[H]=L(w,8*H+be);for(H=0;H<80;H++){for(J=0;J<8;J++)R[J]=$[J];for(re=x($[7],_e($[4]),te($[4],$[5],$[6]),Je[H],Y[H%16]),R[7]=x(re,q($[0]),j($[0],$[1],$[2])),R[3]=x(R[3],re),J=0;J<8;J++)$[(J+1)%8]=R[J];if(H%16===15)for(J=0;J<16;J++)Y[J]=x(Y[J],Y[(J+9)%16],ke(Y[(J+1)%16]),Me(Y[(J+14)%16]))}for(H=0;H<8;H++)$[H]=x($[H],C[H]),C[H]=$[H];be+=128,b-=128}for(H=0;H<8;H++)N(p,8*H,C[H]);return b}var Qt=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function _t(p,w,b){var C=new Uint8Array(64),R=new Uint8Array(256),$,Y=b;for($=0;$<64;$++)C[$]=Qt[$];for(rt(C,w,b),b%=128,$=0;$<256;$++)R[$]=0;for($=0;$<b;$++)R[$]=w[Y-b+$];for(R[b]=128,b=256-128*(b<112?1:0),R[b-9]=0,N(R,b-8,new t(Y/536870912|0,Y<<3)),rt(C,R,b),$=0;$<64;$++)p[$]=C[$];return 0}function kn(p,w){var b=n(),C=n(),R=n(),$=n(),Y=n(),re=n(),H=n(),J=n(),be=n();K(b,p[1],p[0]),K(be,w[1],w[0]),B(b,b,be),F(C,p[0],p[1]),F(be,w[0],w[1]),B(C,C,be),B(R,p[3],w[3]),B(R,R,u),B($,p[2],w[2]),F($,$,$),K(Y,C,b),K(re,$,R),F(H,$,R),F(J,C,b),B(p[0],Y,re),B(p[1],J,H),B(p[2],H,re),B(p[3],Y,J)}function ct(p,w,b){var C;for(C=0;C<4;C++)oe(p[C],w[C],b)}function bt(p,w){var b=n(),C=n(),R=n();pe(R,w[2]),B(b,w[0],R),B(C,w[1],R),v(p,C),p[31]^=Ee(b)<<7}function $n(p,w,b){var C,R;for(m(p[0],o),m(p[1],a),m(p[2],a),m(p[3],o),R=255;R>=0;--R)C=b[R/8|0]>>(R&7)&1,ct(p,w,C),kn(w,p),kn(p,p),ct(p,w,C)}function Or(p,w){var b=[n(),n(),n(),n()];m(b[0],f),m(b[1],h),m(b[2],a),B(b[3],f,h),$n(p,b,w)}function Zr(p,w,b){var C=new Uint8Array(64),R=[n(),n(),n(),n()],$;for(b||r(w,32),_t(C,w,32),C[0]&=248,C[31]&=127,C[31]|=64,Or(R,C),bt(p,R),$=0;$<32;$++)w[$+32]=p[$];return 0}var ar=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function es(p,w){var b,C,R,$;for(C=63;C>=32;--C){for(b=0,R=C-32,$=C-12;R<$;++R)w[R]+=b-16*w[C]*ar[R-(C-32)],b=Math.floor((w[R]+128)/256),w[R]-=b*256;w[R]+=b,w[C]=0}for(b=0,R=0;R<32;R++)w[R]+=b-(w[31]>>4)*ar[R],b=w[R]>>8,w[R]&=255;for(R=0;R<32;R++)w[R]-=b*ar[R];for(C=0;C<32;C++)w[C+1]+=w[C]>>8,p[C]=w[C]&255}function ts(p){var w=new Float64Array(64),b;for(b=0;b<64;b++)w[b]=p[b];for(b=0;b<64;b++)p[b]=0;es(p,w)}function Ys(p,w,b,C){var R=new Uint8Array(64),$=new Uint8Array(64),Y=new Uint8Array(64),re,H,J=new Float64Array(64),be=[n(),n(),n(),n()];_t(R,C,32),R[0]&=248,R[31]&=127,R[31]|=64;var Le=b+64;for(re=0;re<b;re++)p[64+re]=w[re];for(re=0;re<32;re++)p[32+re]=R[32+re];for(_t(Y,p.subarray(32),b+32),ts(Y),Or(be,Y),bt(p,be),re=32;re<64;re++)p[re]=C[re];for(_t($,p,b+64),ts($),re=0;re<64;re++)J[re]=0;for(re=0;re<32;re++)J[re]=Y[re];for(re=0;re<32;re++)for(H=0;H<32;H++)J[re+H]+=$[re]*R[H];return es(p.subarray(32),J),Le}function le(p,w){var b=n(),C=n(),R=n(),$=n(),Y=n(),re=n(),H=n();return m(p[2],a),fe(p[1],w),ee(R,p[1]),B($,R,l),K(R,R,p[2]),F($,p[2],$),ee(Y,$),ee(re,Y),B(H,re,Y),B(b,H,R),B(b,b,$),Se(b,b),B(b,b,R),B(b,b,$),B(b,b,$),B(p[0],b,$),ee(C,p[0]),B(C,C,$),me(C,R)&&B(p[0],p[0],d),ee(C,p[0]),B(C,C,$),me(C,R)?-1:(Ee(p[0])===w[31]>>7&&K(p[0],o,p[0]),B(p[3],p[0],p[1]),0)}function xe(p,w,b,C){var R,$=new Uint8Array(32),Y=new Uint8Array(64),re=[n(),n(),n(),n()],H=[n(),n(),n(),n()];if(b<64||le(H,C))return-1;for(R=0;R<b;R++)p[R]=w[R];for(R=0;R<32;R++)p[R+32]=C[R];if(_t(Y,p,b),ts(Y),$n(re,H,Y),Or(H,w.subarray(32)),kn(re,H),bt($,re),b-=64,U(w,0,$,0)){for(R=0;R<b;R++)p[R]=0;return-1}for(R=0;R<b;R++)p[R]=w[R+64];return b}var lt=32,yt=24,xt=32,wt=16,Et=32,cr=32,Dn=32,Un=32,go=32,yc=yt,id=xt,od=wt,Cn=64,lr=32,Ar=64,_o=32,bo=64;e.lowlevel={crypto_core_hsalsa20:X,crypto_stream_xor:we,crypto_stream:Z,crypto_stream_salsa20_xor:ae,crypto_stream_salsa20:se,crypto_onetimeauth:Te,crypto_onetimeauth_verify:ve,crypto_verify_16:M,crypto_verify_32:U,crypto_secretbox:Ce,crypto_secretbox_open:qe,crypto_scalarmult:y,crypto_scalarmult_base:S,crypto_box_beforenm:W,crypto_box_afternm:z,crypto_box:ce,crypto_box_open:_,crypto_box_keypair:D,crypto_hash:_t,crypto_sign:Ys,crypto_sign_keypair:Zr,crypto_sign_open:xe,crypto_secretbox_KEYBYTES:lt,crypto_secretbox_NONCEBYTES:yt,crypto_secretbox_ZEROBYTES:xt,crypto_secretbox_BOXZEROBYTES:wt,crypto_scalarmult_BYTES:Et,crypto_scalarmult_SCALARBYTES:cr,crypto_box_PUBLICKEYBYTES:Dn,crypto_box_SECRETKEYBYTES:Un,crypto_box_BEFORENMBYTES:go,crypto_box_NONCEBYTES:yc,crypto_box_ZEROBYTES:id,crypto_box_BOXZEROBYTES:od,crypto_sign_BYTES:Cn,crypto_sign_PUBLICKEYBYTES:lr,crypto_sign_SECRETKEYBYTES:Ar,crypto_sign_SEEDBYTES:_o,crypto_hash_BYTES:bo,gf:n,D:l,L:ar,pack25519:v,unpack25519:fe,M:B,A:F,S:ee,Z:K,pow2523:Se,add:kn,set25519:m,modL:es,scalarmult:$n,scalarbase:Or};function xc(p,w){if(p.length!==lt)throw new Error("bad key size");if(w.length!==yt)throw new Error("bad nonce size")}function ad(p,w){if(p.length!==Dn)throw new Error("bad public key size");if(w.length!==Un)throw new Error("bad secret key size")}function $t(){for(var p=0;p<arguments.length;p++)if(!(arguments[p]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function wc(p){for(var w=0;w<p.length;w++)p[w]=0}e.randomBytes=function(p){var w=new Uint8Array(p);return r(w,p),w},e.secretbox=function(p,w,b){$t(p,w,b),xc(b,w);for(var C=new Uint8Array(xt+p.length),R=new Uint8Array(C.length),$=0;$<p.length;$++)C[$+xt]=p[$];return Ce(R,C,C.length,w,b),R.subarray(wt)},e.secretbox.open=function(p,w,b){$t(p,w,b),xc(b,w);for(var C=new Uint8Array(wt+p.length),R=new Uint8Array(C.length),$=0;$<p.length;$++)C[$+wt]=p[$];return C.length<32||qe(R,C,C.length,w,b)!==0?null:R.subarray(xt)},e.secretbox.keyLength=lt,e.secretbox.nonceLength=yt,e.secretbox.overheadLength=wt,e.scalarMult=function(p,w){if($t(p,w),p.length!==cr)throw new Error("bad n size");if(w.length!==Et)throw new Error("bad p size");var b=new Uint8Array(Et);return y(b,p,w),b},e.scalarMult.base=function(p){if($t(p),p.length!==cr)throw new Error("bad n size");var w=new Uint8Array(Et);return S(w,p),w},e.scalarMult.scalarLength=cr,e.scalarMult.groupElementLength=Et,e.box=function(p,w,b,C){var R=e.box.before(b,C);return e.secretbox(p,w,R)},e.box.before=function(p,w){$t(p,w),ad(p,w);var b=new Uint8Array(go);return W(b,p,w),b},e.box.after=e.secretbox,e.box.open=function(p,w,b,C){var R=e.box.before(b,C);return e.secretbox.open(p,w,R)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var p=new Uint8Array(Dn),w=new Uint8Array(Un);return D(p,w),{publicKey:p,secretKey:w}},e.box.keyPair.fromSecretKey=function(p){if($t(p),p.length!==Un)throw new Error("bad secret key size");var w=new Uint8Array(Dn);return S(w,p),{publicKey:w,secretKey:new Uint8Array(p)}},e.box.publicKeyLength=Dn,e.box.secretKeyLength=Un,e.box.sharedKeyLength=go,e.box.nonceLength=yc,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(p,w){if($t(p,w),w.length!==Ar)throw new Error("bad secret key size");var b=new Uint8Array(Cn+p.length);return Ys(b,p,p.length,w),b},e.sign.open=function(p,w){if($t(p,w),w.length!==lr)throw new Error("bad public key size");var b=new Uint8Array(p.length),C=xe(b,p,p.length,w);if(C<0)return null;for(var R=new Uint8Array(C),$=0;$<R.length;$++)R[$]=b[$];return R},e.sign.detached=function(p,w){for(var b=e.sign(p,w),C=new Uint8Array(Cn),R=0;R<C.length;R++)C[R]=b[R];return C},e.sign.detached.verify=function(p,w,b){if($t(p,w,b),w.length!==Cn)throw new Error("bad signature size");if(b.length!==lr)throw new Error("bad public key size");var C=new Uint8Array(Cn+p.length),R=new Uint8Array(Cn+p.length),$;for($=0;$<Cn;$++)C[$]=w[$];for($=0;$<p.length;$++)C[$+Cn]=p[$];return xe(R,C,C.length,b)>=0},e.sign.keyPair=function(){var p=new Uint8Array(lr),w=new Uint8Array(Ar);return Zr(p,w),{publicKey:p,secretKey:w}},e.sign.keyPair.fromSecretKey=function(p){if($t(p),p.length!==Ar)throw new Error("bad secret key size");for(var w=new Uint8Array(lr),b=0;b<w.length;b++)w[b]=p[32+b];return{publicKey:w,secretKey:new Uint8Array(p)}},e.sign.keyPair.fromSeed=function(p){if($t(p),p.length!==_o)throw new Error("bad seed size");for(var w=new Uint8Array(lr),b=new Uint8Array(Ar),C=0;C<32;C++)b[C]=p[C];return Zr(w,b,!0),{publicKey:w,secretKey:b}},e.sign.publicKeyLength=lr,e.sign.secretKeyLength=Ar,e.sign.seedLength=_o,e.sign.signatureLength=Cn,e.hash=function(p){$t(p);var w=new Uint8Array(bo);return _t(w,p,p.length),w},e.hash.hashLength=bo,e.verify=function(p,w){return $t(p,w),p.length===0||w.length===0||p.length!==w.length?!1:O(p,0,w,0,p.length)===0},e.setPRNG=function(p){r=p},function(){var p=typeof globalThis<"u"?globalThis.crypto||globalThis.msCrypto:null;if(p&&p.getRandomValues){var w=65536;e.setPRNG(function(b,C){var R,$=new Uint8Array(C);for(R=0;R<C;R+=w)p.getRandomValues($.subarray(R,R+Math.min(C-R,w)));for(R=0;R<C;R++)b[R]=$[R];wc($)})}else typeof require<"u"&&(p=require("crypto"),p&&p.randomBytes&&e.setPRNG(function(b,C){var R,$=p.randomBytes(C);for(R=0;R<C;R++)b[R]=$[R];wc($)}))}()})(typeof module<"u"&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const ui=typeof module<"u"&&module.exports?module.exports:globalThis.nacl;ui.sign.keyPair.fromSeed,ui.sign.detached,ui.sign.detached.verify,ui.randomBytes;var Cu;(function(e){e.InvalidPrefixByte="nkeys: invalid prefix byte",e.InvalidKey="nkeys: invalid key",e.InvalidPublicKey="nkeys: invalid public key",e.InvalidSeedLen="nkeys: invalid seed length",e.InvalidSeed="nkeys: invalid seed",e.InvalidEncoding="nkeys: invalid encoded key",e.InvalidSignature="nkeys: signature verification failed",e.CannotSign="nkeys: cannot sign, no private key available",e.PublicKeyOnly="nkeys: no seed or private key available",e.InvalidChecksum="nkeys: invalid checksum",e.SerializationError="nkeys: serialization error",e.ApiError="nkeys: api error",e.ClearedPair="nkeys: pair is cleared"})(Cu||(Cu={}));var Ou;(function(e){e[e.Seed=144]="Seed",e[e.Private=120]="Private",e[e.Operator=112]="Operator",e[e.Server=104]="Server",e[e.Cluster=16]="Cluster",e[e.Account=0]="Account",e[e.User=160]="User"})(Ou||(Ou={}));function d1(e){return t=>{let n={};return e.forEach(r=>{const s=r(t)||{};n=Object.assign(n,s)}),n}}function m1(){return()=>{}}function p1(e,t){return()=>{const n=typeof e=="function"?e():e,r=typeof t=="function"?t():t;return{user:n,pass:r}}}function g1(e){return()=>({auth_token:typeof e=="function"?e():e})}const Jh=2*60*1e3,_1=2,Yh=2*1e3;function b1(){return{maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:Jh,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:Yh,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1}}function y1(e){const t=[];return typeof e.authenticator=="function"&&t.push(e.authenticator),Array.isArray(e.authenticator)&&t.push(...e.authenticator),e.token&&t.push(g1(e.token)),e.user&&t.push(p1(e.user,e.pass)),t.length===0?m1():d1(t)}function x1(e){const t=`${pa}:${Vh()}`;if(e=e||{servers:[t]},e.servers=e.servers||[],typeof e.servers=="string"&&(e.servers=[e.servers]),e.servers.length>0&&e.port)throw new ge("port and servers options are mutually exclusive",ue.InvalidOption);e.servers.length===0&&e.port&&(e.servers=[`${pa}:${e.port}`]),e.servers&&e.servers.length===0&&(e.servers=[t]);const n=mo(b1(),e);if(n.authenticator=y1(n),["reconnectDelayHandler","authenticator"].forEach(r=>{if(n[r]&&typeof n[r]!="function")throw new ge(`${r} option should be a function`,ue.NotFunction)}),n.reconnectDelayHandler||(n.reconnectDelayHandler=()=>{let r=n.tls?n.reconnectJitterTLS:n.reconnectJitter;return r&&(r++,r=Math.floor(Math.random()*r)),n.reconnectTimeWait+r}),n.inboxPrefix)try{En(n.inboxPrefix)}catch(r){throw new ge(r.message,ue.ApiError)}if(n.resolve&&typeof Wh()!="function")throw new ge("'resolve' is not supported on this client",ue.InvalidOption);return n}function w1(e,t){const{proto:n,tls_required:r,tls_available:s}=e;if((n===void 0||n<1)&&t.noEcho)throw new ge("noEcho",ue.ServerOptionNotAvailable);const i=r||s||!1;if(t.tls&&!i)throw new ge("tls",ue.ServerOptionNotAvailable)}const E1=1024*32,v1=/^INFO\s+([^\r\n]+)\r\n/i,S1=ws(`PONG\r
`),Au=ws(`PING\r
`);class k1{constructor(t,n,r){g(this,"echo");g(this,"no_responders");g(this,"protocol");g(this,"verbose");g(this,"pedantic");g(this,"jwt");g(this,"nkey");g(this,"sig");g(this,"user");g(this,"pass");g(this,"auth_token");g(this,"tls_required");g(this,"name");g(this,"lang");g(this,"version");g(this,"headers");this.protocol=1,this.version=t.version,this.lang=t.lang,this.echo=n.noEcho?!1:void 0,this.verbose=n.verbose,this.pedantic=n.pedantic,this.tls_required=n.tls?!0:void 0,this.name=n.name;const s=(n&&typeof n.authenticator=="function"?n.authenticator(r):{})||{};mo(this,s)}}class Xh extends ht{constructor(n,r,s={}){var o;super();g(this,"sid");g(this,"queue");g(this,"draining");g(this,"max");g(this,"subject");g(this,"drained");g(this,"protocol");g(this,"timer");g(this,"info");g(this,"cleanupFn");g(this,"closed");g(this,"requestSubject");mo(this,s),this.protocol=n,this.subject=r,this.draining=!1,this.noIterator=typeof s.callback=="function",this.closed=Xe();const i=!((o=n.options)!=null&&o.noAsyncTraces);s.timeout&&(this.timer=Gr(s.timeout,i),this.timer.then(()=>{this.timer=void 0}).catch(a=>{this.stop(a),this.noIterator&&this.callback(a,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(n){if(this.noIterator){const r=this.callback,s=n.ingestionFilterFn?n.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),i=n.protocolFilterFn?n.protocolFilterFn:()=>!0,o=n.dispatchedFn?n.dispatchedFn:()=>{};this.callback=(a,c)=>{const{ingest:l}=s(c);l&&i(c)&&(r(a,c),o(c))}}else this.protocolFilterFn=n.protocolFilterFn,this.dispatchedFn=n.dispatchedFn}callback(n,r){this.cancelTimeout(),n?this.stop(n):this.push(r)}close(){if(!this.isClosed()){this.cancelTimeout();const n=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch{}this.closed.resolve()};this.noIterator?n():this.push(n)}}unsubscribe(n){this.protocol.unsubscribe(this,n)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(ge.errorForCode(ue.ConnectionClosed)):this.isClosed()?Promise.reject(ge.errorForCode(ue.SubClosed)):(this.drained||(this.draining=!0,this.protocol.unsub(this),this.drained=this.protocol.flush(Xe()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class C1{constructor(){g(this,"mux");g(this,"subs");g(this,"sidCounter");this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(t){return this.sidCounter++,t.sid=this.sidCounter,this.subs.set(t.sid,t),t}setMux(t){return this.mux=t,t}getMux(){return this.mux}get(t){return this.subs.get(t)}resub(t){return this.sidCounter++,this.subs.delete(t.sid),t.sid=this.sidCounter,this.subs.set(t.sid,t),t}all(){return Array.from(this.subs.values())}cancel(t){t&&(t.close(),this.subs.delete(t.sid))}handleError(t){if(t&&t.permissionContext){const n=t.permissionContext,r=this.all();let s;if(n.operation==="subscription"&&(s=r.find(i=>i.subject===n.subject)),n.operation==="publish"&&(s=r.find(i=>i.requestSubject===n.subject)),s)return s.callback(t,{}),s.close(),this.subs.delete(s.sid),s!==this.mux}return!1}close(){this.subs.forEach(t=>{t.close()})}}class qi{constructor(t,n){g(this,"connected");g(this,"connectedOnce");g(this,"infoReceived");g(this,"info");g(this,"muxSubscriptions");g(this,"options");g(this,"outbound");g(this,"pongs");g(this,"subscriptions");g(this,"transport");g(this,"noMorePublishing");g(this,"connectError");g(this,"publisher");g(this,"_closed");g(this,"closed");g(this,"listeners");g(this,"heartbeats");g(this,"parser");g(this,"outMsgs");g(this,"inMsgs");g(this,"outBytes");g(this,"inBytes");g(this,"pendingLimit");g(this,"lastError");g(this,"abortReconnect");g(this,"whyClosed");g(this,"servers");g(this,"server");g(this,"features");g(this,"connectPromise");this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=E1,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=t,this.publisher=n,this.subscriptions=new C1,this.muxSubscriptions=new c1,this.outbound=new Jr,this.pongs=[],this.whyClosed="",this.pendingLimit=t.pendingLimit||this.pendingLimit,this.features=new qw({major:0,minor:0,micro:0}),this.connectPromise=null;const r=typeof t.servers=="string"?[t.servers]:t.servers;this.servers=new a1(r,{randomize:!t.noRandomize}),this.closed=Xe(),this.parser=new ku(this),this.heartbeats=new l1(this,this.options.pingInterval||Jh,this.options.maxPingOut||_1)}resetOutbound(){this.outbound.reset();const t=this.pongs;this.pongs=[];const n=ge.errorForCode(ue.Disconnect);n.stack="",t.forEach(r=>{r.reject(n)}),this.parser=new ku(this),this.infoReceived=!1}dispatchStatus(t){this.listeners.forEach(n=>{n.push(t)})}status(){const t=new ht;return this.listeners.push(t),t}prepare(){this.transport&&this.transport.discard(),this.info=void 0,this.resetOutbound();const t=Xe();return t.catch(()=>{}),this.pongs.unshift(t),this.connectError=n=>{t.reject(n)},this.transport=Vw(),this.transport.closed().then(async n=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError||this.lastError);return}}),t}disconnect(){this.dispatchStatus({type:$r.StaleConnection,data:""}),this.transport.disconnect()}reconnect(){return this.connected&&(this.dispatchStatus({type:$r.ClientInitiatedReconnect,data:""}),this.transport.disconnect()),Promise.resolve()}async disconnected(t){this.dispatchStatus({type:an.Disconnect,data:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{var n;this.dispatchStatus({type:an.Reconnect,data:this.servers.getCurrentServer().toString()}),((n=this.lastError)==null?void 0:n.code)===ue.AuthenticationExpired&&(this.lastError=void 0)}).catch(n=>{this._close(n)}):await this._close(t)}async dial(t){const n=this.prepare();let r;try{r=Gr(this.options.timeout||2e4);const s=this.transport.connect(t,this.options);await Promise.race([s,r]),(async()=>{try{for await(const i of this.transport)this.parser.parse(i)}catch(i){console.log("reader closed",i)}})().then()}catch(s){n.reject(s)}try{await Promise.race([r,n]),r&&r.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(s){throw r&&r.cancel(),await this.transport.close(s),s}}async _doDial(t){const n=await t.resolve({fn:Wh(),debug:this.options.debug,randomize:!this.options.noRandomize});let r=null;for(const s of n)try{r=null,this.dispatchStatus({type:$r.Reconnecting,data:s.toString()}),await this.dial(s);return}catch(i){r=i}throw r}dialLoop(){return this.connectPromise===null&&(this.connectPromise=this.dodialLoop(),this.connectPromise.then(()=>{}).catch(()=>{}).finally(()=>{this.connectPromise=null})),this.connectPromise}async dodialLoop(){let t;for(;;){this._closed&&this.servers.clear();const n=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():Yh;let r=n;const s=this.selectServer();if(!s||this.abortReconnect)throw t||(this.lastError?this.lastError:ge.errorForCode(ue.ConnectionRefused));const i=Date.now();if(s.lastConnect===0||s.lastConnect+n<=i){s.lastConnect=Date.now();try{await this._doDial(s);break}catch(o){if(t=o,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}s.reconnects++;const a=this.options.maxReconnectAttempts||0;a!==-1&&s.reconnects>=a&&this.servers.removeCurrentServer()}}else r=Math.min(r,s.lastConnect+n-i),await Qr(r)}}static async connect(t,n){const r=new qi(t,n);return await r.dialLoop(),r}static toError(t){const n=t?t.toLowerCase():"";if(n.indexOf("permissions violation")!==-1){const r=new ge(t,ue.PermissionsViolation),s=t.match(/(Publish|Subscription) to "(\S+)"/);return s&&(r.permissionContext={operation:s[1].toLowerCase(),subject:s[2]}),r}else return n.indexOf("authorization violation")!==-1?new ge(t,ue.AuthorizationViolation):n.indexOf("user authentication expired")!==-1?new ge(t,ue.AuthenticationExpired):n.indexOf("authentication timeout")!==-1?new ge(t,ue.AuthenticationTimeout):new ge(t,ue.ProtocolError)}processMsg(t,n){if(this.inMsgs++,this.inBytes+=n.length,!this.subscriptions.sidCounter)return;const r=this.subscriptions.get(t.sid);r&&(r.received+=1,r.callback&&r.callback(null,new uc(t,n,this)),r.max!==void 0&&r.received>=r.max&&r.unsubscribe())}processError(t){const n=hu(t),r=qi.toError(n),s={type:an.Error,data:r.code};if(r.isPermissionError()){let i=!1;if(r.permissionContext){s.permissionContext=r.permissionContext;const o=this.subscriptions.getMux();i=(o==null?void 0:o.subject)===r.permissionContext.subject}this.subscriptions.handleError(r),this.muxSubscriptions.handleError(i,r),i&&this.subscriptions.setMux(null)}this.dispatchStatus(s),this.handleError(r)}handleError(t){t.isAuthError()?this.handleAuthError(t):t.isProtocolError()?this.lastError=t:t.isAuthTimeout()&&(this.lastError=t),t.isPermissionError()||(this.lastError=t)}handleAuthError(t){this.lastError&&t.code===this.lastError.code&&this.options.ignoreAuthErrorAbort===!1&&(this.abortReconnect=!0),this.connectError?this.connectError(t):this.disconnect()}processPing(){this.transport.send(S1)}processPong(){const t=this.pongs.shift();t&&t.resolve()}processInfo(t){const n=JSON.parse(hu(t));this.info=n;const r=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(n,this.transport.isEncrypted());if(!this.infoReceived){this.features.update(xr(n.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:i,lang:o}=this.transport;try{const a=new k1({version:i,lang:o},this.options,n.nonce);n.headers&&(a.headers=!0,a.no_responders=!0);const c=JSON.stringify(a);this.transport.send(ws(`CONNECT ${c}${yi}`)),this.transport.send(Au)}catch(a){this._close(a)}}r&&this.dispatchStatus({type:an.Update,data:r}),(n.ldm!==void 0?n.ldm:!1)&&this.dispatchStatus({type:an.LDM,data:this.servers.getCurrentServer().toString()})}push(t){switch(t.kind){case Pt.MSG:{const{msg:n,data:r}=t;this.processMsg(n,r);break}case Pt.OK:break;case Pt.ERR:this.processError(t.data);break;case Pt.PING:this.processPing();break;case Pt.PONG:this.processPong();break;case Pt.INFO:this.processInfo(t.data);break}}sendCommand(t,...n){const r=this.outbound.length();let s;typeof t=="string"?s=ws(t):s=t,this.outbound.fill(s,...n),r===0?queueMicrotask(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(t,n=Vt,r){let s;if(n instanceof Uint8Array)s=n;else if(typeof n=="string")s=kr.encode(n);else throw ge.errorForCode(ue.BadPayload);let i=s.length;r=r||{},r.reply=r.reply||"";let o=Vt,a=0;if(r.headers){if(this.info&&!this.info.headers)throw new ge("headers",ue.ServerOptionNotAvailable);o=r.headers.encode(),a=o.length,i=s.length+a}if(this.info&&i>this.info.max_payload)throw ge.errorForCode(ue.MaxPayloadExceeded);this.outBytes+=i,this.outMsgs++;let c;r.headers?(r.reply?c=`HPUB ${t} ${r.reply} ${a} ${i}\r
`:c=`HPUB ${t} ${a} ${i}\r
`,this.sendCommand(c,o,s,Bi)):(r.reply?c=`PUB ${t} ${r.reply} ${i}\r
`:c=`PUB ${t} ${i}\r
`,this.sendCommand(c,s,Bi))}request(t){return this.initMux(),this.muxSubscriptions.add(t),t}subscribe(t){return this.subscriptions.add(t),this._subunsub(t),t}_sub(t){t.queue?this.sendCommand(`SUB ${t.subject} ${t.queue} ${t.sid}\r
`):this.sendCommand(`SUB ${t.subject} ${t.sid}\r
`)}_subunsub(t){return this._sub(t),t.max&&this.unsubscribe(t,t.max),t}unsubscribe(t,n){this.unsub(t,n),(t.max===void 0||t.received>=t.max)&&this.subscriptions.cancel(t)}unsub(t,n){!t||this.isClosed()||(n?this.sendCommand(`UNSUB ${t.sid} ${n}\r
`):this.sendCommand(`UNSUB ${t.sid}\r
`),t.max=n)}resub(t,n){!t||this.isClosed()||(this.unsub(t),t.subject=n,this.subscriptions.resub(t),this._sub(t))}flush(t){return t||(t=Xe()),this.pongs.push(t),this.outbound.fill(Au),this.flushPending(),t}sendSubscriptions(){const t=[];this.subscriptions.all().forEach(n=>{const r=n;r.queue?t.push(`SUB ${r.subject} ${r.queue} ${r.sid}${yi}`):t.push(`SUB ${r.subject} ${r.sid}${yi}`)}),t.length&&this.transport.send(ws(t.join("")))}async _close(t){this._closed||(this.whyClosed=new Error("close trace").stack||"",this.heartbeats.cancel(),this.connectError&&(this.connectError(t),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close(),this.listeners.forEach(n=>{n.stop()}),this._closed=!0,await this.transport.close(t),await this.closed.resolve(t))}close(){return this._close()}isClosed(){return this._closed}drain(){const t=this.subscriptions.all(),n=[];return t.forEach(r=>{n.push(r.drain())}),Promise.all(n).then(async()=>(this.noMorePublishing=!0,await this.flush(),this.close())).catch(()=>{})}flushPending(){if(!(!this.infoReceived||!this.connected)&&this.outbound.size()){const t=this.outbound.drain();this.transport.send(t)}}initMux(){if(!this.subscriptions.getMux()){const n=this.muxSubscriptions.init(this.options.inboxPrefix),r=new Xh(this,`${n}*`);r.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(r),this.subscribe(r)}}selectServer(){const t=this.servers.selectServer();if(t!==void 0)return this.server=t,this.server}getServer(){return this.server}}const O1="$SRV";class Iu{constructor(t){g(this,"msg");this.msg=t}get data(){return this.msg.data}get sid(){return this.msg.sid}get subject(){return this.msg.subject}get reply(){return this.msg.reply||""}get headers(){return this.msg.headers}respond(t,n){return this.msg.respond(t,n)}respondError(t,n,r,s){var i,o;return s=s||{},s.headers=s.headers||Fn(),(i=s.headers)==null||i.set($i,`${t}`),(o=s.headers)==null||o.set(ji,n),this.msg.respond(r,s)}json(t){return this.msg.json(t)}string(){return this.msg.string()}}class Us{constructor(t,n="",r=""){g(this,"subject");g(this,"queue");g(this,"srv");n!==""&&I1("service group",n);let s="";if(t instanceof Js)this.srv=t,s="";else if(t instanceof Us){const i=t;this.srv=i.srv,r===""&&i.queue!==""&&(r=i.queue),s=i.subject}else throw new Error("unknown ServiceGroup type");this.subject=this.calcSubject(s,n),this.queue=r}calcSubject(t,n=""){return n===""?t:t!==""?`${t}.${n}`:n}addEndpoint(t="",n){n=n||{subject:t};const r=typeof n=="function"?{handler:n,subject:t}:n;ls("endpoint",t);let{subject:s,handler:i,metadata:o,queue:a}=r;s=s||t,a=a||this.queue,A1("endpoint subject",s),s=this.calcSubject(this.subject,s);const c={name:t,subject:s,queue:a,handler:i,metadata:o};return this.srv._addEndpoint(c)}addGroup(t="",n=""){return new Us(this,t,n)}}function A1(e,t){if(t==="")throw new Error(`${e} cannot be empty`);if(t.indexOf(" ")!==-1)throw new Error(`${e} cannot contain spaces: '${t}'`);const n=t.split(".");n.forEach((r,s)=>{if(r===">"&&s!==n.length-1)throw new Error(`${e} cannot have internal '>': '${t}'`)})}function I1(e,t){if(t.indexOf(" ")!==-1)throw new Error(`${e} cannot contain spaces: '${t}'`);t.split(".").forEach(r=>{if(r===">")throw new Error(`${e} name cannot contain internal '>': '${t}'`)})}class Js{constructor(t,n={name:"",version:""}){g(this,"nc");g(this,"_id");g(this,"config");g(this,"handlers");g(this,"internal");g(this,"_stopped");g(this,"_done");g(this,"started");this.nc=t,this.config=Object.assign({},n),this.config.queue||(this.config.queue="q"),ls("name",this.config.name),ls("queue",this.config.queue),xr(this.config.version),this._id=Cr.next(),this.internal=[],this._done=Xe(),this._stopped=!1,this.handlers=[],this.started=new Date().toISOString(),this.reset(),this.nc.closed().then(()=>{this.close().catch()}).catch(r=>{this.close(r).catch()})}static controlSubject(t,n="",r="",s){const i=s??O1;return n===""&&r===""?`${i}.${t}`:(ls("control subject name",n),r!==""?(ls("control subject id",r),`${i}.${t}.${n}.${r}`):`${i}.${t}.${n}`)}get subjects(){return this.handlers.filter(t=>t.internal===!1).map(t=>t.subject)}get id(){return this._id}get name(){return this.config.name}get description(){return this.config.description??""}get version(){return this.config.version}get metadata(){return this.config.metadata}errorToHeader(t){const n=Fn();if(t instanceof Di){const r=t;n.set(ji,r.message),n.set($i,`${r.code}`)}else n.set(ji,t.message),n.set($i,"500");return n}setupHandler(t,n=!1){const r=n?"":t.queue?t.queue:this.config.queue,{name:s,subject:i,handler:o}=t,a=t;a.internal=n,n&&this.internal.push(a),a.stats=new P1(s,i,r),a.queue=r;const c=o?(l,u)=>{if(l){this.close(l);return}const f=Date.now();try{o(l,new Iu(u))}catch(h){a.stats.countError(h),u==null||u.respond(Vt,{headers:this.errorToHeader(h)})}finally{a.stats.countLatency(f)}}:void 0;return a.sub=this.nc.subscribe(i,{callback:c,queue:r}),a.sub.closed.then(()=>{this._stopped||this.close(new Error(`required subscription ${t.subject} stopped`)).catch()}).catch(l=>{if(!this._stopped){const u=new Error(`required subscription ${t.subject} errored: ${l.message}`);u.stack=l.stack,this.close(u).catch()}}),a}info(){return{type:Es.INFO,name:this.name,id:this.id,version:this.version,description:this.description,metadata:this.metadata,endpoints:this.endpoints()}}endpoints(){return this.handlers.map(t=>{const{subject:n,metadata:r,name:s,queue:i}=t;return{subject:n,metadata:r,name:s,queue_group:i}})}async stats(){const t=[];for(const n of this.handlers){if(typeof this.config.statsHandler=="function")try{n.stats.data=await this.config.statsHandler(n)}catch(r){n.stats.countError(r)}t.push(n.stats.stats(n.qi))}return{type:Es.STATS,name:this.name,id:this.id,version:this.version,started:this.started,metadata:this.metadata,endpoints:t}}addInternalHandler(t,n){const r=`${t}`.toUpperCase();this._doAddInternalHandler(`${r}-all`,t,n),this._doAddInternalHandler(`${r}-kind`,t,n,this.name),this._doAddInternalHandler(`${r}`,t,n,this.name,this.id)}_doAddInternalHandler(t,n,r,s="",i=""){const o={};o.name=t,o.subject=Js.controlSubject(n,s,i),o.handler=r,this.setupHandler(o,!0)}start(){const t=un(),n=(o,a)=>o?(this.close(o),Promise.reject(o)):this.stats().then(c=>(a==null||a.respond(t.encode(c)),Promise.resolve())),r=(o,a)=>o?(this.close(o),Promise.reject(o)):(a==null||a.respond(t.encode(this.info())),Promise.resolve()),s=t.encode(this.ping()),i=(o,a)=>o?(this.close(o).then().catch(),Promise.reject(o)):(a.respond(s),Promise.resolve());return this.addInternalHandler(Xn.PING,i),this.addInternalHandler(Xn.STATS,n),this.addInternalHandler(Xn.INFO,r),this.handlers.forEach(o=>{const{subject:a}=o;typeof a=="string"&&o.handler!==null&&this.setupHandler(o)}),Promise.resolve(this)}close(t){if(this._stopped)return this._done;this._stopped=!0;let n=[];return this.nc.isClosed()||(n=this.handlers.concat(this.internal).map(r=>r.sub.drain())),Promise.allSettled(n).then(()=>{this._done.resolve(t||null)}),this._done}get stopped(){return this._done}get isStopped(){return this._stopped}stop(t){return this.close(t)}ping(){return{type:Es.PING,name:this.name,id:this.id,version:this.version,metadata:this.metadata}}reset(){if(this.started=new Date().toISOString(),this.handlers)for(const t of this.handlers)t.stats.reset(t.qi)}addGroup(t,n){return new Us(this,t,n)}addEndpoint(t,n){return new Us(this).addEndpoint(t,n)}_addEndpoint(t){const n=new ht;n.noIterator=typeof t.handler=="function",n.noIterator||(t.handler=(s,i)=>{s?this.stop(s).catch():n.push(new Iu(i))},n.iterClosed.then(()=>{this.close().catch()}));const r=this.setupHandler(t,!1);return r.qi=n,this.handlers.push(r),n}}class P1{constructor(t,n,r=""){g(this,"name");g(this,"subject");g(this,"average_processing_time");g(this,"num_requests");g(this,"processing_time");g(this,"num_errors");g(this,"last_error");g(this,"data");g(this,"metadata");g(this,"queue");this.name=t,this.subject=n,this.average_processing_time=0,this.num_errors=0,this.num_requests=0,this.processing_time=0,this.queue=r}reset(t){this.num_requests=0,this.processing_time=0,this.average_processing_time=0,this.num_errors=0,this.last_error=void 0,this.data=void 0;const n=t;n&&(n.time=0,n.processed=0)}countLatency(t){this.num_requests++,this.processing_time+=tt(Date.now()-t),this.average_processing_time=Math.round(this.processing_time/this.num_requests)}countError(t){this.num_errors++,this.last_error=t.message}_stats(){const{name:t,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c,queue:l}=this;return{name:t,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c,queue_group:l}}stats(t){const n=t;return(n==null?void 0:n.noIterator)===!1&&(this.processing_time=n.time,this.num_requests=n.processed,this.average_processing_time=this.processing_time>0&&this.num_requests>0?this.processing_time/this.num_requests:0),this._stats()}}class T1{constructor(t,n={strategy:ln.JitterTimer,maxWait:2e3},r){g(this,"nc");g(this,"prefix");g(this,"opts");this.nc=t,this.prefix=r,this.opts=n}ping(t="",n=""){return this.q(Xn.PING,t,n)}stats(t="",n=""){return this.q(Xn.STATS,t,n)}info(t="",n=""){return this.q(Xn.INFO,t,n)}async q(t,n="",r=""){const s=new ht,i=un(),o=Js.controlSubject(t,n,r,this.prefix),a=await this.nc.requestMany(o,Vt,this.opts);return(async()=>{for await(const c of a)try{const l=i.decode(c.data);s.push(l)}catch(l){s.push(()=>{s.stop(l)})}s.push(()=>{s.stop()})})().catch(c=>{s.stop(c)}),s}}function Qh(){return{key:{encode(e){return e},decode(e){return e}},value:{encode(e){return e},decode(e){return e}}}}function N1(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:Qh(),storage:xa.File}}const Hi="KV-Operation",Pu="$KV",R1=/^[-/=.\w]+$/,M1=/^[-/=.>*\w]+$/,L1=/^[-\w]+$/;function F1(e){if(e.startsWith(".")||e.endsWith(".")||!R1.test(e))throw new Error(`invalid key: ${e}`)}function j1(e){if(e.startsWith(".")||e.endsWith(".")||!M1.test(e))throw new Error(`invalid key: ${e}`)}function $1(e){if(e.startsWith(".")||e.endsWith("."))throw new Error(`invalid key: ${e}`);const t=e.split(".");let n=!1;for(let r=0;r<t.length;r++)switch(t[r]){case"*":n=!0;break;case">":if(r!==t.length-1)throw new Error(`invalid key: ${e}`);n=!0;break}return n}function xi(e){if(!L1.test(e))throw new Error(`invalid bucket name: ${e}`)}var yn;(function(e){e.MsgIdHdr="Nats-Msg-Id",e.ExpectedStreamHdr="Nats-Expected-Stream",e.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",e.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",e.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence"})(yn||(yn={}));class Bs{constructor(t,n,r){g(this,"js");g(this,"jsm");g(this,"stream");g(this,"bucket");g(this,"direct");g(this,"codec");g(this,"prefix");g(this,"editPrefix");g(this,"useJsPrefix");g(this,"_prefixLen");g(this,"validateKey",F1);g(this,"validateSearchKey",j1);g(this,"hasWildcards",$1);xi(t),this.js=n,this.jsm=r,this.bucket=t,this.prefix=Pu,this.editPrefix="",this.useJsPrefix=!1,this._prefixLen=0}static async create(t,n,r={}){xi(n);const s=await t.jetstreamManager(),i=new Bs(n,t,s);return await i.init(r),i}static async bind(t,n,r={}){const s=await t.jetstreamManager(),i={config:{allow_direct:r.allow_direct}};xi(n);const o=new Bs(n,t,s);return i.config.name=r.streamName??o.bucketName(),Object.assign(o,i),o.stream=i.config.name,o.codec=r.codec||Qh(),o.direct=i.config.allow_direct??!1,o.initializePrefixes(i),o}async init(t={}){const n=Object.assign(N1(),t);this.codec=n.codec;const r={};this.stream=r.name=t.streamName??this.bucketName(),r.retention=ya.Limits,r.max_msgs_per_subject=n.history,n.maxBucketSize&&(n.max_bytes=n.maxBucketSize),n.max_bytes&&(r.max_bytes=n.max_bytes),r.max_msg_size=n.maxValueSize,r.storage=n.storage;const s=t.placementCluster??"";if(s&&(t.placement={},t.placement.cluster=s,t.placement.tags=[]),t.placement&&(r.placement=t.placement),t.republish&&(r.republish=t.republish),t.description&&(r.description=t.description),t.mirror){const f=Object.assign({},t.mirror);f.name.startsWith(sn)||(f.name=`${sn}${f.name}`),r.mirror=f,r.mirror_direct=!0}else if(t.sources){const f=t.sources.map(h=>{const d=Object.assign({},h);d.name.startsWith(sn)||(d.name=`${sn}${d.name}`)});r.sources=f}else r.subjects=[this.subjectForBucket()];t.metadata&&(r.metadata=t.metadata),typeof t.compression=="boolean"&&(r.compression=t.compression?tr.S2:tr.None);const i=this.js.nc,o=i.getServerVersion(),a=o?wa(o,xr("2.7.2"))>=0:!1;r.discard=a?Ds.New:Ds.Old;const{ok:c,min:l}=i.features.get(je.JS_ALLOW_DIRECT);if(!c&&t.allow_direct===!0){const f=o?`${o.major}.${o.minor}.${o.micro}`:"unknown";return Promise.reject(new Error(`allow_direct is not available on server version ${f} - requires ${l}`))}t.allow_direct=typeof t.allow_direct=="boolean"?t.allow_direct:c,r.allow_direct=t.allow_direct,this.direct=r.allow_direct,r.num_replicas=n.replicas,n.ttl&&(r.max_age=tt(n.ttl)),r.allow_rollup_hdrs=!0;let u;try{u=await this.jsm.streams.info(r.name),!u.config.allow_direct&&this.direct===!0&&(this.direct=!1)}catch(f){if(f.message==="stream not found")u=await this.jsm.streams.add(r);else throw f}this.initializePrefixes(u)}initializePrefixes(t){this._prefixLen=0,this.prefix=`$KV.${this.bucket}`,this.useJsPrefix=this.js.apiPrefix!=="$JS.API";const{mirror:n}=t.config;if(n){let r=n.name;if(r.startsWith(sn)&&(r=r.substring(sn.length)),n.external&&n.external.api!==""){const s=n.name.substring(sn.length);this.useJsPrefix=!1,this.prefix=`$KV.${s}`,this.editPrefix=`${n.external.api}.$KV.${r}`}else this.editPrefix=this.prefix}}bucketName(){return this.stream??`${sn}${this.bucket}`}subjectForBucket(){return`${this.prefix}.${this.bucket}.>`}subjectForKey(t,n=!1){const r=[];return n?(this.useJsPrefix&&r.push(this.js.apiPrefix),this.editPrefix!==""?r.push(this.editPrefix):r.push(this.prefix)):this.prefix&&r.push(this.prefix),r.push(t),r.join(".")}fullKeyName(t){return this.prefix!==""?`${this.prefix}.${t}`:`${Pu}.${this.bucket}.${t}`}get prefixLen(){return this._prefixLen===0&&(this._prefixLen=this.prefix.length+1),this._prefixLen}encodeKey(t){const n=[];for(const r of t.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.encode(r));break}return n.join(".")}decodeKey(t){const n=[];for(const r of t.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.decode(r));break}return n.join(".")}close(){return Promise.resolve()}dataLen(t,n){const r=n&&n.get(Tt.MessageSizeHdr)||"";return r!==""?parseInt(r,10):t.length}smToEntry(t){return new Q1(this.bucket,this.prefixLen,t)}jmToEntry(t){const n=this.decodeKey(t.subject.substring(this.prefixLen));return new Z1(this.bucket,n,t)}async create(t,n){var i;let r;try{const o=await this.put(t,n,{previousSeq:0});return Promise.resolve(o)}catch(o){if(r=o,((i=o==null?void 0:o.api_error)==null?void 0:i.err_code)!==10071)return Promise.reject(o)}let s=0;try{const o=await this.get(t);return(o==null?void 0:o.operation)==="DEL"||(o==null?void 0:o.operation)==="PURGE"?(s=o!==null?o.revision:0,this.update(t,n,s)):Promise.reject(r)}catch(o){return Promise.reject(o)}}update(t,n,r){if(r<=0)throw new Error("version must be greater than 0");return this.put(t,n,{previousSeq:r})}async put(t,n,r={}){var o,a;const s=this.encodeKey(t);this.validateKey(s);const i={};if(r.previousSeq!==void 0){const c=Fn();i.headers=c,c.set(yn.ExpectedLastSubjectSequenceHdr,`${r.previousSeq}`)}try{return(await this.js.publish(this.subjectForKey(s,!0),n,i)).seq}catch(c){const l=c;return l.isJetStreamError()?(l.message=(o=l.api_error)==null?void 0:o.description,l.code=`${(a=l.api_error)==null?void 0:a.code}`,Promise.reject(l)):Promise.reject(c)}}async get(t,n){const r=this.encodeKey(t);this.validateKey(r);let s={last_by_subj:this.subjectForKey(r)};n&&n.revision>0&&(s={seq:n.revision});let i;try{this.direct?i=await this.jsm.direct.getMessage(this.bucketName(),s):i=await this.jsm.streams.getMessage(this.bucketName(),s);const o=this.smToEntry(i);return o.key!==r?null:o}catch(o){if(o.code===ue.JetStream404NoMessages)return null;throw o}}purge(t,n){return this._deleteOrPurge(t,"PURGE",n)}delete(t,n){return this._deleteOrPurge(t,"DEL",n)}async purgeDeletes(t=30*60*1e3){const n=Xe(),r=[],s=await this.watch({key:">",initializedFn:()=>{n.resolve()}});(async()=>{for await(const c of s)(c.operation==="DEL"||c.operation==="PURGE")&&r.push(c)})().then(),await n,s.stop();const i=Date.now()-t,o=r.map(c=>{const l=this.subjectForKey(c.key);return c.created.getTime()>=i?this.jsm.streams.purge(this.stream,{filter:l,keep:1}):this.jsm.streams.purge(this.stream,{filter:l,keep:0})}),a=await Promise.all(o);return a.unshift({success:!0,purged:0}),a.reduce((c,l)=>(c.purged+=l.purged,c))}async _deleteOrPurge(t,n,r){if(!this.hasWildcards(t))return this._doDeleteOrPurge(t,n,r);const s=await this.keys(t),i=[];for await(const o of s)i.push(this._doDeleteOrPurge(o,n)),i.length===100&&(await Promise.all(i),i.length=0);i.length>0&&await Promise.all(i)}async _doDeleteOrPurge(t,n,r){const s=this.encodeKey(t);this.validateKey(s);const i=Fn();i.set(Hi,n),n==="PURGE"&&i.set(Tt.RollupHdr,Tt.RollupValueSubject),r!=null&&r.previousSeq&&i.set(yn.ExpectedLastSubjectSequenceHdr,`${r.previousSeq}`),await this.js.publish(this.subjectForKey(s,!0),Vt,{headers:i})}_buildCC(t,n,r={}){let i=(Array.isArray(t)?t:[t]).map(c=>{const l=this.encodeKey(c);return this.validateSearchKey(c),this.fullKeyName(l)}),o=st.LastPerSubject;n===nn.AllHistory&&(o=st.All),n===nn.UpdatesOnly&&(o=st.New);let a;return i.length===1&&(a=i[0],i=void 0),Object.assign({deliver_policy:o,ack_policy:ut.None,filter_subjects:i,filter_subject:a,flow_control:!0,idle_heartbeat:tt(5*1e3)},r)}remove(t){return this.purge(t)}async history(t={}){const n=t.key??">",r=new ht,s={};s.headers_only=t.headers_only||!1;let i;i=()=>{r.stop()};let o=0;const a=this._buildCC(n,nn.AllHistory,s),c=a.filter_subject,l=Rn(a);l.bindStream(this.stream),l.orderedConsumer(),l.callback((f,h)=>{if(f){r.stop(f);return}if(h){const d=this.jmToEntry(h);r.push(d),r.received++,(i&&o>0&&r.received>=o||h.info.pending===0)&&(r.push(i),i=void 0)}});const u=await this.js.subscribe(c,l);if(i){const{info:{last:f}}=u,h=f.num_pending+f.delivered.consumer_seq;if(h===0||r.received>=h)try{i()}catch(d){r.stop(d)}finally{i=void 0}else o=h}return r._data=u,r.iterClosed.then(()=>{u.unsubscribe()}),u.closed.then(()=>{r.stop()}).catch(f=>{r.stop(f)}),r}canSetWatcherName(){const n=this.js.nc,{ok:r}=n.features.get(je.JS_NEW_CONSUMER_CREATE_API);return r}async watch(t={}){const n=t.key??">",r=new ht,s={};s.headers_only=t.headers_only||!1;let i=nn.LastValue;t.include===nn.AllHistory?i=nn.AllHistory:t.include===nn.UpdatesOnly&&(i=nn.UpdatesOnly);const o=t.ignoreDeletes===!0;let a=t.initializedFn,c=0;const l=this._buildCC(n,i,s),u=l.filter_subject,f=Rn(l);this.canSetWatcherName()&&f.consumerName(Cr.next()),f.bindStream(this.stream),t.resumeFromRevision&&t.resumeFromRevision>0&&f.startSequence(t.resumeFromRevision),f.orderedConsumer(),f.callback((d,E)=>{if(d){r.stop(d);return}if(E){const P=this.jmToEntry(E);if(o&&P.operation==="DEL")return;r.push(P),r.received++,a&&(c>0&&r.received>=c||E.info.pending===0)&&(r.push(a),a=void 0)}});const h=await this.js.subscribe(u,f);if(a){const{info:{last:d}}=h,E=d.num_pending+d.delivered.consumer_seq;if(E===0||r.received>=E)try{a()}catch(P){r.stop(P)}finally{a=void 0}else c=E}return r._data=h,r.iterClosed.then(()=>{h.unsubscribe()}),h.closed.then(()=>{r.stop()}).catch(d=>{r.stop(d)}),r}async keys(t=">"){const n=new ht,r=this._buildCC(t,nn.LastValue,{headers_only:!0}),s=r.filter_subject,i=Rn(r);i.bindStream(this.stream),i.orderedConsumer();const o=await this.js.subscribe(s,i);return(async()=>{var c;for await(const l of o){const u=(c=l.headers)==null?void 0:c.get(Hi);if(u!=="DEL"&&u!=="PURGE"){const f=this.decodeKey(l.subject.substring(this.prefixLen));n.push(f)}l.info.pending===0&&o.unsubscribe()}})().then(()=>{n.stop()}).catch(c=>{n.stop(c)}),o.info.last.num_pending===0&&o.unsubscribe(),n}purgeBucket(t){return this.jsm.streams.purge(this.bucketName(),t)}destroy(){return this.jsm.streams.delete(this.bucketName())}async status(){var i;const n=((i=this.js.nc.info)==null?void 0:i.cluster)??"",r=this.bucketName(),s=await this.jsm.streams.info(r);return new Zh(s,n)}}class Zh{constructor(t,n=""){g(this,"si");g(this,"cluster");this.si=t,this.cluster=n}get bucket(){return this.si.config.name.startsWith(sn)?this.si.config.name.substring(sn.length):this.si.config.name}get values(){return this.si.state.messages}get history(){return this.si.config.max_msgs_per_subject}get ttl(){return lc(this.si.config.max_age)}get bucket_location(){return this.cluster}get backingStore(){return this.si.config.storage}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get description(){return this.si.config.description??""}get maxBucketSize(){return this.si.config.max_bytes}get maxValueSize(){return this.si.config.max_msg_size}get max_bytes(){return this.si.config.max_bytes}get placement(){return this.si.config.placement||{cluster:"",tags:[]}}get placementCluster(){var t;return((t=this.si.config.placement)==null?void 0:t.cluster)??""}get republish(){return this.si.config.republish??{src:"",dest:""}}get streamInfo(){return this.si}get size(){return this.si.state.bytes}get metadata(){return this.si.config.metadata??{}}get compression(){return this.si.config.compression?this.si.config.compression!==tr.None:!1}}const mc="OBJ_",Tu="SHA-256=";function D1(e){return xi(e),`${mc}${e}`}function U1(e){return e.startsWith(mc)?e.substring(4):e}class Sa{constructor(t){g(this,"si");g(this,"backingStore");this.si=t,this.backingStore="JetStream"}get bucket(){return U1(this.si.config.name)}get description(){return this.si.config.description??""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}get metadata(){return this.si.config.metadata}get compression(){return this.si.config.compression?this.si.config.compression!==tr.None:!1}}function fi(e){if(e===void 0)return;const{domain:t}=e;if(t===void 0)return e;const n=Object.assign({},e);if(delete n.domain,t==="")return n;if(n.external)throw new Error("domain and external are both set");return n.external={api:`$JS.${t}.API`},n}var rn;(function(e){e[e.Unset=-1]="Unset",e[e.Consume=0]="Consume",e[e.Fetch=1]="Fetch"})(rn||(rn={}));var Tn;(function(e){e.HeartbeatsMissed="heartbeats_missed",e.ConsumerNotFound="consumer_not_found",e.StreamNotFound="stream_not_found",e.ConsumerDeleted="consumer_deleted",e.OrderedConsumerRecreated="ordered_consumer_recreated"})(Tn||(Tn={}));var ks;(function(e){e.DebugEvent="debug",e.Discard="discard",e.Next="next"})(ks||(ks={}));const Nu=Uint8Array.of(43,65,67,75),B1=Uint8Array.of(45,78,65,75),as=Uint8Array.of(43,87,80,73),q1=Uint8Array.of(43,78,88,84),H1=Uint8Array.of(43,84,69,82,77),z1=Uint8Array.of(32);function qs(e){return new oE(e)}class Bo extends ht{constructor(n,r,s=!1){super();g(this,"consumer");g(this,"opts");g(this,"sub");g(this,"monitor");g(this,"pending");g(this,"inbox");g(this,"refilling");g(this,"pong");g(this,"callback");g(this,"timeout");g(this,"cleanupHandler");g(this,"listeners");g(this,"statusIterator");g(this,"forOrderedConsumer");g(this,"resetHandler");g(this,"abortOnMissingResource");g(this,"bind");this.consumer=n;const i=r;this.opts=this.parseOptions(r,s),this.callback=i.callback||null,this.noIterator=typeof this.callback=="function",this.monitor=null,this.pong=null,this.pending={msgs:0,bytes:0,requests:0},this.refilling=s,this.timeout=null,this.inbox=En(n.api.nc.options.inboxPrefix),this.listeners=[],this.forOrderedConsumer=!1,this.abortOnMissingResource=i.abort_on_missing_resource===!0,this.bind=i.bind===!0,this.start()}start(){const{max_messages:n,max_bytes:r,idle_heartbeat:s,threshold_bytes:i,threshold_messages:o}=this.opts;this.closed().then(c=>{if(this.cleanupHandler)try{this.cleanupHandler(c)}catch{}});const{sub:a}=this;a&&a.unsubscribe(),this.sub=this.consumer.api.nc.subscribe(this.inbox,{callback:(c,l)=>{var f,h,d,E;if(c){this.stop(c);return}if((f=this.monitor)==null||f.work(),l.subject===this.inbox){if(ba(l))return;const P=(h=l.headers)==null?void 0:h.code,L=((E=(d=l.headers)==null?void 0:d.description)==null?void 0:E.toLowerCase())||"unknown",{msgsLeft:I,bytesLeft:N}=this.parseDiscard(l.headers);if(I>0||N>0)this.pending.msgs-=I,this.pending.bytes-=N,this.pending.requests--,this.notify(ks.Discard,{msgsLeft:I,bytesLeft:N});else if(P===400){this.stop(new ge(L,`${P}`));return}else if(P===409&&L==="consumer deleted"){if(this.notify(Tn.ConsumerDeleted,`${P} ${L}`),!this.refilling||this.abortOnMissingResource){const O=new ge(L,`${P}`);this.stop(O);return}}else this.notify(ks.DebugEvent,`${P} ${L}`)}else this._push(qs(l)),this.received++,this.pending.msgs&&this.pending.msgs--,this.pending.bytes&&(this.pending.bytes-=l.size());if(this.pending.msgs===0&&this.pending.bytes===0&&(this.pending.requests=0),this.refilling){if(n&&this.pending.msgs<=o||r&&this.pending.bytes<=i){const P=this.pullOptions();this.pull(P)}}else this.pending.requests===0&&this._push(()=>{this.stop()})}}),this.sub.closed.then(()=>{this.sub.draining&&this._push(()=>{this.stop()})}),s&&(this.monitor=new hc(s,c=>(this.notify(Tn.HeartbeatsMissed,c),this.resetPending().then(()=>{}).catch(()=>{}),!1),{maxOut:2})),(async()=>{var l;const c=this.consumer.api.nc.status();this.statusIterator=c;for await(const u of c)switch(u.type){case an.Disconnect:(l=this.monitor)==null||l.cancel();break;case an.Reconnect:this.resetPending().then(f=>{var h;f&&((h=this.monitor)==null||h.restart())}).catch(()=>{});break}})(),this.pull(this.pullOptions())}_push(n){if(!this.callback)super.push(n);else{const r=typeof n=="function"?n:null;try{r?r():this.callback(n)}catch(s){this.stop(s)}}}notify(n,r){this.listeners.length>0&&this.listeners.forEach(s=>{s.done||s.push({type:n,data:r})})}resetPending(){return this.bind?this.resetPendingNoInfo():this.resetPendingWithInfo()}resetPendingNoInfo(){return this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),Promise.resolve(!0)}async resetPendingWithInfo(){let n=0,r=0;const s=cc();let i=0;for(;;){if(this.done)return!1;if(this.consumer.api.nc.isClosed())return console.error("aborting resetPending - connection is closed"),!1;try{return await this.consumer.info(),n=0,this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),!0}catch(o){if(o.message==="stream not found"){if(r++,this.notify(Tn.StreamNotFound,r),!this.refilling||this.abortOnMissingResource)return this.stop(o),!1}else if(o.message==="consumer not found"){if(n++,this.notify(Tn.ConsumerNotFound,n),this.resetHandler)try{this.resetHandler()}catch{}if(!this.refilling||this.abortOnMissingResource)return this.stop(o),!1;if(this.forOrderedConsumer)return!1}else n=0,r=0;const a=s.backoff(i),c=Qr(a);await Promise.race([c,this.consumer.api.nc.closed()]),c.cancel(),i++}}}pull(n){this.pending.bytes+=n.max_bytes??0,this.pending.msgs+=n.batch??0,this.pending.requests++;const r=this.consumer.api.nc;this._push(()=>{r.publish(`${this.consumer.api.prefix}.CONSUMER.MSG.NEXT.${this.consumer.stream}.${this.consumer.name}`,this.consumer.api.jc.encode(n),{reply:this.inbox}),this.notify(ks.Next,n)})}pullOptions(){const n=this.opts.max_messages-this.pending.msgs,r=this.opts.max_bytes-this.pending.bytes,s=tt(this.opts.idle_heartbeat),i=tt(this.opts.expires);return{batch:n,max_bytes:r,idle_heartbeat:s,expires:i}}parseDiscard(n){const r={msgsLeft:0,bytesLeft:0},s=n==null?void 0:n.get(Tt.PendingMessagesHdr);s&&(r.msgsLeft=parseInt(s));const i=n==null?void 0:n.get(Tt.PendingBytesHdr);return i&&(r.bytesLeft=parseInt(i)),r}trackTimeout(n){this.timeout=n}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}clearTimers(){var n,r;(n=this.monitor)==null||n.cancel(),this.monitor=null,(r=this.timeout)==null||r.cancel(),this.timeout=null}setCleanupHandler(n){this.cleanupHandler=n}stop(n){var r,s;this.done||((r=this.sub)==null||r.unsubscribe(),this.clearTimers(),(s=this.statusIterator)==null||s.stop(),this._push(()=>{super.stop(n),this.listeners.forEach(i=>{i.stop()})}))}parseOptions(n,r=!1){const s=n||{};if(s.max_messages=s.max_messages||0,s.max_bytes=s.max_bytes||0,s.max_messages!==0&&s.max_bytes!==0)throw new Error("only specify one of max_messages or max_bytes");if(s.max_messages===0&&(s.max_messages=100),s.expires=s.expires||3e4,s.expires<1e3)throw new Error("expires should be at least 1000ms");if(s.idle_heartbeat=s.idle_heartbeat||s.expires/2,s.idle_heartbeat=s.idle_heartbeat>3e4?3e4:s.idle_heartbeat,r){const i=Math.round(s.max_messages*.75)||1;s.threshold_messages=s.threshold_messages||i;const o=Math.round(s.max_bytes*.75)||1;s.threshold_bytes=s.threshold_bytes||o}return s}status(){const n=new ht;return this.listeners.push(n),Promise.resolve(n)}}class Ru extends ht{constructor(){super();g(this,"src");g(this,"listeners");this.listeners=[]}setSource(n){this.src&&(this.src.resetHandler=void 0,this.src.setCleanupHandler(),this.src.stop()),this.src=n,this.src.setCleanupHandler(r=>{this.stop(r||void 0)}),(async()=>{const r=await this.src.status();for await(const s of r)this.notify(s.type,s.data)})().catch(()=>{})}notify(n,r){this.listeners.length>0&&this.listeners.forEach(s=>{s.done||s.push({type:n,data:r})})}stop(n){var r;this.done||((r=this.src)==null||r.stop(n),super.stop(n),this.listeners.forEach(s=>{s.stop()}))}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}status(){const n=new ht;return this.listeners.push(n),Promise.resolve(n)}}class ed{constructor(t,n){g(this,"api");g(this,"_info");g(this,"stream");g(this,"name");this.api=t,this._info=n,this.stream=n.stream_name,this.name=n.name}consume(t={max_messages:100,expires:3e4}){return Promise.resolve(new Bo(this,t,!0))}fetch(t={max_messages:100,expires:3e4}){const n=new Bo(this,t,!1),r=Math.round(n.opts.expires*1.05),s=Gr(r);return n.closed().catch(()=>{}).finally(()=>{s.cancel()}),s.catch(()=>{n.close().catch()}),n.trackTimeout(s),Promise.resolve(n)}next(t={expires:3e4}){const n=Xe(),r=t;r.max_messages=1;const s=new Bo(this,r,!1),i=Math.round(s.opts.expires*1.05);i>=6e4&&(async()=>{for await(const a of await s.status())if(a.type===Tn.HeartbeatsMissed&&a.data>=2){n.reject(new Error("consumer missed heartbeats"));break}})().catch(),(async()=>{for await(const a of s){n.resolve(a);break}})().catch(()=>{});const o=Gr(i);return s.closed().then(a=>{a?n.reject(a):n.resolve(null)}).catch(a=>{n.reject(a)}).finally(()=>{o.cancel()}),o.catch(a=>{n.resolve(null),s.close().catch()}),s.trackTimeout(o),n}delete(){const{stream_name:t,name:n}=this._info;return this.api.delete(t,n)}info(t=!1){if(t)return Promise.resolve(this._info);const{stream_name:n,name:r}=this._info;return this.api.info(n,r).then(s=>(this._info=s,this._info))}}class V1{constructor(t,n,r={}){g(this,"api");g(this,"consumerOpts");g(this,"consumer");g(this,"opts");g(this,"cursor");g(this,"stream");g(this,"namePrefix");g(this,"serial");g(this,"currentConsumer");g(this,"userCallback");g(this,"iter");g(this,"type");g(this,"startSeq");this.api=t,this.stream=n,this.cursor={stream_seq:1,deliver_seq:0},this.namePrefix=Cr.next(),this.serial=0,this.currentConsumer=null,this.userCallback=null,this.iter=null,this.type=rn.Unset,this.consumerOpts=r,this.startSeq=this.consumerOpts.opt_start_seq||0,this.cursor.stream_seq=this.startSeq>0?this.startSeq-1:0}getConsumerOpts(t){this.serial++;const n=`${this.namePrefix}_${this.serial}`;t=t===0?1:t;const r={name:n,deliver_policy:st.StartSequence,opt_start_seq:t,ack_policy:ut.None,inactive_threshold:tt(5*60*1e3),num_replicas:1};return this.consumerOpts.headers_only===!0&&(r.headers_only=!0),Array.isArray(this.consumerOpts.filterSubjects)&&(r.filter_subjects=this.consumerOpts.filterSubjects),typeof this.consumerOpts.filterSubjects=="string"&&(r.filter_subject=this.consumerOpts.filterSubjects),this.consumerOpts.replay_policy&&(r.replay_policy=this.consumerOpts.replay_policy),t===this.startSeq+1&&(r.deliver_policy=this.consumerOpts.deliver_policy||st.StartSequence,(this.consumerOpts.deliver_policy===st.LastPerSubject||this.consumerOpts.deliver_policy===st.New||this.consumerOpts.deliver_policy===st.Last)&&(delete r.opt_start_seq,r.deliver_policy=this.consumerOpts.deliver_policy),r.deliver_policy===st.LastPerSubject&&typeof r.filter_subjects>"u"&&typeof r.filter_subject>"u"&&(r.filter_subject=">"),this.consumerOpts.opt_start_time&&(delete r.opt_start_seq,r.deliver_policy=st.StartTime,r.opt_start_time=this.consumerOpts.opt_start_time),this.consumerOpts.inactive_threshold&&(r.inactive_threshold=tt(this.consumerOpts.inactive_threshold))),r}async resetConsumer(t=0){var i,o,a,c;(i=this.consumer)==null||i.delete().catch(()=>{}),t=t===0?1:t,this.cursor.deliver_seq=0;const n=this.getConsumerOpts(t);n.max_deliver=1,n.mem_storage=!0;const r=cc();let s;for(let l=0;;l++)try{s=await this.api.add(this.stream,n),(o=this.iter)==null||o.notify(Tn.OrderedConsumerRecreated,s.name);break}catch(u){if(u.message==="stream not found"&&((a=this.iter)==null||a.notify(Tn.StreamNotFound,l),this.type===rn.Fetch||this.opts.abort_on_missing_resource===!0))return(c=this.iter)==null||c.stop(u),Promise.reject(u);if(t===0&&l>=30)throw u;await Qr(r.backoff(l+1))}return s}internalHandler(t){return n=>{var s;if(this.serial!==t)return;const r=n.info.deliverySequence;if(r!==this.cursor.deliver_seq+1){this.reset(this.opts);return}this.cursor.deliver_seq=r,this.cursor.stream_seq=n.info.streamSequence,this.userCallback?this.userCallback(n):(s=this.iter)==null||s.push(n)}}async reset(t={max_messages:100,expires:3e4},n=!1){this.currentConsumer=await this.resetConsumer(this.cursor.stream_seq+1),this.iter===null&&(this.iter=new Ru),this.consumer=new ed(this.api,this.currentConsumer);const r=t;r.callback=this.internalHandler(this.serial);let s=null;if(this.type===rn.Fetch&&n)s=await this.consumer.fetch(t);else if(this.type===rn.Consume)s=await this.consumer.consume(t);else return Promise.reject("reset called with unset consumer type");const i=s;return i.forOrderedConsumer=!0,i.resetHandler=()=>{this.reset(this.opts)},this.iter.setSource(i),this.iter}consume(t={max_messages:100,expires:3e4}){if(t.bind)return Promise.reject(new Error("bind is not supported"));if(this.type===rn.Fetch)return Promise.reject(new Error("ordered consumer initialized as fetch"));if(this.type===rn.Consume)return Promise.reject(new Error("ordered consumer doesn't support concurrent consume"));const{callback:r}=t;return r&&(this.userCallback=r),this.type=rn.Consume,this.opts=t,this.reset(t)}fetch(t={max_messages:100,expires:3e4}){var s;if(t.bind)return Promise.reject(new Error("bind is not supported"));if(this.type===rn.Consume)return Promise.reject(new Error("ordered consumer already initialized as consume"));if(((s=this.iter)==null?void 0:s.done)===!1)return Promise.reject(new Error("ordered consumer doesn't support concurrent fetch"));const{callback:r}=t;return r&&(this.userCallback=r),this.type=rn.Fetch,this.opts=t,this.iter=new Ru,this.reset(t,!0)}async next(t={expires:3e4}){const n=t;if(n.bind)return Promise.reject(new Error("bind is not supported"));n.max_messages=1;const r=Xe();return n.callback=i=>{this.userCallback=null,r.resolve(i)},(await this.fetch(n)).iterClosed.then(i=>{i&&r.reject(i),r.resolve(null)}).catch(i=>{r.reject(i)}),r}delete(){return this.currentConsumer?this.api.delete(this.stream,this.currentConsumer.name).then(t=>Promise.resolve(t)).catch(t=>Promise.reject(t)).finally(()=>{this.currentConsumer=null}):Promise.resolve(!1)}async info(t){return this.currentConsumer==null?(this.currentConsumer=await this.resetConsumer(this.serial),Promise.resolve(this.currentConsumer)):t&&this.currentConsumer?Promise.resolve(this.currentConsumer):this.api.info(this.stream,this.currentConsumer.name)}}class td{constructor(t){g(this,"api");g(this,"notified");this.api=t,this.notified=!1}checkVersion(){const t=this.api.nc.features.get(je.JS_SIMPLIFICATION);return t.ok?Promise.resolve():Promise.reject(new Error(`consumers framework is only supported on servers ${t.min} or better`))}async get(t,n={}){return typeof n=="object"?this.ordered(t,n):(await this.checkVersion(),this.api.info(t,n).then(r=>r.config.deliver_subject!==void 0?Promise.reject(new Error("push consumer not supported")):new ed(this.api,r)).catch(r=>Promise.reject(r)))}async ordered(t,n){await this.checkVersion();const r=this.api;return new pc(r.nc,r.opts).info(t).then(i=>Promise.resolve(new V1(this.api,t,n))).catch(i=>Promise.reject(i))}}class po{constructor(t,n){g(this,"api");g(this,"_info");this.api=t,this._info=n}get name(){return this._info.config.name}alternates(){return this.info().then(t=>t.alternates?t.alternates:[])}async best(){if(await this.info(),this._info.alternates){const t=await this.api.info(this._info.alternates[0].name);return new po(this.api,t)}else return this}info(t=!1,n){return t?Promise.resolve(this._info):this.api.info(this.name,n).then(r=>(this._info=r,this._info))}getConsumer(t){return new td(new dc(this.api.nc,this.api.opts)).get(this.name,t)}getMessage(t){return this.api.getMessage(this.name,t)}deleteMessage(t,n){return this.api.deleteMessage(this.name,t,n)}}class pc extends Ks{constructor(t,n){super(t,n)}checkStreamConfigVersions(t){const n=this.nc;if(t.metadata){const{min:s,ok:i}=n.features.get(je.JS_STREAM_CONSUMER_METADATA);if(!i)throw new Error(`stream 'metadata' requires server ${s}`)}if(t.first_seq){const{min:s,ok:i}=n.features.get(je.JS_STREAM_FIRST_SEQ);if(!i)throw new Error(`stream 'first_seq' requires server ${s}`)}if(t.subject_transform){const{min:s,ok:i}=n.features.get(je.JS_STREAM_SUBJECT_TRANSFORM);if(!i)throw new Error(`stream 'subject_transform' requires server ${s}`)}if(t.compression){const{min:s,ok:i}=n.features.get(je.JS_STREAM_COMPRESSION);if(!i)throw new Error(`stream 'compression' requires server ${s}`)}if(t.consumer_limits){const{min:s,ok:i}=n.features.get(je.JS_DEFAULT_CONSUMER_LIMITS);if(!i)throw new Error(`stream 'consumer_limits' requires server ${s}`)}function r(s,i){var a;if((((a=i.subject_transforms)==null?void 0:a.length)||0)>0){const{min:c,ok:l}=n.features.get(je.JS_STREAM_SOURCE_SUBJECT_TRANSFORM);if(!l)throw new Error(`${s} 'subject_transforms' requires server ${c}`)}}t.sources&&t.sources.forEach(s=>{r("stream sources",s)}),t.mirror&&r("stream mirror",t.mirror)}async add(t={}){var s;this.checkStreamConfigVersions(t),It(t.name),t.mirror=fi(t.mirror),t.sources=(s=t.sources)==null?void 0:s.map(fi);const r=await this._request(`${this.prefix}.STREAM.CREATE.${t.name}`,t);return this._fixInfo(r),r}async delete(t){return It(t),(await this._request(`${this.prefix}.STREAM.DELETE.${t}`)).success}async update(t,n={}){var a;if(typeof t=="object"){const c=t;t=c.name,n=c,console.trace("\x1B[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1B[0m")}this.checkStreamConfigVersions(n),It(t);const r=await this.info(t),s=Object.assign(r.config,n);s.mirror=fi(s.mirror),s.sources=(a=s.sources)==null?void 0:a.map(fi);const o=await this._request(`${this.prefix}.STREAM.UPDATE.${t}`,s);return this._fixInfo(o),o}async info(t,n){It(t);const r=`${this.prefix}.STREAM.INFO.${t}`;let i=await this._request(r,n),{total:o,limit:a}=i,c=i.state.subjects?Object.getOwnPropertyNames(i.state.subjects).length:1;if(o&&o>c){const l=[i],u=n||{};let f=0;for(;o>c;){f++,u.offset=a*f;const d=await this._request(r,u);o=d.total,l.push(d);const E=Object.getOwnPropertyNames(d.state.subjects).length;if(c+=E,E<a)break}let h={};for(let d=0;d<l.length;d++)i=l[d],i.state.subjects&&(h=Object.assign(h,i.state.subjects));i.offset=0,i.total=0,i.limit=0,i.state.subjects=h}return this._fixInfo(i),i}list(t=""){const n=t!=null&&t.length?{subject:t}:{},r=i=>{const o=i;return o.streams.forEach(a=>{this._fixInfo(a)}),o.streams},s=`${this.prefix}.STREAM.LIST`;return new us(s,r,this,n)}_fixInfo(t){t.config.sealed=t.config.sealed||!1,t.config.deny_delete=t.config.deny_delete||!1,t.config.deny_purge=t.config.deny_purge||!1,t.config.allow_rollup_hdrs=t.config.allow_rollup_hdrs||!1}async purge(t,n){if(n){const{keep:s,seq:i}=n;if(typeof s=="number"&&typeof i=="number")throw new Error("can specify one of keep or seq")}return It(t),await this._request(`${this.prefix}.STREAM.PURGE.${t}`,n)}async deleteMessage(t,n,r=!0){It(t);const s={seq:n};return r||(s.no_erase=!0),(await this._request(`${this.prefix}.STREAM.MSG.DELETE.${t}`,s)).success}async getMessage(t,n){It(t);const s=await this._request(`${this.prefix}.STREAM.MSG.GET.${t}`,n);return new nd(s)}find(t){return this.findStream(t)}listKvs(){const t=r=>{var c;const i=r.streams.filter(l=>l.config.name.startsWith(sn));i.forEach(l=>{this._fixInfo(l)});let o="";return i.length&&(o=((c=this.nc.info)==null?void 0:c.cluster)??""),i.map(l=>new Zh(l,o))},n=`${this.prefix}.STREAM.LIST`;return new us(n,t,this)}listObjectStores(){const t=r=>{const i=r.streams.filter(a=>a.config.name.startsWith(mc));return i.forEach(a=>{this._fixInfo(a)}),i.map(a=>new Sa(a))},n=`${this.prefix}.STREAM.LIST`;return new us(n,t,this)}names(t=""){const n=t!=null&&t.length?{subject:t}:{},r=i=>i.streams,s=`${this.prefix}.STREAM.NAMES`;return new us(s,r,this,n)}async get(t){const n=await this.info(t);return Promise.resolve(new po(this,n))}}class W1 extends Ks{constructor(t,n){super(t,n)}async getMessage(t,n){It(t);let r=n;const{last_by_subj:s}=r;s&&(r=null);const i=r?this.jc.encode(r):Vt,o=this.opts.apiPrefix||"$JS.API",a=s?`${o}.DIRECT.GET.${t}.${s}`:`${o}.DIRECT.GET.${t}`,c=await this.nc.request(a,i),l=Ur(c);if(l)return Promise.reject(l);const u=new ka(c);return Promise.resolve(u)}async getBatch(t,n){It(t);const s=`${this.opts.apiPrefix||"$JS.API"}.DIRECT.GET.${t}`;if(!Array.isArray(n.multi_last)||n.multi_last.length===0)return Promise.reject("multi_last is required");const i=JSON.stringify(n,(c,l)=>c==="up_to_time"&&l instanceof Date?l.toISOString():l),o=new ht,a=await this.nc.requestMany(s,i,{strategy:ln.SentinelMsg});return(async()=>{var f,h,d;let c=!1,l=!1,u;for await(const E of a){if(!c){c=!0;const P=((f=E.headers)==null?void 0:f.code)||0;if(P!==0&&P<200||P>299){u=(h=E.headers)==null?void 0:h.description.toLowerCase();break}if(((d=E.headers)==null?void 0:d.get("Nats-Num-Pending"))===""){l=!0;break}}if(E.data.length===0)break;o.push(new ka(E))}o.push(()=>{if(l)throw new Error("batch direct get not supported by the server");if(u)throw new Error(`bad request: ${u}`);o.stop()})})(),Promise.resolve(o)}}class ka{constructor(t){g(this,"data");g(this,"header");if(!t.headers)throw new Error("headers expected");this.data=t.data,this.header=t.headers}get subject(){return this.header.last(Rr.Subject)}get seq(){const t=this.header.last(Rr.Sequence);return typeof t=="string"?parseInt(t):0}get time(){return new Date(Date.parse(this.timestamp))}get timestamp(){return this.header.last(Rr.TimeStamp)}get stream(){return this.header.last(Rr.Stream)}json(t){return un(t).decode(this.data)}string(){return Ht.decode(this.data)}}g(ka,"jc");class G1 extends Ks{constructor(n,r){super(n,r);g(this,"streams");g(this,"consumers");g(this,"direct");this.streams=new pc(n,r),this.consumers=new dc(n,r),this.direct=new W1(n,r)}async getAccountInfo(){return await this._request(`${this.prefix}.INFO`)}jetstream(){return this.nc.jetstream(this.getOptions())}advisories(){const n=new ht;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(r,s)=>{if(r)throw r;try{const i=this.parseJsResponse(s),o=i.type.split("."),a=o[o.length-1];n.push({kind:a,data:i})}catch(i){n.stop(i)}}}),n}}class nd{constructor(t){g(this,"_header");g(this,"smr");this.smr=t}get subject(){return this.smr.message.subject}get seq(){return this.smr.message.seq}get timestamp(){return this.smr.message.time}get time(){return new Date(Date.parse(this.timestamp))}get data(){return this.smr.message.data?this._parse(this.smr.message.data):Vt}get header(){if(!this._header)if(this.smr.message.hdrs){const t=this._parse(this.smr.message.hdrs);this._header=Qn.decode(t)}else this._header=Fn();return this._header}_parse(t){const n=atob(t),r=n.length,s=new Uint8Array(r);for(let i=0;i<r;i++)s[i]=n.charCodeAt(i);return s}json(t){return un(t).decode(this.data)}string(){return Ht.decode(this.data)}}g(nd,"jc");class K1{constructor(t){g(this,"api");this.api=t}get(t){return this.api.info(t).then(n=>new po(this.api,n))}}class qo{constructor(t){g(this,"info");g(this,"hdrs");this.info=t}get name(){return this.info.name}get description(){return this.info.description??""}get headers(){return this.hdrs||(this.hdrs=Qn.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){return this.info.deleted??!1}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}get revision(){return this.info.revision}get metadata(){return this.info.metadata||{}}isLink(){var t,n;return((t=this.info.options)==null?void 0:t.link)!==void 0&&((n=this.info.options)==null?void 0:n.link)!==null}}function Mu(e){const t={name:e.name,description:e.description??"",options:e.options,metadata:e.metadata};if(e.headers){const n=e.headers;t.headers=n.toRecord()}return t}function J1(){return new ReadableStream({pull(e){e.enqueue(new Uint8Array(0)),e.close()}})}class Cs{constructor(t,n,r){g(this,"jsm");g(this,"js");g(this,"stream");g(this,"name");this.name=t,this.jsm=n,this.js=r}_checkNotEmpty(t){return!t||t.length===0?{name:t,error:new Error("name cannot be empty")}:{name:t}}async info(t){const n=await this.rawInfo(t);return n?new qo(n):null}async list(){const t=[],n=await this.watch({ignoreDeletes:!0,includeHistory:!0});for await(const r of n){if(r===null)break;t.push(r)}return Promise.resolve(t)}async rawInfo(t){const{name:n,error:r}=this._checkNotEmpty(t);if(r)return Promise.reject(r);const s=this._metaSubject(n);try{const i=await this.jsm.streams.getMessage(this.stream,{last_by_subj:s}),a=un().decode(i.data);return a.revision=i.seq,a}catch(i){return i.code==="404"?null:Promise.reject(i)}}async _si(t){try{return await this.jsm.streams.info(this.stream,t)}catch(n){return n.code==="404"?null:Promise.reject(n)}}async seal(){let t=await this._si();return t===null?Promise.reject(new Error("object store not found")):(t.config.sealed=!0,t=await this.jsm.streams.update(this.stream,t.config),Promise.resolve(new Sa(t)))}async status(t){const n=await this._si(t);return n===null?Promise.reject(new Error("object store not found")):Promise.resolve(new Sa(n))}destroy(){return this.jsm.streams.delete(this.stream)}async _put(t,n,r){var M;const s=this.js.getOptions();r=r||{timeout:s.timeout},r.timeout=r.timeout||s.timeout,r.previousRevision=r.previousRevision??void 0;const{timeout:i,previousRevision:o}=r,a=this.js.nc.info,c=(a==null?void 0:a.max_payload)||1024;t=t||{},t.options=t.options||{};let l=((M=t.options)==null?void 0:M.max_chunk_size)||128*1024;l=l>c?c:l,t.options.max_chunk_size=l;const u=await this.info(t.name),{name:f,error:h}=this._checkNotEmpty(t.name);if(h)return Promise.reject(h);const d=Cr.next(),E=this._chunkSubject(d),P=this._metaSubject(f),L=Object.assign({bucket:this.name,nuid:d,size:0,chunks:0},Mu(t)),I=Xe(),N=[],O=new Jr;try{const U=n?n.getReader():null,k=new Eu;for(;;){const{done:V,value:X}=U?await U.read():{done:!0,value:void 0};if(V){if(O.size()>0){const Ne=O.drain();k.update(Ne),L.chunks++,L.size+=Ne.length,N.push(this.js.publish(E,Ne,{timeout:i}))}await Promise.all(N),N.length=0,L.mtime=new Date().toISOString();const Q=k.digest("base64"),ae=Q.length%3,se=ae>0?"=".repeat(ae):"";L.digest=`${Tu}${Q}${se}`,L.deleted=!1;const Z=Fn();typeof o=="number"&&Z.set(yn.ExpectedLastSubjectSequenceHdr,`${o}`),Z.set(Tt.RollupHdr,Tt.RollupValueSubject);const we=await this.js.publish(P,un().encode(L),{headers:Z,timeout:i});if(L.revision=we.seq,u)try{await this.jsm.streams.purge(this.stream,{filter:`$O.${this.name}.C.${u.nuid}`})}catch{}I.resolve(new qo(L));break}if(X)for(O.fill(X);O.size()>l;){L.chunks++,L.size+=l;const Q=O.drain(t.options.max_chunk_size);k.update(Q),N.push(this.js.publish(E,Q,{timeout:i}))}}}catch(U){await this.jsm.streams.purge(this.stream,{filter:E}),I.reject(U)}return I}putBlob(t,n,r){function s(i){return new ReadableStream({pull(o){o.enqueue(i),o.close()}})}return n===null&&(n=new Uint8Array(0)),this.put(t,s(n),r)}put(t,n,r){var s;return(s=t==null?void 0:t.options)!=null&&s.link?Promise.reject(new Error("link cannot be set when putting the object in bucket")):this._put(t,n,r)}async getBlob(t){async function n(i){const o=new Jr,a=i.getReader();for(;;){const{done:c,value:l}=await a.read();if(c)return o.drain();l&&l.length&&o.fill(l)}}const r=await this.get(t);if(r===null)return Promise.resolve(null);const s=await Promise.all([r.error,n(r.data)]);return s[0]?Promise.reject(s[0]):Promise.resolve(s[1])}async get(t){const n=await this.rawInfo(t);if(n===null||n.deleted)return Promise.resolve(null);if(n.options&&n.options.link){const u=n.options.link.name||"";if(u==="")throw new Error("link is a bucket");return(n.options.link.bucket!==this.name?await Cs.create(this.js,n.options.link.bucket):this).get(u)}const r=Xe(),s={info:new qo(n),error:r};if(n.size===0)return s.data=J1(),r.resolve(null),Promise.resolve(s);let i;const o=Rn();o.orderedConsumer();const a=new Eu,c=`$O.${this.name}.C.${n.nuid}`,l=await this.js.subscribe(c,o);return(async()=>{for await(const u of l)if(u.data.length>0&&(a.update(u.data),i.enqueue(u.data)),u.info.pending===0){const f=a.digest("base64"),h=f.length%3,d=h>0?"=".repeat(h):"",E=`${Tu}${f}${d}`;E!==n.digest?i.error(new Error(`received a corrupt object, digests do not match received: ${n.digest} calculated ${E}`)):i.close(),l.unsubscribe()}})().then(()=>{r.resolve()}).catch(u=>{i.error(u),r.reject(u)}),s.data=new ReadableStream({start(u){i=u},cancel(){l.unsubscribe()}}),s}linkStore(t,n){if(!(n instanceof Cs))return Promise.reject("bucket required");const r=n,{name:s,error:i}=this._checkNotEmpty(t);if(i)return Promise.reject(i);const o={name:s,options:{link:{bucket:r.name}}};return this._put(o,null)}async link(t,n){const{name:r,error:s}=this._checkNotEmpty(t);if(s)return Promise.reject(s);if(n.deleted)return Promise.reject(new Error("src object is deleted"));if(n.isLink())return Promise.reject(new Error("src object is a link"));const i=await this.rawInfo(t);if(i!==null&&!i.deleted)return Promise.reject(new Error("an object already exists with that name"));const o={bucket:n.bucket,name:n.name},a={name:r,bucket:n.bucket,options:{link:o}};await this.js.publish(this._metaSubject(t),JSON.stringify(a));const c=await this.info(t);return Promise.resolve(c)}async delete(t){const n=await this.rawInfo(t);if(n===null)return Promise.resolve({purged:0,success:!1});n.deleted=!0,n.size=0,n.chunks=0,n.digest="";const r=un(),s=Fn();return s.set(Tt.RollupHdr,Tt.RollupValueSubject),await this.js.publish(this._metaSubject(n.name),r.encode(n),{headers:s}),this.jsm.streams.purge(this.stream,{filter:this._chunkSubject(n.nuid)})}async update(t,n={}){const r=await this.rawInfo(t);if(r===null)return Promise.reject(new Error("object not found"));if(r.deleted)return Promise.reject(new Error("cannot update meta for a deleted object"));n.name=n.name??r.name;const{name:s,error:i}=this._checkNotEmpty(n.name);if(i)return Promise.reject(i);if(t!==n.name){const c=await this.info(n.name);if(c&&!c.deleted)return Promise.reject(new Error("an object already exists with that name"))}n.name=s;const o=Object.assign({},r,Mu(n)),a=await this.js.publish(this._metaSubject(o.name),JSON.stringify(o));return t!==n.name&&await this.jsm.streams.purge(this.stream,{filter:this._metaSubject(t)}),Promise.resolve(a)}async watch(t={}){t.includeHistory=t.includeHistory??!1,t.ignoreDeletes=t.ignoreDeletes??!1;let n=!1;const r=new ht,s=this._metaSubjectAll();try{await this.jsm.streams.getMessage(this.stream,{last_by_subj:s})}catch(c){c.code==="404"?(r.push(null),n=!0):r.stop(c)}const i=un(),o=Rn();o.orderedConsumer(),t.includeHistory?o.deliverLastPerSubject():(n=!0,o.deliverNew()),o.callback((c,l)=>{var u;if(c){r.stop(c);return}if(l!==null){const f=i.decode(l.data);f.deleted&&t.ignoreDeletes===!0||r.push(f),((u=l.info)==null?void 0:u.pending)===0&&!n&&(n=!0,r.push(null))}});const a=await this.js.subscribe(s,o);return r._data=a,r.iterClosed.then(()=>{a.unsubscribe()}),a.closed.then(()=>{r.stop()}).catch(c=>{r.stop(c)}),r}_chunkSubject(t){return`$O.${this.name}.C.${t}`}_metaSubject(t){return`$O.${this.name}.M.${vs.encode(t)}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}async init(t={}){try{this.stream=D1(this.name)}catch(s){return Promise.reject(s)}const n=(t==null?void 0:t.ttl)||0;delete t.ttl;const r=Object.assign({max_age:n},t);r.name=this.stream,r.allow_direct=!0,r.allow_rollup_hdrs=!0,r.discard=Ds.New,r.subjects=[`$O.${this.name}.C.>`,`$O.${this.name}.M.>`],t.placement&&(r.placement=t.placement),t.metadata&&(r.metadata=t.metadata),typeof t.compression=="boolean"&&(r.compression=t.compression?tr.S2:tr.None);try{await this.jsm.streams.info(r.name)}catch(s){s.message==="stream not found"&&await this.jsm.streams.add(r)}}static async create(t,n,r={}){const s=await t.jetstreamManager(),i=new Cs(n,s,t);return await i.init(r),Promise.resolve(i)}}class Y1{constructor(t){g(this,"js");this.js=t}kv(t,n={}){const r=this.js,{ok:s,min:i}=r.nc.features.get(je.JS_KV);return s?n.bindOnly?Bs.bind(this.js,t,n):Bs.create(this.js,t,n):Promise.reject(new Error(`kv is only supported on servers ${i} or better`))}os(t,n={}){var o;if(typeof((o=crypto==null?void 0:crypto.subtle)==null?void 0:o.digest)!="function")return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const r=this.js,{ok:s,min:i}=r.nc.features.get(je.JS_OBJECTSTORE);return s?Cs.create(this.js,t,n):Promise.reject(new Error(`objectstore is only supported on servers ${i} or better`))}}class gc extends Ks{constructor(n,r){super(n,r);g(this,"consumers");g(this,"streams");g(this,"consumerAPI");g(this,"streamAPI");this.consumerAPI=new dc(n,r),this.streamAPI=new pc(n,r),this.consumers=new td(this.consumerAPI),this.streams=new K1(this.streamAPI)}jetstreamManager(n){n===void 0&&(n=this.opts.checkAPI);const r=Object.assign({},this.opts,{checkAPI:n});return this.nc.jetstreamManager(r)}get apiPrefix(){return this.prefix}get views(){return new Y1(this)}async publish(n,r=Vt,s){s=s||{},s.expect=s.expect||{};const i=(s==null?void 0:s.headers)||Fn();s&&(s.msgID&&i.set(yn.MsgIdHdr,s.msgID),s.expect.lastMsgID&&i.set(yn.ExpectedLastMsgIdHdr,s.expect.lastMsgID),s.expect.streamName&&i.set(yn.ExpectedStreamHdr,s.expect.streamName),typeof s.expect.lastSequence=="number"&&i.set(yn.ExpectedLastSeqHdr,`${s.expect.lastSequence}`),typeof s.expect.lastSubjectSequence=="number"&&i.set(yn.ExpectedLastSubjectSequenceHdr,`${s.expect.lastSubjectSequence}`));const o=s.timeout||this.timeout,a={};o&&(a.timeout=o),s&&(a.headers=i);let{retries:c,retry_delay:l}=s;c=c||1,l=l||250;let u;for(let h=0;h<c;h++)try{u=await this.nc.request(n,r,a);break}catch(d){if(d.code==="503"&&h+1<c)await Qr(l);else throw d}const f=this.parseJsResponse(u);if(f.stream==="")throw ge.errorForCode(ue.JetStreamInvalidAck);return f.duplicate=f.duplicate?f.duplicate:!1,f}async pull(n,r,s=0){It(n),Dr(r);let i=this.timeout;s>i&&(i=s),s=s<0?0:tt(s);const o={batch:1,no_wait:s===0,expires:s},a=await this.nc.request(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${r}`,this.jc.encode(o),{noMux:!0,timeout:i}),c=Ur(a);if(c)throw c;return qs(a)}fetch(n,r,s={}){It(n),Dr(r);let i=null;const o=(s.max_bytes??0)>0;let a=0;const c=o?s.max_bytes:0;let l=null;const u={};if(u.batch=s.batch||1,c){const N=this.nc.features.get(je.JS_PULL_MAX_BYTES);if(!N.ok)throw new Error(`max_bytes is only supported on servers ${N.min} or better`);u.max_bytes=c}u.no_wait=s.no_wait||!1,u.no_wait&&u.expires&&(u.expires=0);const f=s.expires||0;if(f&&(u.expires=tt(f)),f===0&&u.no_wait===!1)throw new Error("expires or no_wait is required");const h=s.idle_heartbeat||0;h&&(u.idle_heartbeat=tt(h),s.delay_heartbeat===!0&&(u.idle_heartbeat=tt(h*4)));const d=new ht,E=u.batch;let P=0;d.protocolFilterFn=(N,O=!1)=>ba(N.msg)?(l==null||l.work(),!1):!0,d.dispatchedFn=N=>{if(N){if(o&&(a+=N.data.length),P++,i&&N.info.pending===0)return;(d.getPending()===1&&N.info.pending===0||E===P||c>0&&a>=c)&&d.stop()}};const L=En(this.nc.options.inboxPrefix),I=this.nc.subscribe(L,{max:s.batch,callback:(N,O)=>{N===null&&(N=Ur(O)),N!==null?(i&&(i.cancel(),i=null),ww(N)?d.stop(sd(N)===null?void 0:N):d.stop(N)):(l==null||l.work(),d.received++,d.push(qs(O)))}});return f&&(i=Gr(f),i.catch(()=>{I.isClosed()||(I.drain().catch(()=>{}),i=null),l&&l.cancel()})),(async()=>{try{h&&(l=new hc(h,N=>(d.push(()=>{d.err=new ge(`${Wt.IdleHeartbeatMissed}: ${N}`,ue.JetStreamIdleHeartBeat)}),!0)))}catch{}await I.closed,i!==null&&(i.cancel(),i=null),l&&l.cancel(),d.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${r}`,this.jc.encode(u),{reply:L}),d}async pullSubscribe(n,r=Rn()){const s=await this._processOptions(n,r);if(s.ordered)throw new Error("pull subscribers cannot be be ordered");if(s.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const i=s.config.ack_policy;if(i===ut.None||i===ut.All)throw new Error("ack policy for pull consumers must be explicit");const o=this._buildTypedSubscriptionOpts(s),a=new eE(this,s.deliver,o);a.info=s;try{await this._maybeCreateConsumer(s)}catch(c){throw a.unsubscribe(),c}return a}async subscribe(n,r=Rn()){const s=await this._processOptions(n,r);if(!s.isBind&&!s.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const i=this._buildTypedSubscriptionOpts(s),o=new rd(this,s.deliver,i);o.info=s;try{await this._maybeCreateConsumer(s)}catch(a){throw o.unsubscribe(),a}return o._maybeSetupHbMonitoring(),o}async _processOptions(n,r=Rn()){const s=xu(r)?r.getOpts():r;if(s.isBind=xu(r)?r.isBind:!1,s.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},s.ordered){if(s.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},s.config.ack_policy!==ut.NotSet&&s.config.ack_policy!==ut.None)throw new ge("ordered consumer: ack_policy can only be set to 'none'",ue.ApiError);if(s.config.durable_name&&s.config.durable_name.length>0)throw new ge("ordered consumer: durable_name cannot be set",ue.ApiError);if(s.config.deliver_subject&&s.config.deliver_subject.length>0)throw new ge("ordered consumer: deliver_subject cannot be set",ue.ApiError);if(s.config.max_deliver!==void 0&&s.config.max_deliver>1)throw new ge("ordered consumer: max_deliver cannot be set",ue.ApiError);if(s.config.deliver_group&&s.config.deliver_group.length>0)throw new ge("ordered consumer: deliver_group cannot be set",ue.ApiError);s.config.deliver_subject=En(this.nc.options.inboxPrefix),s.config.ack_policy=ut.None,s.config.max_deliver=1,s.config.flow_control=!0,s.config.idle_heartbeat=s.config.idle_heartbeat||tt(5e3),s.config.ack_wait=tt(22*60*60*1e3),s.config.mem_storage=!0,s.config.num_replicas=1}if(s.config.ack_policy===ut.NotSet&&(s.config.ack_policy=ut.All),s.api=this,s.config=s.config||{},s.stream=s.stream?s.stream:await this.findStream(n),s.attached=!1,s.config.durable_name)try{const i=await this.consumerAPI.info(s.stream,s.config.durable_name);if(i){if(i.config.filter_subject&&i.config.filter_subject!==n)throw new Error("subject does not match consumer");const o=s.config.deliver_group??"";if(o===""&&i.push_bound===!0)throw new Error("duplicate subscription");const a=i.config.deliver_group??"";if(o!==a)throw a===""?new Error("durable requires no queue group"):new Error(`durable requires queue group '${a}'`);s.last=i,s.config=i.config,s.attached=!0,s.config.durable_name||(s.name=i.name)}}catch(i){if(i.code!=="404")throw i}return!s.attached&&s.config.filter_subject===void 0&&s.config.filter_subjects===void 0&&(s.config.filter_subject=n),s.deliver=s.config.deliver_subject||En(this.nc.options.inboxPrefix),s}_buildTypedSubscriptionOpts(n){const r={};return r.adapter=tE(n.callbackFn===void 0),r.ingestionFilterFn=gc.ingestionFn(n.ordered),r.protocolFilterFn=(s,i=!1)=>{const o=s;return _a(o.msg)?(i||o.msg.respond(),!1):!0},!n.mack&&n.config.ack_policy!==ut.None&&(r.dispatchedFn=sE),n.callbackFn&&(r.callback=n.callbackFn),r.max=n.max||0,r.queue=n.queue,r}async _maybeCreateConsumer(n){if(n.attached)return;if(n.isBind)throw new Error(`unable to bind - durable consumer ${n.config.durable_name} doesn't exist in ${n.stream}`);n.config=Object.assign({deliver_policy:st.All,ack_policy:ut.Explicit,ack_wait:tt(30*1e3),replay_policy:Kr.Instant},n.config);const r=await this.consumerAPI.add(n.stream,n.config);if(Array.isArray(n.config.filter_subjects&&!Array.isArray(r.config.filter_subjects)))throw new Error("jetstream server doesn't support consumers with multiple filter subjects");n.name=r.name,n.config=r.config,n.last=r}static ingestionFn(n){return(r,s)=>{var c;const i=s;if(!r)return{ingest:!1,protocol:!1};const o=r;if(Ur(o.msg)||(c=i.monitor)==null||c.work(),ba(o.msg)){const l=n?i._checkHbOrderConsumer(o.msg):!0;return n||i.info.flow_control.heartbeat_count++,{ingest:l,protocol:!0}}else if(_a(o.msg))return i.info.flow_control.fc_count++,{ingest:!0,protocol:!0};return{ingest:n?i._checkOrderedConsumer(r):!0,protocol:!1}}}}class _c{constructor(t){g(this,"options");g(this,"protocol");g(this,"draining");g(this,"listeners");g(this,"_services");this.draining=!1,this.options=x1(t),this.listeners=[]}static connect(t={}){return new Promise((n,r)=>{const s=new _c(t);qi.connect(s.options,s).then(i=>{s.protocol=i,async function(){for await(const o of i.status())s.listeners.forEach(a=>{a.push(o)})}(),n(s)}).catch(i=>{r(i)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(t,n,r){if(this.isClosed())throw ge.errorForCode(ue.ConnectionClosed);if(n&&this.isDraining()||r&&this.protocol.noMorePublishing)throw ge.errorForCode(ue.ConnectionDraining);if(t=t||"",t.length===0)throw ge.errorForCode(ue.BadSubject)}publish(t,n,r){this._check(t,!1,!0),this.protocol.publish(t,n,r)}publishMessage(t){return this.publish(t.subject,t.data,{reply:t.reply,headers:t.headers})}respondMessage(t){return t.reply?(this.publish(t.reply,t.data,{reply:t.reply,headers:t.headers}),!0):!1}subscribe(t,n={}){this._check(t,!0,!1);const r=new Xh(this.protocol,t,n);return this.protocol.subscribe(r),r}_resub(t,n,r){this._check(n,!0,!1);const s=t;s.max=r,r&&(s.max=r+s.received),this.protocol.resub(s,n)}requestMany(t,n=Vt,r={maxWait:1e3,maxMessages:-1}){const s=!this.protocol.options.noAsyncTraces;try{this._check(t,!0,!0)}catch(c){return Promise.reject(c)}if(r.strategy=r.strategy||ln.Timer,r.maxWait=r.maxWait||1e3,r.maxWait<1)return Promise.reject(new ge("timeout",ue.InvalidOption));const i=new ht;function o(c){i.push(()=>{i.stop(c)})}function a(c,l){c||l===null?o(c===null?void 0:c):i.push(l)}if(r.noMux){const c=s?new Error().stack:null;let l=typeof r.maxMessages=="number"&&r.maxMessages>0?r.maxMessages:-1;const u=this.subscribe(En(this.options.inboxPrefix),{callback:(E,P)=>{var L,I;if(((L=P==null?void 0:P.data)==null?void 0:L.length)===0&&((I=P==null?void 0:P.headers)==null?void 0:I.status)===ue.NoResponders&&(E=ge.errorForCode(ue.NoResponders)),E){c&&(E.stack+=`

${c}`),f(E);return}a(null,P),r.strategy===ln.Count&&(l--,l===0&&f()),r.strategy===ln.JitterTimer&&(d(),h=setTimeout(()=>{f()},300)),r.strategy===ln.SentinelMsg&&P&&P.data.length===0&&f()}});u.closed.then(()=>{o()}).catch(E=>{i.stop(E)});const f=E=>{E&&i.push(()=>{throw E}),d(),u.drain().then(()=>{o()}).catch(P=>{o()})};i.iterClosed.then(()=>{d(),u==null||u.unsubscribe()}).catch(E=>{d(),u==null||u.unsubscribe()});try{this.publish(t,n,{reply:u.getSubject()})}catch(E){f(E)}let h=setTimeout(()=>{f()},r.maxWait);const d=()=>{h&&clearTimeout(h)}}else{const c=r;c.callback=a,i.iterClosed.then(()=>{l.cancel()}).catch(u=>{l.cancel(u)});const l=new Dw(this.protocol.muxSubscriptions,t,c);this.protocol.request(l);try{this.publish(t,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${l.token}`,headers:r.headers})}catch(u){l.cancel(u)}}return Promise.resolve(i)}request(t,n,r={timeout:1e3,noMux:!1}){try{this._check(t,!0,!0)}catch(i){return Promise.reject(i)}const s=!this.protocol.options.noAsyncTraces;if(r.timeout=r.timeout||1e3,r.timeout<1)return Promise.reject(new ge("timeout",ue.InvalidOption));if(!r.noMux&&r.reply)return Promise.reject(new ge("reply can only be used with noMux",ue.InvalidOption));if(r.noMux){const i=r.reply?r.reply:En(this.options.inboxPrefix),o=Xe(),a=s?new Error:null,c=this.subscribe(i,{max:1,timeout:r.timeout,callback:(l,u)=>{l?(a&&l.code!==ue.Timeout&&(l.stack+=`

${a.stack}`),o.reject(l)):(l=Dh(u),l?(a&&(l.stack+=`

${a.stack}`),o.reject(l)):o.resolve(u))}});return c.requestSubject=t,this.protocol.publish(t,n,{reply:i,headers:r.headers}),o}else{const i=new zh(this.protocol.muxSubscriptions,t,r,s);this.protocol.request(i);try{this.publish(t,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${i.token}`,headers:r.headers})}catch(a){i.cancel(a)}const o=Promise.race([i.timer,i.deferred]);return o.catch(()=>{i.cancel()}),o}}flush(){return this.isClosed()?Promise.reject(ge.errorForCode(ue.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(ge.errorForCode(ue.ConnectionClosed)):this.isDraining()?Promise.reject(ge.errorForCode(ue.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const t=this.protocol.getServer();return t?t.listen:""}status(){const t=new ht;return t.iterClosed.then(()=>{const n=this.listeners.indexOf(t);this.listeners.splice(n,1)}),this.listeners.push(t),t}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}async context(){return(await this.request("$SYS.REQ.USER.INFO")).json((n,r)=>n==="time"?new Date(Date.parse(r)):r)}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}async jetstreamManager(t={}){const n=new G1(this,t);if(t.checkAPI!==!1)try{await n.getAccountInfo()}catch(r){const s=r;throw s.code===ue.NoResponders&&(s.code=ue.JetStreamNotEnabled),s}return n}jetstream(t={}){return new gc(this,t)}getServerVersion(){const t=this.info;return t?xr(t.version):void 0}async rtt(){if(!this.protocol._closed&&!this.protocol.connected)throw ge.errorForCode(ue.Disconnect);const t=Date.now();return await this.flush(),Date.now()-t}get features(){return this.protocol.features}get services(){return this._services||(this._services=new X1(this)),this._services}reconnect(){return this.isClosed()?Promise.reject(ge.errorForCode(ue.ConnectionClosed)):this.isDraining()?Promise.reject(ge.errorForCode(ue.ConnectionDraining)):this.protocol.reconnect()}}class X1{constructor(t){g(this,"nc");this.nc=t}add(t){try{return new Js(this.nc,t).start()}catch(n){return Promise.reject(n)}}client(t,n){return new T1(this.nc,t,n)}}class Q1{constructor(t,n,r){g(this,"bucket");g(this,"sm");g(this,"prefixLen");this.bucket=t,this.prefixLen=n,this.sm=r}get key(){return this.sm.subject.substring(this.prefixLen)}get value(){return this.sm.data}get delta(){return 0}get created(){return this.sm.time}get revision(){return this.sm.seq}get operation(){return this.sm.header.get(Hi)||"PUT"}get length(){const t=this.sm.header.get(Tt.MessageSizeHdr)||"";return t!==""?parseInt(t,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class Z1{constructor(t,n,r){g(this,"bucket");g(this,"key");g(this,"sm");this.bucket=t,this.key=n,this.sm=r}get value(){return this.sm.data}get created(){return new Date(lc(this.sm.info.timestampNanos))}get revision(){return this.sm.seq}get operation(){var t;return((t=this.sm.headers)==null?void 0:t.get(Hi))||"PUT"}get delta(){return this.sm.info.pending}get length(){var n;const t=((n=this.sm.headers)==null?void 0:n.get(Tt.MessageSizeHdr))||"";return t!==""?parseInt(t,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class rd extends Hw{constructor(n,r,s){super(n.nc,r,s);g(this,"js");g(this,"monitor");this.js=n,this.monitor=null,this.sub.closed.then(()=>{this.monitor&&this.monitor.cancel()})}set info(n){this.sub.info=n}get info(){return this.sub.info}_resetOrderedConsumer(n){if(this.info===null||this.sub.isClosed())return;const r=En(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,r);const i=this.info;i.config.name=Cr.next(),i.ordered_consumer_sequence.delivery_seq=0,i.flow_control.heartbeat_count=0,i.flow_control.fc_count=0,i.flow_control.consumer_restarts++,i.deliver=r,i.config.deliver_subject=r,i.config.deliver_policy=st.StartSequence,i.config.opt_start_seq=n;const o={};o.stream_name=this.info.stream,o.config=i.config;const a=`${i.api.prefix}.CONSUMER.CREATE.${i.stream}`;this.js._request(a,o,{retries:-1}).then(c=>{const l=c,u=this.sub.info;u.last=l,this.info.config=l.config,this.info.name=l.name}).catch(c=>{const l=new ge(`unable to recreate ordered consumer ${i.stream} at seq ${n}`,ue.RequestError,c);this.sub.callback(l,{})})}_maybeSetupHbMonitoring(){var r,s;const n=((s=(r=this.info)==null?void 0:r.config)==null?void 0:s.idle_heartbeat)||0;n&&this._setupHbMonitoring(lc(n))}_setupHbMonitoring(n,r=0){const s={cancelAfter:0,maxOut:2};r&&(s.cancelAfter=r);const i=this.sub,o=a=>{var u,f,h,d;const c=kw(409,`${Wt.IdleHeartbeatMissed}: ${a}`,this.sub.subject);if(!((u=this.info)==null?void 0:u.ordered))this.sub.callback(null,c);else{if(!this.js.nc.protocol.connected)return!1;const E=((h=(f=this.info)==null?void 0:f.ordered_consumer_sequence)==null?void 0:h.stream_seq)||0;return this._resetOrderedConsumer(E+1),(d=this.monitor)==null||d.restart(),!1}return!i.noIterator};this.monitor=new hc(n,o,s)}_checkHbOrderConsumer(n){const r=n.headers.get(Tt.ConsumerStalledHdr);r!==""&&this.js.nc.publish(r);const s=parseInt(n.headers.get(Tt.LastConsumerSeqHdr),10),i=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,s!==i.delivery_seq&&this._resetOrderedConsumer(i.stream_seq+1),!1}_checkOrderedConsumer(n){const r=this.info.ordered_consumer_sequence,s=n.info.streamSequence,i=n.info.deliverySequence;return i!=r.delivery_seq+1?(this._resetOrderedConsumer(r.stream_seq+1),!1):(r.delivery_seq=i,r.stream_seq=s,!0)}async destroy(){this.isClosed()||await this.drain();const n=this.sub.info,r=n.config.durable_name||n.name,s=`${n.api.prefix}.CONSUMER.DELETE.${n.stream}.${r}`;await n.api._request(s)}async consumerInfo(){const n=this.sub.info,r=n.config.durable_name||n.name,s=`${n.api.prefix}.CONSUMER.INFO.${n.stream}.${r}`,i=await n.api._request(s);return n.last=i,i}}class eE extends rd{constructor(t,n,r){super(t,n,r)}pull(t={batch:1}){const{stream:n,config:r,name:s}=this.sub.info,i=r.durable_name??s,o={};if(o.batch=t.batch||1,o.no_wait=t.no_wait||!1,(t.max_bytes??0)>0){const l=this.js.nc.features.get(je.JS_PULL_MAX_BYTES);if(!l.ok)throw new Error(`max_bytes is only supported on servers ${l.min} or better`);o.max_bytes=t.max_bytes}let a=0;t.expires&&t.expires>0&&(a=t.expires,o.expires=tt(a));let c=0;if(t.idle_heartbeat&&t.idle_heartbeat>0&&(c=t.idle_heartbeat,o.idle_heartbeat=tt(c)),c&&a===0)throw new Error("idle_heartbeat requires expires");if(c>a)throw new Error("expires must be greater than idle_heartbeat");if(this.info){this.monitor&&this.monitor.cancel(),a&&c&&(this.monitor?this.monitor._change(c,a):this._setupHbMonitoring(c,a));const l=this.info.api,u=`${l.prefix}.CONSUMER.MSG.NEXT.${n}.${i}`,f=this.sub.subject;l.nc.publish(u,l.jc.encode(o),{reply:f})}}}function tE(e){return e?rE:nE}function nE(e,t){return e?[e,null]:(e=Ur(t),e?[e,null]:[null,qs(t)])}function rE(e,t){if(e)return[e,null];const n=Ur(t);return n!==null?[sd(n),null]:[null,qs(t)]}function sd(e){if(e!==null)switch(e.code){case ue.JetStream404NoMessages:case ue.JetStream408RequestTimeout:return null;case ue.JetStream409:return Cw(e)?e:null;default:return e}return null}function sE(e){e&&e.ack()}function iE(e){const t=e.split(".");if(t.length===9&&t.splice(2,0,"_",""),t.length<11||t[0]!=="$JS"||t[1]!=="ACK")throw new Error("not js message");const n={};return n.domain=t[2]==="_"?"":t[2],n.account_hash=t[3],n.stream=t[4],n.consumer=t[5],n.redeliveryCount=parseInt(t[6],10),n.redelivered=n.redeliveryCount>1,n.streamSequence=parseInt(t[7],10),n.deliverySequence=parseInt(t[8],10),n.timestampNanos=parseInt(t[9],10),n.pending=parseInt(t[10],10),n}class oE{constructor(t){g(this,"msg");g(this,"di");g(this,"didAck");this.msg=t,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=iE(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(t){this.didAck||(this.didAck=!this.isWIP(t),this.msg.respond(t))}isWIP(t){return t.length===4&&t[0]===as[0]&&t[1]===as[1]&&t[2]===as[2]&&t[3]===as[3]}async ackAck(){var n;const t=Xe();if(this.didAck)t.resolve(!1);else if(this.didAck=!0,this.msg.reply){const s=this.msg.publisher,i=!((n=s.options)!=null&&n.noAsyncTraces),o=new zh(s.muxSubscriptions,this.msg.reply,{timeout:1e3},i);s.request(o);try{s.publish(this.msg.reply,Nu,{reply:`${s.muxSubscriptions.baseInbox}${o.token}`})}catch(a){o.cancel(a)}try{await Promise.race([o.timer,o.deferred]),t.resolve(!0)}catch(a){o.cancel(a),t.reject(a)}}else t.resolve(!1);return t}ack(){this.doAck(Nu)}nak(t){let n=B1;t&&(n=ga().encode(`-NAK ${JSON.stringify({delay:tt(t)})}`)),this.doAck(n)}working(){this.doAck(as)}next(t,n={batch:1}){const r={};r.batch=n.batch||1,r.no_wait=n.no_wait||!1,n.expires&&n.expires>0&&(r.expires=tt(n.expires));const s=un().encode(r),i=Jr.concat(q1,z1,s),o=t?{reply:t}:void 0;this.msg.respond(i,o)}term(t=""){let n=H1;(t==null?void 0:t.length)>0&&(n=ga().encode(`+TERM ${t}`)),this.doAck(n)}json(){return this.msg.json()}string(){return this.msg.string()}}const aE="1.25.0",cE="nats.ws";class lE{constructor(){g(this,"version");g(this,"lang");g(this,"closeError");g(this,"connected");g(this,"done");g(this,"socket");g(this,"options");g(this,"socketClosed");g(this,"encrypted");g(this,"peeked");g(this,"yields");g(this,"signal");g(this,"closedNotification");this.version=aE,this.lang=cE,this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=Xe(),this.closedNotification=Xe()}async connect(t,n){const r=Xe();if(n.tls)return r.reject(new ge("tls",ue.InvalidOption)),r;this.options=n;const s=t.src;if(n.wsFactory){const{socket:i,encrypted:o}=await n.wsFactory(t.src,n);this.socket=i,this.encrypted=o}else this.encrypted=s.indexOf("wss://")===0,this.socket=new WebSocket(s);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.isDiscarded()},this.socket.onmessage=i=>{if(this.isDiscarded())return;if(this.yields.push(new Uint8Array(i.data)),this.peeked){this.signal.resolve();return}const o=Jr.concat(...this.yields),a=Jw(o);if(a!==""){const c=v1.exec(a);if(!c){n.debug&&console.error("!!!",ci(o)),r.reject(new Error("unexpected response from server"));return}try{const l=JSON.parse(c[1]);w1(l,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),r.resolve()}catch(l){r.reject(l);return}}},this.socket.onclose=i=>{if(this.isDiscarded())return;this.socketClosed=!0;let o;this.done||(i.wasClean||(o=new Error(i.reason)),this._closed(o))},this.socket.onerror=i=>{if(this.isDiscarded())return;const o=i,a=new ge(o.message,ue.Unknown,new Error(o.error));r.reject(a)},r}disconnect(){this._closed(void 0,!0)}async _closed(t,n=!0){if(!this.isDiscarded()&&this.connected&&!this.done){if(this.closeError=t,!t)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)await Qr(100);this.done=!0;try{this.socket.close(t?1002:1e3,t?t.message:void 0)}catch{}n&&this.closedNotification.resolve(t)}}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async*iterate(){for(;;){if(this.isDiscarded())return;this.yields.length===0&&await this.signal;const t=this.yields;this.yields=[];for(let n=0;n<t.length;n++)this.options.debug&&console.info(`> ${ci(t[n])}`),yield t[n];if(this.done)break;this.yields.length===0&&(t.length=0,this.yields=t,this.signal=Xe())}}isEncrypted(){return this.connected&&this.encrypted}send(t){if(!this.isDiscarded())try{this.socket.send(t.buffer),this.options.debug&&console.info(`< ${ci(t)}`);return}catch(n){this.options.debug&&console.error(`!!! ${ci(t)}: ${n}`)}}close(t){return this._closed(t,!1)}closed(){return this.closedNotification}isDiscarded(){return this.done?(this.discard(),!0):!1}discard(){var t;this.done=!0;try{(t=this.socket)==null||t.close()}catch{}}}function uE(e,t){/^(.*:\/\/)(.*)/.test(e)||(typeof t=="boolean"?e=`${t===!0?"https":"http"}://${e}`:e=`https://${e}`);let r=new URL(e);const s=r.protocol.toLowerCase();s==="ws:"&&(t=!1),s==="wss:"&&(t=!0),s!=="https:"&&s!=="http"&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2"),r=new URL(`http://${e}`));let i,o;const a=r.hostname,c=r.pathname,l=r.search||"";switch(s){case"http:":case"ws:":case"nats:":o=r.port||"80",i="ws:";break;case"https:":case"wss:":case"tls:":o=r.port||"443",i="wss:";break;default:o=r.port||t===!0?"443":"80",i=t===!0?"wss:":"ws:";break}return`${i}//${a}:${o}${c}${l}`}function fE(e={}){return zw({defaultPort:443,urlParseFn:uE,factory:()=>new lE}),_c.connect(e)}const hE=ga(),dE="---",RE=Ct({}),ME=Ct({}),LE=Ct({}),wi=Ct(!1),_r=Ct({}),Br={};let Ho;const Ca=Ct(),mE=async(e,t)=>{if(_r.value[e])return;if(!wi.value||!Ca.value){Br[e]=t;return}let n=()=>{};_r.value[e]={pending:new Promise(i=>{n=i})};const r=Rn();r.deliverTo(En()),r.deliverAll(),r.ackNone(),r.replayInstantly();const s=await Ca.value.subscribe(e,r);_r.value[e].subscription=s,n(),(async()=>{for await(const i of s){const o=hE.decode(i.data);if(o!==dE){const a=JSON.parse(o);o!==JSON.stringify(t.value[a.id])&&(t.value=Object.freeze({...t.value,[a.id]:Object.freeze(a)}))}}})()},FE=async e=>{var t,n;if(_r.value[e]){const{pending:r}=_r.value[e];r&&await r,(n=(t=_r.value[e])==null?void 0:t.subscription)==null||n.unsubscribe(),delete _r.value[e]}Br[e]&&delete Br[e]},Lu=async()=>{await Promise.all(Object.keys(Br).map(async e=>{await mE(e,Br[e]),delete Br[e]}))},pE=async()=>{Ho=await fE({servers:[Jx],waitOnFirstConnect:!0,maxReconnectAttempts:-1}),wi.value=!0,Ca.value=Ho.jetstream(),await Lu(),(async()=>{for await(const e of Ho.status())e.type===an.Disconnect&&(wi.value=!1),e.type===an.Reconnect&&(wi.value=!0,await Lu())})()},bc=Fp(aw);bc.use(Fh);bc.use(Lh);bc.mount("#app");pE();export{EE as $,nw as A,RE as B,ME as C,LE as D,CE as E,zs as F,mE as G,PE as H,TE as I,Lt as J,Eh as K,Bt as L,xE as M,Sy as N,za as O,Ga as P,FE as Q,_E as R,bE as S,Fy as T,IE as U,AE as V,vE as W,gt as X,Ns as Y,Fs as Z,ow as _,Sn as a,SE as a0,lu as a1,Ye as b,We as c,mn as d,Tf as e,di as f,Ta as g,tn as h,ze as i,Jt as j,Ze as k,kE as l,on as m,xn as n,pt as o,wr as p,xh as q,Ct as r,Ux as s,em as t,Sr as u,wE as v,yE as w,OE as x,to as y,wi as z};
//# sourceMappingURL=index-C5qMMmKR.js.map
