var Z=Object.defineProperty,X=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var z=(e,t,s)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,T=(e,t)=>{for(var s in t||(t={}))te.call(t,s)&&z(e,s,t[s]);if(V)for(var s of V(t))se.call(t,s)&&z(e,s,t[s]);return e},N=(e,t)=>X(e,ee(t));import{o as _,c as p,a as l,u as ae,d as x,b as S,e as oe,f as B,r as E,g as i,h as A,w as h,i as u,t as f,n as b,j as g,v as ne,k as re,l as M,m as I,p as W,q as ie,s as le,x as ce,y as de,z as ue,A as _e,B as me,C as fe,E as H,D as pe,F as he,S as ve,G as ge}from"./vendor.3aab7ad4.js";const ye=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}};ye();const be={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},we=l("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6z",fill:"currentColor"},null,-1),xe=[we];function ke(e,t){return _(),p("svg",be,xe)}var $e={name:"ic-baseline-settings",render:ke};const Ee={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256"},Le=l("path",{d:"M234.01 115.474l-45.235 37.648l14.36 58.078a16.647 16.647 0 0 1-6.36 17.68a16.14 16.14 0 0 1-18.203.562l-50.437-31.953c-.14-.078-.203-.047-.266 0l-46.875 29.696a17.83 17.83 0 0 1-20.062-.625a18.375 18.375 0 0 1-7.016-19.516l13.516-53.164l-45.438-38.406a16.682 16.682 0 0 1-5.156-18.063a16.37 16.37 0 0 1 14.531-11.367l59.063-3.836l22.359-55.797a16.324 16.324 0 0 1 15.188-10.414h.015a16.331 16.331 0 0 1 15.219 10.414l22.031 55.477l59.39 4.156a16.37 16.37 0 0 1 14.532 11.367a16.682 16.682 0 0 1-5.156 18.063z",fill:"currentColor"},null,-1),Re=[Le];function Se(e,t){return _(),p("svg",Ee,Re)}var Ae={name:"ph-star-fill",render:Se};const Me={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Ie=l("path",{d:"M16 24l-6.09-8.6A8.14 8.14 0 0 1 16 2a8.08 8.08 0 0 1 8 8.13a8.2 8.2 0 0 1-1.8 5.13zm0-20a6.07 6.07 0 0 0-6 6.13a6.19 6.19 0 0 0 1.49 4L16 20.52L20.63 14A6.24 6.24 0 0 0 22 10.13A6.07 6.07 0 0 0 16 4z",fill:"currentColor"},null,-1),Oe=l("circle",{cx:"16",cy:"9",r:"2",fill:"currentColor"},null,-1),Ce=l("path",{d:"M28 12h-2v2h2v14H4V14h2v-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1),je=[Ie,Oe,Ce];function Pe(e,t){return _(),p("svg",Me,je)}var De={name:"carbon-map",render:Pe};const Ve={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 256 256"},ze=l("path",{d:"M232.477 215.516l-40.678-40.678a96.108 96.108 0 1 0-16.972 16.97l40.679 40.678a12 12 0 1 0 16.97-16.97zM43.997 116a72 72 0 1 1 72 72a72.081 72.081 0 0 1-72-72z",fill:"currentColor"},null,-1),Te=[ze];function Ne(e,t){return _(),p("svg",Ve,Te)}var Be={name:"ph-magnifying-glass-bold",render:Ne};const We="kiel_live",He={liteMode:ae(`${We}.lite`,!1)};function U(){return He}const Ue={class:"flex w-full justify-center border-t-1 border-gray-200 dark:border-gray-800 dark:bg-dark-400 dark:text-gray-300 shadow-top"},Ye={class:"flex w-full justify-around max-w-96"},qe={class:"mt-auto text-xs"},Ke={class:"mt-auto text-xs"},Fe={class:"mt-auto text-xs"},Ge={class:"mt-auto text-xs"},Qe=x({name:"AppBarBottom",setup(e){const{t}=S(),{liteMode:s}=U(),o=oe(),a=B(()=>o.name==="favorites"?"favorites":o.meta.settings?"settings":"map");return(r,n)=>{const c=Be,m=E("router-link"),d=De,$=Ae,J=$e;return _(),p("div",Ue,[l("div",Ye,[i(s)?(_(),A(m,{key:0,to:{name:"search"},class:b(["flex flex-col items-center w-1/3 p-2",{"text-blue-400":i(a)==="map"}]),"aria-label":i(t)("search")},{default:h(()=>[u(c,{class:"w-6 h-6 mb-1"}),l("span",qe,f(i(t)("search")),1)]),_:1},8,["class","aria-label"])):(_(),A(m,{key:1,to:{name:"home"},class:b(["flex flex-col items-center w-1/3 p-2",{"text-blue-400":i(a)==="map"}]),"aria-label":i(t)("map")},{default:h(()=>[u(d,{class:"w-6 h-6 mb-1"}),l("span",Ke,f(i(t)("map")),1)]),_:1},8,["class","aria-label"])),u(m,{to:{name:"favorites"},class:b(["flex flex-col items-center w-1/3 p-2",{"text-blue-400":i(a)==="favorites"}]),"aria-label":i(t)("favorites")},{default:h(()=>[u($,{class:"w-6 h-6 mb-1"}),l("span",Fe,f(i(t)("favorites")),1)]),_:1},8,["class","aria-label"]),u(m,{to:{name:"settings-about"},class:b(["flex flex-col items-center w-1/3 p-2",{"text-blue-400":i(a)==="settings"}]),"aria-label":i(t)("settings")},{default:h(()=>[u(J,{class:"w-6 h-6 mb-1"}),l("span",Ge,f(i(t)("settings")),1)]),_:1},8,["class","aria-label"])])])}}});function Je(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:a,onRegisterError:r}=e;let n,c;const m=async(d=!0)=>{d&&(n==null||n.addEventListener("controlling",$=>{$.isUpdate&&window.location.reload()})),c&&c.waiting&&await re(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){n=new ne("/sw.js",{scope:"/"}),n.addEventListener("activated",d=>{d.isUpdate||o==null||o()});{const d=()=>{s==null||s()};n.addEventListener("waiting",d),n.addEventListener("externalwaiting",d)}n.register({immediate:t}).then(d=>{c=d,a==null||a(d)}).catch(d=>{r==null||r(d)})}return m}function Ze(e={}){const{immediate:t=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:a,onRegisterError:r}=e,n=g(!1),c=g(!1);return{updateServiceWorker:Je({immediate:t,onNeedRefresh(){n.value=!0,s==null||s()},onOfflineReady(){c.value=!0,o==null||o()},onRegistered:a,onRegisterError:r}),offlineReady:c,needRefresh:n}}const Xe=["href"],O=x({name:"Button",props:{to:null,href:null},setup(e){const t="border-1 hover:border-gray-300 dark:border-gray-400 dark:hover:border-gray-500 rounded p-2 flex items-center justify-center cursor-pointer";return(s,o)=>{const a=E("router-link");return e.to?(_(),A(a,{key:0,class:b(t),to:e.to},{default:h(()=>[M(s.$slots,"default")]),_:3},8,["to"])):e.href?(_(),p("a",{key:1,href:e.href,target:"_blank",rel:"noopener noreferrer",class:b(t)},[M(s.$slots,"default")],8,Xe)):(_(),p("button",{key:2,type:"button",class:b(t)},[M(s.$slots,"default")]))}}}),et={key:0,class:"fixed left-0 right-0 bottom-0 mx-2 mb-2 flex flex-col rounded-md p-4 items-center justify-center bg-white border-1 border-gray-200 shadow-xl z-20 md:transform md:-translate-x-1/2 md:right-auto md:left-1/2 md:w-96 dark:bg-dark-400 dark:text-gray-300 dark:border-dark-800",role:"alert"},tt={class:"mb-2 text-xl"},st={class:"flex flex-row w-full gap-x-4 justify-center"},at=x({name:"ReloadPrompt",setup(e){const{needRefresh:t,updateServiceWorker:s}=Ze(),{t:o}=S(),a=async()=>{t.value=!1};return(r,n)=>i(t)?(_(),p("div",et,[l("div",tt,[l("span",null,f(i(o)("new_version")),1)]),l("div",st,[u(O,{onClick:n[0]||(n[0]=c=>i(s)(!0))},{default:h(()=>[I(f(i(o)("install")),1)]),_:1}),u(O,{onClick:a},{default:h(()=>[I(f(i(o)("cancel")),1)]),_:1})])])):W("",!0)}}),Y=atob("YW5kcm9pZEBqdTYwLmRl"),Ot="27.06.2022 21:23:08",Ct="https://boomerang.ju60.de/share/z8KAHmGY/Kiel%20Live",q="https://tiles.slucky.de",jt=`${q}/styles/gray-matter/style.json`,Pt=`${q}/styles/bright-matter/style.json`,ot="wss://api.kiel-live.ju60.de/",nt={class:"m-2 flex flex-col rounded-md p-4 bg-white border-1 border-gray-200 shadow-xl z-20 md:w-104 dark:bg-dark-400 dark:text-gray-300 dark:border-dark-800"},rt={class:"flex flex-col text-center gap-4"},it={class:"text-xl mb-2"},lt=["href"],ct={href:"https://www.instagram.com/kiel.live/",target:"_blank",class:"underline"},dt={class:"flex flex-row w-full justify-center mt-8"},ut=x({name:"UpdateNotice",setup(e){const t="kiel-live-version-v1",s="2.0.0",o=g(localStorage.getItem(t)),a=B(()=>o.value!==null&&o.value!==s),{t:r}=S();ie(async()=>{const c=localStorage.getItem("version");c!==null&&(o.value=c,localStorage.removeItem("version"))}),le(a,()=>{if(!a.value)return;const c=3*1e3,m=Date.now()+c,d=setInterval(()=>{if(m-Date.now()<=0){clearInterval(d);return}ce({particleCount:100,spread:70,origin:{y:1.1},startVelocity:90,zIndex:2e3})},250)},{immediate:!0});function n(){localStorage.setItem(t,s),o.value=s}return(c,m)=>{const d=E("i18n-t");return i(a)?(_(),p("div",{key:0,class:"flex fixed top-0 left-0 right-0 bottom-0 bg-gray-900 bg-opacity-80 z-1000 justify-center items-center",onClick:n},[l("div",nt,[l("div",rt,[l("span",it,f(i(r)("update_title")),1),l("span",null,f(i(r)("update_msg")),1),u(d,{keypath:"feedback",tag:"span"},{email:h(()=>[l("a",{href:`mailto:${i(Y)}`,class:"underline"},f(i(Y)),9,lt)]),instagram:h(()=>[l("a",ct,f(i(r)("instagram")),1)]),_:1})]),l("div",dt,[u(O,{onClick:n},{default:h(()=>[I(f(i(r)("nice")),1)]),_:1})])])])):W("",!0)}}});function K(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}const y=g(),_t=()=>y.value!==void 0?y:window.matchMedia?(y.value=window.matchMedia("(prefers-color-scheme: dark)").matches,K(y.value),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{y.value=e.matches,K(y.value)}),y):(y.value=!1,y);var mt=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s};const ft={class:"app flex flex-col m-auto w-full h-full dark:bg-dark-400 dark:text-gray-300"},pt={class:"flex flex-grow min-h-0"},ht=x({name:"App",setup(e){return _t(),(t,s)=>{const o=E("router-view");return _(),p("div",ft,[l("div",pt,[u(o)]),u(Qe,{class:"mt-auto flex-shrink-0"}),u(at),u(ut)])}}});var vt=mt(ht,[["__scopeId","data-v-253b37e6"]]);const gt="modulepreload",F={},yt="/",v=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${yt}${o}`,o in F)return;F[o]=!0;const a=o.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const n=document.createElement("link");if(n.rel=a?"stylesheet":gt,a||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),a)return new Promise((c,m)=>{n.addEventListener("load",c),n.addEventListener("error",m)})})).then(()=>t())};function bt(e){switch(e){case"./locales/de.json":return v(()=>import("./de.cbd9a2cb.js"),[]);case"./locales/en.json":return v(()=>import("./en.2777ebb8.js"),[]);default:return new Promise(function(t,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}function wt(){return navigator.language.split("-")[0]}const L=de({legacy:!1}),xt=async e=>{const{default:t}=await bt(`./locales/${e}.json`);return L.global.setLocaleMessage(e,t),ue()},kt=async e=>{L.global.availableLocales.includes(e)||await xt(e),L.global.locale.value=e};kt(wt());let C=!0;const $t=[{path:"/",name:"home",component:()=>v(()=>import("./Home.97fd436d.js"),["assets/Home.97fd436d.js","assets/Home.61e9a279.css","assets/vendor.3aab7ad4.js","assets/logo.25de555e.js"])},{path:"/map/:markerType/:markerId",name:"map-marker",component:()=>v(()=>import("./Home.97fd436d.js"),["assets/Home.97fd436d.js","assets/Home.61e9a279.css","assets/vendor.3aab7ad4.js","assets/logo.25de555e.js"]),props:!0},{path:"/search",name:"search",component:()=>v(()=>import("./Home.97fd436d.js"),["assets/Home.97fd436d.js","assets/Home.61e9a279.css","assets/vendor.3aab7ad4.js","assets/logo.25de555e.js"])},{path:"/favorites",name:"favorites",component:()=>v(()=>import("./Home.97fd436d.js"),["assets/Home.97fd436d.js","assets/Home.61e9a279.css","assets/vendor.3aab7ad4.js","assets/logo.25de555e.js"])},{path:"/settings/about",name:"settings-about",component:()=>v(()=>import("./About.8dd91d7f.js"),["assets/About.8dd91d7f.js","assets/vendor.3aab7ad4.js","assets/logo.25de555e.js","assets/SettingsContainer.b17779c0.js"]),meta:{settings:!0}},{path:"/settings/changelog",name:"settings-changelog",component:()=>v(()=>import("./Changelog.b8394afe.js"),["assets/Changelog.b8394afe.js","assets/vendor.3aab7ad4.js","assets/SettingsContainer.b17779c0.js"]),meta:{settings:!0}},{path:"/settings/settings",name:"settings-settings",component:()=>v(()=>import("./Settings.c2810051.js"),["assets/Settings.c2810051.js","assets/vendor.3aab7ad4.js","assets/SettingsContainer.b17779c0.js"]),meta:{settings:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>v(()=>import("./NotFound.ce100172.js"),["assets/NotFound.ce100172.js","assets/vendor.3aab7ad4.js"])}],G=_e({history:me(),routes:$t}),{liteMode:Et}=U();G.beforeEach((e,t,s)=>{if(e.name==="home"&&(C||Et.value)){C=!1,s({name:"favorites"});return}C=!1,s()});const Lt=ve(),Rt="---",Dt=g({}),Vt=g({}),zt=g({}),R=g(!1),k=g({}),w={};let j,P;const St=async(e,t)=>{if(k.value[e])return;if(!R.value||!P){w[e]=t;return}const s=pe();s.deliverTo(he()),s.deliverAll(),s.ackNone(),s.replayInstantly();const o=await P.subscribe(e,s);k.value[e]=o,(async()=>{for await(const a of o){const r=Lt.decode(a.data);if(r!==Rt){const n=JSON.parse(r);t.value=Object.freeze(N(T({},t.value),{[n.id]:Object.freeze(n)}))}}})()},Tt=async e=>{k.value[e]&&(k.value[e].unsubscribe(),delete k.value[e]),w[e]&&delete w[e]},Q=async()=>{await Promise.all(Object.keys(w).map(async e=>{await St(e,w[e]),delete w[e]}))},At=async()=>{j=await fe({servers:[ot],waitOnFirstConnect:!0,maxReconnectAttempts:-1}),R.value=!0,P=j.jetstream(),await Q(),(async()=>{for await(const e of j.status())e.type===H.Disconnect&&(R.value=!1),e.type===H.Reconnect&&(R.value=!0,await Q())})()},D=ge(vt);D.use(G);D.use(L);D.mount("#app");At();export{mt as _,Ae as a,O as b,St as c,Be as d,v as e,U as f,Y as g,Ct as h,R as i,Ot as j,_t as k,jt as l,Pt as m,Vt as s,zt as t,Tt as u,Dt as v};
//# sourceMappingURL=index.6561e59b.js.map
