var jh=Object.defineProperty;var $h=(e,t,n)=>t in e?jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var g=(e,t,n)=>($h(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ma(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Ke={},Or=[],Kt=()=>{},Dh=()=>!1,Ri=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),pa=e=>e.startsWith("onUpdate:"),mt=Object.assign,ga=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Uh=Object.prototype.hasOwnProperty,Le=(e,t)=>Uh.call(e,t),Ce=Array.isArray,Cr=e=>Rs(e)==="[object Map]",Ni=e=>Rs(e)==="[object Set]",ac=e=>Rs(e)==="[object Date]",Ie=e=>typeof e=="function",it=e=>typeof e=="string",Gn=e=>typeof e=="symbol",He=e=>e!==null&&typeof e=="object",gu=e=>(He(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),_u=Object.prototype.toString,Rs=e=>_u.call(e),Bh=e=>Rs(e).slice(8,-1),bu=e=>Rs(e)==="[object Object]",_a=e=>it(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ns=ma(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Li=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},qh=/-(\w)/g,xn=Li(e=>e.replace(qh,(t,n)=>n?n.toUpperCase():"")),zh=/\B([A-Z])/g,pr=Li(e=>e.replace(zh,"-$1").toLowerCase()),Fi=Li(e=>e.charAt(0).toUpperCase()+e.slice(1)),ao=Li(e=>e?`on${Fi(e)}`:""),Kn=(e,t)=>!Object.is(e,t),ri=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},hi=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},_s=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let cc;const yu=()=>cc||(cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ba(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=it(r)?Gh(r):ba(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(it(e)||He(e))return e}const Hh=/;(?![^(]*\))/g,Vh=/:([^]+)/,Wh=/\/\*[^]*?\*\//g;function Gh(e){const t={};return e.replace(Wh,"").split(Hh).forEach(n=>{if(n){const r=n.split(Vh);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function gn(e){let t="";if(it(e))t=e;else if(Ce(e))for(let n=0;n<e.length;n++){const r=gn(e[n]);r&&(t+=r+" ")}else if(He(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Kh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jh=ma(Kh);function xu(e){return!!e||e===""}function Yh(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ji(e[r],t[r]);return n}function ji(e,t){if(e===t)return!0;let n=ac(e),r=ac(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Gn(e),r=Gn(t),n||r)return e===t;if(n=Ce(e),r=Ce(t),n||r)return n&&r?Yh(e,t):!1;if(n=He(e),r=He(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!ji(e[o],t[o]))return!1}}return String(e)===String(t)}function Qh(e,t){return e.findIndex(n=>ji(n,t))}const tn=e=>it(e)?e:e==null?"":Ce(e)||He(e)&&(e.toString===_u||!Ie(e.toString))?JSON.stringify(e,wu,2):String(e),wu=(e,t)=>t&&t.__v_isRef?wu(e,t.value):Cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[co(r,i)+" =>"]=s,n),{})}:Ni(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>co(n))}:Gn(t)?co(t):He(t)&&!Ce(t)&&!bu(t)?String(t):t,co=(e,t="")=>{var n;return Gn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dt;class Eu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Dt,!t&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Dt;try{return Dt=this,t()}finally{Dt=n}}}on(){Dt=this}off(){Dt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Xh(e){return new Eu(e)}function Zh(e,t=Dt){t&&t.active&&t.effects.push(e)}function vu(){return Dt}function ed(e){Dt&&Dt.cleanups.push(e)}let ur;class ya{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Zh(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,gr();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(td(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),_r()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=zn,n=ur;try{return zn=!0,ur=this,this._runnings++,lc(this),this.fn()}finally{uc(this),this._runnings--,ur=n,zn=t}}stop(){var t;this.active&&(lc(this),uc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function td(e){return e.value}function lc(e){e._trackId++,e._depsLength=0}function uc(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Su(e.deps[t],e);e.deps.length=e._depsLength}}function Su(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let zn=!0,Mo=0;const ku=[];function gr(){ku.push(zn),zn=!1}function _r(){const e=ku.pop();zn=e===void 0?!0:e}function xa(){Mo++}function wa(){for(Mo--;!Mo&&Ro.length;)Ro.shift()()}function Ou(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Su(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ro=[];function Cu(e,t,n){xa();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Ro.push(r.scheduler)))}wa()}const Au=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},di=new WeakMap,fr=Symbol(""),No=Symbol("");function Ft(e,t,n){if(zn&&ur){let r=di.get(e);r||di.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Au(()=>r.delete(n))),Ou(ur,s)}}function An(e,t,n,r,s,i){const o=di.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Ce(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!Gn(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Ce(e)?_a(n)&&a.push(o.get("length")):(a.push(o.get(fr)),Cr(e)&&a.push(o.get(No)));break;case"delete":Ce(e)||(a.push(o.get(fr)),Cr(e)&&a.push(o.get(No)));break;case"set":Cr(e)&&a.push(o.get(fr));break}xa();for(const c of a)c&&Cu(c,4);wa()}function nd(e,t){var n;return(n=di.get(e))==null?void 0:n.get(t)}const rd=ma("__proto__,__v_isRef,__isVue"),Pu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gn)),fc=sd();function sd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Fe(this);for(let i=0,o=this.length;i<o;i++)Ft(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Fe)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){gr(),xa();const r=Fe(this)[t].apply(this,n);return wa(),_r(),r}}),e}function id(e){const t=Fe(this);return Ft(t,"has",e),t.hasOwnProperty(e)}class Iu{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?bd:Nu:i?Ru:Mu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Ce(t);if(!s){if(o&&Le(fc,n))return Reflect.get(fc,n,r);if(n==="hasOwnProperty")return id}const a=Reflect.get(t,n,r);return(Gn(n)?Pu.has(n):rd(n))||(s||Ft(t,"get",n),i)?a:pt(a)?o&&_a(n)?a:a.value:He(a)?s?Ui(a):Di(a):a}}class Tu extends Iu{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const c=Lr(i);if(!mi(r)&&!Lr(r)&&(i=Fe(i),r=Fe(r)),!Ce(t)&&pt(i)&&!pt(r))return c?!1:(i.value=r,!0)}const o=Ce(t)&&_a(n)?Number(n)<t.length:Le(t,n),a=Reflect.set(t,n,r,s);return t===Fe(s)&&(o?Kn(r,i)&&An(t,"set",n,r):An(t,"add",n,r)),a}deleteProperty(t,n){const r=Le(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&An(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Gn(n)||!Pu.has(n))&&Ft(t,"has",n),r}ownKeys(t){return Ft(t,"iterate",Ce(t)?"length":fr),Reflect.ownKeys(t)}}class od extends Iu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ad=new Tu,cd=new od,ld=new Tu(!0),Ea=e=>e,$i=e=>Reflect.getPrototypeOf(e);function zs(e,t,n=!1,r=!1){e=e.__v_raw;const s=Fe(e),i=Fe(t);n||(Kn(t,i)&&Ft(s,"get",t),Ft(s,"get",i));const{has:o}=$i(s),a=r?Ea:n?ka:bs;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Hs(e,t=!1){const n=this.__v_raw,r=Fe(n),s=Fe(e);return t||(Kn(e,s)&&Ft(r,"has",e),Ft(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Vs(e,t=!1){return e=e.__v_raw,!t&&Ft(Fe(e),"iterate",fr),Reflect.get(e,"size",e)}function hc(e){e=Fe(e);const t=Fe(this);return $i(t).has.call(t,e)||(t.add(e),An(t,"add",e,e)),this}function dc(e,t){t=Fe(t);const n=Fe(this),{has:r,get:s}=$i(n);let i=r.call(n,e);i||(e=Fe(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Kn(t,o)&&An(n,"set",e,t):An(n,"add",e,t),this}function mc(e){const t=Fe(this),{has:n,get:r}=$i(t);let s=n.call(t,e);s||(e=Fe(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&An(t,"delete",e,void 0),i}function pc(){const e=Fe(this),t=e.size!==0,n=e.clear();return t&&An(e,"clear",void 0,void 0),n}function Ws(e,t){return function(r,s){const i=this,o=i.__v_raw,a=Fe(o),c=t?Ea:e?ka:bs;return!e&&Ft(a,"iterate",fr),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function Gs(e,t,n){return function(...r){const s=this.__v_raw,i=Fe(s),o=Cr(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?Ea:t?ka:bs;return!t&&Ft(i,"iterate",c?No:fr),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Ln(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ud(){const e={get(i){return zs(this,i)},get size(){return Vs(this)},has:Hs,add:hc,set:dc,delete:mc,clear:pc,forEach:Ws(!1,!1)},t={get(i){return zs(this,i,!1,!0)},get size(){return Vs(this)},has:Hs,add:hc,set:dc,delete:mc,clear:pc,forEach:Ws(!1,!0)},n={get(i){return zs(this,i,!0)},get size(){return Vs(this,!0)},has(i){return Hs.call(this,i,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Ws(!0,!1)},r={get(i){return zs(this,i,!0,!0)},get size(){return Vs(this,!0)},has(i){return Hs.call(this,i,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Ws(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Gs(i,!1,!1),n[i]=Gs(i,!0,!1),t[i]=Gs(i,!1,!0),r[i]=Gs(i,!0,!0)}),[e,n,t,r]}const[fd,hd,dd,md]=ud();function va(e,t){const n=t?e?md:dd:e?hd:fd;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Le(n,s)&&s in r?n:r,s,i)}const pd={get:va(!1,!1)},gd={get:va(!1,!0)},_d={get:va(!0,!1)},Mu=new WeakMap,Ru=new WeakMap,Nu=new WeakMap,bd=new WeakMap;function yd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xd(e){return e.__v_skip||!Object.isExtensible(e)?0:yd(Bh(e))}function Di(e){return Lr(e)?e:Sa(e,!1,ad,pd,Mu)}function Lu(e){return Sa(e,!1,ld,gd,Ru)}function Ui(e){return Sa(e,!0,cd,_d,Nu)}function Sa(e,t,n,r,s){if(!He(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=xd(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Ar(e){return Lr(e)?Ar(e.__v_raw):!!(e&&e.__v_isReactive)}function Lr(e){return!!(e&&e.__v_isReadonly)}function mi(e){return!!(e&&e.__v_isShallow)}function Fu(e){return Ar(e)||Lr(e)}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function ju(e){return Object.isExtensible(e)&&hi(e,"__v_skip",!0),e}const bs=e=>He(e)?Di(e):e,ka=e=>He(e)?Ui(e):e;class $u{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ya(()=>t(this._value),()=>rs(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Fe(this);return(!t._cacheable||t.effect.dirty)&&Kn(t._value,t._value=t.effect.run())&&rs(t,4),Oa(t),t.effect._dirtyLevel>=2&&rs(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function wd(e,t,n=!1){let r,s;const i=Ie(e);return i?(r=e,s=Kt):(r=e.get,s=e.set),new $u(r,s,i||!s,n)}function Oa(e){var t;zn&&ur&&(e=Fe(e),Ou(ur,(t=e.dep)!=null?t:e.dep=Au(()=>e.dep=void 0,e instanceof $u?e:void 0)))}function rs(e,t=4,n){e=Fe(e);const r=e.dep;r&&Cu(r,t)}function pt(e){return!!(e&&e.__v_isRef===!0)}function kt(e){return Du(e,!1)}function Ca(e){return Du(e,!0)}function Du(e,t){return pt(e)?e:new Ed(e,t)}class Ed{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Fe(t),this._value=n?t:bs(t)}get value(){return Oa(this),this._value}set value(t){const n=this.__v_isShallow||mi(t)||Lr(t);t=n?t:Fe(t),Kn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:bs(t),rs(this,4))}}function Qe(e){return pt(e)?e.value:e}const vd={get:(e,t,n)=>Qe(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return pt(s)&&!pt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Uu(e){return Ar(e)?e:new Proxy(e,vd)}class Sd{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>Oa(this),()=>rs(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function kd(e){return new Sd(e)}class Od{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return nd(Fe(this._object),this._key)}}class Cd{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Ad(e,t,n){return pt(e)?e:Ie(e)?new Cd(e):He(e)&&arguments.length>1?Pd(e,t,n):kt(e)}function Pd(e,t,n){const r=e[t];return pt(r)?r:new Od(e,t,n)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hn(e,t,n,r){try{return r?e(...r):e()}catch(s){Bi(s,t,n)}}function on(e,t,n,r){if(Ie(e)){const i=Hn(e,t,n,r);return i&&gu(i)&&i.catch(o=>{Bi(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(on(e[i],t,n,r));return s}function Bi(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Hn(c,null,10,[e,o,a]);return}}Id(e,n,s,r)}function Id(e,t,n,r=!0){console.error(e)}let ys=!1,Lo=!1;const vt=[];let mn=0;const Pr=[];let $n=null,or=0;const Bu=Promise.resolve();let Aa=null;function Hr(e){const t=Aa||Bu;return e?t.then(this?e.bind(this):e):t}function Td(e){let t=mn+1,n=vt.length;for(;t<n;){const r=t+n>>>1,s=vt[r],i=xs(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Pa(e){(!vt.length||!vt.includes(e,ys&&e.allowRecurse?mn+1:mn))&&(e.id==null?vt.push(e):vt.splice(Td(e.id),0,e),qu())}function qu(){!ys&&!Lo&&(Lo=!0,Aa=Bu.then(Hu))}function Md(e){const t=vt.indexOf(e);t>mn&&vt.splice(t,1)}function Rd(e){Ce(e)?Pr.push(...e):(!$n||!$n.includes(e,e.allowRecurse?or+1:or))&&Pr.push(e),qu()}function gc(e,t,n=ys?mn+1:0){for(;n<vt.length;n++){const r=vt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;vt.splice(n,1),n--,r()}}}function zu(e){if(Pr.length){const t=[...new Set(Pr)].sort((n,r)=>xs(n)-xs(r));if(Pr.length=0,$n){$n.push(...t);return}for($n=t,or=0;or<$n.length;or++)$n[or]();$n=null,or=0}}const xs=e=>e.id==null?1/0:e.id,Nd=(e,t)=>{const n=xs(e)-xs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Hu(e){Lo=!1,ys=!0,vt.sort(Nd);try{for(mn=0;mn<vt.length;mn++){const t=vt[mn];t&&t.active!==!1&&Hn(t,null,14)}}finally{mn=0,vt.length=0,zu(),ys=!1,Aa=null,(vt.length||Pr.length)&&Hu()}}function Ld(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ke;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=r[u]||Ke;d&&(s=n.map(h=>it(h)?h.trim():h)),f&&(s=n.map(_s))}let a,c=r[a=ao(t)]||r[a=ao(xn(t))];!c&&i&&(c=r[a=ao(pr(t))]),c&&on(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,on(l,e,6,s)}}function Vu(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Ie(e)){const c=l=>{const u=Vu(l,t,!0);u&&(a=!0,mt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(He(e)&&r.set(e,null),null):(Ce(i)?i.forEach(c=>o[c]=null):mt(o,i),He(e)&&r.set(e,o),o)}function qi(e,t){return!e||!Ri(t)?!1:(t=t.slice(2).replace(/Once$/,""),Le(e,t[0].toLowerCase()+t.slice(1))||Le(e,pr(t))||Le(e,t))}let rt=null,zi=null;function pi(e){const t=rt;return rt=e,zi=e&&e.type.__scopeId||null,t}function f1(e){zi=e}function h1(){zi=null}function Jt(e,t=rt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Cc(-1);const i=pi(t);let o;try{o=e(...s)}finally{pi(i),r._d&&Cc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function lo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:f,data:d,setupState:h,ctx:E,inheritAttrs:C}=e;let N,k;const P=pi(e);try{if(n.shapeFlag&4){const U=s||r,V=U;N=dn(u.call(V,U,f,i,h,d,E)),k=c}else{const U=t;N=dn(U.length>1?U(i,{attrs:c,slots:a,emit:l}):U(i,null)),k=t.props?c:Fd(c)}}catch(U){as.length=0,Bi(U,e,1),N=qe(Jn)}let L=N;if(k&&C!==!1){const U=Object.keys(k),{shapeFlag:V}=L;U.length&&V&7&&(o&&U.some(pa)&&(k=jd(k,o)),L=Fr(L,k))}return n.dirs&&(L=Fr(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),N=L,pi(P),N}const Fd=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ri(n))&&((t||(t={}))[n]=e[n]);return t},jd=(e,t)=>{const n={};for(const r in e)(!pa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function $d(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?_c(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==r[d]&&!qi(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?_c(r,o,l):!0:!!o;return!1}function _c(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!qi(n,i))return!0}return!1}function Dd({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Wu="components";function Hi(e,t){return Bd(Wu,e,!0,t)||e}const Ud=Symbol.for("v-ndc");function Bd(e,t,n=!0,r=!1){const s=rt||ft;if(s){const i=s.type;if(e===Wu){const a=Nm(i,!1);if(a&&(a===t||a===xn(t)||a===Fi(xn(t))))return i}const o=bc(s[e]||i[e],t)||bc(s.appContext[e],t);return!o&&r?i:o}}function bc(e,t){return e&&(e[t]||e[xn(t)]||e[Fi(xn(t))])}const qd=e=>e.__isSuspense;function zd(e,t){t&&t.pendingBranch?Ce(e)?t.effects.push(...e):t.effects.push(e):Rd(e)}const Hd=Symbol.for("v-scx"),Vd=()=>Yt(Hd);function Wd(e,t){return Ia(e,null,t)}const Ks={};function Nt(e,t,n){return Ia(e,t,n)}function Ia(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Ke){if(t&&i){const A=t;t=(...he)=>{A(...he),V()}}const c=ft,l=A=>r===!0?A:cr(A,r===!1?1:void 0);let u,f=!1,d=!1;if(pt(e)?(u=()=>e.value,f=mi(e)):Ar(e)?(u=()=>l(e),f=!0):Ce(e)?(d=!0,f=e.some(A=>Ar(A)||mi(A)),u=()=>e.map(A=>{if(pt(A))return A.value;if(Ar(A))return l(A);if(Ie(A))return Hn(A,c,2)})):Ie(e)?t?u=()=>Hn(e,c,2):u=()=>(h&&h(),on(e,c,3,[E])):u=Kt,t&&r){const A=u;u=()=>cr(A())}let h,E=A=>{h=L.onStop=()=>{Hn(A,c,4),h=L.onStop=void 0}},C;if(Gi)if(E=Kt,t?n&&on(t,c,3,[u(),d?[]:void 0,E]):u(),s==="sync"){const A=Vd();C=A.__watcherHandles||(A.__watcherHandles=[])}else return Kt;let N=d?new Array(e.length).fill(Ks):Ks;const k=()=>{if(!(!L.active||!L.dirty))if(t){const A=L.run();(r||f||(d?A.some((he,W)=>Kn(he,N[W])):Kn(A,N)))&&(h&&h(),on(t,c,3,[A,N===Ks?void 0:d&&N[0]===Ks?[]:N,E]),N=A)}else L.run()};k.allowRecurse=!!t;let P;s==="sync"?P=k:s==="post"?P=()=>Mt(k,c&&c.suspense):(k.pre=!0,c&&(k.id=c.uid),P=()=>Pa(k));const L=new ya(u,Kt,P),U=vu(),V=()=>{L.stop(),U&&ga(U.effects,L)};return t?n?k():N=L.run():s==="post"?Mt(L.run.bind(L),c&&c.suspense):L.run(),C&&C.push(V),V}function Gd(e,t,n){const r=this.proxy,s=it(e)?e.includes(".")?Gu(r,e):()=>r[e]:e.bind(r,r);let i;Ie(t)?i=t:(i=t.handler,n=t);const o=js(this),a=Ia(s,i.bind(r),n);return o(),a}function Gu(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function cr(e,t,n=0,r){if(!He(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),pt(e))cr(e.value,t,n,r);else if(Ce(e))for(let s=0;s<e.length;s++)cr(e[s],t,n,r);else if(Ni(e)||Cr(e))e.forEach(s=>{cr(s,t,n,r)});else if(bu(e))for(const s in e)cr(e[s],t,n,r);return e}function d1(e,t){if(rt===null)return e;const n=Ki(rt)||rt.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=Ke]=t[s];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&cr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function rr(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(gr(),on(c,n,8,[e.el,a,e,t]),_r())}}/*! #__NO_SIDE_EFFECTS__ */function ln(e,t){return Ie(e)?mt({name:e.name},t,{setup:e}):e}const ss=e=>!!e.type.__asyncLoader,Ku=e=>e.type.__isKeepAlive;function Kd(e,t){Ju(e,"a",t)}function Jd(e,t){Ju(e,"da",t)}function Ju(e,t,n=ft){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Vi(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ku(s.parent.vnode)&&Yd(r,t,n,s),s=s.parent}}function Yd(e,t,n,r){const s=Vi(t,e,r,!0);Ta(()=>{ga(r[t],s)},n)}function Vi(e,t,n=ft,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;gr();const a=js(n),c=on(t,n,e,o);return a(),_r(),c});return r?s.unshift(i):s.push(i),i}}const Tn=e=>(t,n=ft)=>(!Gi||e==="sp")&&Vi(e,(...r)=>t(...r),n),Qd=Tn("bm"),Ns=Tn("m"),Xd=Tn("bu"),Zd=Tn("u"),em=Tn("bum"),Ta=Tn("um"),tm=Tn("sp"),nm=Tn("rtg"),rm=Tn("rtc");function sm(e,t=ft){Vi("ec",e,t)}function m1(e,t,n,r){let s;const i=n&&n[r];if(Ce(e)||it(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(He(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function si(e,t,n={},r,s){if(rt.isCE||rt.parent&&ss(rt.parent)&&rt.parent.isCE)return t!=="default"&&(n.name=t),qe("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),ht();const o=i&&Yu(i(n)),a=dr(Ut,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Yu(e){return e.some(t=>_i(t)?!(t.type===Jn||t.type===Ut&&!Yu(t.children)):!0)?e:null}const Fo=e=>e?uf(e)?Ki(e)||e.proxy:Fo(e.parent):null,is=mt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fo(e.parent),$root:e=>Fo(e.root),$emit:e=>e.emit,$options:e=>Ma(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Pa(e.update)}),$nextTick:e=>e.n||(e.n=Hr.bind(e.proxy)),$watch:e=>Gd.bind(e)}),uo=(e,t)=>e!==Ke&&!e.__isScriptSetup&&Le(e,t),im={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(uo(r,t))return o[t]=1,r[t];if(s!==Ke&&Le(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&Le(l,t))return o[t]=3,i[t];if(n!==Ke&&Le(n,t))return o[t]=4,n[t];jo&&(o[t]=0)}}const u=is[t];let f,d;if(u)return t==="$attrs"&&Ft(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Ke&&Le(n,t))return o[t]=4,n[t];if(d=c.config.globalProperties,Le(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return uo(s,t)?(s[t]=n,!0):r!==Ke&&Le(r,t)?(r[t]=n,!0):Le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Ke&&Le(e,o)||uo(t,o)||(a=i[0])&&Le(a,o)||Le(r,o)||Le(is,o)||Le(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Le(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function yc(e){return Ce(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let jo=!0;function om(e){const t=Ma(e),n=e.proxy,r=e.ctx;jo=!1,t.beforeCreate&&xc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:E,activated:C,deactivated:N,beforeDestroy:k,beforeUnmount:P,destroyed:L,unmounted:U,render:V,renderTracked:A,renderTriggered:he,errorCaptured:W,serverPrefetch:ue,expose:me,inheritAttrs:re,components:ie,directives:ke,filters:Te}=t;if(l&&am(l,r,null),o)for(const ve in o){const Se=o[ve];Ie(Se)&&(r[ve]=Se.bind(n))}if(s){const ve=s.call(n,n);He(ve)&&(e.data=Di(ve))}if(jo=!0,i)for(const ve in i){const Se=i[ve],ze=Ie(Se)?Se.bind(n,n):Ie(Se.get)?Se.get.bind(n,n):Kt,m=!Ie(Se)&&Ie(Se.set)?Se.set.bind(n):Kt,S=We({get:ze,set:m});Object.defineProperty(r,ve,{enumerable:!0,configurable:!0,get:()=>S.value,set:Z=>S.value=Z})}if(a)for(const ve in a)Qu(a[ve],r,n,ve);if(c){const ve=Ie(c)?c.call(n):c;Reflect.ownKeys(ve).forEach(Se=>{ii(Se,ve[Se])})}u&&xc(u,e,"c");function Pe(ve,Se){Ce(Se)?Se.forEach(ze=>ve(ze.bind(n))):Se&&ve(Se.bind(n))}if(Pe(Qd,f),Pe(Ns,d),Pe(Xd,h),Pe(Zd,E),Pe(Kd,C),Pe(Jd,N),Pe(sm,W),Pe(rm,A),Pe(nm,he),Pe(em,P),Pe(Ta,U),Pe(tm,ue),Ce(me))if(me.length){const ve=e.exposed||(e.exposed={});me.forEach(Se=>{Object.defineProperty(ve,Se,{get:()=>n[Se],set:ze=>n[Se]=ze})})}else e.exposed||(e.exposed={});V&&e.render===Kt&&(e.render=V),re!=null&&(e.inheritAttrs=re),ie&&(e.components=ie),ke&&(e.directives=ke)}function am(e,t,n=Kt){Ce(e)&&(e=$o(e));for(const r in e){const s=e[r];let i;He(s)?"default"in s?i=Yt(s.from||r,s.default,!0):i=Yt(s.from||r):i=Yt(s),pt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function xc(e,t,n){on(Ce(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qu(e,t,n,r){const s=r.includes(".")?Gu(n,r):()=>n[r];if(it(e)){const i=t[e];Ie(i)&&Nt(s,i)}else if(Ie(e))Nt(s,e.bind(n));else if(He(e))if(Ce(e))e.forEach(i=>Qu(i,t,n,r));else{const i=Ie(e.handler)?e.handler.bind(n):t[e.handler];Ie(i)&&Nt(s,i,e)}}function Ma(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>gi(c,l,o,!0)),gi(c,t,o)),He(t)&&i.set(t,c),c}function gi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&gi(e,i,n,!0),s&&s.forEach(o=>gi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=cm[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const cm={data:wc,props:Ec,emits:Ec,methods:Zr,computed:Zr,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:Zr,directives:Zr,watch:um,provide:wc,inject:lm};function wc(e,t){return t?e?function(){return mt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function lm(e,t){return Zr($o(e),$o(t))}function $o(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ct(e,t){return e?[...new Set([].concat(e,t))]:t}function Zr(e,t){return e?mt(Object.create(null),e,t):t}function Ec(e,t){return e?Ce(e)&&Ce(t)?[...new Set([...e,...t])]:mt(Object.create(null),yc(e),yc(t??{})):t}function um(e,t){if(!e)return t;if(!t)return e;const n=mt(Object.create(null),e);for(const r in t)n[r]=Ct(e[r],t[r]);return n}function Xu(){return{app:null,config:{isNativeTag:Dh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fm=0;function hm(e,t){return function(r,s=null){Ie(r)||(r=mt({},r)),s!=null&&!He(s)&&(s=null);const i=Xu(),o=new WeakSet;let a=!1;const c=i.app={_uid:fm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Fm,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Ie(l.install)?(o.add(l),l.install(c,...u)):Ie(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,f){if(!a){const d=qe(r,s);return d.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(d,l):e(d,l,f),a=!0,c._container=l,l.__vue_app__=c,Ki(d.component)||d.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){const u=os;os=c;try{return l()}finally{os=u}}};return c}}let os=null;function ii(e,t){if(ft){let n=ft.provides;const r=ft.parent&&ft.parent.provides;r===n&&(n=ft.provides=Object.create(r)),n[e]=t}}function Yt(e,t,n=!1){const r=ft||rt;if(r||os){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:os._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Ie(t)?t.call(r&&r.proxy):t}}function dm(e,t,n,r=!1){const s={},i={};hi(i,Wi,1),e.propsDefaults=Object.create(null),Zu(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Lu(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function mm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=Fe(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(qi(e.emitsOptions,d))continue;const h=t[d];if(c)if(Le(i,d))h!==i[d]&&(i[d]=h,l=!0);else{const E=xn(d);s[E]=Do(c,a,E,h,e,!1)}else h!==i[d]&&(i[d]=h,l=!0)}}}else{Zu(e,t,s,i)&&(l=!0);let u;for(const f in a)(!t||!Le(t,f)&&((u=pr(f))===f||!Le(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Do(c,a,f,void 0,e,!0)):delete s[f]);if(i!==a)for(const f in i)(!t||!Le(t,f))&&(delete i[f],l=!0)}l&&An(e,"set","$attrs")}function Zu(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(ns(c))continue;const l=t[c];let u;s&&Le(s,u=xn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:qi(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Fe(n),l=a||Ke;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Do(s,c,f,l[f],e,!Le(l,f))}}return o}function Do(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=Le(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=js(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===pr(n))&&(r=!0))}return r}function ef(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!Ie(e)){const u=f=>{c=!0;const[d,h]=ef(f,t,!0);mt(o,d),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return He(e)&&r.set(e,Or),Or;if(Ce(i))for(let u=0;u<i.length;u++){const f=xn(i[u]);vc(f)&&(o[f]=Ke)}else if(i)for(const u in i){const f=xn(u);if(vc(f)){const d=i[u],h=o[f]=Ce(d)||Ie(d)?{type:d}:mt({},d);if(h){const E=Oc(Boolean,h.type),C=Oc(String,h.type);h[0]=E>-1,h[1]=C<0||E<C,(E>-1||Le(h,"default"))&&a.push(f)}}}const l=[o,a];return He(e)&&r.set(e,l),l}function vc(e){return e[0]!=="$"&&!ns(e)}function Sc(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function kc(e,t){return Sc(e)===Sc(t)}function Oc(e,t){return Ce(t)?t.findIndex(n=>kc(n,e)):Ie(t)&&kc(t,e)?0:-1}const tf=e=>e[0]==="_"||e==="$stable",Ra=e=>Ce(e)?e.map(dn):[dn(e)],pm=(e,t,n)=>{if(t._n)return t;const r=Jt((...s)=>Ra(t(...s)),n);return r._c=!1,r},nf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(tf(s))continue;const i=e[s];if(Ie(i))t[s]=pm(s,i,r);else if(i!=null){const o=Ra(i);t[s]=()=>o}}},rf=(e,t)=>{const n=Ra(t);e.slots.default=()=>n},gm=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Fe(t),hi(t,"_",n)):nf(t,e.slots={})}else e.slots={},t&&rf(e,t);hi(e.slots,Wi,1)},_m=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Ke;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(mt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,nf(t,s)),o=t}else t&&(rf(e,t),o={default:1});if(i)for(const a in s)!tf(a)&&o[a]==null&&delete s[a]};function Uo(e,t,n,r,s=!1){if(Ce(e)){e.forEach((d,h)=>Uo(d,t&&(Ce(t)?t[h]:t),n,r,s));return}if(ss(r)&&!s)return;const i=r.shapeFlag&4?Ki(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Ke?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==c&&(it(l)?(u[l]=null,Le(f,l)&&(f[l]=null)):pt(l)&&(l.value=null)),Ie(c))Hn(c,a,12,[o,u]);else{const d=it(c),h=pt(c);if(d||h){const E=()=>{if(e.f){const C=d?Le(f,c)?f[c]:u[c]:c.value;s?Ce(C)&&ga(C,i):Ce(C)?C.includes(i)||C.push(i):d?(u[c]=[i],Le(f,c)&&(f[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else d?(u[c]=o,Le(f,c)&&(f[c]=o)):h&&(c.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,Mt(E,n)):E()}}}const Mt=zd;function bm(e){return ym(e)}function ym(e,t){const n=yu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=Kt,insertStaticContent:E}=e,C=(b,w,R,B=null,D=null,Q=null,ee=void 0,J=null,X=!!w.dynamicChildren)=>{if(b===w)return;b&&!Kr(b,w)&&(B=I(b),Z(b,D,Q,!0),b=null),w.patchFlag===-2&&(X=!1,w.dynamicChildren=null);const{type:K,ref:oe,shapeFlag:te}=w;switch(K){case Ls:N(b,w,R,B);break;case Jn:k(b,w,R,B);break;case ho:b==null&&P(w,R,B,ee);break;case Ut:ie(b,w,R,B,D,Q,ee,J,X);break;default:te&1?V(b,w,R,B,D,Q,ee,J,X):te&6?ke(b,w,R,B,D,Q,ee,J,X):(te&64||te&128)&&K.process(b,w,R,B,D,Q,ee,J,X,G)}oe!=null&&D&&Uo(oe,b&&b.ref,Q,w||b,!w)},N=(b,w,R,B)=>{if(b==null)r(w.el=a(w.children),R,B);else{const D=w.el=b.el;w.children!==b.children&&l(D,w.children)}},k=(b,w,R,B)=>{b==null?r(w.el=c(w.children||""),R,B):w.el=b.el},P=(b,w,R,B)=>{[b.el,b.anchor]=E(b.children,w,R,B,b.el,b.anchor)},L=({el:b,anchor:w},R,B)=>{let D;for(;b&&b!==w;)D=d(b),r(b,R,B),b=D;r(w,R,B)},U=({el:b,anchor:w})=>{let R;for(;b&&b!==w;)R=d(b),s(b),b=R;s(w)},V=(b,w,R,B,D,Q,ee,J,X)=>{w.type==="svg"?ee="svg":w.type==="math"&&(ee="mathml"),b==null?A(w,R,B,D,Q,ee,J,X):ue(b,w,D,Q,ee,J,X)},A=(b,w,R,B,D,Q,ee,J)=>{let X,K;const{props:oe,shapeFlag:te,transition:T,dirs:$}=b;if(X=b.el=o(b.type,Q,oe&&oe.is,oe),te&8?u(X,b.children):te&16&&W(b.children,X,null,B,D,fo(b,Q),ee,J),$&&rr(b,null,B,"created"),he(X,b,b.scopeId,ee,B),oe){for(const xe in oe)xe!=="value"&&!ns(xe)&&i(X,xe,null,oe[xe],Q,b.children,B,D,ae);"value"in oe&&i(X,"value",null,oe.value,Q),(K=oe.onVnodeBeforeMount)&&fn(K,B,b)}$&&rr(b,null,B,"beforeMount");const fe=xm(D,T);fe&&T.beforeEnter(X),r(X,w,R),((K=oe&&oe.onVnodeMounted)||fe||$)&&Mt(()=>{K&&fn(K,B,b),fe&&T.enter(X),$&&rr(b,null,B,"mounted")},D)},he=(b,w,R,B,D)=>{if(R&&h(b,R),B)for(let Q=0;Q<B.length;Q++)h(b,B[Q]);if(D){let Q=D.subTree;if(w===Q){const ee=D.vnode;he(b,ee,ee.scopeId,ee.slotScopeIds,D.parent)}}},W=(b,w,R,B,D,Q,ee,J,X=0)=>{for(let K=X;K<b.length;K++){const oe=b[K]=J?Dn(b[K]):dn(b[K]);C(null,oe,w,R,B,D,Q,ee,J)}},ue=(b,w,R,B,D,Q,ee)=>{const J=w.el=b.el;let{patchFlag:X,dynamicChildren:K,dirs:oe}=w;X|=b.patchFlag&16;const te=b.props||Ke,T=w.props||Ke;let $;if(R&&sr(R,!1),($=T.onVnodeBeforeUpdate)&&fn($,R,w,b),oe&&rr(w,b,R,"beforeUpdate"),R&&sr(R,!0),K?me(b.dynamicChildren,K,J,R,B,fo(w,D),Q):ee||Se(b,w,J,null,R,B,fo(w,D),Q,!1),X>0){if(X&16)re(J,w,te,T,R,B,D);else if(X&2&&te.class!==T.class&&i(J,"class",null,T.class,D),X&4&&i(J,"style",te.style,T.style,D),X&8){const fe=w.dynamicProps;for(let xe=0;xe<fe.length;xe++){const Me=fe[xe],je=te[Me],Ve=T[Me];(Ve!==je||Me==="value")&&i(J,Me,je,Ve,D,b.children,R,B,ae)}}X&1&&b.children!==w.children&&u(J,w.children)}else!ee&&K==null&&re(J,w,te,T,R,B,D);(($=T.onVnodeUpdated)||oe)&&Mt(()=>{$&&fn($,R,w,b),oe&&rr(w,b,R,"updated")},B)},me=(b,w,R,B,D,Q,ee)=>{for(let J=0;J<w.length;J++){const X=b[J],K=w[J],oe=X.el&&(X.type===Ut||!Kr(X,K)||X.shapeFlag&70)?f(X.el):R;C(X,K,oe,null,B,D,Q,ee,!0)}},re=(b,w,R,B,D,Q,ee)=>{if(R!==B){if(R!==Ke)for(const J in R)!ns(J)&&!(J in B)&&i(b,J,R[J],null,ee,w.children,D,Q,ae);for(const J in B){if(ns(J))continue;const X=B[J],K=R[J];X!==K&&J!=="value"&&i(b,J,K,X,ee,w.children,D,Q,ae)}"value"in B&&i(b,"value",R.value,B.value,ee)}},ie=(b,w,R,B,D,Q,ee,J,X)=>{const K=w.el=b?b.el:a(""),oe=w.anchor=b?b.anchor:a("");let{patchFlag:te,dynamicChildren:T,slotScopeIds:$}=w;$&&(J=J?J.concat($):$),b==null?(r(K,R,B),r(oe,R,B),W(w.children||[],R,oe,D,Q,ee,J,X)):te>0&&te&64&&T&&b.dynamicChildren?(me(b.dynamicChildren,T,R,D,Q,ee,J),(w.key!=null||D&&w===D.subTree)&&sf(b,w,!0)):Se(b,w,R,oe,D,Q,ee,J,X)},ke=(b,w,R,B,D,Q,ee,J,X)=>{w.slotScopeIds=J,b==null?w.shapeFlag&512?D.ctx.activate(w,R,B,ee,X):Te(w,R,B,D,Q,ee,X):Oe(b,w,X)},Te=(b,w,R,B,D,Q,ee)=>{const J=b.component=Pm(b,B,D);if(Ku(b)&&(J.ctx.renderer=G),Im(J),J.asyncDep){if(D&&D.registerDep(J,Pe),!b.el){const X=J.subTree=qe(Jn);k(null,X,w,R)}}else Pe(J,b,w,R,D,Q,ee)},Oe=(b,w,R)=>{const B=w.component=b.component;if($d(b,w,R))if(B.asyncDep&&!B.asyncResolved){ve(B,w,R);return}else B.next=w,Md(B.update),B.effect.dirty=!0,B.update();else w.el=b.el,B.vnode=w},Pe=(b,w,R,B,D,Q,ee)=>{const J=()=>{if(b.isMounted){let{next:oe,bu:te,u:T,parent:$,vnode:fe}=b;{const gt=of(b);if(gt){oe&&(oe.el=fe.el,ve(b,oe,ee)),gt.asyncDep.then(()=>{b.isUnmounted||J()});return}}let xe=oe,Me;sr(b,!1),oe?(oe.el=fe.el,ve(b,oe,ee)):oe=fe,te&&ri(te),(Me=oe.props&&oe.props.onVnodeBeforeUpdate)&&fn(Me,$,oe,fe),sr(b,!0);const je=lo(b),Ve=b.subTree;b.subTree=je,C(Ve,je,f(Ve.el),I(Ve),b,D,Q),oe.el=je.el,xe===null&&Dd(b,je.el),T&&Mt(T,D),(Me=oe.props&&oe.props.onVnodeUpdated)&&Mt(()=>fn(Me,$,oe,fe),D)}else{let oe;const{el:te,props:T}=w,{bm:$,m:fe,parent:xe}=b,Me=ss(w);if(sr(b,!1),$&&ri($),!Me&&(oe=T&&T.onVnodeBeforeMount)&&fn(oe,xe,w),sr(b,!0),te&&Ee){const je=()=>{b.subTree=lo(b),Ee(te,b.subTree,b,D,null)};Me?w.type.__asyncLoader().then(()=>!b.isUnmounted&&je()):je()}else{const je=b.subTree=lo(b);C(null,je,R,B,b,D,Q),w.el=je.el}if(fe&&Mt(fe,D),!Me&&(oe=T&&T.onVnodeMounted)){const je=w;Mt(()=>fn(oe,xe,je),D)}(w.shapeFlag&256||xe&&ss(xe.vnode)&&xe.vnode.shapeFlag&256)&&b.a&&Mt(b.a,D),b.isMounted=!0,w=R=B=null}},X=b.effect=new ya(J,Kt,()=>Pa(K),b.scope),K=b.update=()=>{X.dirty&&X.run()};K.id=b.uid,sr(b,!0),K()},ve=(b,w,R)=>{w.component=b;const B=b.vnode.props;b.vnode=w,b.next=null,mm(b,w.props,B,R),_m(b,w.children,R),gr(),gc(b),_r()},Se=(b,w,R,B,D,Q,ee,J,X=!1)=>{const K=b&&b.children,oe=b?b.shapeFlag:0,te=w.children,{patchFlag:T,shapeFlag:$}=w;if(T>0){if(T&128){m(K,te,R,B,D,Q,ee,J,X);return}else if(T&256){ze(K,te,R,B,D,Q,ee,J,X);return}}$&8?(oe&16&&ae(K,D,Q),te!==K&&u(R,te)):oe&16?$&16?m(K,te,R,B,D,Q,ee,J,X):ae(K,D,Q,!0):(oe&8&&u(R,""),$&16&&W(te,R,B,D,Q,ee,J,X))},ze=(b,w,R,B,D,Q,ee,J,X)=>{b=b||Or,w=w||Or;const K=b.length,oe=w.length,te=Math.min(K,oe);let T;for(T=0;T<te;T++){const $=w[T]=X?Dn(w[T]):dn(w[T]);C(b[T],$,R,null,D,Q,ee,J,X)}K>oe?ae(b,D,Q,!0,!1,te):W(w,R,B,D,Q,ee,J,X,te)},m=(b,w,R,B,D,Q,ee,J,X)=>{let K=0;const oe=w.length;let te=b.length-1,T=oe-1;for(;K<=te&&K<=T;){const $=b[K],fe=w[K]=X?Dn(w[K]):dn(w[K]);if(Kr($,fe))C($,fe,R,null,D,Q,ee,J,X);else break;K++}for(;K<=te&&K<=T;){const $=b[te],fe=w[T]=X?Dn(w[T]):dn(w[T]);if(Kr($,fe))C($,fe,R,null,D,Q,ee,J,X);else break;te--,T--}if(K>te){if(K<=T){const $=T+1,fe=$<oe?w[$].el:B;for(;K<=T;)C(null,w[K]=X?Dn(w[K]):dn(w[K]),R,fe,D,Q,ee,J,X),K++}}else if(K>T)for(;K<=te;)Z(b[K],D,Q,!0),K++;else{const $=K,fe=K,xe=new Map;for(K=fe;K<=T;K++){const ot=w[K]=X?Dn(w[K]):dn(w[K]);ot.key!=null&&xe.set(ot.key,K)}let Me,je=0;const Ve=T-fe+1;let gt=!1,un=0;const Ot=new Array(Ve);for(K=0;K<Ve;K++)Ot[K]=0;for(K=$;K<=te;K++){const ot=b[K];if(je>=Ve){Z(ot,D,Q,!0);continue}let _t;if(ot.key!=null)_t=xe.get(ot.key);else for(Me=fe;Me<=T;Me++)if(Ot[Me-fe]===0&&Kr(ot,w[Me])){_t=Me;break}_t===void 0?Z(ot,D,Q,!0):(Ot[_t-fe]=K+1,_t>=un?un=_t:gt=!0,C(ot,w[_t],R,null,D,Q,ee,J,X),je++)}const vn=gt?wm(Ot):Or;for(Me=vn.length-1,K=Ve-1;K>=0;K--){const ot=fe+K,_t=w[ot],Mn=ot+1<oe?w[ot+1].el:B;Ot[K]===0?C(null,_t,R,Mn,D,Q,ee,J,X):gt&&(Me<0||K!==vn[Me]?S(_t,R,Mn,2):Me--)}}},S=(b,w,R,B,D=null)=>{const{el:Q,type:ee,transition:J,children:X,shapeFlag:K}=b;if(K&6){S(b.component.subTree,w,R,B);return}if(K&128){b.suspense.move(w,R,B);return}if(K&64){ee.move(b,w,R,G);return}if(ee===Ut){r(Q,w,R);for(let te=0;te<X.length;te++)S(X[te],w,R,B);r(b.anchor,w,R);return}if(ee===ho){L(b,w,R);return}if(B!==2&&K&1&&J)if(B===0)J.beforeEnter(Q),r(Q,w,R),Mt(()=>J.enter(Q),D);else{const{leave:te,delayLeave:T,afterLeave:$}=J,fe=()=>r(Q,w,R),xe=()=>{te(Q,()=>{fe(),$&&$()})};T?T(Q,fe,xe):xe()}else r(Q,w,R)},Z=(b,w,R,B=!1,D=!1)=>{const{type:Q,props:ee,ref:J,children:X,dynamicChildren:K,shapeFlag:oe,patchFlag:te,dirs:T}=b;if(J!=null&&Uo(J,null,R,b,!0),oe&256){w.ctx.deactivate(b);return}const $=oe&1&&T,fe=!ss(b);let xe;if(fe&&(xe=ee&&ee.onVnodeBeforeUnmount)&&fn(xe,w,b),oe&6)we(b.component,R,B);else{if(oe&128){b.suspense.unmount(R,B);return}$&&rr(b,null,w,"beforeUnmount"),oe&64?b.type.remove(b,w,R,D,G,B):K&&(Q!==Ut||te>0&&te&64)?ae(K,w,R,!1,!0):(Q===Ut&&te&384||!D&&oe&16)&&ae(X,w,R),B&&x(b)}(fe&&(xe=ee&&ee.onVnodeUnmounted)||$)&&Mt(()=>{xe&&fn(xe,w,b),$&&rr(b,null,w,"unmounted")},R)},x=b=>{const{type:w,el:R,anchor:B,transition:D}=b;if(w===Ut){pe(R,B);return}if(w===ho){U(b);return}const Q=()=>{s(R),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(b.shapeFlag&1&&D&&!D.persisted){const{leave:ee,delayLeave:J}=D,X=()=>ee(R,Q);J?J(b.el,Q,X):X()}else Q()},pe=(b,w)=>{let R;for(;b!==w;)R=d(b),s(b),b=R;s(w)},we=(b,w,R)=>{const{bum:B,scope:D,update:Q,subTree:ee,um:J}=b;B&&ri(B),D.stop(),Q&&(Q.active=!1,Z(ee,b,w,R)),J&&Mt(J,w),Mt(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},ae=(b,w,R,B=!1,D=!1,Q=0)=>{for(let ee=Q;ee<b.length;ee++)Z(b[ee],w,R,B,D)},I=b=>b.shapeFlag&6?I(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el);let q=!1;const F=(b,w,R)=>{b==null?w._vnode&&Z(w._vnode,null,null,!0):C(w._vnode||null,b,w,null,null,null,R),q||(q=!0,gc(),zu(),q=!1),w._vnode=b},G={p:C,um:Z,m:S,r:x,mt:Te,mc:W,pc:Se,pbc:me,n:I,o:e};let de,Ee;return t&&([de,Ee]=t(G)),{render:F,hydrate:de,createApp:hm(F,de)}}function fo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function sr({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function xm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sf(e,t,n=!1){const r=e.children,s=t.children;if(Ce(r)&&Ce(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Dn(s[i]),a.el=o.el),n||sf(o,a)),a.type===Ls&&(a.el=o.el)}}function wm(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function of(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:of(t)}const Em=e=>e.__isTeleport,Ut=Symbol.for("v-fgt"),Ls=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),ho=Symbol.for("v-stc"),as=[];let rn=null;function ht(e=!1){as.push(rn=e?null:[])}function vm(){as.pop(),rn=as[as.length-1]||null}let ws=1;function Cc(e){ws+=e}function af(e){return e.dynamicChildren=ws>0?rn||Or:null,vm(),ws>0&&rn&&rn.push(e),e}function wn(e,t,n,r,s,i){return af(Je(e,t,n,r,s,i,!0))}function dr(e,t,n,r,s){return af(qe(e,t,n,r,s,!0))}function _i(e){return e?e.__v_isVNode===!0:!1}function Kr(e,t){return e.type===t.type&&e.key===t.key}const Wi="__vInternal",cf=({key:e})=>e??null,oi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?it(e)||pt(e)||Ie(e)?{i:rt,r:e,k:t,f:!!n}:e:null);function Je(e,t=null,n=null,r=0,s=null,i=e===Ut?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cf(t),ref:t&&oi(t),scopeId:zi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:rt};return a?(La(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),ws>0&&!o&&rn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&rn.push(c),c}const qe=Sm;function Sm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Ud)&&(e=Jn),_i(e)){const a=Fr(e,t,!0);return n&&La(a,n),ws>0&&!i&&rn&&(a.shapeFlag&6?rn[rn.indexOf(e)]=a:rn.push(a)),a.patchFlag|=-2,a}if(Lm(e)&&(e=e.__vccOpts),t){t=km(t);let{class:a,style:c}=t;a&&!it(a)&&(t.class=gn(a)),He(c)&&(Fu(c)&&!Ce(c)&&(c=mt({},c)),t.style=ba(c))}const o=it(e)?1:qd(e)?128:Em(e)?64:He(e)?4:Ie(e)?2:0;return Je(e,t,n,r,s,o,i,!0)}function km(e){return e?Fu(e)||Wi in e?mt({},e):e:null}function Fr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?Om(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&cf(a),ref:t&&t.ref?n&&s?Ce(s)?s.concat(oi(t)):[s,oi(t)]:oi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ut?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fr(e.ssContent),ssFallback:e.ssFallback&&Fr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Na(e=" ",t=0){return qe(Ls,null,e,t)}function lf(e="",t=!1){return t?(ht(),dr(Jn,null,e)):qe(Jn,null,e)}function dn(e){return e==null||typeof e=="boolean"?qe(Jn):Ce(e)?qe(Ut,null,e.slice()):typeof e=="object"?Dn(e):qe(Ls,null,String(e))}function Dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Fr(e)}function La(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ce(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),La(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Wi in t)?t._ctx=rt:s===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:rt},n=32):(t=String(t),r&64?(n=16,t=[Na(t)]):n=8);e.children=t,e.shapeFlag|=n}function Om(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=gn([t.class,r.class]));else if(s==="style")t.style=ba([t.style,r.style]);else if(Ri(s)){const i=t[s],o=r[s];o&&i!==o&&!(Ce(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function fn(e,t,n,r=null){on(e,t,7,[n,r])}const Cm=Xu();let Am=0;function Pm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Cm,i={uid:Am++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Eu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ef(r,s),emitsOptions:Vu(r,s),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ld.bind(null,i),e.ce&&e.ce(i),i}let ft=null;const Fs=()=>ft||rt;let bi,Bo;{const e=yu(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};bi=t("__VUE_INSTANCE_SETTERS__",n=>ft=n),Bo=t("__VUE_SSR_SETTERS__",n=>Gi=n)}const js=e=>{const t=ft;return bi(e),e.scope.on(),()=>{e.scope.off(),bi(t)}},Ac=()=>{ft&&ft.scope.off(),bi(null)};function uf(e){return e.vnode.shapeFlag&4}let Gi=!1;function Im(e,t=!1){t&&Bo(t);const{props:n,children:r}=e.vnode,s=uf(e);dm(e,n,s,t),gm(e,r);const i=s?Tm(e,t):void 0;return t&&Bo(!1),i}function Tm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ju(new Proxy(e.ctx,im));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?Rm(e):null,i=js(e);gr();const o=Hn(r,e,0,[e.props,s]);if(_r(),i(),gu(o)){if(o.then(Ac,Ac),t)return o.then(a=>{Pc(e,a,t)}).catch(a=>{Bi(a,e,0)});e.asyncDep=o}else Pc(e,o,t)}else ff(e,t)}function Pc(e,t,n){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:He(t)&&(e.setupState=Uu(t)),ff(e,n)}let Ic;function ff(e,t,n){const r=e.type;if(!e.render){if(!t&&Ic&&!r.render){const s=r.template||Ma(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=mt(mt({isCustomElement:i,delimiters:a},o),c);r.render=Ic(s,l)}}e.render=r.render||Kt}{const s=js(e);gr();try{om(e)}finally{_r(),s()}}}function Mm(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Ft(e,"get","$attrs"),t[n]}}))}function Rm(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Mm(e)},slots:e.slots,emit:e.emit,expose:t}}function Ki(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Uu(ju(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in is)return is[n](e)},has(t,n){return n in t||n in is}}))}function Nm(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Lm(e){return Ie(e)&&"__vccOpts"in e}const We=(e,t)=>wd(e,t,Gi);function Ji(e,t,n){const r=arguments.length;return r===2?He(t)&&!Ce(t)?_i(t)?qe(e,null,[t]):qe(e,t):qe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_i(n)&&(n=[n]),qe(e,t,n))}const Fm="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const jm="http://www.w3.org/2000/svg",$m="http://www.w3.org/1998/Math/MathML",Un=typeof document<"u"?document:null,Tc=Un&&Un.createElement("template"),Dm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Un.createElementNS(jm,e):t==="mathml"?Un.createElementNS($m,e):Un.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Un.createTextNode(e),createComment:e=>Un.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Un.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Tc.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Tc.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Um=Symbol("_vtc");function Bm(e,t,n){const r=e[Um];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Es=Symbol("_vod"),p1={beforeMount(e,{value:t},{transition:n}){e[Es]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Jr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t==!n&&(e.style.display===e[Es]||!t)||(r?t?(r.beforeEnter(e),Jr(e,!0),r.enter(e)):r.leave(e,()=>{Jr(e,!1)}):Jr(e,t))},beforeUnmount(e,{value:t}){Jr(e,t)}};function Jr(e,t){e.style.display=t?e[Es]:"none"}const qm=Symbol(""),zm=/(^|;)\s*display\s*:/;function Hm(e,t,n){const r=e.style,s=it(n),i=r.display;let o=!1;if(n&&!s){if(t&&!it(t))for(const a in t)n[a]==null&&qo(r,a,"");for(const a in n)a==="display"&&(o=!0),qo(r,a,n[a])}else if(s){if(t!==n){const a=r[qm];a&&(n+=";"+a),r.cssText=n,o=zm.test(n)}}else t&&e.removeAttribute("style");Es in e&&(e[Es]=o?r.display:"",r.display=i)}const Mc=/\s*!important$/;function qo(e,t,n){if(Ce(n))n.forEach(r=>qo(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Vm(e,t);Mc.test(n)?e.setProperty(pr(r),n.replace(Mc,""),"important"):e[r]=n}}const Rc=["Webkit","Moz","ms"],mo={};function Vm(e,t){const n=mo[t];if(n)return n;let r=xn(t);if(r!=="filter"&&r in e)return mo[t]=r;r=Fi(r);for(let s=0;s<Rc.length;s++){const i=Rc[s]+r;if(i in e)return mo[t]=i}return t}const Nc="http://www.w3.org/1999/xlink";function Wm(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Nc,t.slice(6,t.length)):e.setAttributeNS(Nc,t,n);else{const i=Jh(t);n==null||i&&!xu(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function Gm(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";l!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=xu(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function ar(e,t,n,r){e.addEventListener(t,n,r)}function Km(e,t,n,r){e.removeEventListener(t,n,r)}const Lc=Symbol("_vei");function Jm(e,t,n,r,s=null){const i=e[Lc]||(e[Lc]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=Ym(t);if(r){const l=i[t]=Zm(r,s);ar(e,a,l,c)}else o&&(Km(e,a,o,c),i[t]=void 0)}}const Fc=/(?:Once|Passive|Capture)$/;function Ym(e){let t;if(Fc.test(e)){t={};let r;for(;r=e.match(Fc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):pr(e.slice(2)),t]}let po=0;const Qm=Promise.resolve(),Xm=()=>po||(Qm.then(()=>po=0),po=Date.now());function Zm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;on(ep(r,n.value),t,5,[r])};return n.value=e,n.attached=Xm(),n}function ep(e,t){if(Ce(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const jc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,tp=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?Bm(e,r,l):t==="style"?Hm(e,n,r):Ri(t)?pa(t)||Jm(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):np(e,t,r,l))?Gm(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Wm(e,t,r,l))};function np(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&jc(t)&&Ie(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return jc(t)&&it(n)?!1:t in e}const yi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ce(t)?n=>ri(t,n):t};function rp(e){e.target.composing=!0}function $c(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ir=Symbol("_assign"),g1={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Ir]=yi(s);const i=r||s.props&&s.props.type==="number";ar(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=_s(a)),e[Ir](a)}),n&&ar(e,"change",()=>{e.value=e.value.trim()}),t||(ar(e,"compositionstart",rp),ar(e,"compositionend",$c),ar(e,"change",$c))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Ir]=yi(i),e.composing)return;const o=s||e.type==="number"?_s(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},_1={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Ni(t);ar(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?_s(xi(o)):xi(o));e[Ir](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Hr(()=>{e._assigning=!1})}),e[Ir]=yi(r)},mounted(e,{value:t,oldValue:n,modifiers:{number:r}}){Dc(e,t,n,r)},beforeUpdate(e,t,n){e[Ir]=yi(n)},updated(e,{value:t,oldValue:n,modifiers:{number:r}}){e._assigning||Dc(e,t,n,r)}};function Dc(e,t,n,r){const s=e.multiple,i=Ce(t);if(!(s&&!i&&!Ni(t))){for(let o=0,a=e.options.length;o<a;o++){const c=e.options[o],l=xi(c);if(s)if(i){const u=typeof l;u==="string"||u==="number"?c.selected=t.includes(r?_s(l):l):c.selected=Qh(t,l)>-1}else c.selected=t.has(l);else if(ji(xi(c),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function xi(e){return"_value"in e?e._value:e.value}const sp=["ctrl","shift","alt","meta"],ip={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>sp.some(n=>e[`${n}Key`]&&!t.includes(n))},b1=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=ip[t[o]];if(a&&a(s,t))return}return e(s,...i)})},op={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},y1=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=pr(s.key);if(t.some(o=>o===i||op[o]===i))return e(s)})},ap=mt({patchProp:tp},Dm);let Uc;function cp(){return Uc||(Uc=bm(ap))}const lp=(...e)=>{const t=cp().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=fp(r);if(!s)return;const i=t._component;!Ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,up(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function up(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fp(e){return it(e)?document.querySelector(e):e}function Fa(e){return vu()?(ed(e),!0):!1}function Yi(e){return typeof e=="function"?e():Qe(e)}const hp=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const dp=Object.prototype.toString,mp=e=>dp.call(e)==="[object Object]",hf=()=>{};function pp(e,t){function n(...r){return new Promise((s,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(i)})}return n}const df=e=>e();function gp(e=df){const t=kt(!0);function n(){t.value=!1}function r(){t.value=!0}const s=(...i)=>{t.value&&e(...i)};return{isActive:Ui(t),pause:n,resume:r,eventFilter:s}}function _p(e){return e||Fs()}function bp(...e){if(e.length!==1)return Ad(...e);const t=e[0];return typeof t=="function"?Ui(kd(()=>({get:t,set:hf}))):kt(t)}function yp(e,t,n={}){const{eventFilter:r=df,...s}=n;return Nt(e,pp(r,t),s)}function xp(e,t,n={}){const{eventFilter:r,...s}=n,{eventFilter:i,pause:o,resume:a,isActive:c}=gp(r);return{stop:yp(e,t,{...s,eventFilter:i}),pause:o,resume:a,isActive:c}}function ja(e,t=!0,n){_p()?Ns(e,n):t?e():Hr(e)}function qn(e){var t;const n=Yi(e);return(t=n==null?void 0:n.$el)!=null?t:n}const mr=hp?window:void 0;function Bc(...e){let t,n,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,s]=e,t=mr):[t,n,r,s]=e,!t)return hf;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,f,d,h)=>(u.addEventListener(f,d,h),()=>u.removeEventListener(f,d,h)),c=Nt(()=>[qn(t),Yi(s)],([u,f])=>{if(o(),!u)return;const d=mp(f)?{...f}:f;i.push(...n.flatMap(h=>r.map(E=>a(u,h,E,d))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return Fa(l),l}function wp(){const e=kt(!1);return Fs()&&Ns(()=>{e.value=!0}),e}function mf(e){const t=wp();return We(()=>(t.value,!!e()))}function Ep(e,t={}){const{window:n=mr}=t,r=mf(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const i=kt(!1),o=l=>{i.value=l.matches},a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},c=Wd(()=>{r.value&&(a(),s=n.matchMedia(Yi(e)),"addEventListener"in s?s.addEventListener("change",o):s.addListener(o),i.value=s.matches)});return Fa(()=>{c(),a(),s=void 0}),i}const Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ys="__vueuse_ssr_handlers__",vp=Sp();function Sp(){return Ys in Js||(Js[Ys]=Js[Ys]||{}),Js[Ys]}function pf(e,t){return vp[e]||t}function kp(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Op={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},qc="vueuse-storage";function vs(e,t,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:f=mr,eventFilter:d,onError:h=ue=>{console.error(ue)},initOnMounted:E}=r,C=(u?Ca:kt)(typeof t=="function"?t():t);if(!n)try{n=pf("getDefaultStorage",()=>{var ue;return(ue=mr)==null?void 0:ue.localStorage})()}catch(ue){h(ue)}if(!n)return C;const N=Yi(t),k=kp(N),P=(s=r.serializer)!=null?s:Op[k],{pause:L,resume:U}=xp(C,()=>V(C.value),{flush:i,deep:o,eventFilter:d});return f&&a&&ja(()=>{Bc(f,"storage",W),Bc(f,qc,he),E&&W()}),E||W(),C;function V(ue){try{if(ue==null)n.removeItem(e);else{const me=P.write(ue),re=n.getItem(e);re!==me&&(n.setItem(e,me),f&&f.dispatchEvent(new CustomEvent(qc,{detail:{key:e,oldValue:re,newValue:me,storageArea:n}})))}}catch(me){h(me)}}function A(ue){const me=ue?ue.newValue:n.getItem(e);if(me==null)return c&&N!=null&&n.setItem(e,P.write(N)),N;if(!ue&&l){const re=P.read(me);return typeof l=="function"?l(re,N):k==="object"&&!Array.isArray(re)?{...N,...re}:re}else return typeof me!="string"?me:P.read(me)}function he(ue){W(ue.detail)}function W(ue){if(!(ue&&ue.storageArea!==n)){if(ue&&ue.key==null){C.value=N;return}if(!(ue&&ue.key!==e)){L();try{(ue==null?void 0:ue.newValue)!==P.write(C.value)&&(C.value=A(ue))}catch(me){h(me)}finally{ue?Hr(U):U()}}}}}function Cp(e){return Ep("(prefers-color-scheme: dark)",e)}function Ap(e={}){const{selector:t="html",attribute:n="class",initialValue:r="auto",window:s=mr,storage:i,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:c,emitAuto:l,disableTransition:u=!0}=e,f={auto:"",light:"light",dark:"dark",...e.modes||{}},d=Cp({window:s}),h=We(()=>d.value?"dark":"light"),E=c||(o==null?bp(r):vs(o,r,i,{window:s,listenToStorageChanges:a})),C=We(()=>E.value==="auto"?h.value:E.value),N=pf("updateHTMLAttrs",(U,V,A)=>{const he=typeof U=="string"?s==null?void 0:s.document.querySelector(U):qn(U);if(!he)return;let W;if(u&&(W=s.document.createElement("style"),W.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),s.document.head.appendChild(W)),V==="class"){const ue=A.split(/\s/g);Object.values(f).flatMap(me=>(me||"").split(/\s/g)).filter(Boolean).forEach(me=>{ue.includes(me)?he.classList.add(me):he.classList.remove(me)})}else he.setAttribute(V,A);u&&(s.getComputedStyle(W).opacity,document.head.removeChild(W))});function k(U){var V;N(t,n,(V=f[U])!=null?V:U)}function P(U){e.onChanged?e.onChanged(U,k):k(U)}Nt(C,P,{flush:"post",immediate:!0}),ja(()=>P(C.value));const L=We({get(){return l?E.value:C.value},set(U){E.value=U}});try{return Object.assign(L,{store:E,system:h,state:C})}catch{return L}}function Pp(e,t,n={}){const{window:r=mr,...s}=n;let i;const o=mf(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},c=We(()=>Array.isArray(e)?e.map(f=>qn(f)):[qn(e)]),l=Nt(c,f=>{if(a(),o.value&&r){i=new ResizeObserver(t);for(const d of f)d&&i.observe(d,s)}},{immediate:!0,flush:"post",deep:!0}),u=()=>{a(),l()};return Fa(u),{isSupported:o,stop:u}}function x1(e,t={width:0,height:0},n={}){const{window:r=mr,box:s="content-box"}=n,i=We(()=>{var f,d;return(d=(f=qn(e))==null?void 0:f.namespaceURI)==null?void 0:d.includes("svg")}),o=kt(t.width),a=kt(t.height),{stop:c}=Pp(e,([f])=>{const d=s==="border-box"?f.borderBoxSize:s==="content-box"?f.contentBoxSize:f.devicePixelContentBoxSize;if(r&&i.value){const h=qn(e);if(h){const E=r.getComputedStyle(h);o.value=Number.parseFloat(E.width),a.value=Number.parseFloat(E.height)}}else if(d){const h=Array.isArray(d)?d:[d];o.value=h.reduce((E,{inlineSize:C})=>E+C,0),a.value=h.reduce((E,{blockSize:C})=>E+C,0)}else o.value=f.contentRect.width,a.value=f.contentRect.height},n);ja(()=>{const f=qn(e);f&&(o.value="offsetWidth"in f?f.offsetWidth:t.width,a.value="offsetHeight"in f?f.offsetHeight:t.height)});const l=Nt(()=>qn(e),f=>{o.value=f?t.width:0,a.value=f?t.height:0});function u(){c(),l()}return{width:o,height:a,stop:u}}const zc=document.createElement("i");function gf(e){const t="&"+e+";";zc.innerHTML=t;const n=zc.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function En(e,t,n,r){const s=e.length;let i=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Et(e,t){return e.length>0?(En(e,e.length,0,t),e):t}const zo={}.hasOwnProperty;function Ip(e){const t={};let n=-1;for(;++n<e.length;)Tp(t,e[n]);return t}function Tp(e,t){let n;for(n in t){const s=(zo.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){zo.call(s,o)||(s[o]=[]);const a=i[o];Mp(s[o],Array.isArray(a)?a:a?[a]:[])}}}function Mp(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);En(e,0,0,r)}function Rp(e){const t={};let n=-1;for(;++n<e.length;)Np(t,e[n]);return t}function Np(e,t){let n;for(n in t){const s=(zo.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i)s[o]=i[o]}}function Lp(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}const Fp={'"':"quot","&":"amp","<":"lt",">":"gt"};function _f(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+Fp[n]+";"}}function Ss(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pn=Qn(/[A-Za-z]/),Bt=Qn(/[\dA-Za-z]/),jp=Qn(/[#-'*+\--9=?A-Z^-~]/);function Ho(e){return e!==null&&(e<32||e===127)}const Vo=Qn(/\d/),$p=Qn(/[\dA-Fa-f]/),Dp=Qn(/[!-/:-@[-`{-~]/);function Ae(e){return e!==null&&e<-2}function Lt(e){return e!==null&&(e<0||e===32)}function De(e){return e===-2||e===-1||e===32}const Up=Qn(new RegExp("\\p{P}|\\p{S}","u")),Bp=Qn(/\s/);function Qn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Qs(e,t){const n=_f(qp(e||""));if(!t)return n;const r=n.indexOf(":"),s=n.indexOf("?"),i=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||s>-1&&r>s||i>-1&&r>i||t.test(n.slice(0,r))?n:""}function qp(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&Bt(e.charCodeAt(n+1))&&Bt(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=e.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o="�"}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}const Hc={}.hasOwnProperty,Vc=/^(https?|ircs?|mailto|xmpp)$/i,zp=/^https?$/i;function Hp(e){const t=e||{};let n=!0;const r={},s=[[]],i=[],o=[],c=Rp([{enter:{blockQuote:Oe,codeFenced:ze,codeFencedFenceInfo:N,codeFencedFenceMeta:N,codeIndented:Z,codeText:ot,content:J,definition:w,definitionDestinationString:B,definitionLabelString:N,definitionTitleString:N,emphasis:Ot,htmlFlow:Ve,htmlText:un,image:pe,label:N,link:we,listItemMarker:re,listItemValue:me,listOrdered:W,listUnordered:ue,paragraph:ve,reference:N,resource:F,resourceDestinationString:G,resourceTitleString:N,setextHeading:K,strong:vn},exit:{atxHeading:te,atxHeadingSequence:X,autolinkEmail:qs,autolinkProtocol:Gr,blockQuote:Pe,characterEscapeValue:fe,characterReferenceMarkerHexadecimal:er,characterReferenceMarkerNumeric:er,characterReferenceValue:Wr,codeFenced:x,codeFencedFence:S,codeFencedFenceInfo:m,codeFencedFenceMeta:he,codeFlowValue:Me,codeIndented:x,codeText:_t,codeTextData:fe,data:fe,definition:ee,definitionDestinationString:D,definitionLabelString:R,definitionTitleString:Q,emphasis:Mn,hardBreakEscape:je,hardBreakTrailing:je,htmlFlow:gt,htmlFlowData:fe,htmlText:gt,htmlTextData:fe,image:b,label:I,labelText:ae,lineEnding:xe,link:b,listOrdered:ie,listUnordered:ke,paragraph:Se,reference:he,referenceString:q,resource:he,resourceDestinationString:de,resourceTitleString:Ee,setextHeading:$,setextHeadingLineSequence:T,setextHeadingText:oe,strong:xr,thematicBreak:Vr}}].concat(t.htmlExtensions||[])),l={tightStack:o,definitions:r},u={lineEndingIfNeeded:V,options:t,encode:A,raw:L,tag:P,buffer:N,resume:k,setData:E,getData:C};let f=t.defaultLineEnding;return d;function d(ne){let be=-1,at=0;const bt=[];let yt=[],xt=[];for(;++be<ne.length;)!f&&(ne[be][1].type==="lineEnding"||ne[be][1].type==="lineEndingBlank")&&(f=ne[be][2].sliceSerialize(ne[be][1])),(ne[be][1].type==="listOrdered"||ne[be][1].type==="listUnordered")&&(ne[be][0]==="enter"?bt.push(be):h(ne.slice(bt.pop(),be))),ne[be][1].type==="definition"&&(ne[be][0]==="enter"?(xt=Et(xt,ne.slice(at,be)),at=be):(yt=Et(yt,ne.slice(at,be+1)),at=be+1));yt=Et(yt,xt),yt=Et(yt,ne.slice(at)),be=-1;const wt=yt;for(c.enter.null&&c.enter.null.call(u);++be<ne.length;){const tr=c[wt[be][0]],Rn=wt[be][1].type,Nn=tr[Rn];Hc.call(tr,Rn)&&Nn&&Nn.call(Object.assign({sliceSerialize:wt[be][2].sliceSerialize},u),wt[be][1])}return c.exit.null&&c.exit.null.call(u),s[0].join("")}function h(ne){const be=ne.length;let at=0,bt=0,yt=!1,xt;for(;++at<be;){const wt=ne[at];if(wt[1]._container)xt=void 0,wt[0]==="enter"?bt++:bt--;else switch(wt[1].type){case"listItemPrefix":{wt[0]==="exit"&&(xt=!0);break}case"linePrefix":break;case"lineEndingBlank":{wt[0]==="enter"&&!bt&&(xt?xt=void 0:yt=!0);break}default:xt=void 0}}ne[0][1]._loose=yt}function E(ne,be){l[ne]=be}function C(ne){return l[ne]}function N(){s.push([])}function k(){return s.pop().join("")}function P(ne){n&&(E("lastWasTag",!0),s[s.length-1].push(ne))}function L(ne){E("lastWasTag"),s[s.length-1].push(ne)}function U(){L(f||`
`)}function V(){const ne=s[s.length-1],be=ne[ne.length-1],at=be?be.charCodeAt(be.length-1):null;at===10||at===13||at===null||U()}function A(ne){return C("ignoreEncode")?ne:_f(ne)}function he(){k()}function W(ne){o.push(!ne._loose),V(),P("<ol"),E("expectFirstItem",!0)}function ue(ne){o.push(!ne._loose),V(),P("<ul"),E("expectFirstItem",!0)}function me(ne){if(C("expectFirstItem")){const be=Number.parseInt(this.sliceSerialize(ne),10);be!==1&&P(' start="'+A(String(be))+'"')}}function re(){C("expectFirstItem")?P(">"):Te(),V(),P("<li>"),E("expectFirstItem"),E("lastWasTag")}function ie(){Te(),o.pop(),U(),P("</ol>")}function ke(){Te(),o.pop(),U(),P("</ul>")}function Te(){C("lastWasTag")&&!C("slurpAllLineEndings")&&V(),P("</li>"),E("slurpAllLineEndings")}function Oe(){o.push(!1),V(),P("<blockquote>")}function Pe(){o.pop(),V(),P("</blockquote>"),E("slurpAllLineEndings")}function ve(){o[o.length-1]||(V(),P("<p>")),E("slurpAllLineEndings")}function Se(){o[o.length-1]?E("slurpAllLineEndings",!0):P("</p>")}function ze(){V(),P("<pre><code"),E("fencesCount",0)}function m(){const ne=k();P(' class="language-'+ne+'"')}function S(){const ne=C("fencesCount")||0;ne||(P(">"),E("slurpOneLineEnding",!0)),E("fencesCount",ne+1)}function Z(){V(),P("<pre><code>")}function x(){const ne=C("fencesCount");ne!==void 0&&ne<2&&l.tightStack.length>0&&!C("lastWasTag")&&U(),C("flowCodeSeenData")&&V(),P("</code></pre>"),ne!==void 0&&ne<2&&V(),E("flowCodeSeenData"),E("fencesCount"),E("slurpOneLineEnding")}function pe(){i.push({image:!0}),n=void 0}function we(){i.push({})}function ae(ne){i[i.length-1].labelId=this.sliceSerialize(ne)}function I(){i[i.length-1].label=k()}function q(ne){i[i.length-1].referenceId=this.sliceSerialize(ne)}function F(){N(),i[i.length-1].destination=""}function G(){N(),E("ignoreEncode",!0)}function de(){i[i.length-1].destination=k(),E("ignoreEncode")}function Ee(){i[i.length-1].title=k()}function b(){let ne=i.length-1;const be=i[ne],at=be.referenceId||be.labelId,bt=be.destination===void 0?r[Ss(at)]:be;for(n=!0;ne--;)if(i[ne].image){n=void 0;break}be.image?(P('<img src="'+Qs(bt.destination,t.allowDangerousProtocol?void 0:zp)+'" alt="'),L(be.label),P('"')):P('<a href="'+Qs(bt.destination,t.allowDangerousProtocol?void 0:Vc)+'"'),P(bt.title?' title="'+bt.title+'"':""),be.image?P(" />"):(P(">"),L(be.label),P("</a>")),i.pop()}function w(){N(),i.push({})}function R(ne){k(),i[i.length-1].labelId=this.sliceSerialize(ne)}function B(){N(),E("ignoreEncode",!0)}function D(){i[i.length-1].destination=k(),E("ignoreEncode")}function Q(){i[i.length-1].title=k()}function ee(){const ne=i[i.length-1],be=Ss(ne.labelId);k(),Hc.call(r,be)||(r[be]=i[i.length-1]),i.pop()}function J(){E("slurpAllLineEndings",!0)}function X(ne){C("headingRank")||(E("headingRank",this.sliceSerialize(ne).length),V(),P("<h"+C("headingRank")+">"))}function K(){N(),E("slurpAllLineEndings")}function oe(){E("slurpAllLineEndings",!0)}function te(){P("</h"+C("headingRank")+">"),E("headingRank")}function T(ne){E("headingRank",this.sliceSerialize(ne).charCodeAt(0)===61?1:2)}function $(){const ne=k();V(),P("<h"+C("headingRank")+">"),L(ne),P("</h"+C("headingRank")+">"),E("slurpAllLineEndings"),E("headingRank")}function fe(ne){L(A(this.sliceSerialize(ne)))}function xe(ne){if(!C("slurpAllLineEndings")){if(C("slurpOneLineEnding")){E("slurpOneLineEnding");return}if(C("inCodeText")){L(" ");return}L(A(this.sliceSerialize(ne)))}}function Me(ne){L(A(this.sliceSerialize(ne))),E("flowCodeSeenData",!0)}function je(){P("<br />")}function Ve(){V(),un()}function gt(){E("ignoreEncode")}function un(){t.allowDangerousHtml&&E("ignoreEncode",!0)}function Ot(){P("<em>")}function vn(){P("<strong>")}function ot(){E("inCodeText",!0),P("<code>")}function _t(){E("inCodeText"),P("</code>")}function Mn(){P("</em>")}function xr(){P("</strong>")}function Vr(){V(),P("<hr />")}function er(ne){E("characterReferenceType",ne.type)}function Wr(ne){let be=this.sliceSerialize(ne);be=C("characterReferenceType")?Lp(be,C("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):gf(be),L(A(be)),E("characterReferenceType")}function Gr(ne){const be=this.sliceSerialize(ne);P('<a href="'+Qs(be,t.allowDangerousProtocol?void 0:Vc)+'">'),L(A(be)),P("</a>")}function qs(ne){const be=this.sliceSerialize(ne);P('<a href="'+Qs("mailto:"+be)+'">'),L(A(be)),P("</a>")}}function Ge(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return De(c)?(e.enter(n),a(c)):t(c)}function a(c){return De(c)&&i++<s?(e.consume(c),a):(e.exit(n),t(c))}}const Vp={tokenize:Wp};function Wp(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ge(e,t,"linePrefix")}function s(a){return e.enter("paragraph"),i(a)}function i(a){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Ae(a)?(e.consume(a),e.exit("chunkText"),i):(e.consume(a),o)}}const Gp={tokenize:Kp},Wc={tokenize:Jp};function Kp(e){const t=this,n=[];let r=0,s,i,o;return a;function a(L){if(r<n.length){const U=n[r];return t.containerState=U[1],e.attempt(U[0].continuation,c,l)(L)}return l(L)}function c(L){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&P();const U=t.events.length;let V=U,A;for(;V--;)if(t.events[V][0]==="exit"&&t.events[V][1].type==="chunkFlow"){A=t.events[V][1].end;break}k(r);let he=U;for(;he<t.events.length;)t.events[he][1].end=Object.assign({},A),he++;return En(t.events,V+1,0,t.events.slice(U)),t.events.length=he,l(L)}return a(L)}function l(L){if(r===n.length){if(!s)return d(L);if(s.currentConstruct&&s.currentConstruct.concrete)return E(L);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Wc,u,f)(L)}function u(L){return s&&P(),k(r),d(L)}function f(L){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,E(L)}function d(L){return t.containerState={},e.attempt(Wc,h,E)(L)}function h(L){return r++,n.push([t.currentConstruct,t.containerState]),d(L)}function E(L){if(L===null){s&&P(),k(0),e.consume(L);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:s}),C(L)}function C(L){if(L===null){N(e.exit("chunkFlow"),!0),k(0),e.consume(L);return}return Ae(L)?(e.consume(L),N(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(L),C)}function N(L,U){const V=t.sliceStream(L);if(U&&V.push(null),L.previous=i,i&&(i.next=L),i=L,s.defineSkip(L.start),s.write(V),t.parser.lazy[L.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<o&&(!s.events[A][1].end||s.events[A][1].end.offset>o))return;const he=t.events.length;let W=he,ue,me;for(;W--;)if(t.events[W][0]==="exit"&&t.events[W][1].type==="chunkFlow"){if(ue){me=t.events[W][1].end;break}ue=!0}for(k(r),A=he;A<t.events.length;)t.events[A][1].end=Object.assign({},me),A++;En(t.events,W+1,0,t.events.slice(he)),t.events.length=A}}function k(L){let U=n.length;for(;U-- >L;){const V=n[U];t.containerState=V[1],V[0].exit.call(t,e)}n.length=L}function P(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Jp(e,t,n){return Ge(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gc(e){if(e===null||Lt(e)||Bp(e))return 1;if(Up(e))return 2}function $a(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Wo={name:"attention",tokenize:Qp,resolveAll:Yp};function Yp(e,t){let n=-1,r,s,i,o,a,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Kc(f,-c),Kc(d,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},i={type:c>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s={type:c>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Et(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Et(l,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=Et(l,$a(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Et(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=Et(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,En(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Qp(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Gc(r);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),a(c)}function a(c){if(c===i)return e.consume(c),a;const l=e.exit("attentionSequence"),u=Gc(c),f=!u||u===2&&s||n.includes(c),d=!s||s===2&&u||n.includes(r);return l._open=!!(i===42?f:f&&(s||!d)),l._close=!!(i===42?d:d&&(u||!f)),t(c)}}function Kc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Xp={name:"autolink",tokenize:Zp};function Zp(e,t,n){let r=0;return s;function s(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(h){return pn(h)?(e.consume(h),o):l(h)}function o(h){return h===43||h===45||h===46||Bt(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,c):(h===43||h===45||h===46||Bt(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function c(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Ho(h)?n(h):(e.consume(h),c)}function l(h){return h===64?(e.consume(h),u):jp(h)?(e.consume(h),l):n(h)}function u(h){return Bt(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,u):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Bt(h))&&r++<63){const E=h===45?d:f;return e.consume(h),E}return n(h)}}const Qi={tokenize:eg,partial:!0};function eg(e,t,n){return r;function r(i){return De(i)?Ge(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||Ae(i)?t(i):n(i)}}const bf={name:"blockQuote",tokenize:tg,continuation:{tokenize:ng},exit:rg};function tg(e,t,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return De(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ng(e,t,n){const r=this;return s;function s(o){return De(o)?Ge(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(bf,t,n)(o)}}function rg(e){e.exit("blockQuote")}const yf={name:"characterEscape",tokenize:sg};function sg(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return Dp(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const xf={name:"characterReference",tokenize:ig};function ig(e,t,n){const r=this;let s=0,i,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=Bt,u(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=$p,u):(e.enter("characterReferenceValue"),i=7,o=Vo,u(f))}function u(f){if(f===59&&s){const d=e.exit("characterReferenceValue");return o===Bt&&!gf(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&s++<i?(e.consume(f),u):n(f)}}const Jc={tokenize:ag,partial:!0},Yc={name:"codeFenced",tokenize:og,concrete:!0};function og(e,t,n){const r=this,s={tokenize:V,partial:!0};let i=0,o=0,a;return c;function c(A){return l(A)}function l(A){const he=r.events[r.events.length-1];return i=he&&he[1].type==="linePrefix"?he[2].sliceSerialize(he[1],!0).length:0,a=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(A)}function u(A){return A===a?(o++,e.consume(A),u):o<3?n(A):(e.exit("codeFencedFenceSequence"),De(A)?Ge(e,f,"whitespace")(A):f(A))}function f(A){return A===null||Ae(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(Jc,C,U)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(A))}function d(A){return A===null||Ae(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(A)):De(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ge(e,h,"whitespace")(A)):A===96&&A===a?n(A):(e.consume(A),d)}function h(A){return A===null||Ae(A)?f(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),E(A))}function E(A){return A===null||Ae(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(A)):A===96&&A===a?n(A):(e.consume(A),E)}function C(A){return e.attempt(s,U,N)(A)}function N(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),k}function k(A){return i>0&&De(A)?Ge(e,P,"linePrefix",i+1)(A):P(A)}function P(A){return A===null||Ae(A)?e.check(Jc,C,U)(A):(e.enter("codeFlowValue"),L(A))}function L(A){return A===null||Ae(A)?(e.exit("codeFlowValue"),P(A)):(e.consume(A),L)}function U(A){return e.exit("codeFenced"),t(A)}function V(A,he,W){let ue=0;return me;function me(Oe){return A.enter("lineEnding"),A.consume(Oe),A.exit("lineEnding"),re}function re(Oe){return A.enter("codeFencedFence"),De(Oe)?Ge(A,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Oe):ie(Oe)}function ie(Oe){return Oe===a?(A.enter("codeFencedFenceSequence"),ke(Oe)):W(Oe)}function ke(Oe){return Oe===a?(ue++,A.consume(Oe),ke):ue>=o?(A.exit("codeFencedFenceSequence"),De(Oe)?Ge(A,Te,"whitespace")(Oe):Te(Oe)):W(Oe)}function Te(Oe){return Oe===null||Ae(Oe)?(A.exit("codeFencedFence"),he(Oe)):W(Oe)}}}function ag(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const go={name:"codeIndented",tokenize:lg},cg={tokenize:ug,partial:!0};function lg(e,t,n){const r=this;return s;function s(l){return e.enter("codeIndented"),Ge(e,i,"linePrefix",5)(l)}function i(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?c(l):Ae(l)?e.attempt(cg,o,c)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Ae(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function c(l){return e.exit("codeIndented"),t(l)}}function ug(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Ae(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ge(e,i,"linePrefix",5)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Ae(o)?s(o):n(o)}}const fg={name:"codeText",tokenize:mg,resolve:hg,previous:dg};function hg(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function dg(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mg(e,t,n){let r=0,s,i;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(i=e.enter("codeTextSequence"),s=0,u(f)):Ae(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Ae(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),l)}function u(f){return f===96?(e.consume(f),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",l(f))}}function wf(e){const t={};let n=-1,r,s,i,o,a,c,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,pg(e,n)),n=t[n],l=!0);else if(r[1]._container){for(i=n,s=void 0;i--&&(o=e[i],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(s&&(e[s][1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);s&&(r[1].end=Object.assign({},e[s][1].start),a=e.slice(s,n),a.unshift(r),En(e,s,n-s+1,a))}}return!l}function pg(e,t){const n=e[t][1],r=e[t][2];let s=t-1;const i=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,c=[],l={};let u,f,d=-1,h=n,E=0,C=0;const N=[C];for(;h;){for(;e[++s][1]!==h;);i.push(s),h._tokenizer||(u=r.sliceStream(h),h.next||u.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(C=d+1,N.push(C),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):N.pop(),d=N.length;d--;){const k=a.slice(N[d],N[d+1]),P=i.pop();c.unshift([P,P+k.length-1]),En(e,P,2,k)}for(d=-1;++d<c.length;)l[E+c[d][0]]=E+c[d][1],E+=c[d][1]-c[d][0]-1;return l}const gg={tokenize:yg,resolve:bg},_g={tokenize:xg,partial:!0};function bg(e){return wf(e),e}function yg(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Ae(a)?e.check(_g,o,i)(a):(e.consume(a),s)}function i(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function xg(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ge(e,i,"linePrefix")}function i(o){if(o===null||Ae(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Ef(e,t,n,r,s,i,o,a,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return f;function f(k){return k===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(k),e.exit(i),d):k===null||k===32||k===41||Ho(k)?n(k):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),C(k))}function d(k){return k===62?(e.enter(i),e.consume(k),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===62?(e.exit("chunkString"),e.exit(a),d(k)):k===null||k===60||Ae(k)?n(k):(e.consume(k),k===92?E:h)}function E(k){return k===60||k===62||k===92?(e.consume(k),h):h(k)}function C(k){return!u&&(k===null||k===41||Lt(k))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(k)):u<l&&k===40?(e.consume(k),u++,C):k===41?(e.consume(k),u--,C):k===null||k===32||k===40||Ho(k)?n(k):(e.consume(k),k===92?N:C)}function N(k){return k===40||k===41||k===92?(e.consume(k),C):C(k)}}function vf(e,t,n,r,s,i){const o=this;let a=0,c;return l;function l(h){return e.enter(r),e.enter(s),e.consume(h),e.exit(s),e.enter(i),u}function u(h){return a>999||h===null||h===91||h===93&&!c||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(i),e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):Ae(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Ae(h)||a++>999?(e.exit("chunkString"),u(h)):(e.consume(h),c||(c=!De(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Sf(e,t,n,r,s,i){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(s),e.consume(d),e.exit(s),o=d===40?41:d,c):n(d)}function c(d){return d===o?(e.enter(s),e.consume(d),e.exit(s),e.exit(r),t):(e.enter(i),l(d))}function l(d){return d===o?(e.exit(i),c(o)):d===null?n(d):Ae(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Ge(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===o||d===null||Ae(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:u)}function f(d){return d===o||d===92?(e.consume(d),u):u(d)}}function cs(e,t){let n;return r;function r(s){return Ae(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):De(s)?Ge(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const wg={name:"definition",tokenize:vg},Eg={tokenize:Sg,partial:!0};function vg(e,t,n){const r=this;let s;return i;function i(h){return e.enter("definition"),o(h)}function o(h){return vf.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return s=Ss(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),c):n(h)}function c(h){return Lt(h)?cs(e,l)(h):l(h)}function l(h){return Ef(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function u(h){return e.attempt(Eg,f,f)(h)}function f(h){return De(h)?Ge(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Ae(h)?(e.exit("definition"),r.parser.defined.push(s),t(h)):n(h)}}function Sg(e,t,n){return r;function r(a){return Lt(a)?cs(e,s)(a):n(a)}function s(a){return Sf(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return De(a)?Ge(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Ae(a)?t(a):n(a)}}const kg={name:"hardBreakEscape",tokenize:Og};function Og(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return Ae(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const Cg={name:"headingAtx",tokenize:Pg,resolve:Ag};function Ag(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},En(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function Pg(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(e.consume(u),o):u===null||Lt(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||Ae(u)?(e.exit("atxHeading"),t(u)):De(u)?Ge(e,a,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),a(u))}function l(u){return u===null||u===35||Lt(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),l)}}const Ig=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qc=["pre","script","style","textarea"],Tg={name:"htmlFlow",tokenize:Lg,resolveTo:Ng,concrete:!0},Mg={tokenize:jg,partial:!0},Rg={tokenize:Fg,partial:!0};function Ng(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Lg(e,t,n){const r=this;let s,i,o,a,c;return l;function l(x){return u(x)}function u(x){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(x),f}function f(x){return x===33?(e.consume(x),d):x===47?(e.consume(x),i=!0,C):x===63?(e.consume(x),s=3,r.interrupt?t:m):pn(x)?(e.consume(x),o=String.fromCharCode(x),N):n(x)}function d(x){return x===45?(e.consume(x),s=2,h):x===91?(e.consume(x),s=5,a=0,E):pn(x)?(e.consume(x),s=4,r.interrupt?t:m):n(x)}function h(x){return x===45?(e.consume(x),r.interrupt?t:m):n(x)}function E(x){const pe="CDATA[";return x===pe.charCodeAt(a++)?(e.consume(x),a===pe.length?r.interrupt?t:ie:E):n(x)}function C(x){return pn(x)?(e.consume(x),o=String.fromCharCode(x),N):n(x)}function N(x){if(x===null||x===47||x===62||Lt(x)){const pe=x===47,we=o.toLowerCase();return!pe&&!i&&Qc.includes(we)?(s=1,r.interrupt?t(x):ie(x)):Ig.includes(o.toLowerCase())?(s=6,pe?(e.consume(x),k):r.interrupt?t(x):ie(x)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(x):i?P(x):L(x))}return x===45||Bt(x)?(e.consume(x),o+=String.fromCharCode(x),N):n(x)}function k(x){return x===62?(e.consume(x),r.interrupt?t:ie):n(x)}function P(x){return De(x)?(e.consume(x),P):me(x)}function L(x){return x===47?(e.consume(x),me):x===58||x===95||pn(x)?(e.consume(x),U):De(x)?(e.consume(x),L):me(x)}function U(x){return x===45||x===46||x===58||x===95||Bt(x)?(e.consume(x),U):V(x)}function V(x){return x===61?(e.consume(x),A):De(x)?(e.consume(x),V):L(x)}function A(x){return x===null||x===60||x===61||x===62||x===96?n(x):x===34||x===39?(e.consume(x),c=x,he):De(x)?(e.consume(x),A):W(x)}function he(x){return x===c?(e.consume(x),c=null,ue):x===null||Ae(x)?n(x):(e.consume(x),he)}function W(x){return x===null||x===34||x===39||x===47||x===60||x===61||x===62||x===96||Lt(x)?V(x):(e.consume(x),W)}function ue(x){return x===47||x===62||De(x)?L(x):n(x)}function me(x){return x===62?(e.consume(x),re):n(x)}function re(x){return x===null||Ae(x)?ie(x):De(x)?(e.consume(x),re):n(x)}function ie(x){return x===45&&s===2?(e.consume(x),Pe):x===60&&s===1?(e.consume(x),ve):x===62&&s===4?(e.consume(x),S):x===63&&s===3?(e.consume(x),m):x===93&&s===5?(e.consume(x),ze):Ae(x)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(Mg,Z,ke)(x)):x===null||Ae(x)?(e.exit("htmlFlowData"),ke(x)):(e.consume(x),ie)}function ke(x){return e.check(Rg,Te,Z)(x)}function Te(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),Oe}function Oe(x){return x===null||Ae(x)?ke(x):(e.enter("htmlFlowData"),ie(x))}function Pe(x){return x===45?(e.consume(x),m):ie(x)}function ve(x){return x===47?(e.consume(x),o="",Se):ie(x)}function Se(x){if(x===62){const pe=o.toLowerCase();return Qc.includes(pe)?(e.consume(x),S):ie(x)}return pn(x)&&o.length<8?(e.consume(x),o+=String.fromCharCode(x),Se):ie(x)}function ze(x){return x===93?(e.consume(x),m):ie(x)}function m(x){return x===62?(e.consume(x),S):x===45&&s===2?(e.consume(x),m):ie(x)}function S(x){return x===null||Ae(x)?(e.exit("htmlFlowData"),Z(x)):(e.consume(x),S)}function Z(x){return e.exit("htmlFlow"),t(x)}}function Fg(e,t,n){const r=this;return s;function s(o){return Ae(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function jg(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Qi,t,n)}}const $g={name:"htmlText",tokenize:Dg};function Dg(e,t,n){const r=this;let s,i,o;return a;function a(m){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(m),c}function c(m){return m===33?(e.consume(m),l):m===47?(e.consume(m),V):m===63?(e.consume(m),L):pn(m)?(e.consume(m),W):n(m)}function l(m){return m===45?(e.consume(m),u):m===91?(e.consume(m),i=0,E):pn(m)?(e.consume(m),P):n(m)}function u(m){return m===45?(e.consume(m),h):n(m)}function f(m){return m===null?n(m):m===45?(e.consume(m),d):Ae(m)?(o=f,ve(m)):(e.consume(m),f)}function d(m){return m===45?(e.consume(m),h):f(m)}function h(m){return m===62?Pe(m):m===45?d(m):f(m)}function E(m){const S="CDATA[";return m===S.charCodeAt(i++)?(e.consume(m),i===S.length?C:E):n(m)}function C(m){return m===null?n(m):m===93?(e.consume(m),N):Ae(m)?(o=C,ve(m)):(e.consume(m),C)}function N(m){return m===93?(e.consume(m),k):C(m)}function k(m){return m===62?Pe(m):m===93?(e.consume(m),k):C(m)}function P(m){return m===null||m===62?Pe(m):Ae(m)?(o=P,ve(m)):(e.consume(m),P)}function L(m){return m===null?n(m):m===63?(e.consume(m),U):Ae(m)?(o=L,ve(m)):(e.consume(m),L)}function U(m){return m===62?Pe(m):L(m)}function V(m){return pn(m)?(e.consume(m),A):n(m)}function A(m){return m===45||Bt(m)?(e.consume(m),A):he(m)}function he(m){return Ae(m)?(o=he,ve(m)):De(m)?(e.consume(m),he):Pe(m)}function W(m){return m===45||Bt(m)?(e.consume(m),W):m===47||m===62||Lt(m)?ue(m):n(m)}function ue(m){return m===47?(e.consume(m),Pe):m===58||m===95||pn(m)?(e.consume(m),me):Ae(m)?(o=ue,ve(m)):De(m)?(e.consume(m),ue):Pe(m)}function me(m){return m===45||m===46||m===58||m===95||Bt(m)?(e.consume(m),me):re(m)}function re(m){return m===61?(e.consume(m),ie):Ae(m)?(o=re,ve(m)):De(m)?(e.consume(m),re):ue(m)}function ie(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),s=m,ke):Ae(m)?(o=ie,ve(m)):De(m)?(e.consume(m),ie):(e.consume(m),Te)}function ke(m){return m===s?(e.consume(m),s=void 0,Oe):m===null?n(m):Ae(m)?(o=ke,ve(m)):(e.consume(m),ke)}function Te(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||Lt(m)?ue(m):(e.consume(m),Te)}function Oe(m){return m===47||m===62||Lt(m)?ue(m):n(m)}function Pe(m){return m===62?(e.consume(m),e.exit("htmlTextData"),e.exit("htmlText"),t):n(m)}function ve(m){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Se}function Se(m){return De(m)?Ge(e,ze,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):ze(m)}function ze(m){return e.enter("htmlTextData"),o(m)}}const Da={name:"labelEnd",tokenize:Vg,resolveTo:Hg,resolveAll:zg},Ug={tokenize:Wg},Bg={tokenize:Gg},qg={tokenize:Kg};function zg(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Hg(e,t){let n=e.length,r=0,s,i,o,a;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[o][1].end)},u={type:"labelText",start:Object.assign({},e[i+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",c,t],["enter",l,t]],a=Et(a,e.slice(i+1,i+r+3)),a=Et(a,[["enter",u,t]]),a=Et(a,$a(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),a=Et(a,[["exit",u,t],e[o-2],e[o-1],["exit",l,t]]),a=Et(a,e.slice(o+1)),a=Et(a,[["exit",c,t]]),En(e,i,e.length,a),e}function Vg(e,t,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(d){return i?i._inactive?f(d):(o=r.parser.defined.includes(Ss(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),c):n(d)}function c(d){return d===40?e.attempt(Ug,u,o?u:f)(d):d===91?e.attempt(Bg,u,o?l:f)(d):o?u(d):f(d)}function l(d){return e.attempt(qg,u,f)(d)}function u(d){return t(d)}function f(d){return i._balanced=!0,n(d)}}function Wg(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return Lt(f)?cs(e,i)(f):i(f)}function i(f){return f===41?u(f):Ef(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Lt(f)?cs(e,c)(f):u(f)}function a(f){return n(f)}function c(f){return f===34||f===39||f===40?Sf(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function l(f){return Lt(f)?cs(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Gg(e,t,n){const r=this;return s;function s(a){return vf.call(r,e,i,o,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Ss(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Kg(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Jg={name:"labelStartImage",tokenize:Yg,resolveAll:Da.resolveAll};function Yg(e,t,n){const r=this;return s;function s(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),i}function i(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Qg={name:"labelStartLink",tokenize:Xg,resolveAll:Da.resolveAll};function Xg(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const _o={name:"lineEnding",tokenize:Zg};function Zg(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ge(e,t,"linePrefix")}}const ai={name:"thematicBreak",tokenize:e_};function e_(e,t,n){let r=0,s;return i;function i(l){return e.enter("thematicBreak"),o(l)}function o(l){return s=l,a(l)}function a(l){return l===s?(e.enter("thematicBreakSequence"),c(l)):r>=3&&(l===null||Ae(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===s?(e.consume(l),r++,c):(e.exit("thematicBreakSequence"),De(l)?Ge(e,a,"whitespace")(l):a(l))}}const Tt={name:"list",tokenize:r_,continuation:{tokenize:s_},exit:o_},t_={tokenize:a_,partial:!0},n_={tokenize:i_,partial:!0};function r_(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(h){const E=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Vo(h)){if(r.containerState.type||(r.containerState.type=E,e.enter(E,{_container:!0})),E==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(ai,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(h)}return n(h)}function c(h){return Vo(h)&&++o<10?(e.consume(h),c):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(Qi,r.interrupt?n:u,e.attempt(t_,d,f))}function u(h){return r.containerState.initialBlankLine=!0,i++,d(h)}function f(h){return De(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function s_(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Qi,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ge(e,t,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!De(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(n_,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ge(e,e.attempt(Tt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function i_(e,t,n){const r=this;return Ge(e,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function o_(e){e.exit(this.containerState.type)}function a_(e,t,n){const r=this;return Ge(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!De(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Xc={name:"setextUnderline",tokenize:l_,resolveTo:c_};function c_(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[i][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function l_(e,t,n){const r=this;let s;return i;function i(l){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),s=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===s?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),De(l)?Ge(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||Ae(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const u_={tokenize:f_};function f_(e){const t=this,n=e.attempt(Qi,r,e.attempt(this.parser.constructs.flowInitial,s,Ge(e,e.attempt(this.parser.constructs.flow,s,e.attempt(gg,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const h_={resolveAll:Of()},d_=kf("string"),m_=kf("text");function kf(e){return{tokenize:t,resolveAll:Of(e==="text"?p_:void 0)};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,o,a);return o;function o(u){return l(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),i(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const f=s[u];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Of(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function p_(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,o=-1,a=0,c;for(;i--;){const l=s[i];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)c=!0,a++;else if(l!==-1){i++;break}}if(a){const l={type:n===e.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+i,_bufferIndex:i?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function g_(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let o=[],a=[];const c={consume:P,enter:L,exit:U,attempt:he(V),check:he(A),interrupt:he(A,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:E,defineSkip:C,write:f};let u=t.tokenize.call(l,c);return t.resolveAll&&i.push(t),l;function f(re){return o=Et(o,re),N(),o[o.length-1]!==null?[]:(W(t,0),l.events=$a(i,l.events,l),l.events)}function d(re,ie){return b_(h(re),ie)}function h(re){return __(o,re)}function E(){const{line:re,column:ie,offset:ke,_index:Te,_bufferIndex:Oe}=r;return{line:re,column:ie,offset:ke,_index:Te,_bufferIndex:Oe}}function C(re){s[re.line]=re.column,me()}function N(){let re;for(;r._index<o.length;){const ie=o[r._index];if(typeof ie=="string")for(re=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===re&&r._bufferIndex<ie.length;)k(ie.charCodeAt(r._bufferIndex));else k(ie)}}function k(re){u=u(re)}function P(re){Ae(re)?(r.line++,r.column=1,r.offset+=re===-3?2:1,me()):re!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=re}function L(re,ie){const ke=ie||{};return ke.type=re,ke.start=E(),l.events.push(["enter",ke,l]),a.push(ke),ke}function U(re){const ie=a.pop();return ie.end=E(),l.events.push(["exit",ie,l]),ie}function V(re,ie){W(re,ie.from)}function A(re,ie){ie.restore()}function he(re,ie){return ke;function ke(Te,Oe,Pe){let ve,Se,ze,m;return Array.isArray(Te)?Z(Te):"tokenize"in Te?Z([Te]):S(Te);function S(ae){return I;function I(q){const F=q!==null&&ae[q],G=q!==null&&ae.null,de=[...Array.isArray(F)?F:F?[F]:[],...Array.isArray(G)?G:G?[G]:[]];return Z(de)(q)}}function Z(ae){return ve=ae,Se=0,ae.length===0?Pe:x(ae[Se])}function x(ae){return I;function I(q){return m=ue(),ze=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?we():ae.tokenize.call(ie?Object.assign(Object.create(l),ie):l,c,pe,we)(q)}}function pe(ae){return re(ze,m),Oe}function we(ae){return m.restore(),++Se<ve.length?x(ve[Se]):Pe}}}function W(re,ie){re.resolveAll&&!i.includes(re)&&i.push(re),re.resolve&&En(l.events,ie,l.events.length-ie,re.resolve(l.events.slice(ie),l)),re.resolveTo&&(l.events=re.resolveTo(l.events,l))}function ue(){const re=E(),ie=l.previous,ke=l.currentConstruct,Te=l.events.length,Oe=Array.from(a);return{restore:Pe,from:Te};function Pe(){r=re,l.previous=ie,l.currentConstruct=ke,l.events.length=Te,a=Oe,me()}}function me(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function __(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,i)];else{if(o=e.slice(n,s),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}function b_(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}const y_={42:Tt,43:Tt,45:Tt,48:Tt,49:Tt,50:Tt,51:Tt,52:Tt,53:Tt,54:Tt,55:Tt,56:Tt,57:Tt,62:bf},x_={91:wg},w_={[-2]:go,[-1]:go,32:go},E_={35:Cg,42:ai,45:[Xc,ai],60:Tg,61:Xc,95:ai,96:Yc,126:Yc},v_={38:xf,92:yf},S_={[-5]:_o,[-4]:_o,[-3]:_o,33:Jg,38:xf,42:Wo,60:[Xp,$g],91:Qg,92:[kg,yf],93:Da,95:Wo,96:fg},k_={null:[Wo,h_]},O_={null:[42,95]},C_={null:[]},A_=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:O_,contentInitial:x_,disable:C_,document:y_,flow:E_,flowInitial:w_,insideSpan:k_,string:v_,text:S_},Symbol.toStringTag,{value:"Module"}));function P_(e){const n=Ip([A_,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:s(Vp),document:s(Gp),flow:s(u_),string:s(d_),text:s(m_)};return r;function s(i){return o;function o(a){return g_(r,i,a)}}}function I_(e){for(;!wf(e););return e}const Zc=/[\0\t\n\r]/g;function T_(){let e=1,t="",n=!0,r;return s;function s(i,o,a){const c=[];let l,u,f,d,h;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),f=0,t="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(Zc.lastIndex=f,l=Zc.exec(i),d=l&&l.index!==void 0?l.index:i.length,h=i.charCodeAt(d),!l){t=i.slice(f);break}if(h===10&&f===d&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<d&&(c.push(i.slice(f,d)),e+=d-f),h){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}function M_(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Hp(n)(I_(P_(n).document().write(T_()(e,t,!0))))}/*!
  * shared v9.9.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const wi=typeof window<"u",Xn=(e,t=!1)=>t?Symbol.for(e):Symbol(e),R_=(e,t,n)=>N_({l:e,k:t,s:n}),N_=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),lt=e=>typeof e=="number"&&isFinite(e),L_=e=>Af(e)==="[object Date]",Ei=e=>Af(e)==="[object RegExp]",Xi=e=>Ne(e)&&Object.keys(e).length===0,St=Object.assign;let el;const Ua=()=>el||(el=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tl(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const F_=Object.prototype.hasOwnProperty;function vi(e,t){return F_.call(e,t)}const st=Array.isArray,et=e=>typeof e=="function",ye=e=>typeof e=="string",tt=e=>typeof e=="boolean",Ue=e=>e!==null&&typeof e=="object",j_=e=>Ue(e)&&et(e.then)&&et(e.catch),Cf=Object.prototype.toString,Af=e=>Cf.call(e),Ne=e=>{if(!Ue(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},$_=e=>e==null?"":st(e)||Ne(e)&&e.toString===Cf?JSON.stringify(e,null,2):String(e);function D_(e,t=""){return e.reduce((n,r,s)=>s===0?n+r:n+t+r,"")}function Ba(e){let t=e;return()=>++t}function U_(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Xs=e=>!Ue(e)||st(e);function ci(e,t){if(Xs(e)||Xs(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{Xs(r[i])||Xs(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.9.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const B_=/\{([0-9a-zA-Z]+)\}/g;function q_(e,...t){return t.length===1&&z_(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(B_,(n,r)=>t.hasOwnProperty(r)?t[r]:"")}const z_=e=>e!==null&&typeof e=="object",ut={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},H_={[ut.EXPECTED_TOKEN]:"Expected token: '{0}'",[ut.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[ut.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[ut.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[ut.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[ut.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[ut.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[ut.EMPTY_PLACEHOLDER]:"Empty placeholder",[ut.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[ut.INVALID_LINKED_FORMAT]:"Invalid linked format",[ut.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[ut.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[ut.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[ut.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[ut.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[ut.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Pf(e,t,n={}){const{domain:r,messages:s,args:i}=n,o=q_((s||H_)[e]||"",...i||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=r,a}/*!
  * core-base v9.9.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function V_(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ua().__INTLIFY_PROD_DEVTOOLS__=!1)}const Zn=[];Zn[0]={w:[0],i:[3,0],"[":[4],o:[7]};Zn[1]={w:[1],".":[2],"[":[4],o:[7]};Zn[2]={w:[2],i:[3,0],0:[3,0]};Zn[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Zn[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Zn[5]={"'":[4,0],o:8,l:[5,0]};Zn[6]={'"':[4,0],o:8,l:[6,0]};const W_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function G_(e){return W_.test(e)}function K_(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function J_(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Y_(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:G_(t)?K_(t):"*"+t}function Q_(e){const t=[];let n=-1,r=0,s=0,i,o,a,c,l,u,f;const d=[];d[0]=()=>{o===void 0?o=a:o+=a},d[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},d[2]=()=>{d[0](),s++},d[3]=()=>{if(s>0)s--,r=4,d[0]();else{if(s=0,o===void 0||(o=Y_(o),o===!1))return!1;d[1]()}};function h(){const E=e[n+1];if(r===5&&E==="'"||r===6&&E==='"')return n++,a="\\"+E,d[0](),!0}for(;r!==null;)if(n++,i=e[n],!(i==="\\"&&h())){if(c=J_(i),f=Zn[r],l=f[c]||f.l||8,l===8||(r=l[0],l[1]!==void 0&&(u=d[l[1]],u&&(a=i,u()===!1))))return;if(r===7)return t}}const nl=new Map;function X_(e,t){return Ue(e)?e[t]:null}function Z_(e,t){if(!Ue(e))return null;let n=nl.get(t);if(n||(n=Q_(t),n&&nl.set(t,n)),!n)return null;const r=n.length;let s=e,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||et(s))return null;s=o,i++}return s}const e0=e=>e,t0=e=>"",n0="text",r0=e=>e.length===0?"":D_(e),s0=$_;function rl(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function i0(e){const t=lt(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(lt(e.named.count)||lt(e.named.n))?lt(e.named.count)?e.named.count:lt(e.named.n)?e.named.n:t:t}function o0(e,t){t.count||(t.count=e),t.n||(t.n=e)}function a0(e={}){const t=e.locale,n=i0(e),r=Ue(e.pluralRules)&&ye(t)&&et(e.pluralRules[t])?e.pluralRules[t]:rl,s=Ue(e.pluralRules)&&ye(t)&&et(e.pluralRules[t])?rl:void 0,i=k=>k[r(n,k.length,s)],o=e.list||[],a=k=>o[k],c=e.named||{};lt(e.pluralIndex)&&o0(n,c);const l=k=>c[k];function u(k){const P=et(e.messages)?e.messages(k):Ue(e.messages)?e.messages[k]:!1;return P||(e.parent?e.parent.message(k):t0)}const f=k=>e.modifiers?e.modifiers[k]:e0,d=Ne(e.processor)&&et(e.processor.normalize)?e.processor.normalize:r0,h=Ne(e.processor)&&et(e.processor.interpolate)?e.processor.interpolate:s0,E=Ne(e.processor)&&ye(e.processor.type)?e.processor.type:n0,N={list:a,named:l,plural:i,linked:(k,...P)=>{const[L,U]=P;let V="text",A="";P.length===1?Ue(L)?(A=L.modifier||A,V=L.type||V):ye(L)&&(A=L||A):P.length===2&&(ye(L)&&(A=L||A),ye(U)&&(V=U||V));const he=u(k)(N),W=V==="vnode"&&st(he)&&A?he[0]:he;return A?f(A)(W,V):W},message:u,type:E,interpolate:h,normalize:d,values:St({},o,c)};return N}let ks=null;function c0(e){ks=e}function l0(e,t,n){ks&&ks.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const u0=f0("function:translate");function f0(e){return t=>ks&&ks.emit(e,t)}const h0={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},If=ut.__EXTEND_POINT__,ir=Ba(If),_n={INVALID_ARGUMENT:If,INVALID_DATE_ARGUMENT:ir(),INVALID_ISO_DATE_ARGUMENT:ir(),NOT_SUPPORT_NON_STRING_MESSAGE:ir(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:ir(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:ir(),NOT_SUPPORT_LOCALE_TYPE:ir(),__EXTEND_POINT__:ir()};function Cn(e){return Pf(e,null,void 0)}function qa(e,t){return t.locale!=null?sl(t.locale):sl(e.locale)}let bo;function sl(e){if(ye(e))return e;if(et(e)){if(e.resolvedOnce&&bo!=null)return bo;if(e.constructor.name==="Function"){const t=e();if(j_(t))throw Cn(_n.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return bo=t}else throw Cn(_n.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Cn(_n.NOT_SUPPORT_LOCALE_TYPE)}function d0(e,t,n){return[...new Set([n,...st(t)?t:Ue(t)?Object.keys(t):ye(t)?[t]:[n]])]}function Tf(e,t,n){const r=ye(n)?n:Si,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;st(o);)o=il(i,o,t);const a=st(t)||!Ne(t)?t:t.default?t.default:null;o=ye(a)?[a]:a,st(o)&&il(i,o,!1),s.__localeChainCache.set(r,i)}return i}function il(e,t,n){let r=!0;for(let s=0;s<t.length&&tt(r);s++){const i=t[s];ye(i)&&(r=m0(e,t[s],n))}return r}function m0(e,t,n){let r;const s=t.split("-");do{const i=s.join("-");r=p0(e,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function p0(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r=t[t.length-1]!=="!";const s=t.replace(/!/g,"");e.push(s),(st(n)||Ne(n))&&n[s]&&(r=n[s])}return r}const g0="9.9.1",Zi=-1,Si="en-US",ol="",al=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function _0(){return{upper:(e,t)=>t==="text"&&ye(e)?e.toUpperCase():t==="vnode"&&Ue(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&ye(e)?e.toLowerCase():t==="vnode"&&Ue(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&ye(e)?al(e):t==="vnode"&&Ue(e)&&"__v_isVNode"in e?al(e.children):e}}let b0,Mf;function y0(e){Mf=e}let Rf;function x0(e){Rf=e}let Nf=null;const w0=e=>{Nf=e},E0=()=>Nf;let Lf=null;const cl=e=>{Lf=e},v0=()=>Lf;let ll=0;function S0(e={}){const t=et(e.onWarn)?e.onWarn:U_,n=ye(e.version)?e.version:g0,r=ye(e.locale)||et(e.locale)?e.locale:Si,s=et(r)?Si:r,i=st(e.fallbackLocale)||Ne(e.fallbackLocale)||ye(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s,o=Ne(e.messages)?e.messages:{[s]:{}},a=Ne(e.datetimeFormats)?e.datetimeFormats:{[s]:{}},c=Ne(e.numberFormats)?e.numberFormats:{[s]:{}},l=St({},e.modifiers||{},_0()),u=e.pluralRules||{},f=et(e.missing)?e.missing:null,d=tt(e.missingWarn)||Ei(e.missingWarn)?e.missingWarn:!0,h=tt(e.fallbackWarn)||Ei(e.fallbackWarn)?e.fallbackWarn:!0,E=!!e.fallbackFormat,C=!!e.unresolving,N=et(e.postTranslation)?e.postTranslation:null,k=Ne(e.processor)?e.processor:null,P=tt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,L=!!e.escapeParameter,U=et(e.messageCompiler)?e.messageCompiler:b0,V=et(e.messageResolver)?e.messageResolver:Mf||X_,A=et(e.localeFallbacker)?e.localeFallbacker:Rf||d0,he=Ue(e.fallbackContext)?e.fallbackContext:void 0,W=e,ue=Ue(W.__datetimeFormatters)?W.__datetimeFormatters:new Map,me=Ue(W.__numberFormatters)?W.__numberFormatters:new Map,re=Ue(W.__meta)?W.__meta:{};ll++;const ie={version:n,cid:ll,locale:r,fallbackLocale:i,messages:o,modifiers:l,pluralRules:u,missing:f,missingWarn:d,fallbackWarn:h,fallbackFormat:E,unresolving:C,postTranslation:N,processor:k,warnHtmlMessage:P,escapeParameter:L,messageCompiler:U,messageResolver:V,localeFallbacker:A,fallbackContext:he,onWarn:t,__meta:re};return ie.datetimeFormats=a,ie.numberFormats=c,ie.__datetimeFormatters=ue,ie.__numberFormatters=me,__INTLIFY_PROD_DEVTOOLS__&&l0(ie,n,re),ie}function za(e,t,n,r,s){const{missing:i,onWarn:o}=e;if(i!==null){const a=i(e,n,t,s);return ye(a)?a:t}else return t}function Yr(e,t,n){const r=e;r.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}const jr=e=>Ue(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e),ul=()=>"",Gt=e=>et(e);function fl(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=e,[c,l]=Go(...t),u=tt(l.missingWarn)?l.missingWarn:e.missingWarn,f=tt(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,d=tt(l.escapeParameter)?l.escapeParameter:e.escapeParameter,h=!!l.resolvedMessage,E=ye(l.default)||tt(l.default)?tt(l.default)?i?c:()=>c:l.default:n?i?c:()=>c:"",C=n||E!=="",N=qa(e,l);d&&k0(l);let[k,P,L]=h?[c,N,a[N]||{}]:Ff(e,c,N,o,f,u),U=k,V=c;if(!h&&!(ye(U)||jr(U)||Gt(U))&&C&&(U=E,V=U),!h&&(!(ye(U)||jr(U)||Gt(U))||!ye(P)))return s?Zi:c;let A=!1;const he=()=>{A=!0},W=Gt(U)?U:jf(e,c,P,U,V,he);if(A)return U;const ue=A0(e,P,L,l),me=a0(ue),re=O0(e,W,me),ie=r?r(re,c):re;if(__INTLIFY_PROD_DEVTOOLS__){const ke={timestamp:Date.now(),key:ye(c)?c:Gt(U)?U.key:"",locale:P||(Gt(U)?U.locale:""),format:ye(U)?U:Gt(U)?U.source:"",message:ie};ke.meta=St({},e.__meta,E0()||{}),u0(ke)}return ie}function k0(e){st(e.list)?e.list=e.list.map(t=>ye(t)?tl(t):t):Ue(e.named)&&Object.keys(e.named).forEach(t=>{ye(e.named[t])&&(e.named[t]=tl(e.named[t]))})}function Ff(e,t,n,r,s,i){const{messages:o,onWarn:a,messageResolver:c,localeFallbacker:l}=e,u=l(e,r,n);let f={},d,h=null;const E="translate";for(let C=0;C<u.length&&(d=u[C],f=o[d]||{},(h=c(f,t))===null&&(h=f[t]),!(ye(h)||jr(h)||Gt(h)));C++){const N=za(e,t,d,i,E);N!==t&&(h=N)}return[h,d,f]}function jf(e,t,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Gt(r)){const l=r;return l.locale=l.locale||n,l.key=l.key||t,l}if(o==null){const l=()=>r;return l.locale=n,l.key=t,l}const c=o(r,C0(e,n,s,r,a,i));return c.locale=n,c.key=t,c.source=r,c}function O0(e,t,n){return t(n)}function Go(...e){const[t,n,r]=e,s={};if(!ye(t)&&!lt(t)&&!Gt(t)&&!jr(t))throw Cn(_n.INVALID_ARGUMENT);const i=lt(t)?String(t):(Gt(t),t);return lt(n)?s.plural=n:ye(n)?s.default=n:Ne(n)&&!Xi(n)?s.named=n:st(n)&&(s.list=n),lt(r)?s.plural=r:ye(r)?s.default=r:Ne(r)&&St(s,r),[i,s]}function C0(e,t,n,r,s,i){return{locale:t,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>R_(t,n,o)}}function A0(e,t,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=e,d={locale:t,modifiers:s,pluralRules:i,messages:h=>{let E=o(n,h);if(E==null&&u){const[,,C]=Ff(u,h,t,a,c,l);E=o(C,h)}if(ye(E)||jr(E)){let C=!1;const k=jf(e,h,t,E,h,()=>{C=!0});return C?ul:k}else return Gt(E)?E:ul}};return e.processor&&(d.processor=e.processor),r.list&&(d.list=r.list),r.named&&(d.named=r.named),lt(r.plural)&&(d.pluralIndex=r.plural),d}function hl(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[c,l,u,f]=Ko(...t),d=tt(u.missingWarn)?u.missingWarn:e.missingWarn;tt(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const h=!!u.part,E=qa(e,u),C=o(e,s,E);if(!ye(c)||c==="")return new Intl.DateTimeFormat(E,f).format(l);let N={},k,P=null;const L="datetime format";for(let A=0;A<C.length&&(k=C[A],N=n[k]||{},P=N[c],!Ne(P));A++)za(e,c,k,d,L);if(!Ne(P)||!ye(k))return r?Zi:c;let U=`${k}__${c}`;Xi(f)||(U=`${U}__${JSON.stringify(f)}`);let V=a.get(U);return V||(V=new Intl.DateTimeFormat(k,St({},P,f)),a.set(U,V)),h?V.formatToParts(l):V.format(l)}const $f=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Ko(...e){const[t,n,r,s]=e,i={};let o={},a;if(ye(t)){const c=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Cn(_n.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw Cn(_n.INVALID_ISO_DATE_ARGUMENT)}}else if(L_(t)){if(isNaN(t.getTime()))throw Cn(_n.INVALID_DATE_ARGUMENT);a=t}else if(lt(t))a=t;else throw Cn(_n.INVALID_ARGUMENT);return ye(n)?i.key=n:Ne(n)&&Object.keys(n).forEach(c=>{$f.includes(c)?o[c]=n[c]:i[c]=n[c]}),ye(r)?i.locale=r:Ne(r)&&(o=r),Ne(s)&&(o=s),[i.key||"",a,i,o]}function dl(e,t,n){const r=e;for(const s in n){const i=`${t}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function ml(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=e,{__numberFormatters:a}=e,[c,l,u,f]=Jo(...t),d=tt(u.missingWarn)?u.missingWarn:e.missingWarn;tt(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const h=!!u.part,E=qa(e,u),C=o(e,s,E);if(!ye(c)||c==="")return new Intl.NumberFormat(E,f).format(l);let N={},k,P=null;const L="number format";for(let A=0;A<C.length&&(k=C[A],N=n[k]||{},P=N[c],!Ne(P));A++)za(e,c,k,d,L);if(!Ne(P)||!ye(k))return r?Zi:c;let U=`${k}__${c}`;Xi(f)||(U=`${U}__${JSON.stringify(f)}`);let V=a.get(U);return V||(V=new Intl.NumberFormat(k,St({},P,f)),a.set(U,V)),h?V.formatToParts(l):V.format(l)}const Df=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Jo(...e){const[t,n,r,s]=e,i={};let o={};if(!lt(t))throw Cn(_n.INVALID_ARGUMENT);const a=t;return ye(n)?i.key=n:Ne(n)&&Object.keys(n).forEach(c=>{Df.includes(c)?o[c]=n[c]:i[c]=n[c]}),ye(r)?i.locale=r:Ne(r)&&(o=r),Ne(s)&&(o=s),[i.key||"",a,i,o]}function pl(e,t,n){const r=e;for(const s in n){const i=`${t}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}V_();/*!
  * vue-i18n v9.9.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const P0="9.9.1";function I0(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ua().__INTLIFY_PROD_DEVTOOLS__=!1)}const Uf=h0.__EXTEND_POINT__,Fn=Ba(Uf);Fn(),Fn(),Fn(),Fn(),Fn(),Fn(),Fn(),Fn();const Bf=_n.__EXTEND_POINT__,It=Ba(Bf),Qt={UNEXPECTED_RETURN_TYPE:Bf,INVALID_ARGUMENT:It(),MUST_BE_CALL_SETUP_TOP:It(),NOT_INSTALLED:It(),NOT_AVAILABLE_IN_LEGACY_MODE:It(),REQUIRED_VALUE:It(),INVALID_VALUE:It(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:It(),NOT_INSTALLED_WITH_PROVIDE:It(),UNEXPECTED_ERROR:It(),NOT_COMPATIBLE_LEGACY_VUE_I18N:It(),BRIDGE_SUPPORT_VUE_2_ONLY:It(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:It(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:It(),__EXTEND_POINT__:It()};function an(e,...t){return Pf(e,null,void 0)}const Yo=Xn("__translateVNode"),Qo=Xn("__datetimeParts"),Xo=Xn("__numberParts"),T0=Xn("__setPluralRules"),M0=Xn("__injectWithOption"),Zo=Xn("__dispose");function Os(e){if(!Ue(e))return e;for(const t in e)if(vi(e,t))if(!t.includes("."))Ue(e[t])&&Os(e[t]);else{const n=t.split("."),r=n.length-1;let s=e,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ue(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=e[t],delete e[t]),Ue(s[n[r]])&&Os(s[n[r]])}return e}function qf(e,t){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=t,o=Ne(n)?n:st(r)?{}:{[e]:{}};if(st(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(o[c]=o[c]||{},ci(l,o[c])):ci(l,o)}else ye(a)&&ci(JSON.parse(a),o)}),s==null&&i)for(const a in o)vi(o,a)&&Os(o[a]);return o}function zf(e){return e.type}function R0(e,t,n){let r=Ue(t.messages)?t.messages:{};"__i18nGlobal"in n&&(r=qf(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{e.mergeLocaleMessage(i,r[i])});{if(Ue(t.datetimeFormats)){const i=Object.keys(t.datetimeFormats);i.length&&i.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(Ue(t.numberFormats)){const i=Object.keys(t.numberFormats);i.length&&i.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function gl(e){return qe(Ls,null,e,0)}const _l="__INTLIFY_META__",bl=()=>[],N0=()=>!1;let yl=0;function xl(e){return(t,n,r,s)=>e(n,r,Fs()||void 0,s)}const L0=()=>{const e=Fs();let t=null;return e&&(t=zf(e)[_l])?{[_l]:t}:null};function Hf(e={},t){const{__root:n,__injectWithOption:r}=e,s=n===void 0,i=e.flatJson,o=wi?kt:Ca;let a=tt(e.inheritLocale)?e.inheritLocale:!0;const c=o(n&&a?n.locale.value:ye(e.locale)?e.locale:Si),l=o(n&&a?n.fallbackLocale.value:ye(e.fallbackLocale)||st(e.fallbackLocale)||Ne(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:c.value),u=o(qf(c.value,e)),f=o(Ne(e.datetimeFormats)?e.datetimeFormats:{[c.value]:{}}),d=o(Ne(e.numberFormats)?e.numberFormats:{[c.value]:{}});let h=n?n.missingWarn:tt(e.missingWarn)||Ei(e.missingWarn)?e.missingWarn:!0,E=n?n.fallbackWarn:tt(e.fallbackWarn)||Ei(e.fallbackWarn)?e.fallbackWarn:!0,C=n?n.fallbackRoot:tt(e.fallbackRoot)?e.fallbackRoot:!0,N=!!e.fallbackFormat,k=et(e.missing)?e.missing:null,P=et(e.missing)?xl(e.missing):null,L=et(e.postTranslation)?e.postTranslation:null,U=n?n.warnHtmlMessage:tt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,V=!!e.escapeParameter;const A=n?n.modifiers:Ne(e.modifiers)?e.modifiers:{};let he=e.pluralRules||n&&n.pluralRules,W;W=(()=>{s&&cl(null);const T={version:P0,locale:c.value,fallbackLocale:l.value,messages:u.value,modifiers:A,pluralRules:he,missing:P===null?void 0:P,missingWarn:h,fallbackWarn:E,fallbackFormat:N,unresolving:!0,postTranslation:L===null?void 0:L,warnHtmlMessage:U,escapeParameter:V,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};T.datetimeFormats=f.value,T.numberFormats=d.value,T.__datetimeFormatters=Ne(W)?W.__datetimeFormatters:void 0,T.__numberFormatters=Ne(W)?W.__numberFormatters:void 0;const $=S0(T);return s&&cl($),$})(),Yr(W,c.value,l.value);function me(){return[c.value,l.value,u.value,f.value,d.value]}const re=We({get:()=>c.value,set:T=>{c.value=T,W.locale=c.value}}),ie=We({get:()=>l.value,set:T=>{l.value=T,W.fallbackLocale=l.value,Yr(W,c.value,T)}}),ke=We(()=>u.value),Te=We(()=>f.value),Oe=We(()=>d.value);function Pe(){return et(L)?L:null}function ve(T){L=T,W.postTranslation=T}function Se(){return k}function ze(T){T!==null&&(P=xl(T)),k=T,W.missing=P}const m=(T,$,fe,xe,Me,je)=>{me();let Ve;try{__INTLIFY_PROD_DEVTOOLS__,s||(W.fallbackContext=n?v0():void 0),Ve=T(W)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(W.fallbackContext=void 0)}if(fe!=="translate exists"&&lt(Ve)&&Ve===Zi||fe==="translate exists"&&!Ve){const[gt,un]=$();return n&&C?xe(n):Me(gt)}else{if(je(Ve))return Ve;throw an(Qt.UNEXPECTED_RETURN_TYPE)}};function S(...T){return m($=>Reflect.apply(fl,null,[$,...T]),()=>Go(...T),"translate",$=>Reflect.apply($.t,$,[...T]),$=>$,$=>ye($))}function Z(...T){const[$,fe,xe]=T;if(xe&&!Ue(xe))throw an(Qt.INVALID_ARGUMENT);return S($,fe,St({resolvedMessage:!0},xe||{}))}function x(...T){return m($=>Reflect.apply(hl,null,[$,...T]),()=>Ko(...T),"datetime format",$=>Reflect.apply($.d,$,[...T]),()=>ol,$=>ye($))}function pe(...T){return m($=>Reflect.apply(ml,null,[$,...T]),()=>Jo(...T),"number format",$=>Reflect.apply($.n,$,[...T]),()=>ol,$=>ye($))}function we(T){return T.map($=>ye($)||lt($)||tt($)?gl(String($)):$)}const I={normalize:we,interpolate:T=>T,type:"vnode"};function q(...T){return m($=>{let fe;const xe=$;try{xe.processor=I,fe=Reflect.apply(fl,null,[xe,...T])}finally{xe.processor=null}return fe},()=>Go(...T),"translate",$=>$[Yo](...T),$=>[gl($)],$=>st($))}function F(...T){return m($=>Reflect.apply(ml,null,[$,...T]),()=>Jo(...T),"number format",$=>$[Xo](...T),bl,$=>ye($)||st($))}function G(...T){return m($=>Reflect.apply(hl,null,[$,...T]),()=>Ko(...T),"datetime format",$=>$[Qo](...T),bl,$=>ye($)||st($))}function de(T){he=T,W.pluralRules=he}function Ee(T,$){return m(()=>{if(!T)return!1;const fe=ye($)?$:c.value,xe=R(fe),Me=W.messageResolver(xe,T);return jr(Me)||Gt(Me)||ye(Me)},()=>[T],"translate exists",fe=>Reflect.apply(fe.te,fe,[T,$]),N0,fe=>tt(fe))}function b(T){let $=null;const fe=Tf(W,l.value,c.value);for(let xe=0;xe<fe.length;xe++){const Me=u.value[fe[xe]]||{},je=W.messageResolver(Me,T);if(je!=null){$=je;break}}return $}function w(T){const $=b(T);return $??(n?n.tm(T)||{}:{})}function R(T){return u.value[T]||{}}function B(T,$){if(i){const fe={[T]:$};for(const xe in fe)vi(fe,xe)&&Os(fe[xe]);$=fe[T]}u.value[T]=$,W.messages=u.value}function D(T,$){u.value[T]=u.value[T]||{};const fe={[T]:$};if(i)for(const xe in fe)vi(fe,xe)&&Os(fe[xe]);$=fe[T],ci($,u.value[T]),W.messages=u.value}function Q(T){return f.value[T]||{}}function ee(T,$){f.value[T]=$,W.datetimeFormats=f.value,dl(W,T,$)}function J(T,$){f.value[T]=St(f.value[T]||{},$),W.datetimeFormats=f.value,dl(W,T,$)}function X(T){return d.value[T]||{}}function K(T,$){d.value[T]=$,W.numberFormats=d.value,pl(W,T,$)}function oe(T,$){d.value[T]=St(d.value[T]||{},$),W.numberFormats=d.value,pl(W,T,$)}yl++,n&&wi&&(Nt(n.locale,T=>{a&&(c.value=T,W.locale=T,Yr(W,c.value,l.value))}),Nt(n.fallbackLocale,T=>{a&&(l.value=T,W.fallbackLocale=T,Yr(W,c.value,l.value))}));const te={id:yl,locale:re,fallbackLocale:ie,get inheritLocale(){return a},set inheritLocale(T){a=T,T&&n&&(c.value=n.locale.value,l.value=n.fallbackLocale.value,Yr(W,c.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:ke,get modifiers(){return A},get pluralRules(){return he||{}},get isGlobal(){return s},get missingWarn(){return h},set missingWarn(T){h=T,W.missingWarn=h},get fallbackWarn(){return E},set fallbackWarn(T){E=T,W.fallbackWarn=E},get fallbackRoot(){return C},set fallbackRoot(T){C=T},get fallbackFormat(){return N},set fallbackFormat(T){N=T,W.fallbackFormat=N},get warnHtmlMessage(){return U},set warnHtmlMessage(T){U=T,W.warnHtmlMessage=T},get escapeParameter(){return V},set escapeParameter(T){V=T,W.escapeParameter=T},t:S,getLocaleMessage:R,setLocaleMessage:B,mergeLocaleMessage:D,getPostTranslationHandler:Pe,setPostTranslationHandler:ve,getMissingHandler:Se,setMissingHandler:ze,[T0]:de};return te.datetimeFormats=Te,te.numberFormats=Oe,te.rt=Z,te.te=Ee,te.tm=w,te.d=x,te.n=pe,te.getDateTimeFormat=Q,te.setDateTimeFormat=ee,te.mergeDateTimeFormat=J,te.getNumberFormat=X,te.setNumberFormat=K,te.mergeNumberFormat=oe,te[M0]=r,te[Yo]=q,te[Qo]=G,te[Xo]=F,te}const Ha={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function F0({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,s)=>[...r,...s.type===Ut?s.children:[s]],[]):t.reduce((n,r)=>{const s=e[r];return s&&(n[r]=s()),n},{})}function Vf(e){return Ut}const j0=ln({name:"i18n-t",props:St({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>lt(e)||!isNaN(e)}},Ha),setup(e,t){const{slots:n,attrs:r}=t,s=e.i18n||br({useScope:e.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(f=>f!=="_"),o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=ye(e.plural)?+e.plural:e.plural);const a=F0(t,i),c=s[Yo](e.keypath,a,o),l=St({},r),u=ye(e.tag)||Ue(e.tag)?e.tag:Vf();return Ji(u,l,c)}}}),wl=j0;function $0(e){return st(e)&&!ye(e[0])}function Wf(e,t,n,r){const{slots:s,attrs:i}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),ye(e.format)?o.key=e.format:Ue(e.format)&&(ye(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((d,h)=>n.includes(h)?St({},d,{[h]:e.format[h]}):d,{}));const c=r(e.value,o,a);let l=[o.key];st(c)?l=c.map((d,h)=>{const E=s[d.type],C=E?E({[d.type]:d.value,index:h,parts:c}):[d.value];return $0(C)&&(C[0].key=`${d.type}-${h}`),C}):ye(c)&&(l=[c]);const u=St({},i),f=ye(e.tag)||Ue(e.tag)?e.tag:Vf();return Ji(f,u,l)}}const D0=ln({name:"i18n-n",props:St({value:{type:Number,required:!0},format:{type:[String,Object]}},Ha),setup(e,t){const n=e.i18n||br({useScope:"parent",__useComponent:!0});return Wf(e,t,Df,(...r)=>n[Xo](...r))}}),El=D0,U0=ln({name:"i18n-d",props:St({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Ha),setup(e,t){const n=e.i18n||br({useScope:"parent",__useComponent:!0});return Wf(e,t,$f,(...r)=>n[Qo](...r))}}),vl=U0;function B0(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return r!=null?r.__composer:e.global.__composer}}function q0(e){const t=o=>{const{instance:a,modifiers:c,value:l}=o;if(!a||!a.$)throw an(Qt.UNEXPECTED_ERROR);const u=B0(e,a.$),f=Sl(l);return[Reflect.apply(u.t,u,[...kl(f)]),u]};return{created:(o,a)=>{const[c,l]=t(a);wi&&e.global===l&&(o.__i18nWatcher=Nt(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=l,o.textContent=c},unmounted:o=>{wi&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const c=o.__composer,l=Sl(a);o.textContent=Reflect.apply(c.t,c,[...kl(l)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function Sl(e){if(ye(e))return{path:e};if(Ne(e)){if(!("path"in e))throw an(Qt.REQUIRED_VALUE,"path");return e}else throw an(Qt.INVALID_VALUE)}function kl(e){const{path:t,locale:n,args:r,choice:s,plural:i}=e,o={},a=r||{};return ye(n)&&(o.locale=n),lt(s)&&(o.plural=s),lt(i)&&(o.plural=i),[t,a,o]}function z0(e,t,...n){const r=Ne(n[0])?n[0]:{},s=!!r.useI18nComponentName;(tt(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":wl.name,"I18nT"].forEach(o=>e.component(o,wl)),[El.name,"I18nN"].forEach(o=>e.component(o,El)),[vl.name,"I18nD"].forEach(o=>e.component(o,vl))),e.directive("t",q0(t))}const H0=Xn("global-vue-i18n");function V0(e={},t){const n=tt(e.globalInjection)?e.globalInjection:!0,r=!0,s=new Map,[i,o]=W0(e),a=Xn("");function c(f){return s.get(f)||null}function l(f,d){s.set(f,d)}function u(f){s.delete(f)}{const f={get mode(){return"composition"},get allowComposition(){return r},async install(d,...h){if(d.__VUE_I18N_SYMBOL__=a,d.provide(d.__VUE_I18N_SYMBOL__,f),Ne(h[0])){const N=h[0];f.__composerExtend=N.__composerExtend,f.__vueI18nExtend=N.__vueI18nExtend}let E=null;n&&(E=eb(d,f.global)),z0(d,f,...h);const C=d.unmount;d.unmount=()=>{E&&E(),f.dispose(),C()}},get global(){return o},dispose(){i.stop()},__instances:s,__getInstance:c,__setInstance:l,__deleteInstance:u};return f}}function br(e={}){const t=Fs();if(t==null)throw an(Qt.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw an(Qt.NOT_INSTALLED);const n=G0(t),r=J0(n),s=zf(t),i=K0(e,s);if(i==="global")return R0(r,e,s),r;if(i==="parent"){let c=Y0(n,t,e.__useComponent);return c==null&&(c=r),c}const o=n;let a=o.__getInstance(t);if(a==null){const c=St({},e);"__i18n"in s&&(c.__i18n=s.__i18n),r&&(c.__root=r),a=Hf(c),o.__composerExtend&&(a[Zo]=o.__composerExtend(a)),X0(o,t,a),o.__setInstance(t,a)}return a}function W0(e,t,n){const r=Xh();{const s=r.run(()=>Hf(e));if(s==null)throw an(Qt.UNEXPECTED_ERROR);return[r,s]}}function G0(e){{const t=Yt(e.isCE?H0:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw an(e.isCE?Qt.NOT_INSTALLED_WITH_PROVIDE:Qt.UNEXPECTED_ERROR);return t}}function K0(e,t){return Xi(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function J0(e){return e.mode==="composition"?e.global:e.global.__composer}function Y0(e,t,n=!1){let r=null;const s=t.root;let i=Q0(t,n);for(;i!=null;){const o=e;if(e.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function Q0(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function X0(e,t,n){Ns(()=>{},t),Ta(()=>{const r=n;e.__deleteInstance(t);const s=r[Zo];s&&(s(),delete r[Zo])},t)}const Z0=["locale","fallbackLocale","availableLocales"],Ol=["t","rt","d","n","tm","te"];function eb(e,t){const n=Object.create(null);return Z0.forEach(s=>{const i=Object.getOwnPropertyDescriptor(t,s);if(!i)throw an(Qt.UNEXPECTED_ERROR);const o=pt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),e.config.globalProperties.$i18n=n,Ol.forEach(s=>{const i=Object.getOwnPropertyDescriptor(t,s);if(!i||!i.value)throw an(Qt.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,i)}),()=>{delete e.config.globalProperties.$i18n,Ol.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}I0();y0(Z_);x0(Tf);if(__INTLIFY_PROD_DEVTOOLS__){const e=Ua();e.__INTLIFY__=!0,c0(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const tb=["href"],yo="border-1 hover:border-gray-300 dark:border-gray-400 dark:hover:border-gray-500 rounded p-2 flex items-center justify-center cursor-pointer",Gf=ln({__name:"Button",props:{to:{},href:{}},setup(e){return(t,n)=>{const r=Hi("router-link");return t.to?(ht(),dr(r,{key:0,class:gn(yo),to:t.to},{default:Jt(()=>[si(t.$slots,"default")]),_:3},8,["to"])):t.href?(ht(),wn("a",{key:1,href:t.href,target:"_blank",rel:"noopener noreferrer",class:gn(yo)},[si(t.$slots,"default")],8,tb)):(ht(),wn("button",{key:2,type:"button",class:gn(yo)},[si(t.$slots,"default")]))}}}),nb={class:"m-2 flex flex-col rounded-md p-4 bg-white border-1 border-gray-200 shadow-xl z-20 md:w-104 dark:bg-dark-400 dark:text-gray-300 dark:border-dark-800"},Kf=ln({__name:"PopupNotice",props:{show:{type:Boolean}},emits:["close"],setup(e){return(t,n)=>t.show?(ht(),wn("div",{key:0,class:"flex fixed top-0 left-0 right-0 bottom-0 bg-gray-900 bg-opacity-80 z-1000 justify-center items-center",onClick:n[0]||(n[0]=r=>t.$emit("close"))},[Je("div",nb,[si(t.$slots,"default")])])):lf("",!0)}}),Cs="kiel_live",rb={liteMode:vs(`${Cs}.lite`,!1),lastLocation:vs(`${Cs}.last_location`,{center:[10.1283,54.3166],zoom:14,pitch:0,bearing:0})};function Jf(){return rb}const sb={key:0,class:"flex flex-col text-center gap-4"},ib={class:"text-xl mb-2"},ob=["innerHTML"],ab={class:"flex flex-row w-full justify-center mt-8"},cb=ln({__name:"GeneralNotice",setup(e){const{t}=br(),n=[{id:"kvg-rbl-umzug",title:"⚠️ Einschränkungen bei den Busdaten der KVG",start:new Date("2024-02-20 00:00:00"),end:new Date("2024-02-22 23:59:59"),msg:`Die KVG stellt vom **20. bis zum 22. Februar 2024** ihr rechnergestütztes Betriebsleitsystem (RBL) um,
 sodass es teilweise zu Einschränkungen bei den Busdaten kommen kann. [weitere Informationen](https://www.kvg-kiel.de/aktuelles/betriebliches/unser-rechnergestuetztes-betriebsleitsystem-rbl-zieht-um).`}],r=vs(`${Cs}.alerts`,[]),s=We(()=>n.find(a=>{const c=a.start&&a.end?a.start<=new Date&&a.end>=new Date:!0;return!r.value.includes(a.id)&&c}));function i(){s.value&&r.value.push(s.value.id)}const o=We(()=>s.value?M_(s.value.msg.trim()):null);return(a,c)=>(ht(),dr(Kf,{show:!!s.value,onClose:i},{default:Jt(()=>[s.value?(ht(),wn("div",sb,[Je("span",ib,tn(s.value.title),1),Je("span",{class:"prose",innerHTML:o.value},null,8,ob)])):lf("",!0),Je("div",ab,[qe(Gf,{onClick:i},{default:Jt(()=>[Na(tn(Qe(t)("ok")),1)]),_:1})])]),_:1},8,["show"]))}}),lb={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ub=Je("path",{fill:"currentColor",d:"M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6"},null,-1),fb=[ub];function hb(e,t){return ht(),wn("svg",lb,[...fb])}const db={name:"ic-baseline-settings",render:hb},mb={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},pb=Je("path",{fill:"currentColor",d:"m234.5 114.38l-45.1 39.36l13.51 58.6a16 16 0 0 1-23.84 17.34l-51.11-31l-51 31a16 16 0 0 1-23.84-17.34l13.49-58.54l-45.11-39.42a16 16 0 0 1 9.11-28.06l59.46-5.15l23.21-55.36a15.95 15.95 0 0 1 29.44 0L166 81.17l59.44 5.15a16 16 0 0 1 9.11 28.06Z"},null,-1),gb=[pb];function _b(e,t){return ht(),wn("svg",mb,[...gb])}const bb={name:"ph-star-fill",render:_b},yb={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},xb=Je("path",{fill:"currentColor",d:"m16 24l-6.09-8.6A8.14 8.14 0 0 1 16 2a8.08 8.08 0 0 1 8 8.13a8.2 8.2 0 0 1-1.8 5.13Zm0-20a6.07 6.07 0 0 0-6 6.13a6.19 6.19 0 0 0 1.49 4L16 20.52L20.63 14A6.24 6.24 0 0 0 22 10.13A6.07 6.07 0 0 0 16 4"},null,-1),wb=Je("circle",{cx:"16",cy:"9",r:"2",fill:"currentColor"},null,-1),Eb=Je("path",{fill:"currentColor",d:"M28 12h-2v2h2v14H4V14h2v-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2"},null,-1),vb=[xb,wb,Eb];function Sb(e,t){return ht(),wn("svg",yb,[...vb])}const kb={name:"carbon-map",render:Sb},Ob={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Cb=Je("path",{fill:"currentColor",d:"M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"},null,-1),Ab=[Cb];function Pb(e,t){return ht(),wn("svg",Ob,[...Ab])}const Ib={name:"ph-magnifying-glass-bold",render:Pb};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Sr=typeof window<"u";function Tb(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Be=Object.assign;function xo(e,t){const n={};for(const r in t){const s=t[r];n[r]=cn(s)?s.map(e):e(s)}return n}const ls=()=>{},cn=Array.isArray,Mb=/\/$/,Rb=e=>e.replace(Mb,"");function wo(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=jb(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function Nb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Cl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Lb(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&$r(t.matched[r],n.matched[s])&&Yf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function $r(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Yf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Fb(e[n],t[n]))return!1;return!0}function Fb(e,t){return cn(e)?Al(e,t):cn(t)?Al(t,e):e===t}function Al(e,t){return cn(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function jb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var As;(function(e){e.pop="pop",e.push="push"})(As||(As={}));var us;(function(e){e.back="back",e.forward="forward",e.unknown=""})(us||(us={}));function $b(e){if(!e)if(Sr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Rb(e)}const Db=/^[^#]+#/;function Ub(e,t){return e.replace(Db,"#")+t}function Bb(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const eo=()=>({left:window.pageXOffset,top:window.pageYOffset});function qb(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Bb(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Pl(e,t){return(history.state?history.state.position-t:-1)+e}const ea=new Map;function zb(e,t){ea.set(e,t)}function Hb(e){const t=ea.get(e);return ea.delete(e),t}let Vb=()=>location.protocol+"//"+location.host;function Qf(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),Cl(c,"")}return Cl(n,e)+r+s}function Wb(e,t,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const h=Qf(e,location),E=n.value,C=t.value;let N=0;if(d){if(n.value=h,t.value=d,o&&o===E){o=null;return}N=C?d.position-C.position:0}else r(h);s.forEach(k=>{k(n.value,E,{delta:N,type:As.pop,direction:N?N>0?us.forward:us.back:us.unknown})})};function c(){o=n.value}function l(d){s.push(d);const h=()=>{const E=s.indexOf(d);E>-1&&s.splice(E,1)};return i.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState(Be({},d.state,{scroll:eo()}),"")}function f(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function Il(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?eo():null}}function Gb(e){const{history:t,location:n}=window,r={value:Qf(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:Vb()+e+c;try{t[u?"replaceState":"pushState"](l,"",d),s.value=l}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function o(c,l){const u=Be({},t.state,Il(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=Be({},s.value,t.state,{forward:c,scroll:eo()});i(u.current,u,!0);const f=Be({},Il(r.value,c,null),{position:u.position+1},l);i(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function Kb(e){e=$b(e);const t=Gb(e),n=Wb(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Be({location:"",base:e,go:r,createHref:Ub.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Jb(e){return typeof e=="string"||e&&typeof e=="object"}function Xf(e){return typeof e=="string"||typeof e=="symbol"}const jn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Zf=Symbol("");var Tl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Tl||(Tl={}));function Dr(e,t){return Be(new Error,{type:e,[Zf]:!0},t)}function kn(e,t){return e instanceof Error&&Zf in e&&(t==null||!!(e.type&t))}const Ml="[^/]+?",Yb={sensitive:!1,strict:!1,start:!0,end:!0},Qb=/[.+*?^${}()[\]/\\]/g;function Xb(e,t){const n=Be({},Yb,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(s+="/"),s+=d.value.replace(Qb,"\\$&"),h+=40;else if(d.type===1){const{value:E,repeatable:C,optional:N,regexp:k}=d;i.push({name:E,repeatable:C,optional:N});const P=k||Ml;if(P!==Ml){h+=10;try{new RegExp(`(${P})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${E}" (${P}): `+U.message)}}let L=C?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(L=N&&l.length<2?`(?:/${L})`:"/"+L),N&&(L+="?"),s+=L,h+=20,N&&(h+=-8),C&&(h+=-20),P===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",E=i[d-1];f[E.name]=h&&E.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const d of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:E,repeatable:C,optional:N}=h,k=E in l?l[E]:"";if(cn(k)&&!C)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const P=cn(k)?k.join("/"):k;if(!P)if(N)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);u+=P}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function Zb(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ey(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Zb(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Rl(r))return 1;if(Rl(s))return-1}return s.length-r.length}function Rl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ty={type:0,value:""},ny=/[a-zA-Z0-9_]/;function ry(e){if(!e)return[[]];if(e==="/")return[[ty]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function f(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:ny.test(c)?d():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}function sy(e,t,n){const r=Xb(ry(e.path),n),s=Be(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function iy(e,t){const n=[],r=new Map;t=Fl({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,f,d){const h=!d,E=oy(u);E.aliasOf=d&&d.record;const C=Fl(t,u),N=[E];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const U of L)N.push(Be({},E,{components:d?d.record.components:E.components,path:U,aliasOf:d?d.record:E}))}let k,P;for(const L of N){const{path:U}=L;if(f&&U[0]!=="/"){const V=f.record.path,A=V[V.length-1]==="/"?"":"/";L.path=f.record.path+(U&&A+U)}if(k=sy(L,f,C),d?d.alias.push(k):(P=P||k,P!==k&&P.alias.push(k),h&&u.name&&!Ll(k)&&o(u.name)),E.children){const V=E.children;for(let A=0;A<V.length;A++)i(V[A],k,d&&d.children[A])}d=d||k,(k.record.components&&Object.keys(k.record.components).length||k.record.name||k.record.redirect)&&c(k)}return P?()=>{o(P)}:ls}function o(u){if(Xf(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let f=0;for(;f<n.length&&ey(u,n[f])>=0&&(u.record.path!==n[f].record.path||!eh(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!Ll(u)&&r.set(u.record.name,u)}function l(u,f){let d,h={},E,C;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Dr(1,{location:u});C=d.record.name,h=Be(Nl(f.params,d.keys.filter(P=>!P.optional).map(P=>P.name)),u.params&&Nl(u.params,d.keys.map(P=>P.name))),E=d.stringify(h)}else if("path"in u)E=u.path,d=n.find(P=>P.re.test(E)),d&&(h=d.parse(E),C=d.record.name);else{if(d=f.name?r.get(f.name):n.find(P=>P.re.test(f.path)),!d)throw Dr(1,{location:u,currentLocation:f});C=d.record.name,h=Be({},f.params,u.params),E=d.stringify(h)}const N=[];let k=d;for(;k;)N.unshift(k.record),k=k.parent;return{name:C,path:E,params:h,matched:N,meta:cy(N)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Nl(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function oy(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ay(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ay(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ll(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function cy(e){return e.reduce((t,n)=>Be(t,n.meta),{})}function Fl(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function eh(e,t){return t.children.some(n=>n===e||eh(e,n))}const th=/#/g,ly=/&/g,uy=/\//g,fy=/=/g,hy=/\?/g,nh=/\+/g,dy=/%5B/g,my=/%5D/g,rh=/%5E/g,py=/%60/g,sh=/%7B/g,gy=/%7C/g,ih=/%7D/g,_y=/%20/g;function Va(e){return encodeURI(""+e).replace(gy,"|").replace(dy,"[").replace(my,"]")}function by(e){return Va(e).replace(sh,"{").replace(ih,"}").replace(rh,"^")}function ta(e){return Va(e).replace(nh,"%2B").replace(_y,"+").replace(th,"%23").replace(ly,"%26").replace(py,"`").replace(sh,"{").replace(ih,"}").replace(rh,"^")}function yy(e){return ta(e).replace(fy,"%3D")}function xy(e){return Va(e).replace(th,"%23").replace(hy,"%3F")}function wy(e){return e==null?"":xy(e).replace(uy,"%2F")}function ki(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Ey(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(nh," "),o=i.indexOf("="),a=ki(o<0?i:i.slice(0,o)),c=o<0?null:ki(i.slice(o+1));if(a in t){let l=t[a];cn(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function jl(e){let t="";for(let n in e){const r=e[n];if(n=yy(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(cn(r)?r.map(i=>i&&ta(i)):[r&&ta(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function vy(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=cn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Sy=Symbol(""),$l=Symbol(""),to=Symbol(""),Wa=Symbol(""),na=Symbol("");function Qr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Bn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=f=>{f===!1?a(Dr(4,{from:n,to:t})):f instanceof Error?a(f):Jb(f)?a(Dr(2,{from:t,to:f})):(i&&r.enterCallbacks[s]===i&&typeof f=="function"&&i.push(f),o())},l=e.call(r&&r.instances[s],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(f=>a(f))})}function Eo(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(ky(a)){const l=(a.__vccOpts||a)[t];l&&s.push(Bn(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=Tb(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&Bn(d,n,r,i,o)()}))}}return s}function ky(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Dl(e){const t=Yt(to),n=Yt(Wa),r=We(()=>t.resolve(Qe(e.to))),s=We(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex($r.bind(null,u));if(d>-1)return d;const h=Ul(c[l-2]);return l>1&&Ul(u)===h&&f[f.length-1].path!==h?f.findIndex($r.bind(null,c[l-2])):d}),i=We(()=>s.value>-1&&Py(n.params,r.value.params)),o=We(()=>s.value>-1&&s.value===n.matched.length-1&&Yf(n.params,r.value.params));function a(c={}){return Ay(c)?t[Qe(e.replace)?"replace":"push"](Qe(e.to)).catch(ls):Promise.resolve()}return{route:r,href:We(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Oy=ln({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dl,setup(e,{slots:t}){const n=Di(Dl(e)),{options:r}=Yt(to),s=We(()=>({[Bl(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Bl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Ji("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Cy=Oy;function Ay(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Py(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!cn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Ul(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Bl=(e,t,n)=>e??t??n,Iy=ln({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Yt(na),s=We(()=>e.route||r.value),i=Yt($l,0),o=We(()=>{let l=Qe(i);const{matched:u}=s.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=We(()=>s.value.matched[o.value]);ii($l,We(()=>o.value+1)),ii(Sy,a),ii(na,s);const c=kt();return Nt(()=>[c.value,a.value,e.name],([l,u,f],[d,h,E])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!$r(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(C=>C(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,f=a.value,d=f&&f.components[u];if(!d)return ql(n.default,{Component:d,route:l});const h=f.props[u],E=h?h===!0?l.params:typeof h=="function"?h(l):h:null,N=Ji(d,Be({},E,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return ql(n.default,{Component:N,route:l})||N}}});function ql(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ty=Iy;function My(e){const t=iy(e.routes,e),n=e.parseQuery||Ey,r=e.stringifyQuery||jl,s=e.history,i=Qr(),o=Qr(),a=Qr(),c=Ca(jn);let l=jn;Sr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=xo.bind(null,I=>""+I),f=xo.bind(null,wy),d=xo.bind(null,ki);function h(I,q){let F,G;return Xf(I)?(F=t.getRecordMatcher(I),G=q):G=I,t.addRoute(G,F)}function E(I){const q=t.getRecordMatcher(I);q&&t.removeRoute(q)}function C(){return t.getRoutes().map(I=>I.record)}function N(I){return!!t.getRecordMatcher(I)}function k(I,q){if(q=Be({},q||c.value),typeof I=="string"){const w=wo(n,I,q.path),R=t.resolve({path:w.path},q),B=s.createHref(w.fullPath);return Be(w,R,{params:d(R.params),hash:ki(w.hash),redirectedFrom:void 0,href:B})}let F;if("path"in I)F=Be({},I,{path:wo(n,I.path,q.path).path});else{const w=Be({},I.params);for(const R in w)w[R]==null&&delete w[R];F=Be({},I,{params:f(w)}),q.params=f(q.params)}const G=t.resolve(F,q),de=I.hash||"";G.params=u(d(G.params));const Ee=Nb(r,Be({},I,{hash:by(de),path:G.path})),b=s.createHref(Ee);return Be({fullPath:Ee,hash:de,query:r===jl?vy(I.query):I.query||{}},G,{redirectedFrom:void 0,href:b})}function P(I){return typeof I=="string"?wo(n,I,c.value.path):Be({},I)}function L(I,q){if(l!==I)return Dr(8,{from:q,to:I})}function U(I){return he(I)}function V(I){return U(Be(P(I),{replace:!0}))}function A(I){const q=I.matched[I.matched.length-1];if(q&&q.redirect){const{redirect:F}=q;let G=typeof F=="function"?F(I):F;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=P(G):{path:G},G.params={}),Be({query:I.query,hash:I.hash,params:"path"in G?{}:I.params},G)}}function he(I,q){const F=l=k(I),G=c.value,de=I.state,Ee=I.force,b=I.replace===!0,w=A(F);if(w)return he(Be(P(w),{state:typeof w=="object"?Be({},de,w.state):de,force:Ee,replace:b}),q||F);const R=F;R.redirectedFrom=q;let B;return!Ee&&Lb(r,G,F)&&(B=Dr(16,{to:R,from:G}),S(G,G,!0,!1)),(B?Promise.resolve(B):me(R,G)).catch(D=>kn(D)?kn(D,2)?D:m(D):Se(D,R,G)).then(D=>{if(D){if(kn(D,2))return he(Be({replace:b},P(D.to),{state:typeof D.to=="object"?Be({},de,D.to.state):de,force:Ee}),q||R)}else D=ie(R,G,!0,b,de);return re(R,G,D),D})}function W(I,q){const F=L(I,q);return F?Promise.reject(F):Promise.resolve()}function ue(I){const q=pe.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(I):I()}function me(I,q){let F;const[G,de,Ee]=Ry(I,q);F=Eo(G.reverse(),"beforeRouteLeave",I,q);for(const w of G)w.leaveGuards.forEach(R=>{F.push(Bn(R,I,q))});const b=W.bind(null,I,q);return F.push(b),ae(F).then(()=>{F=[];for(const w of i.list())F.push(Bn(w,I,q));return F.push(b),ae(F)}).then(()=>{F=Eo(de,"beforeRouteUpdate",I,q);for(const w of de)w.updateGuards.forEach(R=>{F.push(Bn(R,I,q))});return F.push(b),ae(F)}).then(()=>{F=[];for(const w of Ee)if(w.beforeEnter)if(cn(w.beforeEnter))for(const R of w.beforeEnter)F.push(Bn(R,I,q));else F.push(Bn(w.beforeEnter,I,q));return F.push(b),ae(F)}).then(()=>(I.matched.forEach(w=>w.enterCallbacks={}),F=Eo(Ee,"beforeRouteEnter",I,q),F.push(b),ae(F))).then(()=>{F=[];for(const w of o.list())F.push(Bn(w,I,q));return F.push(b),ae(F)}).catch(w=>kn(w,8)?w:Promise.reject(w))}function re(I,q,F){a.list().forEach(G=>ue(()=>G(I,q,F)))}function ie(I,q,F,G,de){const Ee=L(I,q);if(Ee)return Ee;const b=q===jn,w=Sr?history.state:{};F&&(G||b?s.replace(I.fullPath,Be({scroll:b&&w&&w.scroll},de)):s.push(I.fullPath,de)),c.value=I,S(I,q,F,b),m()}let ke;function Te(){ke||(ke=s.listen((I,q,F)=>{if(!we.listening)return;const G=k(I),de=A(G);if(de){he(Be(de,{replace:!0}),G).catch(ls);return}l=G;const Ee=c.value;Sr&&zb(Pl(Ee.fullPath,F.delta),eo()),me(G,Ee).catch(b=>kn(b,12)?b:kn(b,2)?(he(b.to,G).then(w=>{kn(w,20)&&!F.delta&&F.type===As.pop&&s.go(-1,!1)}).catch(ls),Promise.reject()):(F.delta&&s.go(-F.delta,!1),Se(b,G,Ee))).then(b=>{b=b||ie(G,Ee,!1),b&&(F.delta&&!kn(b,8)?s.go(-F.delta,!1):F.type===As.pop&&kn(b,20)&&s.go(-1,!1)),re(G,Ee,b)}).catch(ls)}))}let Oe=Qr(),Pe=Qr(),ve;function Se(I,q,F){m(I);const G=Pe.list();return G.length?G.forEach(de=>de(I,q,F)):console.error(I),Promise.reject(I)}function ze(){return ve&&c.value!==jn?Promise.resolve():new Promise((I,q)=>{Oe.add([I,q])})}function m(I){return ve||(ve=!I,Te(),Oe.list().forEach(([q,F])=>I?F(I):q()),Oe.reset()),I}function S(I,q,F,G){const{scrollBehavior:de}=e;if(!Sr||!de)return Promise.resolve();const Ee=!F&&Hb(Pl(I.fullPath,0))||(G||!F)&&history.state&&history.state.scroll||null;return Hr().then(()=>de(I,q,Ee)).then(b=>b&&qb(b)).catch(b=>Se(b,I,q))}const Z=I=>s.go(I);let x;const pe=new Set,we={currentRoute:c,listening:!0,addRoute:h,removeRoute:E,hasRoute:N,getRoutes:C,resolve:k,options:e,push:U,replace:V,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Pe.add,isReady:ze,install(I){const q=this;I.component("RouterLink",Cy),I.component("RouterView",Ty),I.config.globalProperties.$router=q,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>Qe(c)}),Sr&&!x&&c.value===jn&&(x=!0,U(s.location).catch(de=>{}));const F={};for(const de in jn)Object.defineProperty(F,de,{get:()=>c.value[de],enumerable:!0});I.provide(to,q),I.provide(Wa,Lu(F)),I.provide(na,c);const G=I.unmount;pe.add(I),I.unmount=function(){pe.delete(I),pe.size<1&&(l=jn,ke&&ke(),ke=null,c.value=jn,x=!1,ve=!1),G()}}};function ae(I){return I.reduce((q,F)=>q.then(()=>ue(F)),Promise.resolve())}return we}function Ry(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>$r(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>$r(l,c))||s.push(c))}return[n,r,s]}function w1(){return Yt(to)}function Ny(){return Yt(Wa)}const Ly={class:"flex w-full justify-center border-t-1 border-gray-200 dark:border-gray-800 dark:bg-dark-400 dark:text-gray-300 shadow-top"},Fy={class:"flex w-full justify-around max-w-96"},jy={class:"mt-auto text-xs"},$y={class:"mt-auto text-xs"},Dy={class:"mt-auto text-xs"},Uy={class:"mt-auto text-xs"},By=ln({__name:"AppBarBottom",setup(e){const{t}=br(),{liteMode:n}=Jf(),r=Ny(),s=We(()=>r.name==="favorites"?"favorites":r.meta.settings?"settings":"map");return(i,o)=>{const a=Ib,c=Hi("router-link"),l=kb,u=bb,f=db;return ht(),wn("nav",Ly,[Je("div",Fy,[Qe(n)?(ht(),dr(c,{key:0,to:{name:"search"},class:gn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="map"}]),"aria-label":Qe(t)("search")},{default:Jt(()=>[qe(a,{class:"w-6 h-6 mb-1"}),Je("span",jy,tn(Qe(t)("search")),1)]),_:1},8,["class","aria-label"])):(ht(),dr(c,{key:1,to:{name:"home"},class:gn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="map"}]),"aria-label":Qe(t)("map")},{default:Jt(()=>[qe(l,{class:"w-6 h-6 mb-1"}),Je("span",$y,tn(Qe(t)("map")),1)]),_:1},8,["class","aria-label"])),qe(c,{to:{name:"favorites"},class:gn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="favorites"}]),"aria-label":Qe(t)("favorites")},{default:Jt(()=>[qe(u,{class:"w-6 h-6 mb-1"}),Je("span",Dy,tn(Qe(t)("favorites")),1)]),_:1},8,["class","aria-label"]),qe(c,{to:{name:"settings-about"},class:gn(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":s.value==="settings"}]),"aria-label":Qe(t)("settings")},{default:Jt(()=>[qe(f,{class:"w-6 h-6 mb-1"}),Je("span",Uy,tn(Qe(t)("settings")),1)]),_:1},8,["class","aria-label"])])])}}});var Ga={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!t.OffscreenCanvas)return!1;var m=new OffscreenCanvas(1,1),S=m.getContext("2d");S.fillRect(0,0,1,1);var Z=m.transferToImageBitmap();try{S.createPattern(Z,"no-repeat")}catch{return!1}return!0}();function c(){}function l(m){var S=n.exports.Promise,Z=S!==void 0?S:t.Promise;return typeof Z=="function"?new Z(m):(m(c,c),null)}var u=function(m,S){return{transform:function(Z){if(m)return Z;if(S.has(Z))return S.get(Z);var x=new OffscreenCanvas(Z.width,Z.height),pe=x.getContext("2d");return pe.drawImage(Z,0,0),S.set(Z,x),x},clear:function(){S.clear()}}}(a,new Map),f=function(){var m=Math.floor(16.666666666666668),S,Z,x={},pe=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(S=function(we){var ae=Math.random();return x[ae]=requestAnimationFrame(function I(q){pe===q||pe+m-1<q?(pe=q,delete x[ae],we()):x[ae]=requestAnimationFrame(I)}),ae},Z=function(we){x[we]&&cancelAnimationFrame(x[we])}):(S=function(we){return setTimeout(we,m)},Z=function(we){return clearTimeout(we)}),{frame:S,cancel:Z}}(),d=function(){var m,S,Z={};function x(pe){function we(ae,I){pe.postMessage({options:ae||{},callback:I})}pe.init=function(I){var q=I.transferControlToOffscreen();pe.postMessage({canvas:q},[q])},pe.fire=function(I,q,F){if(S)return we(I,null),S;var G=Math.random().toString(36).slice(2);return S=l(function(de){function Ee(b){b.data.callback===G&&(delete Z[G],pe.removeEventListener("message",Ee),S=null,u.clear(),F(),de())}pe.addEventListener("message",Ee),we(I,G),Z[G]=Ee.bind(null,{data:{callback:G}})}),S},pe.reset=function(){pe.postMessage({reset:!0});for(var I in Z)Z[I](),delete Z[I]}}return function(){if(m)return m;if(!r&&i){var pe=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{m=new Worker(URL.createObjectURL(new Blob([pe])))}catch(we){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",we),null}x(m)}return m}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(m,S){return S?S(m):m}function C(m){return m!=null}function N(m,S,Z){return E(m&&C(m[S])?m[S]:h[S],Z)}function k(m){return m<0?0:Math.floor(m)}function P(m,S){return Math.floor(Math.random()*(S-m))+m}function L(m){return parseInt(m,16)}function U(m){return m.map(V)}function V(m){var S=String(m).replace(/[^0-9a-f]/gi,"");return S.length<6&&(S=S[0]+S[0]+S[1]+S[1]+S[2]+S[2]),{r:L(S.substring(0,2)),g:L(S.substring(2,4)),b:L(S.substring(4,6))}}function A(m){var S=N(m,"origin",Object);return S.x=N(S,"x",Number),S.y=N(S,"y",Number),S}function he(m){m.width=document.documentElement.clientWidth,m.height=document.documentElement.clientHeight}function W(m){var S=m.getBoundingClientRect();m.width=S.width,m.height=S.height}function ue(m){var S=document.createElement("canvas");return S.style.position="fixed",S.style.top="0px",S.style.left="0px",S.style.pointerEvents="none",S.style.zIndex=m,S}function me(m,S,Z,x,pe,we,ae,I,q){m.save(),m.translate(S,Z),m.rotate(we),m.scale(x,pe),m.arc(0,0,1,ae,I,q),m.restore()}function re(m){var S=m.angle*(Math.PI/180),Z=m.spread*(Math.PI/180);return{x:m.x,y:m.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:m.startVelocity*.5+Math.random()*m.startVelocity,angle2D:-S+(.5*Z-Math.random()*Z),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:m.color,shape:m.shape,tick:0,totalTicks:m.ticks,decay:m.decay,drift:m.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:m.gravity*3,ovalScalar:.6,scalar:m.scalar,flat:m.flat}}function ie(m,S){S.x+=Math.cos(S.angle2D)*S.velocity+S.drift,S.y+=Math.sin(S.angle2D)*S.velocity+S.gravity,S.velocity*=S.decay,S.flat?(S.wobble=0,S.wobbleX=S.x+10*S.scalar,S.wobbleY=S.y+10*S.scalar,S.tiltSin=0,S.tiltCos=0,S.random=1):(S.wobble+=S.wobbleSpeed,S.wobbleX=S.x+10*S.scalar*Math.cos(S.wobble),S.wobbleY=S.y+10*S.scalar*Math.sin(S.wobble),S.tiltAngle+=.1,S.tiltSin=Math.sin(S.tiltAngle),S.tiltCos=Math.cos(S.tiltAngle),S.random=Math.random()+2);var Z=S.tick++/S.totalTicks,x=S.x+S.random*S.tiltCos,pe=S.y+S.random*S.tiltSin,we=S.wobbleX+S.random*S.tiltCos,ae=S.wobbleY+S.random*S.tiltSin;if(m.fillStyle="rgba("+S.color.r+", "+S.color.g+", "+S.color.b+", "+(1-Z)+")",m.beginPath(),o&&S.shape.type==="path"&&typeof S.shape.path=="string"&&Array.isArray(S.shape.matrix))m.fill(ve(S.shape.path,S.shape.matrix,S.x,S.y,Math.abs(we-x)*.1,Math.abs(ae-pe)*.1,Math.PI/10*S.wobble));else if(S.shape.type==="bitmap"){var I=Math.PI/10*S.wobble,q=Math.abs(we-x)*.1,F=Math.abs(ae-pe)*.1,G=S.shape.bitmap.width*S.scalar,de=S.shape.bitmap.height*S.scalar,Ee=new DOMMatrix([Math.cos(I)*q,Math.sin(I)*q,-Math.sin(I)*F,Math.cos(I)*F,S.x,S.y]);Ee.multiplySelf(new DOMMatrix(S.shape.matrix));var b=m.createPattern(u.transform(S.shape.bitmap),"no-repeat");b.setTransform(Ee),m.globalAlpha=1-Z,m.fillStyle=b,m.fillRect(S.x-G/2,S.y-de/2,G,de),m.globalAlpha=1}else if(S.shape==="circle")m.ellipse?m.ellipse(S.x,S.y,Math.abs(we-x)*S.ovalScalar,Math.abs(ae-pe)*S.ovalScalar,Math.PI/10*S.wobble,0,2*Math.PI):me(m,S.x,S.y,Math.abs(we-x)*S.ovalScalar,Math.abs(ae-pe)*S.ovalScalar,Math.PI/10*S.wobble,0,2*Math.PI);else if(S.shape==="star")for(var w=Math.PI/2*3,R=4*S.scalar,B=8*S.scalar,D=S.x,Q=S.y,ee=5,J=Math.PI/ee;ee--;)D=S.x+Math.cos(w)*B,Q=S.y+Math.sin(w)*B,m.lineTo(D,Q),w+=J,D=S.x+Math.cos(w)*R,Q=S.y+Math.sin(w)*R,m.lineTo(D,Q),w+=J;else m.moveTo(Math.floor(S.x),Math.floor(S.y)),m.lineTo(Math.floor(S.wobbleX),Math.floor(pe)),m.lineTo(Math.floor(we),Math.floor(ae)),m.lineTo(Math.floor(x),Math.floor(S.wobbleY));return m.closePath(),m.fill(),S.tick<S.totalTicks}function ke(m,S,Z,x,pe){var we=S.slice(),ae=m.getContext("2d"),I,q,F=l(function(G){function de(){I=q=null,ae.clearRect(0,0,x.width,x.height),u.clear(),pe(),G()}function Ee(){r&&!(x.width===s.width&&x.height===s.height)&&(x.width=m.width=s.width,x.height=m.height=s.height),!x.width&&!x.height&&(Z(m),x.width=m.width,x.height=m.height),ae.clearRect(0,0,x.width,x.height),we=we.filter(function(b){return ie(ae,b)}),we.length?I=f.frame(Ee):de()}I=f.frame(Ee),q=de});return{addFettis:function(G){return we=we.concat(G),F},canvas:m,promise:F,reset:function(){I&&f.cancel(I),q&&q()}}}function Te(m,S){var Z=!m,x=!!N(S||{},"resize"),pe=!1,we=N(S,"disableForReducedMotion",Boolean),ae=i&&!!N(S||{},"useWorker"),I=ae?d():null,q=Z?he:W,F=m&&I?!!m.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,de;function Ee(w,R,B){for(var D=N(w,"particleCount",k),Q=N(w,"angle",Number),ee=N(w,"spread",Number),J=N(w,"startVelocity",Number),X=N(w,"decay",Number),K=N(w,"gravity",Number),oe=N(w,"drift",Number),te=N(w,"colors",U),T=N(w,"ticks",Number),$=N(w,"shapes"),fe=N(w,"scalar"),xe=!!N(w,"flat"),Me=A(w),je=D,Ve=[],gt=m.width*Me.x,un=m.height*Me.y;je--;)Ve.push(re({x:gt,y:un,angle:Q,spread:ee,startVelocity:J,color:te[je%te.length],shape:$[P(0,$.length)],ticks:T,decay:X,gravity:K,drift:oe,scalar:fe,flat:xe}));return de?de.addFettis(Ve):(de=ke(m,Ve,q,R,B),de.promise)}function b(w){var R=we||N(w,"disableForReducedMotion",Boolean),B=N(w,"zIndex",Number);if(R&&G)return l(function(J){J()});Z&&de?m=de.canvas:Z&&!m&&(m=ue(B),document.body.appendChild(m)),x&&!F&&q(m);var D={width:m.width,height:m.height};I&&!F&&I.init(m),F=!0,I&&(m.__confetti_initialized=!0);function Q(){if(I){var J={getBoundingClientRect:function(){if(!Z)return m.getBoundingClientRect()}};q(J),I.postMessage({resize:{width:J.width,height:J.height}});return}D.width=D.height=null}function ee(){de=null,x&&(pe=!1,t.removeEventListener("resize",Q)),Z&&m&&(document.body.removeChild(m),m=null,F=!1)}return x&&!pe&&(pe=!0,t.addEventListener("resize",Q,!1)),I?I.fire(w,D,ee):Ee(w,D,ee)}return b.reset=function(){I&&I.reset(),de&&de.reset()},b}var Oe;function Pe(){return Oe||(Oe=Te(null,{useWorker:!0,resize:!0})),Oe}function ve(m,S,Z,x,pe,we,ae){var I=new Path2D(m),q=new Path2D;q.addPath(I,new DOMMatrix(S));var F=new Path2D;return F.addPath(q,new DOMMatrix([Math.cos(ae)*pe,Math.sin(ae)*pe,-Math.sin(ae)*we,Math.cos(ae)*we,Z,x])),F}function Se(m){if(!o)throw new Error("path confetti are not supported in this browser");var S,Z;typeof m=="string"?S=m:(S=m.path,Z=m.matrix);var x=new Path2D(S),pe=document.createElement("canvas"),we=pe.getContext("2d");if(!Z){for(var ae=1e3,I=ae,q=ae,F=0,G=0,de,Ee,b=0;b<ae;b+=2)for(var w=0;w<ae;w+=2)we.isPointInPath(x,b,w,"nonzero")&&(I=Math.min(I,b),q=Math.min(q,w),F=Math.max(F,b),G=Math.max(G,w));de=F-I,Ee=G-q;var R=10,B=Math.min(R/de,R/Ee);Z=[B,0,0,B,-Math.round(de/2+I)*B,-Math.round(Ee/2+q)*B]}return{type:"path",path:S,matrix:Z}}function ze(m){var S,Z=1,x="#000000",pe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof m=="string"?S=m:(S=m.text,Z="scalar"in m?m.scalar:Z,pe="fontFamily"in m?m.fontFamily:pe,x="color"in m?m.color:x);var we=10*Z,ae=""+we+"px "+pe,I=new OffscreenCanvas(we,we),q=I.getContext("2d");q.font=ae;var F=q.measureText(S),G=Math.ceil(F.actualBoundingBoxRight+F.actualBoundingBoxLeft),de=Math.ceil(F.actualBoundingBoxAscent+F.actualBoundingBoxDescent),Ee=2,b=F.actualBoundingBoxLeft+Ee,w=F.actualBoundingBoxAscent+Ee;G+=Ee+Ee,de+=Ee+Ee,I=new OffscreenCanvas(G,de),q=I.getContext("2d"),q.font=ae,q.fillStyle=x,q.fillText(S,b,w);var R=1/Z;return{type:"bitmap",bitmap:I.transferToImageBitmap(),matrix:[R,0,0,R,-G*R/2,-de*R/2]}}n.exports=function(){return Pe().apply(this,arguments)},n.exports.reset=function(){Pe().reset()},n.exports.create=Te,n.exports.shapeFromPath=Se,n.exports.shapeFromText=ze})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ga,!1);const qy=Ga.exports;Ga.exports.create;const zl=atob("YW5kcm9pZEBqdTYwLmRl"),E1="26.02.2024 21:34:33",v1="https://boomerang.ju60.de/share/z8KAHmGY/Kiel%20Live",oh="https://tiles.ju60.de",S1=`${oh}/styles/gray-matter/style.json`,k1=`${oh}/styles/bright-matter/style.json`,zy="wss://api.kiel-live.ju60.de/",Hy={class:"flex flex-col text-center gap-4"},Vy={class:"text-xl mb-2"},Wy=["href"],Gy={href:"https://www.instagram.com/kiel.live/",target:"_blank",class:"underline"},Ky={class:"flex flex-row w-full justify-center mt-8"},Hl="2.0.0",Jy=ln({__name:"UpdateNotice",setup(e){const t=vs(`${Cs}.version`,"2.0.0"),n=We(()=>t.value!==null&&t.value!==Hl),{t:r}=br();Ns(async()=>{const i=localStorage.getItem("version");i!==null&&(t.value=i,localStorage.removeItem("version"))}),Nt(n,()=>{if(!n.value)return;const i=3*1e3,o=Date.now()+i,a=setInterval(()=>{if(o-Date.now()<=0){clearInterval(a);return}qy({particleCount:100,spread:70,origin:{y:1.1},startVelocity:90,zIndex:2e3})},250)},{immediate:!0});function s(){t.value=Hl}return(i,o)=>{const a=Hi("i18n-t");return ht(),dr(Kf,{show:n.value,onClose:s},{default:Jt(()=>[Je("div",Hy,[Je("span",Vy,tn(Qe(r)("update_title")),1),Je("span",null,tn(Qe(r)("update_msg")),1),qe(a,{keypath:"feedback",tag:"span"},{email:Jt(()=>[Je("a",{href:`mailto:${Qe(zl)}`,class:"underline"},tn(Qe(zl)),9,Wy)]),instagram:Jt(()=>[Je("a",Gy,tn(Qe(r)("instagram")),1)]),_:1})]),Je("div",Ky,[qe(Gf,{onClick:s},{default:Jt(()=>[Na(tn(Qe(r)("nice")),1)]),_:1})])]),_:1},8,["show"])}}}),Yy=e=>Ap({storageKey:`${Cs}.theme`,...e}),Qy={class:"app flex flex-col m-auto w-full h-full bg-white text-black dark:bg-dark-400 dark:text-gray-300"},Xy={class:"flex flex-grow min-h-0"},Zy=ln({__name:"App",setup(e){Yy();const{locale:t}=br();return Nt(t,()=>{document.documentElement.setAttribute("lang",t.value)},{immediate:!0}),(n,r)=>{const s=Hi("router-view"),i=cb;return ht(),wn("div",Qy,[Je("main",Xy,[qe(s)]),qe(By,{class:"mt-auto flex-shrink-0"}),qe(Jy),qe(i)])}}}),ex=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},tx=ex(Zy,[["__scopeId","data-v-28f57479"]]),nx="modulepreload",rx=function(e){return"/"+e},Vl={},Zt=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=rx(o),o in Vl)return;Vl[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":nx,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},sx=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};function ix(){return navigator.language.split("-")[0]}const ah=ix(),ch=V0({legacy:!1,locale:ah}),ox=async e=>{const{default:t}=await sx(Object.assign({"./locales/de.json":()=>Zt(()=>import("./de-GZMmBjBD.js"),__vite__mapDeps([])),"./locales/en.json":()=>Zt(()=>import("./en-t_K36liO.js"),__vite__mapDeps([]))}),`./locales/${e}.json`);return ch.global.setLocaleMessage(e,t),Hr()};ox(ah);let vo=!0;const ax=[{path:"/",name:"home",component:()=>Zt(()=>import("./Home-437W_v9L.js"),__vite__mapDeps([0,1,2]))},{path:"/map/:markerType/:markerId",name:"map-marker",component:()=>Zt(()=>import("./Home-437W_v9L.js"),__vite__mapDeps([0,1,2])),props:!0},{path:"/search",name:"search",component:()=>Zt(()=>import("./Home-437W_v9L.js"),__vite__mapDeps([0,1,2]))},{path:"/favorites",name:"favorites",component:()=>Zt(()=>import("./Home-437W_v9L.js"),__vite__mapDeps([0,1,2]))},{path:"/settings/about",name:"settings-about",component:()=>Zt(()=>import("./About-PuywA62x.js"),__vite__mapDeps([3,1,4])),meta:{settings:!0}},{path:"/settings/changelog",name:"settings-changelog",component:()=>Zt(()=>import("./Changelog-5mLFBIkF.js"),__vite__mapDeps([5,4])),meta:{settings:!0}},{path:"/settings/settings",name:"settings-settings",component:()=>Zt(()=>import("./Settings-pakdyQPl.js"),__vite__mapDeps([6,4])),meta:{settings:!0}},{path:"/settings/contact",name:"settings-contact",component:()=>Zt(()=>import("./Contact-w1z-jXXH.js"),__vite__mapDeps([7,1,4])),meta:{settings:!0}},{path:"/contact",name:"contact",redirect:{name:"settings-contact"}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Zt(()=>import("./NotFound-hj55-8Im.js"),__vite__mapDeps([]))}],lh=My({history:Kb(),routes:ax}),{liteMode:cx}=Jf();lh.beforeEach((e,t,n)=>{if(e.name==="home"&&(vo||cx.value)){vo=!1,n({name:"favorites"});return}vo=!1,n()});const Ht=new Uint8Array(0),yr=new TextEncoder,qt=new TextDecoder;function lx(...e){let t=0;for(let s=0;s<e.length;s++)t+=e[s].length;const n=new Uint8Array(t);let r=0;for(let s=0;s<e.length;s++)n.set(e[s],r),r+=e[s].length;return n}function fs(...e){const t=[];for(let n=0;n<e.length;n++)t.push(yr.encode(e[n]));return t.length===0?Ht:t.length===1?t[0]:lx(...t)}function Wl(e){return!e||e.length===0?"":qt.decode(e)}const Gl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Kl=36,ux=0xcfd41b9100000,Jl=33,fx=333,Yl=22;function hx(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(Math.random()*255)}function dx(e){var t;(t=globalThis==null?void 0:globalThis.crypto)!=null&&t.getRandomValues?globalThis.crypto.getRandomValues(e):hx(e)}class mx{constructor(){g(this,"buf");g(this,"seq");g(this,"inc");this.buf=new Uint8Array(Yl),this.init()}init(){this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(Math.random()*ux),this.inc=Math.floor(Math.random()*(fx-Jl)+Jl)}setPre(){const t=new Uint8Array(12);dx(t);for(let n=0;n<12;n++){const r=t[n]%36;this.buf[n]=Gl.charCodeAt(r)}}fillSeq(){let t=this.seq;for(let n=Yl-1;n>=12;n--)this.buf[n]=Gl.charCodeAt(t%Kl),t=Math.floor(t/Kl)}next(){return this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}const $s=new mx;var nn;(function(e){e.Disconnect="disconnect",e.Reconnect="reconnect",e.Update="update",e.LDM="ldm",e.Error="error"})(nn||(nn={}));var Tr;(function(e){e.Reconnecting="reconnecting",e.PingTimer="pingTimer",e.StaleConnection="staleConnection",e.ClientInitiatedReconnect="client initiated reconnect"})(Tr||(Tr={}));var se;(function(e){e.ApiError="BAD API",e.BadAuthentication="BAD_AUTHENTICATION",e.BadCreds="BAD_CREDS",e.BadHeader="BAD_HEADER",e.BadJson="BAD_JSON",e.BadPayload="BAD_PAYLOAD",e.BadSubject="BAD_SUBJECT",e.Cancelled="CANCELLED",e.ConnectionClosed="CONNECTION_CLOSED",e.ConnectionDraining="CONNECTION_DRAINING",e.ConnectionRefused="CONNECTION_REFUSED",e.ConnectionTimeout="CONNECTION_TIMEOUT",e.Disconnect="DISCONNECT",e.InvalidOption="INVALID_OPTION",e.InvalidPayload="INVALID_PAYLOAD",e.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",e.NoResponders="503",e.NotFunction="NOT_FUNC",e.RequestError="REQUEST_ERROR",e.ServerOptionNotAvailable="SERVER_OPT_NA",e.SubClosed="SUB_CLOSED",e.SubDraining="SUB_DRAINING",e.Timeout="TIMEOUT",e.Tls="TLS",e.Unknown="UNKNOWN_ERROR",e.WssRequired="WSS_REQUIRED",e.JetStreamInvalidAck="JESTREAM_INVALID_ACK",e.JetStream404NoMessages="404",e.JetStream408RequestTimeout="408",e.JetStream409MaxAckPendingExceeded="409",e.JetStream409="409",e.JetStreamNotEnabled="503",e.JetStreamIdleHeartBeat="IDLE_HEARTBEAT",e.AuthorizationViolation="AUTHORIZATION_VIOLATION",e.AuthenticationExpired="AUTHENTICATION_EXPIRED",e.ProtocolError="NATS_PROTOCOL_ERR",e.PermissionsViolation="PERMISSIONS_VIOLATION",e.AuthenticationTimeout="AUTHENTICATION_TIMEOUT"})(se||(se={}));function px(e){return typeof e.code=="string"}class uh{constructor(){g(this,"messages");this.messages=new Map,this.messages.set(se.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(se.BadJson,"Bad JSON"),this.messages.set(se.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(t){return gx.getMessage(t)}getMessage(t){return this.messages.get(t)||t}}const gx=new uh;class ge extends Error{constructor(n,r,s){super(n);g(this,"name");g(this,"message");g(this,"code");g(this,"permissionContext");g(this,"chainedError");g(this,"api_error");this.name="NatsError",this.message=n,this.code=r,this.chainedError=s}static errorForCode(n,r){const s=uh.getMessage(n);return new ge(s,n,r)}isAuthError(){return this.code===se.AuthenticationExpired||this.code===se.AuthorizationViolation}isAuthTimeout(){return this.code===se.AuthenticationTimeout}isPermissionError(){return this.code===se.PermissionsViolation}isProtocolError(){return this.code===se.ProtocolError}isJetStreamError(){return this.api_error!==void 0}jsError(){return this.api_error?this.api_error:null}}var $t;(function(e){e[e.Exact=0]="Exact",e[e.CanonicalMIME=1]="CanonicalMIME",e[e.IgnoreCase=2]="IgnoreCase"})($t||($t={}));var bn;(function(e){e.Timer="timer",e.Count="count",e.JitterTimer="jitterTimer",e.SentinelMsg="sentinelMsg"})(bn||(bn={}));var hs;(function(e){e.STATS="io.nats.micro.v1.stats_response",e.INFO="io.nats.micro.v1.info_response",e.PING="io.nats.micro.v1.ping_response"})(hs||(hs={}));const Oi="Nats-Service-Error",Ci="Nats-Service-Error-Code";class Ai extends Error{constructor(n,r){super(r);g(this,"code");this.code=n}static isServiceError(n){return Ai.toServiceError(n)!==null}static toServiceError(n){var s,i;const r=((s=n==null?void 0:n.headers)==null?void 0:s.get(Ci))||"";if(r!==""){const o=parseInt(r)||400,a=((i=n==null?void 0:n.headers)==null?void 0:i.get(Oi))||"";return new Ai(o,a.length?a:r)}return null}}function yn(e=""){if(e=e||"_INBOX",typeof e!="string")throw new Error("prefix must be a string");return e.split(".").forEach(t=>{if(t==="*"||t===">")throw new Error(`inbox prefixes cannot have wildcards '${e}'`)}),`${e}.${$s.next()}`}const ra="127.0.0.1";var Vn;(function(e){e.PING="PING",e.STATS="STATS",e.INFO="INFO"})(Vn||(Vn={}));function no(e,...t){for(let n=0;n<t.length;n++){const r=t[n];Object.keys(r).forEach(function(s){e[s]=r[s]})}return e}function Zs(e){return qt.decode(e).replace(/\n/g,"␊").replace(/\r/g,"␍")}function Ur(e,t=!0){const n=t?ge.errorForCode(se.Timeout):null;let r,s;const i=new Promise((o,a)=>{r={cancel:()=>{s&&clearTimeout(s)}},s=setTimeout(()=>{a(n===null?ge.errorForCode(se.Timeout):n)},e)});return Object.assign(i,r)}function Ds(e=0){return new Promise(t=>{setTimeout(()=>{t()},e)})}function Ze(){let e={};const t=new Promise((n,r)=>{e={resolve:n,reject:r}});return Object.assign(t,e)}function fh(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function _x(e){return e===0?0:Math.floor(e/2+Math.random()*e)}function hh(e=[0,250,250,500,500,3e3,5e3]){Array.isArray(e)||(e=[0,250,250,500,500,3e3,5e3]);const t=e.length-1;return{backoff(n){return _x(n>t?e[t]:e[n])}}}class Br{constructor(){g(this,"buffers");g(this,"byteLength");this.buffers=[],this.byteLength=0}static concat(...t){let n=0;for(let i=0;i<t.length;i++)n+=t[i].length;const r=new Uint8Array(n);let s=0;for(let i=0;i<t.length;i++)r.set(t[i],s),s+=t[i].length;return r}static fromAscii(t){return t||(t=""),yr.encode(t)}static toAscii(t){return qt.decode(t)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const t=new Uint8Array(this.byteLength);let n=0;for(let r=0;r<this.buffers.length;r++)t.set(this.buffers[r],n),n+=this.buffers[r].length;this.buffers.length=0,this.buffers.push(t)}}shift(){if(this.buffers.length){const t=this.buffers.shift();if(t)return this.byteLength-=t.length,t}return new Uint8Array(0)}drain(t){if(this.buffers.length){this.pack();const n=this.buffers.pop();if(n){const r=this.byteLength;(t===void 0||t>r)&&(t=r);const s=n.subarray(0,t);return r>t&&this.buffers.push(n.subarray(t)),this.byteLength=r-t,s}}return new Uint8Array(0)}fill(t,...n){t&&(this.buffers.push(t),this.byteLength+=t.length);for(let r=0;r<n.length;r++)n[r]&&n[r].length&&(this.buffers.push(n[r]),this.byteLength+=n[r].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}let zt;function bx(e){zt=e}function dh(){return zt!==void 0&&zt.defaultPort!==void 0?zt.defaultPort:4222}function So(){return zt!==void 0&&zt.urlParseFn?zt.urlParseFn:void 0}function yx(){if(!zt||typeof zt.factory!="function")throw new Error("transport fn is not set");return zt.factory()}function mh(){return zt!==void 0&&zt.dnsResolveFn?zt.dnsResolveFn:void 0}const li=`\r
`,Pi=Br.fromAscii(li),xx=new Uint8Array(Pi)[0],wx=new Uint8Array(Pi)[1];function Ex(e){for(let t=0;t<e.length;t++){const n=t+1;if(e.byteLength>n&&e[t]===xx&&e[n]===wx)return n+1}return 0}function vx(e){const t=Ex(e);if(t>0){const r=new Uint8Array(e).slice(0,t);return qt.decode(r)}return""}const Sx=4,ph=48,kx=65,Ox=97;function Cx(e,t,n,r){const s=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((o,a)=>{s[a]=o}),s[12]=e,s[13]=t,s[14]=n,s[15]=r,s}function sa(e){return Ax(e)!==void 0}function Ax(e){for(let t=0;t<e.length;t++)switch(e[t]){case".":return gh(e);case":":return Px(e)}}function gh(e){const t=new Uint8Array(4);for(let n=0;n<4;n++){if(e.length===0)return;if(n>0){if(e[0]!==".")return;e=e.substring(1)}const{n:r,c:s,ok:i}=Ix(e);if(!i||r>255)return;e=e.substring(s),t[n]=r}return Cx(t[0],t[1],t[2],t[3])}function Px(e){const t=new Uint8Array(16);let n=-1;if(e.length>=2&&e[0]===":"&&e[1]===":"&&(n=0,e=e.substring(2),e.length===0))return t;let r=0;for(;r<16;){const{n:s,c:i,ok:o}=Tx(e);if(!o||s>65535)return;if(i<e.length&&e[i]==="."){if(n<0&&r!=12||r+4>16)return;const a=gh(e);if(a===void 0)return;t[r]=a[12],t[r+1]=a[13],t[r+2]=a[14],t[r+3]=a[15],e="",r+=Sx;break}if(t[r]=s>>8,t[r+1]=s,r+=2,e=e.substring(i),e.length===0)break;if(e[0]!==":"||e.length==1)return;if(e=e.substring(1),e[0]===":"){if(n>=0)return;if(n=r,e=e.substring(1),e.length===0)break}}if(e.length===0){if(r<16){if(n<0)return;const s=16-r;for(let i=r-1;i>=n;i--)t[i+s]=t[i];for(let i=n+s-1;i>=n;i--)t[i]=0}else if(n>=0)return;return t}}function Ix(e){let t=0,n=0;for(t=0;t<e.length&&48<=e.charCodeAt(t)&&e.charCodeAt(t)<=57;t++)if(n=n*10+(e.charCodeAt(t)-ph),n>=16777215)return{n:16777215,c:t,ok:!1};return t===0?{n:0,c:0,ok:!1}:{n,c:t,ok:!0}}function Tx(e){let t=0,n=0;for(n=0;n<e.length;n++){if(48<=e.charCodeAt(n)&&e.charCodeAt(n)<=57)t*=16,t+=e.charCodeAt(n)-ph;else if(97<=e.charCodeAt(n)&&e.charCodeAt(n)<=102)t*=16,t+=e.charCodeAt(n)-Ox+10;else if(65<=e.charCodeAt(n)&&e.charCodeAt(n)<=70)t*=16,t+=e.charCodeAt(n)-kx+10;else break;if(t>=16777215)return{n:0,c:n,ok:!1}}return n===0?{n:0,c:n,ok:!1}:{n:t,c:n,ok:!0}}function Mx(e){return e.indexOf(".")!==-1?!0:e.indexOf("[")!==-1||e.indexOf("::")!==-1?!1:e.split(":").length<=2}function ia(e){return!Mx(e)}function Rx(e){const t="::FFFF:",n=e.toUpperCase().indexOf(t);if(n!==-1&&e.indexOf(".")!==-1){let r=e.substring(n+t.length);return r=r.replace("[",""),r.replace("]","")}return e}function Nx(e){e=e.trim(),e.match(/^(.*:\/\/)(.*)/m)&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2")),e=Rx(e),ia(e)&&e.indexOf("[")===-1&&(e=`[${e}]`);const t=ia(e)?e.match(/(]:)(\d+)/):e.match(/(:)(\d+)/),n=t&&t.length===3&&t[1]&&t[2]?parseInt(t[2]):4222,r=n===80?"https":"http",s=new URL(`${r}://${e}`);s.port=`${n}`;let i=s.hostname;return i.charAt(0)==="["&&(i=i.substring(1,i.length-1)),{listen:s.host,hostname:i,port:n}}class ds{constructor(t,n=!1){g(this,"src");g(this,"listen");g(this,"hostname");g(this,"port");g(this,"didConnect");g(this,"reconnects");g(this,"lastConnect");g(this,"gossiped");g(this,"tlsName");g(this,"resolves");this.src=t,this.tlsName="";const r=Nx(t);this.listen=r.listen,this.hostname=r.hostname,this.port=r.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=n}toString(){return this.listen}async resolve(t){if(!t.fn)return[this];const n=[];if(sa(this.hostname))return[this];{const r=await t.fn(this.hostname);t.debug&&console.log(`resolve ${this.hostname} = ${r.join(",")}`);for(const s of r){const i=this.port===80?"https":"http",o=new URL(`${i}://${ia(s)?"["+s+"]":s}`);o.port=`${this.port}`;const a=new ds(o.host,!1);a.tlsName=this.hostname,n.push(a)}}return t.randomize&&fh(n),this.resolves=n,n}}class Lx{constructor(t=[],n={}){g(this,"firstSelect");g(this,"servers");g(this,"currentServer");g(this,"tlsName");g(this,"randomize");this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=n.randomize||!1;const r=So();t&&(t.forEach(s=>{s=r?r(s):s,this.servers.push(new ds(s))}),this.randomize&&(this.servers=fh(this.servers))),this.servers.length===0&&this.addServer(`${ra}:${dh()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){const t=this.getCurrentServer();sa(t.hostname)||(this.tlsName=t.hostname,this.servers.forEach(n=>{n.gossiped&&(n.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(t,n=!1){const r=So();t=r?r(t):t;const s=new ds(t,n);sa(s.hostname)&&(s.tlsName=this.tlsName),this.servers.push(s)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const t=this.servers.shift();return t&&(this.servers.push(t),this.currentServer=t),t}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(t){if(t){const n=this.servers.indexOf(t);this.servers.splice(n,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(t){const n=[];let r=[];const s=So(),i=new Map;t.connect_urls&&t.connect_urls.length>0&&t.connect_urls.forEach(a=>{a=s?s(a):a;const c=new ds(a,!0);i.set(a,c)});const o=[];return this.servers.forEach((a,c)=>{const l=a.listen;a.gossiped&&this.currentServer.listen!==l&&i.get(l)===void 0&&o.push(c),i.delete(l)}),o.reverse(),o.forEach(a=>{const c=this.servers.splice(a,1);r=r.concat(c[0].listen)}),i.forEach((a,c)=>{this.servers.push(a),n.push(c)}),{added:n,deleted:r}}}class dt{constructor(){g(this,"inflight");g(this,"processed");g(this,"received");g(this,"noIterator");g(this,"iterClosed");g(this,"done");g(this,"signal");g(this,"yields");g(this,"filtered");g(this,"pendingFiltered");g(this,"ingestionFilterFn");g(this,"protocolFilterFn");g(this,"dispatchedFn");g(this,"ctx");g(this,"_data");g(this,"err");g(this,"time");g(this,"yielding");this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=Ze(),this.yields=[],this.iterClosed=Ze(),this.time=0,this.yielding=!1}[Symbol.asyncIterator](){return this.iterate()}push(t){if(this.done)return;if(typeof t=="function"){this.yields.push(t),this.signal.resolve();return}const{ingest:n,protocol:r}=this.ingestionFilterFn?this.ingestionFilterFn(t,this.ctx||this):{ingest:!0,protocol:!1};n&&(r&&(this.filtered++,this.pendingFiltered++),this.yields.push(t),this.signal.resolve())}async*iterate(){if(this.noIterator)throw new ge("unsupported iterator",se.ApiError);if(this.yielding)throw new ge("already yielding",se.ApiError);this.yielding=!0;try{for(;;){if(this.yields.length===0&&await this.signal,this.err)throw this.err;const t=this.yields;this.inflight=t.length,this.yields=[];for(let n=0;n<t.length;n++){if(typeof t[n]=="function"){const s=t[n];try{s()}catch(i){throw i}if(this.err)throw this.err;continue}if(this.protocolFilterFn?this.protocolFilterFn(t[n]):!0){this.processed++;const s=Date.now();yield t[n],this.time=Date.now()-s,this.dispatchedFn&&t[n]&&this.dispatchedFn(t[n])}else this.pendingFiltered--;this.inflight--}if(this.done)break;this.yields.length===0&&(t.length=0,this.yields=t,this.signal=Ze())}}finally{this.stop()}}stop(t){this.done||(this.err=t,this.done=!0,this.signal.resolve(),this.iterClosed.resolve())}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}function Ql(e){let r=!0;const s=new Array(e.length);for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o===58||o<33||o>126)throw new ge(`'${e[i]}' is not a valid character for a header key`,se.BadHeader);r&&97<=o&&o<=122?o-=32:!r&&65<=o&&o<=90&&(o+=32),s[i]=o,r=o==45}return String.fromCharCode(...s)}function In(e=0,t=""){if(e===0&&t!==""||e>0&&t==="")throw new Error("setting status requires both code and description");return new Wn(e,t)}const ko="NATS/1.0";class Wn{constructor(t=0,n=""){g(this,"_code");g(this,"headers");g(this,"_description");this._code=t,this._description=n,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(t){if(t&&this.headers.size===t.headers.size&&this._code===t._code){for(const[n,r]of this.headers){const s=t.values(n);if(r.length!==s.length)return!1;const i=[...r].sort(),o=[...s].sort();for(let a=0;a<i.length;a++)if(i[a]!==o[a])return!1}return!0}return!1}static decode(t){const n=new Wn,s=qt.decode(t).split(`\r
`),i=s[0];if(i!==ko){let o=i.replace(ko,"").trim();if(o.length>0){n._code=parseInt(o,10),isNaN(n._code)&&(n._code=0);const a=n._code.toString();o=o.replace(a,""),n._description=o.trim()}}return s.length>=1&&s.slice(1).map(o=>{if(o){const a=o.indexOf(":");if(a>-1){const c=o.slice(0,a),l=o.slice(a+1).trim();n.append(c,l)}}}),n}toString(){if(this.headers.size===0&&this._code===0)return"";let t=ko;this._code>0&&this._description!==""&&(t+=` ${this._code} ${this._description}`);for(const[n,r]of this.headers)for(let s=0;s<r.length;s++)t=`${t}\r
${n}: ${r[s]}`;return`${t}\r
\r
`}encode(){return yr.encode(this.toString())}static validHeaderValue(t){if(/[\r\n]/.test(t))throw new ge("invalid header value - \\r and \\n are not allowed.",se.BadHeader);return t.trim()}keys(){const t=[];for(const n of this.headers.keys())t.push(n);return t}findKeys(t,n=$t.Exact){const r=this.keys();switch(n){case $t.Exact:return r.filter(s=>s===t);case $t.CanonicalMIME:return t=Ql(t),r.filter(s=>s===t);default:{const s=t.toLowerCase();return r.filter(i=>s===i.toLowerCase())}}}get(t,n=$t.Exact){const r=this.findKeys(t,n);if(r.length){const s=this.headers.get(r[0]);if(s)return Array.isArray(s)?s[0]:s}return""}last(t,n=$t.Exact){const r=this.findKeys(t,n);if(r.length){const s=this.headers.get(r[0]);if(s)return Array.isArray(s)?s[s.length-1]:s}return""}has(t,n=$t.Exact){return this.findKeys(t,n).length>0}set(t,n,r=$t.Exact){this.delete(t,r),this.append(t,n,r)}append(t,n,r=$t.Exact){const s=Ql(t);r===$t.CanonicalMIME&&(t=s);const i=this.findKeys(t,r);t=i.length>0?i[0]:t;const o=Wn.validHeaderValue(n);let a=this.headers.get(t);a||(a=[],this.headers.set(t,a)),a.push(o)}values(t,n=$t.Exact){const r=[];return this.findKeys(t,n).forEach(i=>{const o=this.headers.get(i);o&&r.push(...o)}),r}delete(t,n=$t.Exact){this.findKeys(t,n).forEach(s=>{this.headers.delete(s)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){const t={};return this.keys().forEach(n=>{t[n]=this.values(n)}),t}get code(){return this._code}get description(){return this._description}static fromRecord(t){const n=new Wn;for(const r in t)n.headers.set(r,t[r]);return n}}function oa(){return{encode(e){return yr.encode(e)},decode(e){return qt.decode(e)}}}function sn(e){return{encode(t){try{return t===void 0&&(t=null),yr.encode(JSON.stringify(t))}catch(n){throw ge.errorForCode(se.BadJson,n)}},decode(t){try{return JSON.parse(qt.decode(t),e)}catch(n){throw ge.errorForCode(se.BadJson,n)}}}}function _h(e){var t;return e&&e.data.length===0&&((t=e.headers)==null?void 0:t.code)===503?ge.errorForCode(se.NoResponders):null}class Ka{constructor(t,n,r){g(this,"_headers");g(this,"_msg");g(this,"_rdata");g(this,"_reply");g(this,"_subject");g(this,"publisher");this._msg=t,this._rdata=n,this.publisher=r}get subject(){return this._subject?this._subject:(this._subject=qt.decode(this._msg.subject),this._subject)}get reply(){return this._reply?this._reply:(this._reply=qt.decode(this._msg.reply),this._reply)}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const t=this._rdata.subarray(0,this._msg.hdr);this._headers=Wn.decode(t)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(t=Ht,n){return this.reply?(this.publisher.publish(this.reply,t,n),!0):!1}size(){var s;const t=this._msg.subject.length,n=((s=this._msg.reply)==null?void 0:s.length)||0,r=this._msg.size===-1?0:this._msg.size;return t+n+r}json(t){return sn(t).decode(this.data)}string(){return qt.decode(this.data)}}g(Ka,"jc");class Fx{constructor(){g(this,"baseInbox");g(this,"reqs");this.reqs=new Map}size(){return this.reqs.size}init(t){return this.baseInbox=`${yn(t)}.`,this.baseInbox}add(t){isNaN(t.received)||(t.received=0),this.reqs.set(t.token,t)}get(t){return this.reqs.get(t)}cancel(t){this.reqs.delete(t.token)}getToken(t){const n=t.subject||"";return n.indexOf(this.baseInbox)===0?n.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(t,n){if(n&&n.permissionContext){if(t)return this.all().forEach(s=>{s.resolver(n,{})}),!0;const r=n.permissionContext;if(r.operation==="publish"){const s=this.all().find(i=>i.requestSubject===r.subject);if(s)return s.resolver(n,{}),!0}}return!1}dispatcher(){return(t,n)=>{const r=this.getToken(n);if(r){const s=this.get(r);s&&(t===null&&n.headers&&(t=_h(n)),s.resolver(t,n))}}}close(){const t=ge.errorForCode(se.Timeout);this.reqs.forEach(n=>{n.resolver(t,{})})}}class jx{constructor(t,n,r){g(this,"ph");g(this,"interval");g(this,"maxOut");g(this,"timer");g(this,"pendings");this.ph=t,this.interval=n,this.maxOut=r,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(t){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),t&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:Tr.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut){this.cancel(!0);return}const t=Ze();this.ph.flush(t).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(t),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(t=>(t.resolve(),!1))}}class $x extends Error{constructor(t){super(t),this.name="AssertionError"}}function Dx(e,t="Assertion failed."){if(!e)throw new $x(t)}const Xl=32*1024,Oo=2**32-2;function ei(e,t,n=0){const r=t.byteLength-n;return e.byteLength>r&&(e=e.subarray(0,r)),t.set(e,n),e.byteLength}class Co{constructor(t){g(this,"_buf");g(this,"_off");if(this._off=0,t==null){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(t)}bytes(t={copy:!0}){return t.copy===!1?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(t){if(t===0){this.reset();return}if(t<0||t>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+t)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(t){const n=this._buf.byteLength;return t<=this.capacity-n?(this._reslice(n+t),n):-1}_reslice(t){Dx(t<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,t)}readByte(){const t=new Uint8Array(1);return this.read(t)?t[0]:null}read(t){if(this.empty())return this.reset(),t.byteLength===0?0:null;const n=ei(this._buf.subarray(this._off),t);return this._off+=n,n}writeByte(t){return this.write(Uint8Array.of(t))}writeString(t){return this.write(yr.encode(t))}write(t){const n=this._grow(t.byteLength);return ei(t,this._buf,n)}_grow(t){const n=this.length;n===0&&this._off!==0&&this.reset();const r=this._tryGrowByReslice(t);if(r>=0)return r;const s=this.capacity;if(t<=Math.floor(s/2)-n)ei(this._buf.subarray(this._off),this._buf);else{if(s+t>Oo)throw new Error("The buffer cannot be grown beyond the maximum size.");{const i=new Uint8Array(Math.min(2*s+t,Oo));ei(this._buf.subarray(this._off),i),this._buf=i}}return this._off=0,this._reslice(Math.min(n+t,Oo)),n}grow(t){if(t<0)throw Error("Buffer._grow: negative count");const n=this._grow(t);this._reslice(n)}readFrom(t){let n=0;const r=new Uint8Array(Xl);for(;;){const s=this.capacity-this.length<Xl,i=s?r:new Uint8Array(this._buf.buffer,this.length),o=t.read(i);if(o===null)return n;s?this.write(i.subarray(0,o)):this._reslice(this.length+o),n+=o}}}var At;(function(e){e[e.OK=0]="OK",e[e.ERR=1]="ERR",e[e.MSG=2]="MSG",e[e.INFO=3]="INFO",e[e.PING=4]="PING",e[e.PONG=5]="PONG"})(At||(At={}));function Zl(){const e={};return e.sid=-1,e.hdr=-1,e.size=-1,e}const Ux=48;class eu{constructor(t){g(this,"dispatcher");g(this,"state");g(this,"as");g(this,"drop");g(this,"hdr");g(this,"ma");g(this,"argBuf");g(this,"msgBuf");this.dispatcher=t,this.state=ce.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(t){let n;for(n=0;n<t.length;n++){const r=t[n];switch(this.state){case ce.OP_START:switch(r){case le.M:case le.m:this.state=ce.OP_M,this.hdr=-1,this.ma=Zl();break;case le.H:case le.h:this.state=ce.OP_H,this.hdr=0,this.ma=Zl();break;case le.P:case le.p:this.state=ce.OP_P;break;case le.PLUS:this.state=ce.OP_PLUS;break;case le.MINUS:this.state=ce.OP_MINUS;break;case le.I:case le.i:this.state=ce.OP_I;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_H:switch(r){case le.M:case le.m:this.state=ce.OP_M;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_M:switch(r){case le.S:case le.s:this.state=ce.OP_MS;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MS:switch(r){case le.G:case le.g:this.state=ce.OP_MSG;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MSG:switch(r){case le.SPACE:case le.TAB:this.state=ce.OP_MSG_SPC;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MSG_SPC:switch(r){case le.SPACE:case le.TAB:continue;default:this.state=ce.MSG_ARG,this.as=n}break;case ce.MSG_ARG:switch(r){case le.CR:this.drop=1;break;case le.NL:{const s=this.argBuf?this.argBuf.bytes():t.subarray(this.as,n-this.drop);this.processMsgArgs(s),this.drop=0,this.as=n+1,this.state=ce.MSG_PAYLOAD,n=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;case ce.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const s=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:At.MSG,msg:this.ma,data:s}),this.argBuf=void 0,this.msgBuf=void 0,this.state=ce.MSG_END}else{let s=this.ma.size-this.msgBuf.length;const i=t.length-n;i<s&&(s=i),s>0?(this.msgBuf.write(t.subarray(n,n+s)),n=n+s-1):this.msgBuf.writeByte(r)}else n-this.as>=this.ma.size&&(this.dispatcher.push({kind:At.MSG,msg:this.ma,data:t.subarray(this.as,n)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=ce.MSG_END);break;case ce.MSG_END:switch(r){case le.NL:this.drop=0,this.as=n+1,this.state=ce.OP_START;break;default:continue}break;case ce.OP_PLUS:switch(r){case le.O:case le.o:this.state=ce.OP_PLUS_O;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PLUS_O:switch(r){case le.K:case le.k:this.state=ce.OP_PLUS_OK;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PLUS_OK:switch(r){case le.NL:this.dispatcher.push({kind:At.OK}),this.drop=0,this.state=ce.OP_START;break}break;case ce.OP_MINUS:switch(r){case le.E:case le.e:this.state=ce.OP_MINUS_E;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MINUS_E:switch(r){case le.R:case le.r:this.state=ce.OP_MINUS_ER;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MINUS_ER:switch(r){case le.R:case le.r:this.state=ce.OP_MINUS_ERR;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MINUS_ERR:switch(r){case le.SPACE:case le.TAB:this.state=ce.OP_MINUS_ERR_SPC;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_MINUS_ERR_SPC:switch(r){case le.SPACE:case le.TAB:continue;default:this.state=ce.MINUS_ERR_ARG,this.as=n}break;case ce.MINUS_ERR_ARG:switch(r){case le.CR:this.drop=1;break;case le.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=t.subarray(this.as,n-this.drop),this.dispatcher.push({kind:At.ERR,data:s}),this.drop=0,this.as=n+1,this.state=ce.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(r))}break;case ce.OP_P:switch(r){case le.I:case le.i:this.state=ce.OP_PI;break;case le.O:case le.o:this.state=ce.OP_PO;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PO:switch(r){case le.N:case le.n:this.state=ce.OP_PON;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PON:switch(r){case le.G:case le.g:this.state=ce.OP_PONG;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PONG:switch(r){case le.NL:this.dispatcher.push({kind:At.PONG}),this.drop=0,this.state=ce.OP_START;break}break;case ce.OP_PI:switch(r){case le.N:case le.n:this.state=ce.OP_PIN;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PIN:switch(r){case le.G:case le.g:this.state=ce.OP_PING;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_PING:switch(r){case le.NL:this.dispatcher.push({kind:At.PING}),this.drop=0,this.state=ce.OP_START;break}break;case ce.OP_I:switch(r){case le.N:case le.n:this.state=ce.OP_IN;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_IN:switch(r){case le.F:case le.f:this.state=ce.OP_INF;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_INF:switch(r){case le.O:case le.o:this.state=ce.OP_INFO;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_INFO:switch(r){case le.SPACE:case le.TAB:this.state=ce.OP_INFO_SPC;break;default:throw this.fail(t.subarray(n))}break;case ce.OP_INFO_SPC:switch(r){case le.SPACE:case le.TAB:continue;default:this.state=ce.INFO_ARG,this.as=n}break;case ce.INFO_ARG:switch(r){case le.CR:this.drop=1;break;case le.NL:{let s;this.argBuf?(s=this.argBuf.bytes(),this.argBuf=void 0):s=t.subarray(this.as,n-this.drop),this.dispatcher.push({kind:At.INFO,data:s}),this.drop=0,this.as=n+1,this.state=ce.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(r)}break;default:throw this.fail(t.subarray(n))}}(this.state===ce.MSG_ARG||this.state===ce.MINUS_ERR_ARG||this.state===ce.INFO_ARG)&&!this.argBuf&&(this.argBuf=new Co(t.subarray(this.as,n-this.drop))),this.state===ce.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new Co(t.subarray(this.as)))}cloneMsgArg(){const t=this.ma.subject.length,n=this.ma.reply?this.ma.reply.length:0,r=new Uint8Array(t+n);r.set(this.ma.subject),this.ma.reply&&r.set(this.ma.reply,t),this.argBuf=new Co(r),this.ma.subject=r.subarray(0,t),this.ma.reply&&(this.ma.reply=r.subarray(t))}processMsgArgs(t){if(this.hdr>=0)return this.processHeaderMsgArgs(t);const n=[];let r=-1;for(let s=0;s<t.length;s++)switch(t[s]){case le.SPACE:case le.TAB:case le.CR:case le.NL:r>=0&&(n.push(t.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(t.subarray(r)),n.length){case 3:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(n[2]);break;case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.size=this.protoParseInt(n[3]);break;default:throw this.fail(t,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(t,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(t,"processMsgArgs Bad or Missing Size Error")}fail(t,n=""){return n?n=`${n} [${this.state}]`:n=`parse error [${this.state}]`,new Error(`${n}: ${qt.decode(t)}`)}processHeaderMsgArgs(t){const n=[];let r=-1;for(let s=0;s<t.length;s++)switch(t[s]){case le.SPACE:case le.TAB:case le.CR:case le.NL:r>=0&&(n.push(t.subarray(r,s)),r=-1);break;default:r<0&&(r=s)}switch(r>=0&&n.push(t.subarray(r)),n.length){case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(n[2]),this.ma.size=this.protoParseInt(n[3]);break;case 5:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.hdr=this.protoParseInt(n[3]),this.ma.size=this.protoParseInt(n[4]);break;default:throw this.fail(t,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(t,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(t){if(t.length===0)return-1;let n=0;for(let r=0;r<t.length;r++){if(t[r]<48||t[r]>57)return-1;n=n*10+(t[r]-Ux)}return n}}var ce;(function(e){e[e.OP_START=0]="OP_START",e[e.OP_PLUS=1]="OP_PLUS",e[e.OP_PLUS_O=2]="OP_PLUS_O",e[e.OP_PLUS_OK=3]="OP_PLUS_OK",e[e.OP_MINUS=4]="OP_MINUS",e[e.OP_MINUS_E=5]="OP_MINUS_E",e[e.OP_MINUS_ER=6]="OP_MINUS_ER",e[e.OP_MINUS_ERR=7]="OP_MINUS_ERR",e[e.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",e[e.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",e[e.OP_M=10]="OP_M",e[e.OP_MS=11]="OP_MS",e[e.OP_MSG=12]="OP_MSG",e[e.OP_MSG_SPC=13]="OP_MSG_SPC",e[e.MSG_ARG=14]="MSG_ARG",e[e.MSG_PAYLOAD=15]="MSG_PAYLOAD",e[e.MSG_END=16]="MSG_END",e[e.OP_H=17]="OP_H",e[e.OP_P=18]="OP_P",e[e.OP_PI=19]="OP_PI",e[e.OP_PIN=20]="OP_PIN",e[e.OP_PING=21]="OP_PING",e[e.OP_PO=22]="OP_PO",e[e.OP_PON=23]="OP_PON",e[e.OP_PONG=24]="OP_PONG",e[e.OP_I=25]="OP_I",e[e.OP_IN=26]="OP_IN",e[e.OP_INF=27]="OP_INF",e[e.OP_INFO=28]="OP_INFO",e[e.OP_INFO_SPC=29]="OP_INFO_SPC",e[e.INFO_ARG=30]="INFO_ARG"})(ce||(ce={}));var le;(function(e){e[e.CR=13]="CR",e[e.E=69]="E",e[e.e=101]="e",e[e.F=70]="F",e[e.f=102]="f",e[e.G=71]="G",e[e.g=103]="g",e[e.H=72]="H",e[e.h=104]="h",e[e.I=73]="I",e[e.i=105]="i",e[e.K=75]="K",e[e.k=107]="k",e[e.M=77]="M",e[e.m=109]="m",e[e.MINUS=45]="MINUS",e[e.N=78]="N",e[e.n=110]="n",e[e.NL=10]="NL",e[e.O=79]="O",e[e.o=111]="o",e[e.P=80]="P",e[e.p=112]="p",e[e.PLUS=43]="PLUS",e[e.R=82]="R",e[e.r=114]="r",e[e.S=83]="S",e[e.s=115]="s",e[e.SPACE=32]="SPACE",e[e.TAB=9]="TAB"})(le||(le={}));function hr(e=""){const t=e.match(/(\d+).(\d+).(\d+)/);if(t)return{major:parseInt(t[1]),minor:parseInt(t[2]),micro:parseInt(t[3])};throw new Error(`'${e}' is not a semver value`)}function aa(e,t){return e.major<t.major?-1:e.major>t.major?1:e.minor<t.minor?-1:e.minor>t.minor?1:e.micro<t.micro?-1:e.micro>t.micro?1:0}var $e;(function(e){e.JS_KV="js_kv",e.JS_OBJECTSTORE="js_objectstore",e.JS_PULL_MAX_BYTES="js_pull_max_bytes",e.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",e.JS_ALLOW_DIRECT="js_allow_direct",e.JS_MULTIPLE_CONSUMER_FILTER="js_multiple_consumer_filter",e.JS_SIMPLIFICATION="js_simplification",e.JS_STREAM_CONSUMER_METADATA="js_stream_consumer_metadata",e.JS_CONSUMER_FILTER_SUBJECTS="js_consumer_filter_subjects",e.JS_STREAM_FIRST_SEQ="js_stream_first_seq",e.JS_STREAM_SUBJECT_TRANSFORM="js_stream_subject_transform",e.JS_STREAM_SOURCE_SUBJECT_TRANSFORM="js_stream_source_subject_transform",e.JS_STREAM_COMPRESSION="js_stream_compression",e.JS_DEFAULT_CONSUMER_LIMITS="js_default_consumer_limits"})($e||($e={}));class Bx{constructor(t){g(this,"server");g(this,"features");g(this,"disabled");this.features=new Map,this.disabled=[],this.update(t)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(t){this.disabled.push(t),this.update(this.server)}isDisabled(t){return this.disabled.indexOf(t)!==-1}update(t){typeof t=="string"&&(t=hr(t)),this.server=t,this.set($e.JS_KV,"2.6.2"),this.set($e.JS_OBJECTSTORE,"2.6.3"),this.set($e.JS_PULL_MAX_BYTES,"2.8.3"),this.set($e.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set($e.JS_ALLOW_DIRECT,"2.9.0"),this.set($e.JS_MULTIPLE_CONSUMER_FILTER,"2.10.0"),this.set($e.JS_SIMPLIFICATION,"2.9.4"),this.set($e.JS_STREAM_CONSUMER_METADATA,"2.10.0"),this.set($e.JS_CONSUMER_FILTER_SUBJECTS,"2.10.0"),this.set($e.JS_STREAM_FIRST_SEQ,"2.10.0"),this.set($e.JS_STREAM_SUBJECT_TRANSFORM,"2.10.0"),this.set($e.JS_STREAM_SOURCE_SUBJECT_TRANSFORM,"2.10.0"),this.set($e.JS_STREAM_COMPRESSION,"2.10.0"),this.set($e.JS_DEFAULT_CONSUMER_LIMITS,"2.10.0"),this.disabled.forEach(n=>{this.features.delete(n)})}set(t,n){this.features.set(t,{min:n,ok:aa(this.server,hr(n))>=0})}get(t){return this.features.get(t)||{min:"unknown",ok:!1}}supports(t){var n;return((n=this.get(t))==null?void 0:n.ok)||!1}require(t){return typeof t=="string"&&(t=hr(t)),aa(this.server,t)>=0}}(function(e){var t=function(p,y){this.hi=p|0,this.lo=y|0},n=function(p){var y,_=new Float64Array(16);if(p)for(y=0;y<p.length;y++)_[y]=p[y];return _},r=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=n(),a=n([1]),c=n([56129,1]),l=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(p,y){return p<<y|p>>>32-y}function C(p,y){var _=p[y+3]&255;return _=_<<8|p[y+2]&255,_=_<<8|p[y+1]&255,_<<8|p[y+0]&255}function N(p,y){var _=p[y]<<24|p[y+1]<<16|p[y+2]<<8|p[y+3],v=p[y+4]<<24|p[y+5]<<16|p[y+6]<<8|p[y+7];return new t(_,v)}function k(p,y,_){var v;for(v=0;v<4;v++)p[y+v]=_&255,_>>>=8}function P(p,y,_){p[y]=_.hi>>24&255,p[y+1]=_.hi>>16&255,p[y+2]=_.hi>>8&255,p[y+3]=_.hi&255,p[y+4]=_.lo>>24&255,p[y+5]=_.lo>>16&255,p[y+6]=_.lo>>8&255,p[y+7]=_.lo&255}function L(p,y,_,v,O){var M,H=0;for(M=0;M<O;M++)H|=p[y+M]^_[v+M];return(1&H-1>>>8)-1}function U(p,y,_,v){return L(p,y,_,v,16)}function V(p,y,_,v){return L(p,y,_,v,32)}function A(p,y,_,v,O){var M=new Uint32Array(16),H=new Uint32Array(16),Y=new Uint32Array(16),j=new Uint32Array(4),z,_e,Re;for(z=0;z<4;z++)H[5*z]=C(v,4*z),H[1+z]=C(_,4*z),H[6+z]=C(y,4*z),H[11+z]=C(_,16+4*z);for(z=0;z<16;z++)Y[z]=H[z];for(z=0;z<20;z++){for(_e=0;_e<4;_e++){for(Re=0;Re<4;Re++)j[Re]=H[(5*_e+4*Re)%16];for(j[1]^=E(j[0]+j[3]|0,7),j[2]^=E(j[1]+j[0]|0,9),j[3]^=E(j[2]+j[1]|0,13),j[0]^=E(j[3]+j[2]|0,18),Re=0;Re<4;Re++)M[4*_e+(_e+Re)%4]=j[Re]}for(Re=0;Re<16;Re++)H[Re]=M[Re]}if(O){for(z=0;z<16;z++)H[z]=H[z]+Y[z]|0;for(z=0;z<4;z++)H[5*z]=H[5*z]-C(v,4*z)|0,H[6+z]=H[6+z]-C(y,4*z)|0;for(z=0;z<4;z++)k(p,4*z,H[5*z]),k(p,16+4*z,H[6+z])}else for(z=0;z<16;z++)k(p,4*z,H[z]+Y[z]|0)}function he(p,y,_,v){return A(p,y,_,v,!1),0}function W(p,y,_,v){return A(p,y,_,v,!0),0}var ue=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function me(p,y,_,v,O,M,H){var Y=new Uint8Array(16),j=new Uint8Array(64),z,_e;if(!O)return 0;for(_e=0;_e<16;_e++)Y[_e]=0;for(_e=0;_e<8;_e++)Y[_e]=M[_e];for(;O>=64;){for(he(j,Y,H,ue),_e=0;_e<64;_e++)p[y+_e]=(_?_[v+_e]:0)^j[_e];for(z=1,_e=8;_e<16;_e++)z=z+(Y[_e]&255)|0,Y[_e]=z&255,z>>>=8;O-=64,y+=64,_&&(v+=64)}if(O>0)for(he(j,Y,H,ue),_e=0;_e<O;_e++)p[y+_e]=(_?_[v+_e]:0)^j[_e];return 0}function re(p,y,_,v,O){return me(p,y,null,0,_,v,O)}function ie(p,y,_,v,O){var M=new Uint8Array(32);return W(M,v,O,ue),re(p,y,_,v.subarray(16),M)}function ke(p,y,_,v,O,M,H){var Y=new Uint8Array(32);return W(Y,M,H,ue),me(p,y,_,v,O,M.subarray(16),Y)}function Te(p,y){var _,v=0;for(_=0;_<17;_++)v=v+(p[_]+y[_]|0)|0,p[_]=v&255,v>>>=8}var Oe=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function Pe(p,y,_,v,O,M){var H,Y,j,z,_e=new Uint32Array(17),Re=new Uint32Array(17),Ye=new Uint32Array(17),Xt=new Uint32Array(17),Er=new Uint32Array(17);for(j=0;j<17;j++)Re[j]=Ye[j]=0;for(j=0;j<16;j++)Re[j]=M[j];for(Re[3]&=15,Re[4]&=252,Re[7]&=15,Re[8]&=252,Re[11]&=15,Re[12]&=252,Re[15]&=15;O>0;){for(j=0;j<17;j++)Xt[j]=0;for(j=0;j<16&&j<O;++j)Xt[j]=_[v+j];for(Xt[j]=1,v+=j,O-=j,Te(Ye,Xt),Y=0;Y<17;Y++)for(_e[Y]=0,j=0;j<17;j++)_e[Y]=_e[Y]+Ye[j]*(j<=Y?Re[Y-j]:320*Re[Y+17-j]|0)|0|0;for(Y=0;Y<17;Y++)Ye[Y]=_e[Y];for(z=0,j=0;j<16;j++)z=z+Ye[j]|0,Ye[j]=z&255,z>>>=8;for(z=z+Ye[16]|0,Ye[16]=z&3,z=5*(z>>>2)|0,j=0;j<16;j++)z=z+Ye[j]|0,Ye[j]=z&255,z>>>=8;z=z+Ye[16]|0,Ye[16]=z}for(j=0;j<17;j++)Er[j]=Ye[j];for(Te(Ye,Oe),H=-(Ye[16]>>>7)|0,j=0;j<17;j++)Ye[j]^=H&(Er[j]^Ye[j]);for(j=0;j<16;j++)Xt[j]=M[j+16];for(Xt[16]=0,Te(Ye,Xt),j=0;j<16;j++)p[y+j]=Ye[j];return 0}function ve(p,y,_,v,O,M){var H=new Uint8Array(16);return Pe(H,0,_,v,O,M),U(p,y,H,0)}function Se(p,y,_,v,O){var M;if(_<32)return-1;for(ke(p,0,y,0,_,v,O),Pe(p,16,p,32,_-32,p),M=0;M<16;M++)p[M]=0;return 0}function ze(p,y,_,v,O){var M,H=new Uint8Array(32);if(_<32||(ie(H,0,32,v,O),ve(y,16,y,32,_-32,H)!==0))return-1;for(ke(p,0,y,0,_,v,O),M=0;M<32;M++)p[M]=0;return 0}function m(p,y){var _;for(_=0;_<16;_++)p[_]=y[_]|0}function S(p){var y,_;for(_=0;_<16;_++)p[_]+=65536,y=Math.floor(p[_]/65536),p[(_+1)*(_<15?1:0)]+=y-1+37*(y-1)*(_===15?1:0),p[_]-=y*65536}function Z(p,y,_){for(var v,O=~(_-1),M=0;M<16;M++)v=O&(p[M]^y[M]),p[M]^=v,y[M]^=v}function x(p,y){var _,v,O,M=n(),H=n();for(_=0;_<16;_++)H[_]=y[_];for(S(H),S(H),S(H),v=0;v<2;v++){for(M[0]=H[0]-65517,_=1;_<15;_++)M[_]=H[_]-65535-(M[_-1]>>16&1),M[_-1]&=65535;M[15]=H[15]-32767-(M[14]>>16&1),O=M[15]>>16&1,M[14]&=65535,Z(H,M,1-O)}for(_=0;_<16;_++)p[2*_]=H[_]&255,p[2*_+1]=H[_]>>8}function pe(p,y){var _=new Uint8Array(32),v=new Uint8Array(32);return x(_,p),x(v,y),V(_,0,v,0)}function we(p){var y=new Uint8Array(32);return x(y,p),y[0]&1}function ae(p,y){var _;for(_=0;_<16;_++)p[_]=y[2*_]+(y[2*_+1]<<8);p[15]&=32767}function I(p,y,_){var v;for(v=0;v<16;v++)p[v]=y[v]+_[v]|0}function q(p,y,_){var v;for(v=0;v<16;v++)p[v]=y[v]-_[v]|0}function F(p,y,_){var v,O,M=new Float64Array(31);for(v=0;v<31;v++)M[v]=0;for(v=0;v<16;v++)for(O=0;O<16;O++)M[v+O]+=y[v]*_[O];for(v=0;v<15;v++)M[v]+=38*M[v+16];for(v=0;v<16;v++)p[v]=M[v];S(p),S(p)}function G(p,y){F(p,y,y)}function de(p,y){var _=n(),v;for(v=0;v<16;v++)_[v]=y[v];for(v=253;v>=0;v--)G(_,_),v!==2&&v!==4&&F(_,_,y);for(v=0;v<16;v++)p[v]=_[v]}function Ee(p,y){var _=n(),v;for(v=0;v<16;v++)_[v]=y[v];for(v=250;v>=0;v--)G(_,_),v!==1&&F(_,_,y);for(v=0;v<16;v++)p[v]=_[v]}function b(p,y,_){var v=new Uint8Array(32),O=new Float64Array(80),M,H,Y=n(),j=n(),z=n(),_e=n(),Re=n(),Ye=n();for(H=0;H<31;H++)v[H]=y[H];for(v[31]=y[31]&127|64,v[0]&=248,ae(O,_),H=0;H<16;H++)j[H]=O[H],_e[H]=Y[H]=z[H]=0;for(Y[0]=_e[0]=1,H=254;H>=0;--H)M=v[H>>>3]>>>(H&7)&1,Z(Y,j,M),Z(z,_e,M),I(Re,Y,z),q(Y,Y,z),I(z,j,_e),q(j,j,_e),G(_e,Re),G(Ye,Y),F(Y,z,Y),F(z,j,Re),I(Re,Y,z),q(Y,Y,z),G(j,Y),q(z,_e,Ye),F(Y,z,c),I(Y,Y,_e),F(z,z,Y),F(Y,_e,Ye),F(_e,j,O),G(j,Re),Z(Y,j,M),Z(z,_e,M);for(H=0;H<16;H++)O[H+16]=Y[H],O[H+32]=z[H],O[H+48]=j[H],O[H+64]=_e[H];var Xt=O.subarray(32),Er=O.subarray(16);return de(Xt,Xt),F(Er,Er,Xt),x(p,Er),0}function w(p,y){return b(p,y,i)}function R(p,y){return r(y,32),w(p,y)}function B(p,y,_){var v=new Uint8Array(32);return b(v,_,y),W(p,s,v,ue)}var D=Se,Q=ze;function ee(p,y,_,v,O,M){var H=new Uint8Array(32);return B(H,O,M),D(p,y,_,v,H)}function J(p,y,_,v,O,M){var H=new Uint8Array(32);return B(H,O,M),Q(p,y,_,v,H)}function X(){var p=0,y=0,_=0,v=0,O=65535,M,H,Y;for(Y=0;Y<arguments.length;Y++)M=arguments[Y].lo,H=arguments[Y].hi,p+=M&O,y+=M>>>16,_+=H&O,v+=H>>>16;return y+=p>>>16,_+=y>>>16,v+=_>>>16,new t(_&O|v<<16,p&O|y<<16)}function K(p,y){return new t(p.hi>>>y,p.lo>>>y|p.hi<<32-y)}function oe(){var p=0,y=0,_;for(_=0;_<arguments.length;_++)p^=arguments[_].lo,y^=arguments[_].hi;return new t(y,p)}function te(p,y){var _,v,O=32-y;return y<32?(_=p.hi>>>y|p.lo<<O,v=p.lo>>>y|p.hi<<O):y<64&&(_=p.lo>>>y|p.hi<<O,v=p.hi>>>y|p.lo<<O),new t(_,v)}function T(p,y,_){var v=p.hi&y.hi^~p.hi&_.hi,O=p.lo&y.lo^~p.lo&_.lo;return new t(v,O)}function $(p,y,_){var v=p.hi&y.hi^p.hi&_.hi^y.hi&_.hi,O=p.lo&y.lo^p.lo&_.lo^y.lo&_.lo;return new t(v,O)}function fe(p){return oe(te(p,28),te(p,34),te(p,39))}function xe(p){return oe(te(p,14),te(p,18),te(p,41))}function Me(p){return oe(te(p,1),te(p,8),K(p,7))}function je(p){return oe(te(p,19),te(p,61),K(p,6))}var Ve=[new t(1116352408,3609767458),new t(1899447441,602891725),new t(3049323471,3964484399),new t(3921009573,2173295548),new t(961987163,4081628472),new t(1508970993,3053834265),new t(2453635748,2937671579),new t(2870763221,3664609560),new t(3624381080,2734883394),new t(310598401,1164996542),new t(607225278,1323610764),new t(1426881987,3590304994),new t(1925078388,4068182383),new t(2162078206,991336113),new t(2614888103,633803317),new t(3248222580,3479774868),new t(3835390401,2666613458),new t(4022224774,944711139),new t(264347078,2341262773),new t(604807628,2007800933),new t(770255983,1495990901),new t(1249150122,1856431235),new t(1555081692,3175218132),new t(1996064986,2198950837),new t(2554220882,3999719339),new t(2821834349,766784016),new t(2952996808,2566594879),new t(3210313671,3203337956),new t(3336571891,1034457026),new t(3584528711,2466948901),new t(113926993,3758326383),new t(338241895,168717936),new t(666307205,1188179964),new t(773529912,1546045734),new t(1294757372,1522805485),new t(1396182291,2643833823),new t(1695183700,2343527390),new t(1986661051,1014477480),new t(2177026350,1206759142),new t(2456956037,344077627),new t(2730485921,1290863460),new t(2820302411,3158454273),new t(3259730800,3505952657),new t(3345764771,106217008),new t(3516065817,3606008344),new t(3600352804,1432725776),new t(4094571909,1467031594),new t(275423344,851169720),new t(430227734,3100823752),new t(506948616,1363258195),new t(659060556,3750685593),new t(883997877,3785050280),new t(958139571,3318307427),new t(1322822218,3812723403),new t(1537002063,2003034995),new t(1747873779,3602036899),new t(1955562222,1575990012),new t(2024104815,1125592928),new t(2227730452,2716904306),new t(2361852424,442776044),new t(2428436474,593698344),new t(2756734187,3733110249),new t(3204031479,2999351573),new t(3329325298,3815920427),new t(3391569614,3928383900),new t(3515267271,566280711),new t(3940187606,3454069534),new t(4118630271,4000239992),new t(116418474,1914138554),new t(174292421,2731055270),new t(289380356,3203993006),new t(460393269,320620315),new t(685471733,587496836),new t(852142971,1086792851),new t(1017036298,365543100),new t(1126000580,2618297676),new t(1288033470,3409855158),new t(1501505948,4234509866),new t(1607167915,987167468),new t(1816402316,1246189591)];function gt(p,y,_){var v=[],O=[],M=[],H=[],Y,j,z;for(j=0;j<8;j++)v[j]=M[j]=N(p,8*j);for(var _e=0;_>=128;){for(j=0;j<16;j++)H[j]=N(y,8*j+_e);for(j=0;j<80;j++){for(z=0;z<8;z++)O[z]=M[z];for(Y=X(M[7],xe(M[4]),T(M[4],M[5],M[6]),Ve[j],H[j%16]),O[7]=X(Y,fe(M[0]),$(M[0],M[1],M[2])),O[3]=X(O[3],Y),z=0;z<8;z++)M[(z+1)%8]=O[z];if(j%16===15)for(z=0;z<16;z++)H[z]=X(H[z],H[(z+9)%16],Me(H[(z+1)%16]),je(H[(z+14)%16]))}for(j=0;j<8;j++)M[j]=X(M[j],v[j]),v[j]=M[j];_e+=128,_-=128}for(j=0;j<8;j++)P(p,8*j,v[j]);return _}var un=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function Ot(p,y,_){var v=new Uint8Array(64),O=new Uint8Array(256),M,H=_;for(M=0;M<64;M++)v[M]=un[M];for(gt(v,y,_),_%=128,M=0;M<256;M++)O[M]=0;for(M=0;M<_;M++)O[M]=y[H-_+M];for(O[_]=128,_=256-128*(_<112?1:0),O[_-9]=0,P(O,_-8,new t(H/536870912|0,H<<3)),gt(v,O,_),M=0;M<64;M++)p[M]=v[M];return 0}function vn(p,y){var _=n(),v=n(),O=n(),M=n(),H=n(),Y=n(),j=n(),z=n(),_e=n();q(_,p[1],p[0]),q(_e,y[1],y[0]),F(_,_,_e),I(v,p[0],p[1]),I(_e,y[0],y[1]),F(v,v,_e),F(O,p[3],y[3]),F(O,O,u),F(M,p[2],y[2]),I(M,M,M),q(H,v,_),q(Y,M,O),I(j,M,O),I(z,v,_),F(p[0],H,Y),F(p[1],z,j),F(p[2],j,Y),F(p[3],H,z)}function ot(p,y,_){var v;for(v=0;v<4;v++)Z(p[v],y[v],_)}function _t(p,y){var _=n(),v=n(),O=n();de(O,y[2]),F(_,y[0],O),F(v,y[1],O),x(p,v),p[31]^=we(_)<<7}function Mn(p,y,_){var v,O;for(m(p[0],o),m(p[1],a),m(p[2],a),m(p[3],o),O=255;O>=0;--O)v=_[O/8|0]>>(O&7)&1,ot(p,y,v),vn(y,p),vn(p,p),ot(p,y,v)}function xr(p,y){var _=[n(),n(),n(),n()];m(_[0],f),m(_[1],d),m(_[2],a),F(_[3],f,d),Mn(p,_,y)}function Vr(p,y,_){var v=new Uint8Array(64),O=[n(),n(),n(),n()],M;for(_||r(y,32),Ot(v,y,32),v[0]&=248,v[31]&=127,v[31]|=64,xr(O,v),_t(p,O),M=0;M<32;M++)y[M+32]=p[M];return 0}var er=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Wr(p,y){var _,v,O,M;for(v=63;v>=32;--v){for(_=0,O=v-32,M=v-12;O<M;++O)y[O]+=_-16*y[v]*er[O-(v-32)],_=Math.floor((y[O]+128)/256),y[O]-=_*256;y[O]+=_,y[v]=0}for(_=0,O=0;O<32;O++)y[O]+=_-(y[31]>>4)*er[O],_=y[O]>>8,y[O]&=255;for(O=0;O<32;O++)y[O]-=_*er[O];for(v=0;v<32;v++)y[v+1]+=y[v]>>8,p[v]=y[v]&255}function Gr(p){var y=new Float64Array(64),_;for(_=0;_<64;_++)y[_]=p[_];for(_=0;_<64;_++)p[_]=0;Wr(p,y)}function qs(p,y,_,v){var O=new Uint8Array(64),M=new Uint8Array(64),H=new Uint8Array(64),Y,j,z=new Float64Array(64),_e=[n(),n(),n(),n()];Ot(O,v,32),O[0]&=248,O[31]&=127,O[31]|=64;var Re=_+64;for(Y=0;Y<_;Y++)p[64+Y]=y[Y];for(Y=0;Y<32;Y++)p[32+Y]=O[32+Y];for(Ot(H,p.subarray(32),_+32),Gr(H),xr(_e,H),_t(p,_e),Y=32;Y<64;Y++)p[Y]=v[Y];for(Ot(M,p,_+64),Gr(M),Y=0;Y<64;Y++)z[Y]=0;for(Y=0;Y<32;Y++)z[Y]=H[Y];for(Y=0;Y<32;Y++)for(j=0;j<32;j++)z[Y+j]+=M[Y]*O[j];return Wr(p.subarray(32),z),Re}function ne(p,y){var _=n(),v=n(),O=n(),M=n(),H=n(),Y=n(),j=n();return m(p[2],a),ae(p[1],y),G(O,p[1]),F(M,O,l),q(O,O,p[2]),I(M,p[2],M),G(H,M),G(Y,H),F(j,Y,H),F(_,j,O),F(_,_,M),Ee(_,_),F(_,_,O),F(_,_,M),F(_,_,M),F(p[0],_,M),G(v,p[0]),F(v,v,M),pe(v,O)&&F(p[0],p[0],h),G(v,p[0]),F(v,v,M),pe(v,O)?-1:(we(p[0])===y[31]>>7&&q(p[0],o,p[0]),F(p[3],p[0],p[1]),0)}function be(p,y,_,v){var O,M=new Uint8Array(32),H=new Uint8Array(64),Y=[n(),n(),n(),n()],j=[n(),n(),n(),n()];if(_<64||ne(j,v))return-1;for(O=0;O<_;O++)p[O]=y[O];for(O=0;O<32;O++)p[O+32]=v[O];if(Ot(H,p,_),Gr(H),Mn(Y,j,H),xr(j,y.subarray(32)),vn(Y,j),_t(M,Y),_-=64,V(y,0,M,0)){for(O=0;O<_;O++)p[O]=0;return-1}for(O=0;O<_;O++)p[O]=y[O+64];return _}var at=32,bt=24,yt=32,xt=16,wt=32,tr=32,Rn=32,Nn=32,so=32,sc=bt,Nh=yt,Lh=xt,Sn=64,nr=32,wr=64,io=32,oo=64;e.lowlevel={crypto_core_hsalsa20:W,crypto_stream_xor:ke,crypto_stream:ie,crypto_stream_salsa20_xor:me,crypto_stream_salsa20:re,crypto_onetimeauth:Pe,crypto_onetimeauth_verify:ve,crypto_verify_16:U,crypto_verify_32:V,crypto_secretbox:Se,crypto_secretbox_open:ze,crypto_scalarmult:b,crypto_scalarmult_base:w,crypto_box_beforenm:B,crypto_box_afternm:D,crypto_box:ee,crypto_box_open:J,crypto_box_keypair:R,crypto_hash:Ot,crypto_sign:qs,crypto_sign_keypair:Vr,crypto_sign_open:be,crypto_secretbox_KEYBYTES:at,crypto_secretbox_NONCEBYTES:bt,crypto_secretbox_ZEROBYTES:yt,crypto_secretbox_BOXZEROBYTES:xt,crypto_scalarmult_BYTES:wt,crypto_scalarmult_SCALARBYTES:tr,crypto_box_PUBLICKEYBYTES:Rn,crypto_box_SECRETKEYBYTES:Nn,crypto_box_BEFORENMBYTES:so,crypto_box_NONCEBYTES:sc,crypto_box_ZEROBYTES:Nh,crypto_box_BOXZEROBYTES:Lh,crypto_sign_BYTES:Sn,crypto_sign_PUBLICKEYBYTES:nr,crypto_sign_SECRETKEYBYTES:wr,crypto_sign_SEEDBYTES:io,crypto_hash_BYTES:oo,gf:n,D:l,L:er,pack25519:x,unpack25519:ae,M:F,A:I,S:G,Z:q,pow2523:Ee,add:vn,set25519:m,modL:Wr,scalarmult:Mn,scalarbase:xr};function ic(p,y){if(p.length!==at)throw new Error("bad key size");if(y.length!==bt)throw new Error("bad nonce size")}function Fh(p,y){if(p.length!==Rn)throw new Error("bad public key size");if(y.length!==Nn)throw new Error("bad secret key size")}function jt(){for(var p=0;p<arguments.length;p++)if(!(arguments[p]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function oc(p){for(var y=0;y<p.length;y++)p[y]=0}e.randomBytes=function(p){var y=new Uint8Array(p);return r(y,p),y},e.secretbox=function(p,y,_){jt(p,y,_),ic(_,y);for(var v=new Uint8Array(yt+p.length),O=new Uint8Array(v.length),M=0;M<p.length;M++)v[M+yt]=p[M];return Se(O,v,v.length,y,_),O.subarray(xt)},e.secretbox.open=function(p,y,_){jt(p,y,_),ic(_,y);for(var v=new Uint8Array(xt+p.length),O=new Uint8Array(v.length),M=0;M<p.length;M++)v[M+xt]=p[M];return v.length<32||ze(O,v,v.length,y,_)!==0?null:O.subarray(yt)},e.secretbox.keyLength=at,e.secretbox.nonceLength=bt,e.secretbox.overheadLength=xt,e.scalarMult=function(p,y){if(jt(p,y),p.length!==tr)throw new Error("bad n size");if(y.length!==wt)throw new Error("bad p size");var _=new Uint8Array(wt);return b(_,p,y),_},e.scalarMult.base=function(p){if(jt(p),p.length!==tr)throw new Error("bad n size");var y=new Uint8Array(wt);return w(y,p),y},e.scalarMult.scalarLength=tr,e.scalarMult.groupElementLength=wt,e.box=function(p,y,_,v){var O=e.box.before(_,v);return e.secretbox(p,y,O)},e.box.before=function(p,y){jt(p,y),Fh(p,y);var _=new Uint8Array(so);return B(_,p,y),_},e.box.after=e.secretbox,e.box.open=function(p,y,_,v){var O=e.box.before(_,v);return e.secretbox.open(p,y,O)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var p=new Uint8Array(Rn),y=new Uint8Array(Nn);return R(p,y),{publicKey:p,secretKey:y}},e.box.keyPair.fromSecretKey=function(p){if(jt(p),p.length!==Nn)throw new Error("bad secret key size");var y=new Uint8Array(Rn);return w(y,p),{publicKey:y,secretKey:new Uint8Array(p)}},e.box.publicKeyLength=Rn,e.box.secretKeyLength=Nn,e.box.sharedKeyLength=so,e.box.nonceLength=sc,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(p,y){if(jt(p,y),y.length!==wr)throw new Error("bad secret key size");var _=new Uint8Array(Sn+p.length);return qs(_,p,p.length,y),_},e.sign.open=function(p,y){if(jt(p,y),y.length!==nr)throw new Error("bad public key size");var _=new Uint8Array(p.length),v=be(_,p,p.length,y);if(v<0)return null;for(var O=new Uint8Array(v),M=0;M<O.length;M++)O[M]=_[M];return O},e.sign.detached=function(p,y){for(var _=e.sign(p,y),v=new Uint8Array(Sn),O=0;O<v.length;O++)v[O]=_[O];return v},e.sign.detached.verify=function(p,y,_){if(jt(p,y,_),y.length!==Sn)throw new Error("bad signature size");if(_.length!==nr)throw new Error("bad public key size");var v=new Uint8Array(Sn+p.length),O=new Uint8Array(Sn+p.length),M;for(M=0;M<Sn;M++)v[M]=y[M];for(M=0;M<p.length;M++)v[M+Sn]=p[M];return be(O,v,v.length,_)>=0},e.sign.keyPair=function(){var p=new Uint8Array(nr),y=new Uint8Array(wr);return Vr(p,y),{publicKey:p,secretKey:y}},e.sign.keyPair.fromSecretKey=function(p){if(jt(p),p.length!==wr)throw new Error("bad secret key size");for(var y=new Uint8Array(nr),_=0;_<y.length;_++)y[_]=p[32+_];return{publicKey:y,secretKey:new Uint8Array(p)}},e.sign.keyPair.fromSeed=function(p){if(jt(p),p.length!==io)throw new Error("bad seed size");for(var y=new Uint8Array(nr),_=new Uint8Array(wr),v=0;v<32;v++)_[v]=p[v];return Vr(y,_,!0),{publicKey:y,secretKey:_}},e.sign.publicKeyLength=nr,e.sign.secretKeyLength=wr,e.sign.seedLength=io,e.sign.signatureLength=Sn,e.hash=function(p){jt(p);var y=new Uint8Array(oo);return Ot(y,p,p.length),y},e.hash.hashLength=oo,e.verify=function(p,y){return jt(p,y),p.length===0||y.length===0||p.length!==y.length?!1:L(p,0,y,0,p.length)===0},e.setPRNG=function(p){r=p},function(){var p=typeof globalThis<"u"?globalThis.crypto||globalThis.msCrypto:null;if(p&&p.getRandomValues){var y=65536;e.setPRNG(function(_,v){var O,M=new Uint8Array(v);for(O=0;O<v;O+=y)p.getRandomValues(M.subarray(O,O+Math.min(v-O,y)));for(O=0;O<v;O++)_[O]=M[O];oc(M)})}else typeof require<"u"&&(p=require("crypto"),p&&p.randomBytes&&e.setPRNG(function(_,v){var O,M=p.randomBytes(v);for(O=0;O<v;O++)_[O]=M[O];oc(M)}))}()})(typeof module<"u"&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const ti=typeof module<"u"&&module.exports?module.exports:globalThis.nacl;ti.sign.keyPair.fromSeed,ti.sign.detached,ti.sign.detached.verify,ti.randomBytes;var tu;(function(e){e.InvalidPrefixByte="nkeys: invalid prefix byte",e.InvalidKey="nkeys: invalid key",e.InvalidPublicKey="nkeys: invalid public key",e.InvalidSeedLen="nkeys: invalid seed length",e.InvalidSeed="nkeys: invalid seed",e.InvalidEncoding="nkeys: invalid encoded key",e.InvalidSignature="nkeys: signature verification failed",e.CannotSign="nkeys: cannot sign, no private key available",e.PublicKeyOnly="nkeys: no seed or private key available",e.InvalidChecksum="nkeys: invalid checksum",e.SerializationError="nkeys: serialization error",e.ApiError="nkeys: api error",e.ClearedPair="nkeys: pair is cleared"})(tu||(tu={}));var nu;(function(e){e[e.Seed=144]="Seed",e[e.Private=120]="Private",e[e.Operator=112]="Operator",e[e.Server=104]="Server",e[e.Cluster=16]="Cluster",e[e.Account=0]="Account",e[e.User=160]="User"})(nu||(nu={}));function qx(e){return t=>{let n={};return e.forEach(r=>{const s=r(t)||{};n=Object.assign(n,s)}),n}}function zx(){return()=>{}}function Hx(e,t){return()=>{const n=typeof e=="function"?e():e,r=typeof t=="function"?t():t;return{user:n,pass:r}}}function Vx(e){return()=>({auth_token:typeof e=="function"?e():e})}const bh=2*60*1e3,Wx=2,yh=2*1e3;function Gx(){return{maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:bh,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:yh,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1}}function Kx(e){const t=[];return typeof e.authenticator=="function"&&t.push(e.authenticator),Array.isArray(e.authenticator)&&t.push(...e.authenticator),e.token&&t.push(Vx(e.token)),e.user&&t.push(Hx(e.user,e.pass)),t.length===0?zx():qx(t)}function Jx(e){const t=`${ra}:${dh()}`;if(e=e||{servers:[t]},e.servers=e.servers||[],typeof e.servers=="string"&&(e.servers=[e.servers]),e.servers.length>0&&e.port)throw new ge("port and servers options are mutually exclusive",se.InvalidOption);e.servers.length===0&&e.port&&(e.servers=[`${ra}:${e.port}`]),e.servers&&e.servers.length===0&&(e.servers=[t]);const n=no(Gx(),e);if(n.authenticator=Kx(n),["reconnectDelayHandler","authenticator"].forEach(r=>{if(n[r]&&typeof n[r]!="function")throw new ge(`${r} option should be a function`,se.NotFunction)}),n.reconnectDelayHandler||(n.reconnectDelayHandler=()=>{let r=n.tls?n.reconnectJitterTLS:n.reconnectJitter;return r&&(r++,r=Math.floor(Math.random()*r)),n.reconnectTimeWait+r}),n.inboxPrefix)try{yn(n.inboxPrefix)}catch(r){throw new ge(r.message,se.ApiError)}if(n.resolve&&typeof mh()!="function")throw new ge("'resolve' is not supported on this client",se.InvalidOption);return n}function Yx(e,t){const{proto:n,tls_required:r,tls_available:s}=e;if((n===void 0||n<1)&&t.noEcho)throw new ge("noEcho",se.ServerOptionNotAvailable);const i=r||s||!1;if(t.tls&&!i)throw new ge("tls",se.ServerOptionNotAvailable)}const Qx=1024*32,Xx=/^INFO\s+([^\r\n]+)\r\n/i,Zx=fs(`PONG\r
`),ru=fs(`PING\r
`);class ew{constructor(t,n,r){g(this,"echo");g(this,"no_responders");g(this,"protocol");g(this,"verbose");g(this,"pedantic");g(this,"jwt");g(this,"nkey");g(this,"sig");g(this,"user");g(this,"pass");g(this,"auth_token");g(this,"tls_required");g(this,"name");g(this,"lang");g(this,"version");g(this,"headers");this.protocol=1,this.version=t.version,this.lang=t.lang,this.echo=n.noEcho?!1:void 0,this.verbose=n.verbose,this.pedantic=n.pedantic,this.tls_required=n.tls?!0:void 0,this.name=n.name;const s=(n&&typeof n.authenticator=="function"?n.authenticator(r):{})||{};no(this,s)}}class xh extends dt{constructor(n,r,s={}){var o;super();g(this,"sid");g(this,"queue");g(this,"draining");g(this,"max");g(this,"subject");g(this,"drained");g(this,"protocol");g(this,"timer");g(this,"info");g(this,"cleanupFn");g(this,"closed");g(this,"requestSubject");no(this,s),this.protocol=n,this.subject=r,this.draining=!1,this.noIterator=typeof s.callback=="function",this.closed=Ze();const i=!((o=n.options)!=null&&o.noAsyncTraces);s.timeout&&(this.timer=Ur(s.timeout,i),this.timer.then(()=>{this.timer=void 0}).catch(a=>{this.stop(a),this.noIterator&&this.callback(a,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(n){if(this.noIterator){const r=this.callback,s=n.ingestionFilterFn?n.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),i=n.protocolFilterFn?n.protocolFilterFn:()=>!0,o=n.dispatchedFn?n.dispatchedFn:()=>{};this.callback=(a,c)=>{const{ingest:l}=s(c);l&&i(c)&&(r(a,c),o(c))}}else this.protocolFilterFn=n.protocolFilterFn,this.dispatchedFn=n.dispatchedFn}callback(n,r){this.cancelTimeout(),n?this.stop(n):this.push(r)}close(){if(!this.isClosed()){this.cancelTimeout();const n=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch{}this.closed.resolve()};this.noIterator?n():this.push(n)}}unsubscribe(n){this.protocol.unsubscribe(this,n)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(ge.errorForCode(se.ConnectionClosed)):this.isClosed()?Promise.reject(ge.errorForCode(se.SubClosed)):(this.drained||(this.draining=!0,this.protocol.unsub(this),this.drained=this.protocol.flush(Ze()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class tw{constructor(){g(this,"mux");g(this,"subs");g(this,"sidCounter");this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(t){return this.sidCounter++,t.sid=this.sidCounter,this.subs.set(t.sid,t),t}setMux(t){return this.mux=t,t}getMux(){return this.mux}get(t){return this.subs.get(t)}resub(t){return this.sidCounter++,this.subs.delete(t.sid),t.sid=this.sidCounter,this.subs.set(t.sid,t),t}all(){return Array.from(this.subs.values())}cancel(t){t&&(t.close(),this.subs.delete(t.sid))}handleError(t){if(t&&t.permissionContext){const n=t.permissionContext,r=this.all();let s;if(n.operation==="subscription"&&(s=r.find(i=>i.subject===n.subject)),n.operation==="publish"&&(s=r.find(i=>i.requestSubject===n.subject)),s)return s.callback(t,{}),s.close(),this.subs.delete(s.sid),s!==this.mux}return!1}close(){this.subs.forEach(t=>{t.close()})}}class Ii{constructor(t,n){g(this,"connected");g(this,"connectedOnce");g(this,"infoReceived");g(this,"info");g(this,"muxSubscriptions");g(this,"options");g(this,"outbound");g(this,"pongs");g(this,"subscriptions");g(this,"transport");g(this,"noMorePublishing");g(this,"connectError");g(this,"publisher");g(this,"_closed");g(this,"closed");g(this,"listeners");g(this,"heartbeats");g(this,"parser");g(this,"outMsgs");g(this,"inMsgs");g(this,"outBytes");g(this,"inBytes");g(this,"pendingLimit");g(this,"lastError");g(this,"abortReconnect");g(this,"servers");g(this,"server");g(this,"features");g(this,"connectPromise");this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=Qx,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=t,this.publisher=n,this.subscriptions=new tw,this.muxSubscriptions=new Fx,this.outbound=new Br,this.pongs=[],this.pendingLimit=t.pendingLimit||this.pendingLimit,this.features=new Bx({major:0,minor:0,micro:0}),this.connectPromise=null;const r=typeof t.servers=="string"?[t.servers]:t.servers;this.servers=new Lx(r,{randomize:!t.noRandomize}),this.closed=Ze(),this.parser=new eu(this),this.heartbeats=new jx(this,this.options.pingInterval||bh,this.options.maxPingOut||Wx)}resetOutbound(){this.outbound.reset();const t=this.pongs;this.pongs=[];const n=ge.errorForCode(se.Disconnect);n.stack="",t.forEach(r=>{r.reject(n)}),this.parser=new eu(this),this.infoReceived=!1}dispatchStatus(t){this.listeners.forEach(n=>{n.push(t)})}status(){const t=new dt;return this.listeners.push(t),t}prepare(){this.transport&&this.transport.discard(),this.info=void 0,this.resetOutbound();const t=Ze();return t.catch(()=>{}),this.pongs.unshift(t),this.connectError=n=>{t.reject(n)},this.transport=yx(),this.transport.closed().then(async n=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError||this.lastError);return}}),t}disconnect(){this.dispatchStatus({type:Tr.StaleConnection,data:""}),this.transport.disconnect()}reconnect(){return this.connected&&(this.dispatchStatus({type:Tr.ClientInitiatedReconnect,data:""}),this.transport.disconnect()),Promise.resolve()}async disconnected(t){this.dispatchStatus({type:nn.Disconnect,data:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{var n;this.dispatchStatus({type:nn.Reconnect,data:this.servers.getCurrentServer().toString()}),((n=this.lastError)==null?void 0:n.code)===se.AuthenticationExpired&&(this.lastError=void 0)}).catch(n=>{this._close(n)}):await this._close(t)}async dial(t){const n=this.prepare();let r;try{r=Ur(this.options.timeout||2e4);const s=this.transport.connect(t,this.options);await Promise.race([s,r]),(async()=>{try{for await(const i of this.transport)this.parser.parse(i)}catch(i){console.log("reader closed",i)}})().then()}catch(s){n.reject(s)}try{await Promise.race([r,n]),r&&r.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(s){throw r&&r.cancel(),await this.transport.close(s),s}}async _doDial(t){const n=await t.resolve({fn:mh(),debug:this.options.debug,randomize:!this.options.noRandomize});let r=null;for(const s of n)try{r=null,this.dispatchStatus({type:Tr.Reconnecting,data:s.toString()}),await this.dial(s);return}catch(i){r=i}throw r}dialLoop(){return this.connectPromise===null&&(this.connectPromise=this.dodialLoop(),this.connectPromise.then(()=>{}).catch(()=>{}).finally(()=>{this.connectPromise=null})),this.connectPromise}async dodialLoop(){let t;for(;;){this._closed&&this.servers.clear();const n=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():yh;let r=n;const s=this.selectServer();if(!s||this.abortReconnect)throw t||(this.lastError?this.lastError:ge.errorForCode(se.ConnectionRefused));const i=Date.now();if(s.lastConnect===0||s.lastConnect+n<=i){s.lastConnect=Date.now();try{await this._doDial(s);break}catch(o){if(t=o,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}s.reconnects++;const a=this.options.maxReconnectAttempts||0;a!==-1&&s.reconnects>=a&&this.servers.removeCurrentServer()}}else r=Math.min(r,s.lastConnect+n-i),await Ds(r)}}static async connect(t,n){const r=new Ii(t,n);return await r.dialLoop(),r}static toError(t){const n=t?t.toLowerCase():"";if(n.indexOf("permissions violation")!==-1){const r=new ge(t,se.PermissionsViolation),s=t.match(/(Publish|Subscription) to "(\S+)"/);return s&&(r.permissionContext={operation:s[1].toLowerCase(),subject:s[2]}),r}else return n.indexOf("authorization violation")!==-1?new ge(t,se.AuthorizationViolation):n.indexOf("user authentication expired")!==-1?new ge(t,se.AuthenticationExpired):n.indexOf("authentication timeout")!==-1?new ge(t,se.AuthenticationTimeout):new ge(t,se.ProtocolError)}processMsg(t,n){if(this.inMsgs++,this.inBytes+=n.length,!this.subscriptions.sidCounter)return;const r=this.subscriptions.get(t.sid);r&&(r.received+=1,r.callback&&r.callback(null,new Ka(t,n,this)),r.max!==void 0&&r.received>=r.max&&r.unsubscribe())}processError(t){const n=Wl(t),r=Ii.toError(n),s={type:nn.Error,data:r.code};if(r.isPermissionError()){let i=!1;if(r.permissionContext){s.permissionContext=r.permissionContext;const o=this.subscriptions.getMux();i=(o==null?void 0:o.subject)===r.permissionContext.subject}this.subscriptions.handleError(r),this.muxSubscriptions.handleError(i,r),i&&this.subscriptions.setMux(null)}this.dispatchStatus(s),this.handleError(r)}handleError(t){t.isAuthError()?this.handleAuthError(t):t.isProtocolError()?this.lastError=t:t.isAuthTimeout()&&(this.lastError=t),t.isPermissionError()||(this.lastError=t)}handleAuthError(t){this.lastError&&t.code===this.lastError.code&&this.options.ignoreAuthErrorAbort===!1&&(this.abortReconnect=!0),this.connectError?this.connectError(t):this.disconnect()}processPing(){this.transport.send(Zx)}processPong(){const t=this.pongs.shift();t&&t.resolve()}processInfo(t){const n=JSON.parse(Wl(t));this.info=n;const r=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(n);if(!this.infoReceived){this.features.update(hr(n.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:i,lang:o}=this.transport;try{const a=new ew({version:i,lang:o},this.options,n.nonce);n.headers&&(a.headers=!0,a.no_responders=!0);const c=JSON.stringify(a);this.transport.send(fs(`CONNECT ${c}${li}`)),this.transport.send(ru)}catch(a){this._close(a)}}r&&this.dispatchStatus({type:nn.Update,data:r}),(n.ldm!==void 0?n.ldm:!1)&&this.dispatchStatus({type:nn.LDM,data:this.servers.getCurrentServer().toString()})}push(t){switch(t.kind){case At.MSG:{const{msg:n,data:r}=t;this.processMsg(n,r);break}case At.OK:break;case At.ERR:this.processError(t.data);break;case At.PING:this.processPing();break;case At.PONG:this.processPong();break;case At.INFO:this.processInfo(t.data);break}}sendCommand(t,...n){const r=this.outbound.length();let s;typeof t=="string"?s=fs(t):s=t,this.outbound.fill(s,...n),r===0?queueMicrotask(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(t,n=Ht,r){let s;if(n instanceof Uint8Array)s=n;else if(typeof n=="string")s=yr.encode(n);else throw ge.errorForCode(se.BadPayload);let i=s.length;r=r||{},r.reply=r.reply||"";let o=Ht,a=0;if(r.headers){if(this.info&&!this.info.headers)throw new ge("headers",se.ServerOptionNotAvailable);o=r.headers.encode(),a=o.length,i=s.length+a}if(this.info&&i>this.info.max_payload)throw ge.errorForCode(se.MaxPayloadExceeded);this.outBytes+=i,this.outMsgs++;let c;r.headers?(r.reply?c=`HPUB ${t} ${r.reply} ${a} ${i}\r
`:c=`HPUB ${t} ${a} ${i}\r
`,this.sendCommand(c,o,s,Pi)):(r.reply?c=`PUB ${t} ${r.reply} ${i}\r
`:c=`PUB ${t} ${i}\r
`,this.sendCommand(c,s,Pi))}request(t){return this.initMux(),this.muxSubscriptions.add(t),t}subscribe(t){return this.subscriptions.add(t),this._subunsub(t),t}_sub(t){t.queue?this.sendCommand(`SUB ${t.subject} ${t.queue} ${t.sid}\r
`):this.sendCommand(`SUB ${t.subject} ${t.sid}\r
`)}_subunsub(t){return this._sub(t),t.max&&this.unsubscribe(t,t.max),t}unsubscribe(t,n){this.unsub(t,n),(t.max===void 0||t.received>=t.max)&&this.subscriptions.cancel(t)}unsub(t,n){!t||this.isClosed()||(n?this.sendCommand(`UNSUB ${t.sid} ${n}\r
`):this.sendCommand(`UNSUB ${t.sid}\r
`),t.max=n)}resub(t,n){!t||this.isClosed()||(t.subject=n,this.subscriptions.resub(t),this._sub(t))}flush(t){return t||(t=Ze()),this.pongs.push(t),this.outbound.fill(ru),this.flushPending(),t}sendSubscriptions(){const t=[];this.subscriptions.all().forEach(n=>{const r=n;r.queue?t.push(`SUB ${r.subject} ${r.queue} ${r.sid}${li}`):t.push(`SUB ${r.subject} ${r.sid}${li}`)}),t.length&&this.transport.send(fs(t.join("")))}async _close(t){this._closed||(this.heartbeats.cancel(),this.connectError&&(this.connectError(t),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close(),this.listeners.forEach(n=>{n.stop()}),this._closed=!0,await this.transport.close(t),await this.closed.resolve(t))}close(){return this._close()}isClosed(){return this._closed}drain(){const t=this.subscriptions.all(),n=[];return t.forEach(r=>{n.push(r.drain())}),Promise.all(n).then(async()=>(this.noMorePublishing=!0,await this.flush(),this.close())).catch(()=>{})}flushPending(){if(!(!this.infoReceived||!this.connected)&&this.outbound.size()){const t=this.outbound.drain();this.transport.send(t)}}initMux(){if(!this.subscriptions.getMux()){const n=this.muxSubscriptions.init(this.options.inboxPrefix),r=new xh(this,`${n}*`);r.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(r),this.subscribe(r)}}selectServer(){const t=this.servers.selectServer();if(t!==void 0)return this.server=t,this.server}getServer(){return this.server}}class wh{constructor(t,n,r=!0){g(this,"token");g(this,"received");g(this,"ctx");g(this,"requestSubject");g(this,"mux");this.mux=t,this.requestSubject=n,this.received=0,this.token=$s.next(),r&&(this.ctx=new Error)}}class nw extends wh{constructor(n,r,s={maxWait:1e3}){super(n,r);g(this,"callback");g(this,"done");g(this,"timer");g(this,"max");g(this,"opts");if(this.opts=s,typeof this.opts.callback!="function")throw new Error("callback is required");this.callback=this.opts.callback,this.max=typeof s.maxMessages=="number"&&s.maxMessages>0?s.maxMessages:-1,this.done=Ze(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},s.maxWait)}cancel(n){n&&this.callback(n,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(n,r){n?(this.ctx&&(n.stack+=`

${this.ctx.stack}`),this.cancel(n)):(this.callback(null,r),this.opts.strategy===bn.Count&&(this.max--,this.max===0&&this.cancel()),this.opts.strategy===bn.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.jitter||300)),this.opts.strategy===bn.SentinelMsg&&r&&r.data.length===0&&this.cancel())}}class Eh extends wh{constructor(n,r,s={timeout:1e3},i=!0){super(n,r,i);g(this,"deferred");g(this,"timer");this.deferred=Ze(),this.timer=Ur(s.timeout,i)}resolver(n,r){this.timer&&this.timer.cancel(),n?(this.ctx&&(n.stack+=`

${this.ctx.stack}`),this.deferred.reject(n)):this.deferred.resolve(r),this.cancel()}cancel(n){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(n||ge.errorForCode(se.Cancelled))}}function Mr(e){return Ja("durable",e)}function Rt(e){return Ja("stream",e)}function Ja(e,t=""){if(t==="")throw Error(`${e} name required`);return[".","*",">","/","\\"," ","	",`
`,"\r"].forEach(r=>{if(t.indexOf(r)!==-1){switch(r){case`
`:r="\\n";break;case"\r":r="\\r";break;case"	":r="\\t";break}throw Error(`invalid ${e} name - ${e} name cannot contain '${r}'`)}}),""}function es(e,t=""){if(t==="")throw Error(`${e} name required`);const n=rw(t);if(n.length)throw new Error(`invalid ${e} name - ${e} name ${n}`)}function rw(e=""){if(e==="")throw Error("name required");const t=/^[-\w]+$/g;if(e.match(t)===null){for(const r of e.split(""))if(r.match(t)===null)return`cannot contain '${r}'`}return""}function Xe(e){return e*1e6}function Ya(e){return Math.floor(e/1e6)}function ca(e){if(e.data.length>0)return!1;const t=e.headers;return t?t.code>=100&&t.code<200:!1}function la(e){var t;return ca(e)&&((t=e.headers)==null?void 0:t.description)==="Idle Heartbeat"}function sw(e,t,n){const r=In(e,t),s={hdr:1,sid:0,size:0},i=new Ka(s,Ht,{});return i._headers=r,i._subject=n,i}function Rr(e){if(e.data.length!==0)return null;const t=e.headers;return t?vh(t.code,t.description):null}var Wt;(function(e){e.MaxBatchExceeded="exceeded maxrequestbatch of",e.MaxExpiresExceeded="exceeded maxrequestexpires of",e.MaxBytesExceeded="exceeded maxrequestmaxbytes of",e.MaxMessageSizeExceeded="message size exceeds maxbytes",e.PushConsumer="consumer is push based",e.MaxWaitingExceeded="exceeded maxwaiting",e.IdleHeartbeatMissed="idle heartbeats missed",e.ConsumerDeleted="consumer deleted"})(Wt||(Wt={}));function iw(e){return e.code!==se.JetStream409?!1:[Wt.MaxBatchExceeded,Wt.MaxExpiresExceeded,Wt.MaxBytesExceeded,Wt.MaxMessageSizeExceeded,Wt.PushConsumer,Wt.IdleHeartbeatMissed,Wt.ConsumerDeleted].find(n=>e.message.indexOf(n)!==-1)!==void 0}function vh(e,t=""){if(e<300)return null;switch(t=t.toLowerCase(),e){case 404:return new ge(t,se.JetStream404NoMessages);case 408:return new ge(t,se.JetStream408RequestTimeout);case 409:{const n=t.startsWith(Wt.IdleHeartbeatMissed)?se.JetStreamIdleHeartBeat:se.JetStream409;return new ge(t,n)}case 503:return ge.errorForCode(se.JetStreamNotEnabled,new Error(t));default:return t===""&&(t=se.Unknown),new ge(t,`${e}`)}}const ow="$JS.API";function aw(e){return e=e||{},e.domain&&(e.apiPrefix=`$JS.${e.domain}.API`,delete e.domain),no({apiPrefix:ow,timeout:5e3},e)}class Us{constructor(t,n){g(this,"nc");g(this,"opts");g(this,"prefix");g(this,"timeout");g(this,"jc");this.nc=t,this.opts=aw(n),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=sn()}getOptions(){return Object.assign({},this.opts)}_parseOpts(){let t=this.opts.apiPrefix;if(!t||t.length===0)throw new Error("invalid empty prefix");t[t.length-1]==="."&&(t=t.substr(0,t.length-1)),this.opts.apiPrefix=t}async _request(t,n=null,r){r=r||{},r.timeout=this.timeout;let s=Ht;n&&(s=this.jc.encode(n));const i=await this.nc.request(t,s,r);return this.parseJsResponse(i)}async findStream(t){const n={subject:t},s=await this._request(`${this.prefix}.STREAM.NAMES`,n);if(!s.streams||s.streams.length!==1)throw new Error("no stream matches subject");return s.streams[0]}getConnection(){return this.nc}parseJsResponse(t){const n=this.jc.decode(t.data),r=n;if(r.error){const s=vh(r.error.code,r.error.description);if(s!==null)throw s.api_error=r.error,s}return n}}class cw{static encode(t){if(typeof t=="string")return btoa(t);const n=Array.from(t);return btoa(String.fromCharCode(...n))}static decode(t,n=!1){const r=atob(t);return n?Uint8Array.from(r,s=>s.charCodeAt(0)):r}}class ms{static encode(t){return ms.toB64URLEncoding(cw.encode(t))}static decode(t,n=!1){return ms.decode(ms.fromB64URLEncoding(t),n)}static toB64URLEncoding(t){return t.replace(/\+/g,"-").replace(/\//g,"_")}static fromB64URLEncoding(t){return t.replace(/_/g,"/").replace(/-/g,"+")}}var ua;(function(e){e.Limits="limits",e.Interest="interest",e.Workqueue="workqueue"})(ua||(ua={}));var Ps;(function(e){e.Old="old",e.New="new"})(Ps||(Ps={}));var fa;(function(e){e.File="file",e.Memory="memory"})(fa||(fa={}));var nt;(function(e){e.All="all",e.Last="last",e.New="new",e.StartSequence="by_start_sequence",e.StartTime="by_start_time",e.LastPerSubject="last_per_subject"})(nt||(nt={}));var ct;(function(e){e.None="none",e.All="all",e.Explicit="explicit",e.NotSet=""})(ct||(ct={}));var qr;(function(e){e.Instant="instant",e.Original="original"})(qr||(qr={}));var Yn;(function(e){e.None="none",e.S2="s2"})(Yn||(Yn={}));var Ti;(function(e){e.CreateOrUpdate="",e.Update="update",e.Create="create"})(Ti||(Ti={}));function lw(e,t={}){return Object.assign({name:e,deliver_policy:nt.All,ack_policy:ct.Explicit,ack_wait:Xe(30*1e3),replay_policy:qr.Instant},t)}var su;(function(e){e.API="api_audit",e.StreamAction="stream_action",e.ConsumerAction="consumer_action",e.SnapshotCreate="snapshot_create",e.SnapshotComplete="snapshot_complete",e.RestoreCreate="restore_create",e.RestoreComplete="restore_complete",e.MaxDeliver="max_deliver",e.Terminated="terminated",e.Ack="consumer_ack",e.StreamLeaderElected="stream_leader_elected",e.StreamQuorumLost="stream_quorum_lost",e.ConsumerLeaderElected="consumer_leader_elected",e.ConsumerQuorumLost="consumer_quorum_lost"})(su||(su={}));var Pt;(function(e){e.StreamSourceHdr="Nats-Stream-Source",e.LastConsumerSeqHdr="Nats-Last-Consumer",e.LastStreamSeqHdr="Nats-Last-Stream",e.ConsumerStalledHdr="Nats-Consumer-Stalled",e.MessageSizeHdr="Nats-Msg-Size",e.RollupHdr="Nats-Rollup",e.RollupValueSubject="sub",e.RollupValueAll="all",e.PendingMessagesHdr="Nats-Pending-Messages",e.PendingBytesHdr="Nats-Pending-Bytes"})(Pt||(Pt={}));var en;(function(e){e.LastValue="",e.AllHistory="history",e.UpdatesOnly="updates"})(en||(en={}));var kr;(function(e){e.Stream="Nats-Stream",e.Sequence="Nats-Sequence",e.TimeStamp="Nats-Time-Stamp",e.Subject="Nats-Subject"})(kr||(kr={}));var iu;(function(e){e.Stream="Nats-Stream",e.Subject="Nats-Subject",e.Sequence="Nats-Sequence",e.LastSequence="Nats-Last-Sequence",e.Size="Nats-Msg-Size"})(iu||(iu={}));const Vt="KV_";class uw{constructor(t){g(this,"config");g(this,"ordered");g(this,"mack");g(this,"stream");g(this,"callbackFn");g(this,"max");g(this,"qname");g(this,"isBind");g(this,"filters");this.stream="",this.mack=!1,this.ordered=!1,this.config=lw("",t||{})}getOpts(){var n;const t={};if(t.config=Object.assign({},this.config),t.config.filter_subject&&(this.filterSubject(t.config.filter_subject),t.config.filter_subject=void 0),t.config.filter_subjects&&((n=t.config.filter_subjects)==null||n.forEach(r=>{this.filterSubject(r)}),t.config.filter_subjects=void 0),t.mack=this.mack,t.stream=this.stream,t.callbackFn=this.callbackFn,t.max=this.max,t.queue=this.qname,t.ordered=this.ordered,t.config.ack_policy=t.ordered?ct.None:t.config.ack_policy,t.isBind=t.isBind||!1,this.filters)switch(this.filters.length){case 0:break;case 1:t.config.filter_subject=this.filters[0];break;default:t.config.filter_subjects=this.filters}return t}description(t){return this.config.description=t,this}deliverTo(t){return this.config.deliver_subject=t,this}durable(t){return Mr(t),this.config.durable_name=t,this}startSequence(t){if(t<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=nt.StartSequence,this.config.opt_start_seq=t,this}startTime(t){return this.config.deliver_policy=nt.StartTime,this.config.opt_start_time=t.toISOString(),this}deliverAll(){return this.config.deliver_policy=nt.All,this}deliverLastPerSubject(){return this.config.deliver_policy=nt.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=nt.Last,this}deliverNew(){return this.config.deliver_policy=nt.New,this}startAtTimeDelta(t){return this.startTime(new Date(Date.now()-t)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=ct.None,this}ackAll(){return this.config.ack_policy=ct.All,this}ackExplicit(){return this.config.ack_policy=ct.Explicit,this}ackWait(t){return this.config.ack_wait=Xe(t),this}maxDeliver(t){return this.config.max_deliver=t,this}filterSubject(t){return this.filters=this.filters||[],this.filters.push(t),this}replayInstantly(){return this.config.replay_policy=qr.Instant,this}replayOriginal(){return this.config.replay_policy=qr.Original,this}sample(t){if(t=Math.trunc(t),t<0||t>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${t}%`,this}limit(t){return this.config.rate_limit_bps=t,this}maxWaiting(t){return this.config.max_waiting=t,this}maxAckPending(t){return this.config.max_ack_pending=t,this}idleHeartbeat(t){return this.config.idle_heartbeat=Xe(t),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(t){return this.queue(t),this}manualAck(){return this.mack=!0,this}maxMessages(t){return this.max=t,this}callback(t){return this.callbackFn=t,this}queue(t){return this.qname=t,this.config.deliver_group=t,this}orderedConsumer(){return this.ordered=!0,this}bind(t,n){return this.stream=t,this.config.durable_name=n,this.isBind=!0,this}bindStream(t){return this.stream=t,this}inactiveEphemeralThreshold(t){return this.config.inactive_threshold=Xe(t),this}maxPullBatch(t){return this.config.max_batch=t,this}maxPullRequestExpires(t){return this.config.max_expires=Xe(t),this}memory(){return this.config.mem_storage=!0,this}numReplicas(t){return this.config.num_replicas=t,this}}function Pn(e){return new uw(e)}function ou(e){return typeof e.getOpts=="function"}function au(e){const t=e.length;let n=e.indexOf("=");n===-1&&(n=t);const r=n===t?0:4-n%4;return[n,r]}function fw(e,t,n=!1){function r(o,a){return Math.floor((o+a)*3/4-a)}function s(o){return e[o>>18&63]+e[o>>12&63]+e[o>>6&63]+e[o&63]}function i(o,a,c){const l=new Array((c-a)/3);for(let u=a,f=0;u<c;u+=3)l[f++]=s((o[u]<<16)+(o[u+1]<<8)+o[u+2]);return l.join("")}return{byteLength(o){return r.apply(null,au(o))},toUint8Array(o){const[a,c]=au(o),l=new Uint8Array(r(a,c)),u=c?a-4:a;let f,d=0,h;for(h=0;h<u;h+=4)f=t[o.charCodeAt(h)]<<18|t[o.charCodeAt(h+1)]<<12|t[o.charCodeAt(h+2)]<<6|t[o.charCodeAt(h+3)],l[d++]=f>>16&255,l[d++]=f>>8&255,l[d++]=f&255;return c===2?(f=t[o.charCodeAt(h)]<<2|t[o.charCodeAt(h+1)]>>4,l[d++]=f&255):c===1&&(f=t[o.charCodeAt(h)]<<10|t[o.charCodeAt(h+1)]<<4|t[o.charCodeAt(h+2)]>>2,l[d++]=f>>8&255,l[d++]=f&255),l},fromUint8Array(o){const c=o.length,l=c%3,u=c-l,f=new Array(Math.ceil(u/16383)+(l?1:0));let d=0,h;for(let C=0;C<u;C+=16383)h=C+16383,f[d++]=i(o,C,h>u?u:h);let E;return l===1?(E=o[u],f[d]=e[E>>2]+e[E<<4&63],n||(f[d]+="==")):l===2&&(E=o[u]<<8|o[u+1]&255,f[d]=e[E>>10]+e[E>>4&63]+e[E<<2&63],n||(f[d]+="=")),f.join("")}}}const Sh=[],kh=[],Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let e=0,t=Ao.length;e<t;++e)Sh[e]=Ao[e],kh[Ao.charCodeAt(e)]=e;const{byteLength:O1,toUint8Array:hw,fromUint8Array:dw}=fw(Sh,kh,!0),mw=new TextDecoder,pw=new TextEncoder;function gw(e){return e.reduce((t,n)=>`${t}${n<16?"0":""}${n.toString(16)}`,"")}function _w(e){const t=e.length;if(t%2||!/^[0-9a-fA-F]+$/.test(e))throw new TypeError("Invalid hex string.");e=e.toLowerCase();const n=new Uint8Array(Math.floor(t/2)),r=t/2;for(let s=0;s<r;++s)n[s]=parseInt(e.substr(s*2,2),16);return n}function bw(e,t="utf8"){if(/^utf-?8$/i.test(t))return mw.decode(e);if(/^base64$/i.test(t))return dw(e);if(/^hex(?:adecimal)?$/i.test(t))return gw(e);throw new TypeError("Unsupported string encoding.")}function yw(e,t="utf8"){if(/^utf-?8$/i.test(t))return pw.encode(e);if(/^base64$/i.test(t))return hw(e);if(/^hex(?:adecimal)?$/i.test(t))return _w(e);throw new TypeError("Unsupported string encoding.")}class cu{constructor(){g(this,"hashSize",32);g(this,"_buf");g(this,"_bufIdx");g(this,"_count");g(this,"_K");g(this,"_H");g(this,"_finalized");this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(t,n){if(t===null)throw new TypeError("msg must be a string or Uint8Array.");typeof t=="string"&&(t=yw(t,n));for(let s=0,i=t.length;s<i;s++)this._buf[this._bufIdx++]=t[s],this._bufIdx===64&&(this._transform(),this._bufIdx=0);const r=this._count;return(r[0]+=t.length<<3)<t.length<<3&&r[1]++,r[1]+=t.length>>>29,this}digest(t){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const n=this._buf;let r=this._bufIdx;for(n[r++]=128;r!==56;)r===64&&(this._transform(),r=0),n[r++]=0;const s=this._count;n[56]=s[1]>>>24&255,n[57]=s[1]>>>16&255,n[58]=s[1]>>>8&255,n[59]=s[1]>>>0&255,n[60]=s[0]>>>24&255,n[61]=s[0]>>>16&255,n[62]=s[0]>>>8&255,n[63]=s[0]>>>0&255,this._transform();const i=new Uint8Array(32);for(let o=0;o<8;o++)i[(o<<2)+0]=this._H[o]>>>24&255,i[(o<<2)+1]=this._H[o]>>>16&255,i[(o<<2)+2]=this._H[o]>>>8&255,i[(o<<2)+3]=this._H[o]>>>0&255;return this.init(),t?bw(i,t):i}_transform(){const t=this._H;let n=t[0],r=t[1],s=t[2],i=t[3],o=t[4],a=t[5],c=t[6],l=t[7];const u=new Uint32Array(16);let f;for(f=0;f<16;f++)u[f]=this._buf[(f<<2)+3]|this._buf[(f<<2)+2]<<8|this._buf[(f<<2)+1]<<16|this._buf[f<<2]<<24;for(f=0;f<64;f++){let d;if(f<16)d=u[f];else{let h=u[f+1&15],E=u[f+14&15];d=u[f&15]=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+u[f&15]+u[f+9&15]|0}d=d+l+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(c^o&(a^c))+this._K[f]|0,l=c,c=a,a=o,o=i+d,i=s,s=r,r=n,n=d+(r&s^i&(r^s))+(r>>>2^r>>>13^r>>>22^r<<30^r<<19^r<<10)|0}t[0]=t[0]+n|0,t[1]=t[1]+r|0,t[2]=t[2]+s|0,t[3]=t[3]+i|0,t[4]=t[4]+o|0,t[5]=t[5]+a|0,t[6]=t[6]+c|0,t[7]=t[7]+l|0}}class ts{constructor(t,n,r,s){g(this,"err");g(this,"offset");g(this,"pageInfo");g(this,"subject");g(this,"jsm");g(this,"filter");g(this,"payload");if(!t)throw new Error("subject is required");this.subject=t,this.jsm=r,this.offset=0,this.pageInfo={},this.filter=n,this.payload=s||{}}async next(){if(this.err)return[];if(this.pageInfo&&this.offset>=this.pageInfo.total)return[];const t={offset:this.offset};this.payload&&Object.assign(t,this.payload);try{const n=await this.jsm._request(this.subject,t,{timeout:this.jsm.timeout});return this.pageInfo=n,this.offset+=this.countResponse(n),this.filter(n)}catch(n){throw this.err=n,n}}countResponse(t){var n;switch(t==null?void 0:t.type){case"io.nats.jetstream.api.v1.stream_names_response":case"io.nats.jetstream.api.v1.stream_list_response":return t.streams.length;case"io.nats.jetstream.api.v1.consumer_list_response":return t.consumers.length;default:return console.error(`jslister.ts: unknown API response for paged output: ${t==null?void 0:t.type}`),((n=t.streams)==null?void 0:n.length)||0}return 0}async*[Symbol.asyncIterator](){let t=await this.next();for(;t.length>0;){for(const n of t)yield n;t=await this.next()}}}class Qa extends Us{constructor(t,n){super(t,n)}async add(t,n,r=Ti.Create){if(Rt(t),n.deliver_group&&n.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(n.deliver_group&&n.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const s={};s.config=n,s.stream_name=t,s.action=r,s.config.durable_name&&Mr(s.config.durable_name);const i=this.nc;let{min:o,ok:a}=i.features.get($e.JS_NEW_CONSUMER_CREATE_API);const c=n.name===""?void 0:n.name;if(c&&!a)throw new Error(`consumer 'name' requires server ${o}`);if(c)try{Ja("name",c)}catch(d){const h=d.message,E=h.indexOf("cannot contain");throw E!==-1?new Error(`consumer 'name' ${h.substring(E)}`):d}let l,u="";if(Array.isArray(n.filter_subjects)){const{min:d,ok:h}=i.features.get($e.JS_MULTIPLE_CONSUMER_FILTER);if(!h)throw new Error(`consumer 'filter_subjects' requires server ${d}`);a=!1}if(n.metadata){const{min:d,ok:h}=i.features.get($e.JS_STREAM_CONSUMER_METADATA);if(!h)throw new Error(`consumer 'metadata' requires server ${d}`)}if(a&&(u=n.name??n.durable_name??""),u!==""){let d=n.filter_subject??void 0;d===">"&&(d=void 0),l=d!==void 0?`${this.prefix}.CONSUMER.CREATE.${t}.${u}.${d}`:`${this.prefix}.CONSUMER.CREATE.${t}.${u}`}else l=n.durable_name?`${this.prefix}.CONSUMER.DURABLE.CREATE.${t}.${n.durable_name}`:`${this.prefix}.CONSUMER.CREATE.${t}`;return await this._request(l,s)}async update(t,n,r){const s=await this.info(t,n),i=r;return this.add(t,Object.assign(s.config,i),Ti.Update)}async info(t,n){return Rt(t),Mr(n),await this._request(`${this.prefix}.CONSUMER.INFO.${t}.${n}`)}async delete(t,n){return Rt(t),Mr(n),(await this._request(`${this.prefix}.CONSUMER.DELETE.${t}.${n}`)).success}list(t){Rt(t);const n=s=>s.consumers,r=`${this.prefix}.CONSUMER.LIST.${t}`;return new ts(r,n,this)}}const lu=Uint8Array.of(43,65,67,75),xw=Uint8Array.of(45,78,65,75),Xr=Uint8Array.of(43,87,80,73),ww=Uint8Array.of(43,78,88,84),Ew=Uint8Array.of(43,84,69,82,77),vw=Uint8Array.of(32);function Is(e){return new kw(e)}function Sw(e){const t=e.split(".");if(t.length===9&&t.splice(2,0,"_",""),t.length<11||t[0]!=="$JS"||t[1]!=="ACK")throw new Error("not js message");const n={};return n.domain=t[2]==="_"?"":t[2],n.account_hash=t[3],n.stream=t[4],n.consumer=t[5],n.redeliveryCount=parseInt(t[6],10),n.redelivered=n.redeliveryCount>1,n.streamSequence=parseInt(t[7],10),n.deliverySequence=parseInt(t[8],10),n.timestampNanos=parseInt(t[9],10),n.pending=parseInt(t[10],10),n}class kw{constructor(t){g(this,"msg");g(this,"di");g(this,"didAck");this.msg=t,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=Sw(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(t){this.didAck||(this.didAck=!this.isWIP(t),this.msg.respond(t))}isWIP(t){return t.length===4&&t[0]===Xr[0]&&t[1]===Xr[1]&&t[2]===Xr[2]&&t[3]===Xr[3]}async ackAck(){var t;if(!this.didAck&&(this.didAck=!0,this.msg.reply)){const r=this.msg.publisher,s=!((t=r.options)!=null&&t.noAsyncTraces),i=new Eh(r.muxSubscriptions,this.msg.reply,{timeout:1e3},s);r.request(i);try{r.publish(this.msg.reply,lu,{reply:`${r.muxSubscriptions.baseInbox}${i.token}`})}catch(o){i.cancel(o)}try{return await Promise.race([i.timer,i.deferred]),!0}catch(o){i.cancel(o)}}return!1}ack(){this.doAck(lu)}nak(t){let n=xw;t&&(n=oa().encode(`-NAK ${JSON.stringify({delay:Xe(t)})}`)),this.doAck(n)}working(){this.doAck(Xr)}next(t,n={batch:1}){const r={};r.batch=n.batch||1,r.no_wait=n.no_wait||!1,n.expires&&n.expires>0&&(r.expires=Xe(n.expires));const s=sn().encode(r),i=Br.concat(ww,vw,s),o=t?{reply:t}:void 0;this.msg.respond(i,o)}term(t=""){let n=Ew;(t==null?void 0:t.length)>0&&(n=oa().encode(`+TERM ${t}`)),this.doAck(n)}json(){return this.msg.json()}string(){return this.msg.string()}}function vr(e,t,n=!1){if(n===!0&&!e)throw ge.errorForCode(se.ApiError,new Error(`${t} is not a function`));if(e&&typeof e!="function")throw ge.errorForCode(se.ApiError,new Error(`${t} is not a function`))}class Ow extends dt{constructor(n,r,s){super();g(this,"sub");g(this,"adapter");g(this,"subIterDone");vr(s.adapter,"adapter",!0),this.adapter=s.adapter,s.callback&&vr(s.callback,"callback"),this.noIterator=typeof s.callback=="function",s.ingestionFilterFn&&(vr(s.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=s.ingestionFilterFn),s.protocolFilterFn&&(vr(s.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=s.protocolFilterFn),s.dispatchedFn&&(vr(s.dispatchedFn,"dispatchedFn"),this.dispatchedFn=s.dispatchedFn),s.cleanupFn&&vr(s.cleanupFn,"cleanupFn");let i=(u,f)=>{this.callback(u,f)};if(s.callback){const u=s.callback;i=(f,d)=>{const[h,E]=this.adapter(f,d);if(h){u(h,null);return}const{ingest:C}=this.ingestionFilterFn?this.ingestionFilterFn(E,this):{ingest:!0};C&&(!this.protocolFilterFn||this.protocolFilterFn(E))&&(u(h,E),this.dispatchedFn&&E&&this.dispatchedFn(E))}}const{max:o,queue:a,timeout:c}=s,l={queue:a,timeout:c,callback:i};o&&o>0&&(l.max=o),this.sub=n.subscribe(r,l),s.cleanupFn&&(this.sub.cleanupFn=s.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=Ze(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(async u=>{await u.closed,this.stop()})(this.sub).then().catch()}unsubscribe(n){this.sub.unsubscribe(n)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(n,r){this.sub.cancelTimeout();const[s,i]=this.adapter(n,r);s&&this.stop(s),i&&this.push(i)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}class Xa{constructor(t,n,r={maxOut:2}){g(this,"interval");g(this,"maxOut");g(this,"cancelAfter");g(this,"timer");g(this,"autoCancelTimer");g(this,"last");g(this,"missed");g(this,"count");g(this,"callback");this.interval=t,this.maxOut=(r==null?void 0:r.maxOut)||2,this.cancelAfter=(r==null?void 0:r.cancelAfter)||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=n,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0}work(){this.last=Date.now(),this.missed=0}_change(t,n=0,r=2){this.interval=t,this.maxOut=r,this.cancelAfter=n,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.last>this.interval&&this.missed++,this.missed>=this.maxOut)try{this.callback(this.missed)===!0&&this.cancel()}catch(t){console.log(t)}},this.interval)}}var hn;(function(e){e[e.Unset=-1]="Unset",e[e.Consume=0]="Consume",e[e.Fetch=1]="Fetch"})(hn||(hn={}));var zr;(function(e){e.HeartbeatsMissed="heartbeats_missed",e.ConsumerNotFound="consumer_not_found",e.OrderedConsumerRecreated="ordered_consumer_recreated"})(zr||(zr={}));var ps;(function(e){e.DebugEvent="debug",e.Discard="discard",e.Next="next"})(ps||(ps={}));class Po extends dt{constructor(n,r,s=!1){super();g(this,"consumer");g(this,"opts");g(this,"sub");g(this,"monitor");g(this,"pending");g(this,"inbox");g(this,"refilling");g(this,"stack");g(this,"pong");g(this,"callback");g(this,"timeout");g(this,"cleanupHandler");g(this,"listeners");g(this,"statusIterator");g(this,"forOrderedConsumer");g(this,"resetHandler");this.consumer=n,this.opts=this.parseOptions(r,s),this.callback=r.callback||null,this.noIterator=typeof this.callback=="function",this.monitor=null,this.pong=null,this.pending={msgs:0,bytes:0,requests:0},this.refilling=s,this.stack=new Error().stack.split(`
`).slice(1).join(`
`),this.timeout=null,this.inbox=yn(n.api.nc.options.inboxPrefix),this.listeners=[],this.forOrderedConsumer=!1,this.start()}start(){const{max_messages:n,max_bytes:r,idle_heartbeat:s,threshold_bytes:i,threshold_messages:o}=this.opts;this.closed().then(()=>{if(this.cleanupHandler)try{this.cleanupHandler()}catch{}});const{sub:a}=this;a&&a.unsubscribe(),this.sub=this.consumer.api.nc.subscribe(this.inbox,{callback:(c,l)=>{var f,d,h,E;if(c){this.stop();return}if((f=this.monitor)==null||f.work(),l.subject===this.inbox){if(la(l))return;const C=(d=l.headers)==null?void 0:d.code,N=((E=(h=l.headers)==null?void 0:h.description)==null?void 0:E.toLowerCase())||"unknown",{msgsLeft:k,bytesLeft:P}=this.parseDiscard(l.headers);if(k>0||P>0)this.pending.msgs-=k,this.pending.bytes-=P,this.pending.requests--,this.notify(ps.Discard,{msgsLeft:k,bytesLeft:P});else{const L=()=>{const U=new ge(N,`${C}`);return U.stack+=`

${this.stack}`,U};if(C===400){const U=L();this._push(()=>{this.stop(U)})}else if(C===409&&N==="consumer deleted"){const U=L();this.stop(U)}else this.notify(ps.DebugEvent,`${C} ${N}`)}}else this._push(Is(l)),this.received++,this.pending.msgs&&this.pending.msgs--,this.pending.bytes&&(this.pending.bytes-=l.size());if(this.pending.msgs===0&&this.pending.bytes===0&&(this.pending.requests=0),this.refilling){if(n&&this.pending.msgs<=o||r&&this.pending.bytes<=i){const C=this.pullOptions();this.pull(C)}}else this.pending.requests===0&&this._push(()=>{this.stop()})}}),this.sub.closed.then(()=>{this.sub.draining&&this._push(()=>{this.stop()})}),s&&(this.monitor=new Xa(s,c=>(this.notify(zr.HeartbeatsMissed,c),this.resetPending().then(()=>{}).catch(()=>{}),!1),{maxOut:2})),(async()=>{var l;const c=this.consumer.api.nc.status();this.statusIterator=c;for await(const u of c)switch(u.type){case nn.Disconnect:(l=this.monitor)==null||l.cancel();break;case nn.Reconnect:this.resetPending().then(f=>{var d;f&&((d=this.monitor)==null||d.restart())}).catch(()=>{});break}})(),this.pull(this.pullOptions())}_push(n){if(!this.callback)super.push(n);else{const r=typeof n=="function"?n:null;try{r?r():this.callback(n)}catch(s){this.stop(s)}}}notify(n,r){this.listeners.length>0&&this.listeners.forEach(s=>{s.done||s.push({type:n,data:r})})}async resetPending(){let n=0;const r=hh();let s=0;for(;;){if(this.consumer.api.nc.isClosed())return console.error("aborting resetPending - connection is closed"),!1;try{return await this.consumer.info(),n=0,this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),!0}catch(i){if(i.message==="consumer not found"){if(n++,this.notify(zr.ConsumerNotFound,n),this.resetHandler)try{this.resetHandler()}catch{}if(this.forOrderedConsumer)return!1}else n=0;const o=r.backoff(s);await Promise.race([Ds(o),this.consumer.api.nc.closed()]),s++}}}pull(n){this.pending.bytes+=n.max_bytes??0,this.pending.msgs+=n.batch??0,this.pending.requests++;const r=this.consumer.api.nc;this._push(()=>{r.publish(`${this.consumer.api.prefix}.CONSUMER.MSG.NEXT.${this.consumer.stream}.${this.consumer.name}`,this.consumer.api.jc.encode(n),{reply:this.inbox}),this.notify(ps.Next,n)})}pullOptions(){const n=this.opts.max_messages-this.pending.msgs,r=this.opts.max_bytes-this.pending.bytes,s=Xe(this.opts.idle_heartbeat),i=Xe(this.opts.expires);return{batch:n,max_bytes:r,idle_heartbeat:s,expires:i}}parseDiscard(n){const r={msgsLeft:0,bytesLeft:0},s=n==null?void 0:n.get(Pt.PendingMessagesHdr);s&&(r.msgsLeft=parseInt(s));const i=n==null?void 0:n.get(Pt.PendingBytesHdr);return i&&(r.bytesLeft=parseInt(i)),r}trackTimeout(n){this.timeout=n}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}clearTimers(){var n,r;(n=this.monitor)==null||n.cancel(),this.monitor=null,(r=this.timeout)==null||r.cancel(),this.timeout=null}setCleanupHandler(n){this.cleanupHandler=n}stop(n){var r,s;(r=this.sub)==null||r.unsubscribe(),this.clearTimers(),(s=this.statusIterator)==null||s.stop(),this._push(()=>{super.stop(n),this.listeners.forEach(i=>{i.stop()})})}parseOptions(n,r=!1){const s=n||{};if(s.max_messages=s.max_messages||0,s.max_bytes=s.max_bytes||0,s.max_messages!==0&&s.max_bytes!==0)throw new Error("only specify one of max_messages or max_bytes");if(s.max_messages===0&&(s.max_messages=100),s.expires=s.expires||3e4,s.expires<1e3)throw new Error("expires should be at least 1000ms");if(s.idle_heartbeat=s.idle_heartbeat||s.expires/2,s.idle_heartbeat=s.idle_heartbeat>3e4?3e4:s.idle_heartbeat,r){const i=Math.round(s.max_messages*.75)||1;s.threshold_messages=s.threshold_messages||i;const o=Math.round(s.max_bytes*.75)||1;s.threshold_bytes=s.threshold_bytes||o}return s}status(){const n=new dt;return this.listeners.push(n),Promise.resolve(n)}}class uu extends dt{constructor(){super();g(this,"src");g(this,"listeners");this.listeners=[]}setSource(n){this.src&&(this.src.resetHandler=void 0,this.src.setCleanupHandler(),this.src.stop()),this.src=n,this.src.setCleanupHandler(()=>{this.close().catch()}),(async()=>{const r=await this.src.status();for await(const s of r)this.notify(s.type,s.data)})().catch(()=>{})}notify(n,r){this.listeners.length>0&&this.listeners.forEach(s=>{s.done||s.push({type:n,data:r})})}stop(n){var r;(r=this.src)==null||r.stop(n),super.stop(n),this.listeners.forEach(s=>{s.stop()})}close(){return this.stop(),this.iterClosed}status(){const n=new dt;return this.listeners.push(n),Promise.resolve(n)}}class Oh{constructor(t,n){g(this,"api");g(this,"_info");g(this,"stream");g(this,"name");this.api=t,this._info=n,this.stream=n.stream_name,this.name=n.name}consume(t={max_messages:100,expires:3e4}){return Promise.resolve(new Po(this,t,!0))}fetch(t={max_messages:100,expires:3e4}){const n=new Po(this,t,!1),r=Math.round(n.opts.expires*1.05),s=Ur(r);return n.closed().then(()=>{s.cancel()}),s.catch(()=>{n.close().catch()}),n.trackTimeout(s),Promise.resolve(n)}next(t={expires:3e4}){const n=Ze(),r=t;r.max_messages=1;const s=new Po(this,r,!1),i=Math.round(s.opts.expires*1.05);i>=6e4&&(async()=>{for await(const a of await s.status())if(a.type===zr.HeartbeatsMissed&&a.data>=2){n.reject(new Error("consumer missed heartbeats"));break}})().catch(),(async()=>{for await(const a of s){n.resolve(a);break}})().catch();const o=Ur(i);return s.closed().then(()=>{n.resolve(null),o.cancel()}).catch(a=>{n.reject(a)}),o.catch(a=>{n.resolve(null),s.close().catch()}),s.trackTimeout(o),n}delete(){const{stream_name:t,name:n}=this._info;return this.api.delete(t,n)}info(t=!1){if(t)return Promise.resolve(this._info);const{stream_name:n,name:r}=this._info;return this.api.info(n,r).then(s=>(this._info=s,this._info))}}class Cw{constructor(t,n,r={}){g(this,"api");g(this,"consumerOpts");g(this,"consumer");g(this,"opts");g(this,"cursor");g(this,"stream");g(this,"namePrefix");g(this,"serial");g(this,"currentConsumer");g(this,"userCallback");g(this,"iter");g(this,"type");g(this,"startSeq");this.api=t,this.stream=n,this.cursor={stream_seq:1,deliver_seq:0},this.namePrefix=$s.next(),this.serial=0,this.currentConsumer=null,this.userCallback=null,this.iter=null,this.type=hn.Unset,this.consumerOpts=r,this.startSeq=this.consumerOpts.opt_start_seq||0,this.cursor.stream_seq=this.startSeq>0?this.startSeq-1:0}getConsumerOpts(t){this.serial++;const n=`${this.namePrefix}_${this.serial}`;t=t===0?1:t;const r={name:n,deliver_policy:nt.StartSequence,opt_start_seq:t,ack_policy:ct.None,inactive_threshold:Xe(5*60*1e3),num_replicas:1};return this.consumerOpts.headers_only===!0&&(r.headers_only=!0),Array.isArray(this.consumerOpts.filterSubjects)&&(r.filter_subjects=this.consumerOpts.filterSubjects),typeof this.consumerOpts.filterSubjects=="string"&&(r.filter_subject=this.consumerOpts.filterSubjects),t===this.startSeq+1&&(r.deliver_policy=this.consumerOpts.deliver_policy||nt.StartSequence,(this.consumerOpts.deliver_policy===nt.LastPerSubject||this.consumerOpts.deliver_policy===nt.New||this.consumerOpts.deliver_policy===nt.Last)&&(delete r.opt_start_seq,r.deliver_policy=this.consumerOpts.deliver_policy),r.deliver_policy===nt.LastPerSubject&&typeof r.filter_subjects>"u"&&typeof r.filter_subject>"u"&&(r.filter_subject=">"),this.consumerOpts.opt_start_time&&(delete r.opt_start_seq,r.deliver_policy=nt.StartTime,r.opt_start_time=this.consumerOpts.opt_start_time),this.consumerOpts.inactive_threshold&&(r.inactive_threshold=Xe(this.consumerOpts.inactive_threshold))),r}async resetConsumer(t=0){var i,o;(i=this.consumer)==null||i.delete().catch(()=>{}),t=t===0?1:t,this.cursor.deliver_seq=0;const n=this.getConsumerOpts(t);n.max_deliver=1,n.mem_storage=!0;const r=hh();let s;for(let a=0;;a++)try{s=await this.api.add(this.stream,n),(o=this.iter)==null||o.notify(zr.OrderedConsumerRecreated,s.name);break}catch(c){if(t===0&&a>=30)throw c;await Ds(r.backoff(a+1))}return s}internalHandler(t){return n=>{var s;if(this.serial!==t)return;const r=n.info.deliverySequence;if(r!==this.cursor.deliver_seq+1){this.reset(this.opts);return}this.cursor.deliver_seq=r,this.cursor.stream_seq=n.info.streamSequence,this.userCallback?this.userCallback(n):(s=this.iter)==null||s.push(n)}}async reset(t={max_messages:100,expires:3e4},n=!1){this.currentConsumer=await this.resetConsumer(this.cursor.stream_seq+1),this.iter===null&&(this.iter=new uu),this.consumer=new Oh(this.api,this.currentConsumer);const r=t;r.callback=this.internalHandler(this.serial);let s=null;if(this.type===hn.Fetch&&n)s=await this.consumer.fetch(t);else if(this.type===hn.Consume)s=await this.consumer.consume(t);else return Promise.reject("reset called with unset consumer type");const i=s;return i.forOrderedConsumer=!0,i.resetHandler=()=>{this.reset(this.opts)},this.iter.setSource(i),this.iter}consume(t={max_messages:100,expires:3e4}){if(this.type===hn.Fetch)return Promise.reject(new Error("ordered consumer initialized as fetch"));if(this.type===hn.Consume)return Promise.reject(new Error("ordered consumer doesn't support concurrent consume"));const{callback:n}=t;return n&&(this.userCallback=n),this.type=hn.Consume,this.opts=t,this.reset(t)}fetch(t={max_messages:100,expires:3e4}){var r;if(this.type===hn.Consume)return Promise.reject(new Error("ordered consumer already initialized as consume"));if(((r=this.iter)==null?void 0:r.done)===!1)return Promise.reject(new Error("ordered consumer doesn't support concurrent fetch"));const{callback:n}=t;return n&&(this.userCallback=n),this.type=hn.Fetch,this.opts=t,this.iter=new uu,this.reset(t,!0)}async next(t={expires:3e4}){const n=Ze(),r=t;return r.max_messages=1,r.callback=i=>{this.userCallback=null,n.resolve(i)},(await this.fetch(r)).iterClosed.then(()=>{n.resolve(null)}).catch(i=>{n.reject(i)}),n}delete(){return this.currentConsumer?this.api.delete(this.stream,this.currentConsumer.name).then(t=>Promise.resolve(t)).catch(t=>Promise.reject(t)).finally(()=>{this.currentConsumer=null}):Promise.resolve(!1)}async info(t){return this.currentConsumer==null?(this.currentConsumer=await this.resetConsumer(this.serial),Promise.resolve(this.currentConsumer)):t&&this.currentConsumer?Promise.resolve(this.currentConsumer):this.api.info(this.stream,this.currentConsumer.name)}}function ni(e){if(e===void 0)return;const{domain:t}=e;if(t===void 0)return e;const n=Object.assign({},e);if(delete n.domain,t==="")return n;if(n.external)throw new Error("domain and external are both set");return n.external={api:`$JS.${t}.API`},n}var On;const Za="OBJ_";class Ch{constructor(t){g(this,"api");g(this,"notified");this.api=t,this.notified=!1}checkVersion(){const t=this.api.nc.features.get($e.JS_SIMPLIFICATION);return t.ok?Promise.resolve():Promise.reject(new Error(`consumers framework is only supported on servers ${t.min} or better`))}async get(t,n={}){return typeof n=="object"?this.ordered(t,n):(await this.checkVersion(),this.api.info(t,n).then(r=>r.config.deliver_subject!==void 0?Promise.reject(new Error("push consumer not supported")):new Oh(this.api,r)).catch(r=>Promise.reject(r)))}async ordered(t,n){await this.checkVersion();const r=this.api;return new ec(r.nc,r.opts).info(t).then(i=>Promise.resolve(new Cw(this.api,t,n))).catch(i=>Promise.reject(i))}}class ro{constructor(t,n){g(this,"api");g(this,"_info");this.api=t,this._info=n}get name(){return this._info.config.name}alternates(){return this.info().then(t=>t.alternates?t.alternates:[])}async best(){if(await this.info(),this._info.alternates){const t=await this.api.info(this._info.alternates[0].name);return new ro(this.api,t)}else return this}info(t=!1,n){return t?Promise.resolve(this._info):this.api.info(this.name,n).then(r=>(this._info=r,this._info))}getConsumer(t){return new Ch(new Qa(this.api.nc,this.api.opts)).get(this.name,t)}getMessage(t){return this.api.getMessage(this.name,t)}deleteMessage(t,n){return this.api.deleteMessage(this.name,t,n)}}function Ah(){return{key:{encode(e){return e},decode(e){return e}},value:{encode(e){return e},decode(e){return e}}}}function Aw(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:Ah(),storage:fa.File}}const Mi="KV-Operation",fu="$KV",Pw=/^[-/=.\w]+$/,Iw=/^[-/=.>*\w]+$/,Tw=/^[-\w]+$/;function Mw(e){if(e.startsWith(".")||e.endsWith(".")||!Pw.test(e))throw new Error(`invalid key: ${e}`)}function Rw(e){if(e.startsWith(".")||e.endsWith(".")||!Iw.test(e))throw new Error(`invalid key: ${e}`)}function Nw(e){if(e.startsWith(".")||e.endsWith("."))throw new Error(`invalid key: ${e}`);const t=e.split(".");let n=!1;for(let r=0;r<t.length;r++)switch(t[r]){case"*":n=!0;break;case">":if(r!==t.length-1)throw new Error(`invalid key: ${e}`);n=!0;break}return n}function ui(e){if(!Tw.test(e))throw new Error(`invalid bucket name: ${e}`)}(function(e){e.MsgIdHdr="Nats-Msg-Id",e.ExpectedStreamHdr="Nats-Expected-Stream",e.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",e.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",e.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence"})(On||(On={}));class Ts{constructor(t,n,r){g(this,"js");g(this,"jsm");g(this,"stream");g(this,"bucket");g(this,"direct");g(this,"codec");g(this,"prefix");g(this,"editPrefix");g(this,"useJsPrefix");g(this,"_prefixLen");g(this,"validateKey",Mw);g(this,"validateSearchKey",Rw);g(this,"hasWildcards",Nw);ui(t),this.js=n,this.jsm=r,this.bucket=t,this.prefix=fu,this.editPrefix="",this.useJsPrefix=!1,this._prefixLen=0}static async create(t,n,r={}){ui(n);const s=await t.jetstreamManager(),i=new Ts(n,t,s);return await i.init(r),i}static async bind(t,n,r={}){const s=await t.jetstreamManager(),i=await s.streams.info(`${Vt}${n}`);ui(i.config.name);const o=new Ts(n,t,s);return Object.assign(o,i),o.codec=r.codec||Ah(),o.direct=i.config.allow_direct??!1,o.initializePrefixes(i),o}async init(t={}){const n=Object.assign(Aw(),t);this.codec=n.codec;const r={};this.stream=r.name=t.streamName??this.bucketName(),r.retention=ua.Limits,r.max_msgs_per_subject=n.history,n.maxBucketSize&&(n.max_bytes=n.maxBucketSize),n.max_bytes&&(r.max_bytes=n.max_bytes),r.max_msg_size=n.maxValueSize,r.storage=n.storage;const s=t.placementCluster??"";if(s&&(t.placement={},t.placement.cluster=s,t.placement.tags=[]),t.placement&&(r.placement=t.placement),t.republish&&(r.republish=t.republish),t.description&&(r.description=t.description),t.mirror){const f=Object.assign({},t.mirror);f.name.startsWith(Vt)||(f.name=`${Vt}${f.name}`),r.mirror=f,r.mirror_direct=!0}else if(t.sources){const f=t.sources.map(d=>{const h=Object.assign({},d);h.name.startsWith(Vt)||(h.name=`${Vt}${h.name}`)});r.sources=f}else r.subjects=[this.subjectForBucket()];t.metadata&&(r.metadata=t.metadata),typeof t.compression=="boolean"&&(r.compression=t.compression?Yn.S2:Yn.None);const i=this.js.nc,o=i.getServerVersion(),a=o?aa(o,hr("2.7.2"))>=0:!1;r.discard=a?Ps.New:Ps.Old;const{ok:c,min:l}=i.features.get($e.JS_ALLOW_DIRECT);if(!c&&t.allow_direct===!0){const f=o?`${o.major}.${o.minor}.${o.micro}`:"unknown";return Promise.reject(new Error(`allow_direct is not available on server version ${f} - requires ${l}`))}t.allow_direct=typeof t.allow_direct=="boolean"?t.allow_direct:c,r.allow_direct=t.allow_direct,this.direct=r.allow_direct,r.num_replicas=n.replicas,n.ttl&&(r.max_age=Xe(n.ttl)),r.allow_rollup_hdrs=!0;let u;try{u=await this.jsm.streams.info(r.name),!u.config.allow_direct&&this.direct===!0&&(this.direct=!1)}catch(f){if(f.message==="stream not found")u=await this.jsm.streams.add(r);else throw f}this.initializePrefixes(u)}initializePrefixes(t){this._prefixLen=0,this.prefix=`$KV.${this.bucket}`,this.useJsPrefix=this.js.apiPrefix!=="$JS.API";const{mirror:n}=t.config;if(n){let r=n.name;if(r.startsWith(Vt)&&(r=r.substring(Vt.length)),n.external&&n.external.api!==""){const s=n.name.substring(Vt.length);this.useJsPrefix=!1,this.prefix=`$KV.${s}`,this.editPrefix=`${n.external.api}.$KV.${r}`}else this.editPrefix=this.prefix}}bucketName(){return this.stream??`${Vt}${this.bucket}`}subjectForBucket(){return`${this.prefix}.${this.bucket}.>`}subjectForKey(t,n=!1){const r=[];return n?(this.useJsPrefix&&r.push(this.js.apiPrefix),this.editPrefix!==""?r.push(this.editPrefix):r.push(this.prefix)):this.prefix&&r.push(this.prefix),r.push(t),r.join(".")}fullKeyName(t){return this.prefix!==""?`${this.prefix}.${t}`:`${fu}.${this.bucket}.${t}`}get prefixLen(){return this._prefixLen===0&&(this._prefixLen=this.prefix.length+1),this._prefixLen}encodeKey(t){const n=[];for(const r of t.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.encode(r));break}return n.join(".")}decodeKey(t){const n=[];for(const r of t.split("."))switch(r){case">":case"*":n.push(r);break;default:n.push(this.codec.key.decode(r));break}return n.join(".")}close(){return Promise.resolve()}dataLen(t,n){const r=n&&n.get(Pt.MessageSizeHdr)||"";return r!==""?parseInt(r,10):t.length}smToEntry(t){return new $w(this.bucket,this.prefixLen,t)}jmToEntry(t){const n=this.decodeKey(t.subject.substring(this.prefixLen));return new Dw(this.bucket,n,t)}async create(t,n){var i;let r;try{const o=await this.put(t,n,{previousSeq:0});return Promise.resolve(o)}catch(o){if(r=o,((i=o==null?void 0:o.api_error)==null?void 0:i.err_code)!==10071)return Promise.reject(o)}let s=0;try{const o=await this.get(t);return(o==null?void 0:o.operation)==="DEL"||(o==null?void 0:o.operation)==="PURGE"?(s=o!==null?o.revision:0,this.update(t,n,s)):Promise.reject(r)}catch(o){return Promise.reject(o)}}update(t,n,r){if(r<=0)throw new Error("version must be greater than 0");return this.put(t,n,{previousSeq:r})}async put(t,n,r={}){var o,a;const s=this.encodeKey(t);this.validateKey(s);const i={};if(r.previousSeq!==void 0){const c=In();i.headers=c,c.set(On.ExpectedLastSubjectSequenceHdr,`${r.previousSeq}`)}try{return(await this.js.publish(this.subjectForKey(s,!0),n,i)).seq}catch(c){const l=c;return l.isJetStreamError()?(l.message=(o=l.api_error)==null?void 0:o.description,l.code=`${(a=l.api_error)==null?void 0:a.code}`,Promise.reject(l)):Promise.reject(c)}}async get(t,n){const r=this.encodeKey(t);this.validateKey(r);let s={last_by_subj:this.subjectForKey(r)};n&&n.revision>0&&(s={seq:n.revision});let i;try{this.direct?i=await this.jsm.direct.getMessage(this.bucketName(),s):i=await this.jsm.streams.getMessage(this.bucketName(),s);const o=this.smToEntry(i);return o.key!==r?null:o}catch(o){if(o.code===se.JetStream404NoMessages)return null;throw o}}purge(t){return this._deleteOrPurge(t,"PURGE")}delete(t){return this._deleteOrPurge(t,"DEL")}async purgeDeletes(t=30*60*1e3){const n=Ze(),r=[],s=await this.watch({key:">",initializedFn:()=>{n.resolve()}});(async()=>{for await(const c of s)(c.operation==="DEL"||c.operation==="PURGE")&&r.push(c)})().then(),await n,s.stop();const i=Date.now()-t,o=r.map(c=>{const l=this.subjectForKey(c.key);return c.created.getTime()>=i?this.jsm.streams.purge(this.stream,{filter:l,keep:1}):this.jsm.streams.purge(this.stream,{filter:l,keep:0})}),a=await Promise.all(o);return a.unshift({success:!0,purged:0}),a.reduce((c,l)=>(c.purged+=l.purged,c))}async _deleteOrPurge(t,n){if(!this.hasWildcards(t))return this._doDeleteOrPurge(t,n);const r=await this.keys(t),s=[];for await(const i of r)s.push(this._doDeleteOrPurge(i,n)),s.length===100&&(await Promise.all(s),s.length=0);s.length>0&&await Promise.all(s)}async _doDeleteOrPurge(t,n){const r=this.encodeKey(t);this.validateKey(r);const s=In();s.set(Mi,n),n==="PURGE"&&s.set(Pt.RollupHdr,Pt.RollupValueSubject),await this.js.publish(this.subjectForKey(r,!0),Ht,{headers:s})}_buildCC(t,n,r={}){const s=this.encodeKey(t);this.validateSearchKey(t);let i=nt.LastPerSubject;return n===en.AllHistory&&(i=nt.All),n===en.UpdatesOnly&&(i=nt.New),Object.assign({deliver_policy:i,ack_policy:ct.None,filter_subject:this.fullKeyName(s),flow_control:!0,idle_heartbeat:Xe(5*1e3)},r)}remove(t){return this.purge(t)}async history(t={}){const n=t.key??">",r=new dt,s={};s.headers_only=t.headers_only||!1;let i;i=()=>{r.stop()};let o=0;const a=this._buildCC(n,en.AllHistory,s),c=a.filter_subject,l=Pn(a);l.bindStream(this.stream),l.orderedConsumer(),l.callback((f,d)=>{if(f){r.stop(f);return}if(d){const h=this.jmToEntry(d);r.push(h),r.received++,(i&&o>0&&r.received>=o||d.info.pending===0)&&(r.push(i),i=void 0)}});const u=await this.js.subscribe(c,l);if(i){const{info:{last:f}}=u,d=f.num_pending+f.delivered.consumer_seq;if(d===0||r.received>=d)try{i()}catch(h){r.stop(h)}finally{i=void 0}else o=d}return r._data=u,r.iterClosed.then(()=>{u.unsubscribe()}),u.closed.then(()=>{r.stop()}).catch(f=>{r.stop(f)}),r}async watch(t={}){const n=t.key??">",r=new dt,s={};s.headers_only=t.headers_only||!1;let i=en.LastValue;t.include===en.AllHistory?i=en.AllHistory:t.include===en.UpdatesOnly&&(i=en.UpdatesOnly);const o=t.ignoreDeletes===!0;let a=t.initializedFn,c=0;const l=this._buildCC(n,i,s),u=l.filter_subject,f=Pn(l);f.bindStream(this.stream),f.orderedConsumer(),f.callback((h,E)=>{if(h){r.stop(h);return}if(E){const C=this.jmToEntry(E);if(o&&C.operation==="DEL")return;r.push(C),r.received++,a&&(c>0&&r.received>=c||E.info.pending===0)&&(r.push(a),a=void 0)}});const d=await this.js.subscribe(u,f);if(a){const{info:{last:h}}=d,E=h.num_pending+h.delivered.consumer_seq;if(E===0||r.received>=E)try{a()}catch(C){r.stop(C)}finally{a=void 0}else c=E}return r._data=d,r.iterClosed.then(()=>{d.unsubscribe()}),d.closed.then(()=>{r.stop()}).catch(h=>{r.stop(h)}),r}async keys(t=">"){const n=new dt,r=this._buildCC(t,en.LastValue,{headers_only:!0}),s=r.filter_subject,i=Pn(r);i.bindStream(this.stream),i.orderedConsumer();const o=await this.js.subscribe(s,i);return(async()=>{var c;for await(const l of o){const u=(c=l.headers)==null?void 0:c.get(Mi);if(u!=="DEL"&&u!=="PURGE"){const f=this.decodeKey(l.subject.substring(this.prefixLen));n.push(f)}l.info.pending===0&&o.unsubscribe()}})().then(()=>{n.stop()}).catch(c=>{n.stop(c)}),o.info.last.num_pending===0&&o.unsubscribe(),n}purgeBucket(t){return this.jsm.streams.purge(this.bucketName(),t)}destroy(){return this.jsm.streams.delete(this.bucketName())}async status(){var i;const n=((i=this.js.nc.info)==null?void 0:i.cluster)??"",r=this.bucketName(),s=await this.jsm.streams.info(r);return new Ph(s,n)}}class Ph{constructor(t,n=""){g(this,"si");g(this,"cluster");this.si=t,this.cluster=n}get bucket(){return this.si.config.name.startsWith(Vt)?this.si.config.name.substring(Vt.length):this.si.config.name}get values(){return this.si.state.messages}get history(){return this.si.config.max_msgs_per_subject}get ttl(){return Ya(this.si.config.max_age)}get bucket_location(){return this.cluster}get backingStore(){return this.si.config.storage}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get description(){return this.si.config.description??""}get maxBucketSize(){return this.si.config.max_bytes}get maxValueSize(){return this.si.config.max_msg_size}get max_bytes(){return this.si.config.max_bytes}get placement(){return this.si.config.placement||{cluster:"",tags:[]}}get placementCluster(){var t;return((t=this.si.config.placement)==null?void 0:t.cluster)??""}get republish(){return this.si.config.republish??{src:"",dest:""}}get streamInfo(){return this.si}get size(){return this.si.state.bytes}get metadata(){return this.si.config.metadata??{}}get compression(){return this.si.config.compression?this.si.config.compression!==Yn.None:!1}}const hu="SHA-256=";function Lw(e){return ui(e),`${Za}${e}`}function Fw(e){return e.startsWith(Za)?e.substring(4):e}class ha{constructor(t){g(this,"si");g(this,"backingStore");this.si=t,this.backingStore="JetStream"}get bucket(){return Fw(this.si.config.name)}get description(){return this.si.config.description??""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}get metadata(){return this.si.config.metadata}get compression(){return this.si.config.compression?this.si.config.compression!==Yn.None:!1}}class ec extends Us{constructor(t,n){super(t,n)}checkStreamConfigVersions(t){const n=this.nc;if(t.metadata){const{min:s,ok:i}=n.features.get($e.JS_STREAM_CONSUMER_METADATA);if(!i)throw new Error(`stream 'metadata' requires server ${s}`)}if(t.first_seq){const{min:s,ok:i}=n.features.get($e.JS_STREAM_FIRST_SEQ);if(!i)throw new Error(`stream 'first_seq' requires server ${s}`)}if(t.subject_transform){const{min:s,ok:i}=n.features.get($e.JS_STREAM_SUBJECT_TRANSFORM);if(!i)throw new Error(`stream 'subject_transform' requires server ${s}`)}if(t.compression){const{min:s,ok:i}=n.features.get($e.JS_STREAM_COMPRESSION);if(!i)throw new Error(`stream 'compression' requires server ${s}`)}if(t.consumer_limits){const{min:s,ok:i}=n.features.get($e.JS_DEFAULT_CONSUMER_LIMITS);if(!i)throw new Error(`stream 'consumer_limits' requires server ${s}`)}function r(s,i){var a;if((((a=i.subject_transforms)==null?void 0:a.length)||0)>0){const{min:c,ok:l}=n.features.get($e.JS_STREAM_SOURCE_SUBJECT_TRANSFORM);if(!l)throw new Error(`${s} 'subject_transforms' requires server ${c}`)}}t.sources&&t.sources.forEach(s=>{r("stream sources",s)}),t.mirror&&r("stream mirror",t.mirror)}async add(t={}){var s;this.checkStreamConfigVersions(t),Rt(t.name),t.mirror=ni(t.mirror),t.sources=(s=t.sources)==null?void 0:s.map(ni);const r=await this._request(`${this.prefix}.STREAM.CREATE.${t.name}`,t);return this._fixInfo(r),r}async delete(t){return Rt(t),(await this._request(`${this.prefix}.STREAM.DELETE.${t}`)).success}async update(t,n={}){var a;if(typeof t=="object"){const c=t;t=c.name,n=c,console.trace("\x1B[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1B[0m")}this.checkStreamConfigVersions(n),Rt(t);const r=await this.info(t),s=Object.assign(r.config,n);s.mirror=ni(s.mirror),s.sources=(a=s.sources)==null?void 0:a.map(ni);const o=await this._request(`${this.prefix}.STREAM.UPDATE.${t}`,s);return this._fixInfo(o),o}async info(t,n){Rt(t);const r=`${this.prefix}.STREAM.INFO.${t}`;let i=await this._request(r,n),{total:o,limit:a}=i,c=i.state.subjects?Object.getOwnPropertyNames(i.state.subjects).length:1;if(o&&o>c){const l=[i],u=n||{};let f=0;for(;o>c;){f++,u.offset=a*f;const h=await this._request(r,u);o=h.total,l.push(h);const E=Object.getOwnPropertyNames(h.state.subjects).length;if(c+=E,E<a)break}let d={};for(let h=0;h<l.length;h++)i=l[h],i.state.subjects&&(d=Object.assign(d,i.state.subjects));i.offset=0,i.total=0,i.limit=0,i.state.subjects=d}return this._fixInfo(i),i}list(t=""){const n=t!=null&&t.length?{subject:t}:{},r=i=>{const o=i;return o.streams.forEach(a=>{this._fixInfo(a)}),o.streams},s=`${this.prefix}.STREAM.LIST`;return new ts(s,r,this,n)}_fixInfo(t){t.config.sealed=t.config.sealed||!1,t.config.deny_delete=t.config.deny_delete||!1,t.config.deny_purge=t.config.deny_purge||!1,t.config.allow_rollup_hdrs=t.config.allow_rollup_hdrs||!1}async purge(t,n){if(n){const{keep:s,seq:i}=n;if(typeof s=="number"&&typeof i=="number")throw new Error("can specify one of keep or seq")}return Rt(t),await this._request(`${this.prefix}.STREAM.PURGE.${t}`,n)}async deleteMessage(t,n,r=!0){Rt(t);const s={seq:n};return r||(s.no_erase=!0),(await this._request(`${this.prefix}.STREAM.MSG.DELETE.${t}`,s)).success}async getMessage(t,n){Rt(t);const s=await this._request(`${this.prefix}.STREAM.MSG.GET.${t}`,n);return new Ih(s)}find(t){return this.findStream(t)}listKvs(){const t=r=>{var c;const i=r.streams.filter(l=>l.config.name.startsWith(Vt));i.forEach(l=>{this._fixInfo(l)});let o="";return i.length&&(o=((c=this.nc.info)==null?void 0:c.cluster)??""),i.map(l=>new Ph(l,o))},n=`${this.prefix}.STREAM.LIST`;return new ts(n,t,this)}listObjectStores(){const t=r=>{const i=r.streams.filter(a=>a.config.name.startsWith(Za));return i.forEach(a=>{this._fixInfo(a)}),i.map(a=>new ha(a))},n=`${this.prefix}.STREAM.LIST`;return new ts(n,t,this)}names(t=""){const n=t!=null&&t.length?{subject:t}:{},r=i=>i.streams,s=`${this.prefix}.STREAM.NAMES`;return new ts(s,r,this,n)}async get(t){const n=await this.info(t);return Promise.resolve(new ro(this,n))}}class Ih{constructor(t){g(this,"_header");g(this,"smr");this.smr=t}get subject(){return this.smr.message.subject}get seq(){return this.smr.message.seq}get timestamp(){return this.smr.message.time}get time(){return new Date(Date.parse(this.timestamp))}get data(){return this.smr.message.data?this._parse(this.smr.message.data):Ht}get header(){if(!this._header)if(this.smr.message.hdrs){const t=this._parse(this.smr.message.hdrs);this._header=Wn.decode(t)}else this._header=In();return this._header}_parse(t){const n=atob(t),r=n.length,s=new Uint8Array(r);for(let i=0;i<r;i++)s[i]=n.charCodeAt(i);return s}json(t){return sn(t).decode(this.data)}string(){return qt.decode(this.data)}}g(Ih,"jc");class jw{constructor(t){g(this,"api");this.api=t}get(t){return this.api.info(t).then(n=>new ro(this.api,n))}}class $w{constructor(t,n,r){g(this,"bucket");g(this,"sm");g(this,"prefixLen");this.bucket=t,this.prefixLen=n,this.sm=r}get key(){return this.sm.subject.substring(this.prefixLen)}get value(){return this.sm.data}get delta(){return 0}get created(){return this.sm.time}get revision(){return this.sm.seq}get operation(){return this.sm.header.get(Mi)||"PUT"}get length(){const t=this.sm.header.get(Pt.MessageSizeHdr)||"";return t!==""?parseInt(t,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class Dw{constructor(t,n,r){g(this,"bucket");g(this,"key");g(this,"sm");this.bucket=t,this.key=n,this.sm=r}get value(){return this.sm.data}get created(){return new Date(Ya(this.sm.info.timestampNanos))}get revision(){return this.sm.seq}get operation(){var t;return((t=this.sm.headers)==null?void 0:t.get(Mi))||"PUT"}get delta(){return this.sm.info.pending}get length(){var n;const t=((n=this.sm.headers)==null?void 0:n.get(Pt.MessageSizeHdr))||"";return t!==""?parseInt(t,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class Io{constructor(t){g(this,"info");g(this,"hdrs");this.info=t}get name(){return this.info.name}get description(){return this.info.description??""}get headers(){return this.hdrs||(this.hdrs=Wn.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){return this.info.deleted??!1}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}get revision(){return this.info.revision}get metadata(){return this.info.metadata||{}}isLink(){var t,n;return((t=this.info.options)==null?void 0:t.link)!==void 0&&((n=this.info.options)==null?void 0:n.link)!==null}}function du(e){const t={name:e.name,description:e.description??"",options:e.options,metadata:e.metadata};if(e.headers){const n=e.headers;t.headers=n.toRecord()}return t}function Uw(){return new ReadableStream({pull(e){e.enqueue(new Uint8Array(0)),e.close()}})}class gs{constructor(t,n,r){g(this,"jsm");g(this,"js");g(this,"stream");g(this,"name");this.name=t,this.jsm=n,this.js=r}_checkNotEmpty(t){return!t||t.length===0?{name:t,error:new Error("name cannot be empty")}:{name:t}}async info(t){const n=await this.rawInfo(t);return n?new Io(n):null}async list(){const t=[],n=await this.watch({ignoreDeletes:!0,includeHistory:!0});for await(const r of n){if(r===null)break;t.push(r)}return Promise.resolve(t)}async rawInfo(t){const{name:n,error:r}=this._checkNotEmpty(t);if(r)return Promise.reject(r);const s=this._metaSubject(n);try{const i=await this.jsm.streams.getMessage(this.stream,{last_by_subj:s}),a=sn().decode(i.data);return a.revision=i.seq,a}catch(i){return i.code==="404"?null:Promise.reject(i)}}async _si(t){try{return await this.jsm.streams.info(this.stream,t)}catch(n){return n.code==="404"?null:Promise.reject(n)}}async seal(){let t=await this._si();return t===null?Promise.reject(new Error("object store not found")):(t.config.sealed=!0,t=await this.jsm.streams.update(this.stream,t.config),Promise.resolve(new ha(t)))}async status(t){const n=await this._si(t);return n===null?Promise.reject(new Error("object store not found")):Promise.resolve(new ha(n))}destroy(){return this.jsm.streams.delete(this.stream)}async _put(t,n,r){var U;const s=this.js.getOptions();r=r||{timeout:s.timeout},r.timeout=r.timeout||s.timeout,r.previousRevision=r.previousRevision??void 0;const{timeout:i,previousRevision:o}=r,a=this.js.nc.info,c=(a==null?void 0:a.max_payload)||1024;t=t||{},t.options=t.options||{};let l=((U=t.options)==null?void 0:U.max_chunk_size)||128*1024;l=l>c?c:l,t.options.max_chunk_size=l;const u=await this.info(t.name),{name:f,error:d}=this._checkNotEmpty(t.name);if(d)return Promise.reject(d);const h=$s.next(),E=this._chunkSubject(h),C=this._metaSubject(f),N=Object.assign({bucket:this.name,nuid:h,size:0,chunks:0},du(t)),k=Ze(),P=[],L=new Br;try{const V=n?n.getReader():null,A=new cu;for(;;){const{done:he,value:W}=V?await V.read():{done:!0,value:void 0};if(he){if(L.size()>0){const Te=L.drain();A.update(Te),N.chunks++,N.size+=Te.length,P.push(this.js.publish(E,Te,{timeout:i}))}await Promise.all(P),P.length=0,N.mtime=new Date().toISOString();const ue=A.digest("base64"),me=ue.length%3,re=me>0?"=".repeat(me):"";N.digest=`${hu}${ue}${re}`,N.deleted=!1;const ie=In();typeof o=="number"&&ie.set(On.ExpectedLastSubjectSequenceHdr,`${o}`),ie.set(Pt.RollupHdr,Pt.RollupValueSubject);const ke=await this.js.publish(C,sn().encode(N),{headers:ie,timeout:i});if(N.revision=ke.seq,u)try{await this.jsm.streams.purge(this.stream,{filter:`$O.${this.name}.C.${u.nuid}`})}catch{}k.resolve(new Io(N));break}if(W)for(L.fill(W);L.size()>l;){N.chunks++,N.size+=l;const ue=L.drain(t.options.max_chunk_size);A.update(ue),P.push(this.js.publish(E,ue,{timeout:i}))}}}catch(V){await this.jsm.streams.purge(this.stream,{filter:E}),k.reject(V)}return k}putBlob(t,n,r){function s(i){return new ReadableStream({pull(o){o.enqueue(i),o.close()}})}return n===null&&(n=new Uint8Array(0)),this.put(t,s(n),r)}put(t,n,r){var s;return(s=t==null?void 0:t.options)!=null&&s.link?Promise.reject(new Error("link cannot be set when putting the object in bucket")):this._put(t,n,r)}async getBlob(t){async function n(i){const o=new Br,a=i.getReader();for(;;){const{done:c,value:l}=await a.read();if(c)return o.drain();l&&l.length&&o.fill(l)}}const r=await this.get(t);if(r===null)return Promise.resolve(null);const s=await Promise.all([r.error,n(r.data)]);return s[0]?Promise.reject(s[0]):Promise.resolve(s[1])}async get(t){const n=await this.rawInfo(t);if(n===null||n.deleted)return Promise.resolve(null);if(n.options&&n.options.link){const u=n.options.link.name||"";if(u==="")throw new Error("link is a bucket");return(n.options.link.bucket!==this.name?await gs.create(this.js,n.options.link.bucket):this).get(u)}const r=Ze(),s={info:new Io(n),error:r};if(n.size===0)return s.data=Uw(),r.resolve(null),Promise.resolve(s);let i;const o=Pn();o.orderedConsumer();const a=new cu,c=`$O.${this.name}.C.${n.nuid}`,l=await this.js.subscribe(c,o);return(async()=>{for await(const u of l)if(u.data.length>0&&(a.update(u.data),i.enqueue(u.data)),u.info.pending===0){const f=a.digest("base64"),d=f.length%3,h=d>0?"=".repeat(d):"",E=`${hu}${f}${h}`;E!==n.digest?i.error(new Error(`received a corrupt object, digests do not match received: ${n.digest} calculated ${E}`)):i.close(),l.unsubscribe()}})().then(()=>{r.resolve()}).catch(u=>{i.error(u),r.reject(u)}),s.data=new ReadableStream({start(u){i=u},cancel(){l.unsubscribe()}}),s}linkStore(t,n){if(!(n instanceof gs))return Promise.reject("bucket required");const r=n,{name:s,error:i}=this._checkNotEmpty(t);if(i)return Promise.reject(i);const o={name:s,options:{link:{bucket:r.name}}};return this._put(o,null)}async link(t,n){const{name:r,error:s}=this._checkNotEmpty(t);if(s)return Promise.reject(s);if(n.deleted)return Promise.reject(new Error("src object is deleted"));if(n.isLink())return Promise.reject(new Error("src object is a link"));const i=await this.rawInfo(t);if(i!==null&&!i.deleted)return Promise.reject(new Error("an object already exists with that name"));const o={bucket:n.bucket,name:n.name},a={name:r,bucket:n.bucket,options:{link:o}};await this.js.publish(this._metaSubject(t),JSON.stringify(a));const c=await this.info(t);return Promise.resolve(c)}async delete(t){const n=await this.rawInfo(t);if(n===null)return Promise.resolve({purged:0,success:!1});n.deleted=!0,n.size=0,n.chunks=0,n.digest="";const r=sn(),s=In();return s.set(Pt.RollupHdr,Pt.RollupValueSubject),await this.js.publish(this._metaSubject(n.name),r.encode(n),{headers:s}),this.jsm.streams.purge(this.stream,{filter:this._chunkSubject(n.nuid)})}async update(t,n={}){const r=await this.rawInfo(t);if(r===null)return Promise.reject(new Error("object not found"));if(r.deleted)return Promise.reject(new Error("cannot update meta for a deleted object"));n.name=n.name??r.name;const{name:s,error:i}=this._checkNotEmpty(n.name);if(i)return Promise.reject(i);if(t!==n.name){const c=await this.info(n.name);if(c&&!c.deleted)return Promise.reject(new Error("an object already exists with that name"))}n.name=s;const o=Object.assign({},r,du(n)),a=await this.js.publish(this._metaSubject(o.name),JSON.stringify(o));return t!==n.name&&await this.jsm.streams.purge(this.stream,{filter:this._metaSubject(t)}),Promise.resolve(a)}async watch(t={}){t.includeHistory=t.includeHistory??!1,t.ignoreDeletes=t.ignoreDeletes??!1;let n=!1;const r=new dt,s=this._metaSubjectAll();try{await this.jsm.streams.getMessage(this.stream,{last_by_subj:s})}catch(c){c.code==="404"?(r.push(null),n=!0):r.stop(c)}const i=sn(),o=Pn();o.orderedConsumer(),t.includeHistory?o.deliverLastPerSubject():(n=!0,o.deliverNew()),o.callback((c,l)=>{var u;if(c){r.stop(c);return}if(l!==null){const f=i.decode(l.data);f.deleted&&t.ignoreDeletes===!0||r.push(f),((u=l.info)==null?void 0:u.pending)===0&&!n&&(n=!0,r.push(null))}});const a=await this.js.subscribe(s,o);return r._data=a,r.iterClosed.then(()=>{a.unsubscribe()}),a.closed.then(()=>{r.stop()}).catch(c=>{r.stop(c)}),r}_chunkSubject(t){return`$O.${this.name}.C.${t}`}_metaSubject(t){return`$O.${this.name}.M.${ms.encode(t)}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}async init(t={}){try{this.stream=Lw(this.name)}catch(s){return Promise.reject(s)}const n=(t==null?void 0:t.ttl)||0;delete t.ttl;const r=Object.assign({max_age:n},t);r.name=this.stream,r.allow_direct=!0,r.allow_rollup_hdrs=!0,r.discard=Ps.New,r.subjects=[`$O.${this.name}.C.>`,`$O.${this.name}.M.>`],t.placement&&(r.placement=t.placement),t.metadata&&(r.metadata=t.metadata),typeof t.compression=="boolean"&&(r.compression=t.compression?Yn.S2:Yn.None);try{await this.jsm.streams.info(r.name)}catch(s){s.message==="stream not found"&&await this.jsm.streams.add(r)}}static async create(t,n,r={}){const s=await t.jetstreamManager(),i=new gs(n,s,t);return await i.init(r),Promise.resolve(i)}}class Bw{constructor(t){g(this,"js");g(this,"jsm");this.js=t}kv(t,n={}){const r=this.js,{ok:s,min:i}=r.nc.features.get($e.JS_KV);return s?n.bindOnly?Ts.bind(this.js,t):Ts.create(this.js,t,n):Promise.reject(new Error(`kv is only supported on servers ${i} or better`))}os(t,n={}){var o;if(typeof((o=crypto==null?void 0:crypto.subtle)==null?void 0:o.digest)!="function")return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const r=this.js,{ok:s,min:i}=r.nc.features.get($e.JS_OBJECTSTORE);return s?gs.create(this.js,t,n):Promise.reject(new Error(`objectstore is only supported on servers ${i} or better`))}}class tc extends Us{constructor(n,r){super(n,r);g(this,"consumers");g(this,"streams");g(this,"consumerAPI");g(this,"streamAPI");this.consumerAPI=new Qa(n,r),this.streamAPI=new ec(n,r),this.consumers=new Ch(this.consumerAPI),this.streams=new jw(this.streamAPI)}jetstreamManager(n){const r=Object.assign({checkAPI:n},this.opts);return this.nc.jetstreamManager(r)}get apiPrefix(){return this.prefix}get views(){return new Bw(this)}async publish(n,r=Ht,s){s=s||{},s.expect=s.expect||{};const i=(s==null?void 0:s.headers)||In();s&&(s.msgID&&i.set(On.MsgIdHdr,s.msgID),s.expect.lastMsgID&&i.set(On.ExpectedLastMsgIdHdr,s.expect.lastMsgID),s.expect.streamName&&i.set(On.ExpectedStreamHdr,s.expect.streamName),typeof s.expect.lastSequence=="number"&&i.set(On.ExpectedLastSeqHdr,`${s.expect.lastSequence}`),typeof s.expect.lastSubjectSequence=="number"&&i.set(On.ExpectedLastSubjectSequenceHdr,`${s.expect.lastSubjectSequence}`));const o=s.timeout||this.timeout,a={};o&&(a.timeout=o),s&&(a.headers=i);let{retries:c,retry_delay:l}=s;c=c||1,l=l||250;let u;for(let d=0;d<c;d++)try{u=await this.nc.request(n,r,a);break}catch(h){if(h.code==="503"&&d+1<c)await Ds(l);else throw h}const f=this.parseJsResponse(u);if(f.stream==="")throw ge.errorForCode(se.JetStreamInvalidAck);return f.duplicate=f.duplicate?f.duplicate:!1,f}async pull(n,r,s=0){Rt(n),Mr(r);let i=this.timeout;s>i&&(i=s),s=s<0?0:Xe(s);const o={batch:1,no_wait:s===0,expires:s},a=await this.nc.request(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${r}`,this.jc.encode(o),{noMux:!0,timeout:i}),c=Rr(a);if(c)throw c;return Is(a)}fetch(n,r,s={}){Rt(n),Mr(r);let i=null;const o=(s.max_bytes??0)>0;let a=0;const c=o?s.max_bytes:0;let l=null;const u={};if(u.batch=s.batch||1,c){const P=this.nc.features.get($e.JS_PULL_MAX_BYTES);if(!P.ok)throw new Error(`max_bytes is only supported on servers ${P.min} or better`);u.max_bytes=c}u.no_wait=s.no_wait||!1,u.no_wait&&u.expires&&(u.expires=0);const f=s.expires||0;if(f&&(u.expires=Xe(f)),f===0&&u.no_wait===!1)throw new Error("expires or no_wait is required");const d=s.idle_heartbeat||0;d&&(u.idle_heartbeat=Xe(d),s.delay_heartbeat===!0&&(u.idle_heartbeat=Xe(d*4)));const h=new dt,E=u.batch;let C=0;h.protocolFilterFn=(P,L=!1)=>la(P.msg)?(l==null||l.work(),!1):!0,h.dispatchedFn=P=>{if(P){if(o&&(a+=P.data.length),C++,i&&P.info.pending===0)return;(h.getPending()===1&&P.info.pending===0||E===C||c>0&&a>=c)&&h.stop()}};const N=yn(this.nc.options.inboxPrefix),k=this.nc.subscribe(N,{max:s.batch,callback:(P,L)=>{P===null&&(P=Rr(L)),P!==null?(i&&(i.cancel(),i=null),px(P)?h.stop(Mh(P)===null?void 0:P):h.stop(P)):(l==null||l.work(),h.received++,h.push(Is(L)))}});return f&&(i=Ur(f),i.catch(()=>{k.isClosed()||(k.drain().catch(()=>{}),i=null),l&&l.cancel()})),(async()=>{try{d&&(l=new Xa(d,P=>(h.push(()=>{h.err=new ge(`${Wt.IdleHeartbeatMissed}: ${P}`,se.JetStreamIdleHeartBeat)}),!0)))}catch{}await k.closed,i!==null&&(i.cancel(),i=null),l&&l.cancel(),h.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${r}`,this.jc.encode(u),{reply:N}),h}async pullSubscribe(n,r=Pn()){const s=await this._processOptions(n,r);if(s.ordered)throw new Error("pull subscribers cannot be be ordered");if(s.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const i=s.config.ack_policy;if(i===ct.None||i===ct.All)throw new Error("ack policy for pull consumers must be explicit");const o=this._buildTypedSubscriptionOpts(s),a=new qw(this,s.deliver,o);a.info=s;try{await this._maybeCreateConsumer(s)}catch(c){throw a.unsubscribe(),c}return a}async subscribe(n,r=Pn()){const s=await this._processOptions(n,r);if(!s.isBind&&!s.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const i=this._buildTypedSubscriptionOpts(s),o=new Th(this,s.deliver,i);o.info=s;try{await this._maybeCreateConsumer(s)}catch(a){throw o.unsubscribe(),a}return o._maybeSetupHbMonitoring(),o}async _processOptions(n,r=Pn()){const s=ou(r)?r.getOpts():r;if(s.isBind=ou(r)?r.isBind:!1,s.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},s.ordered){if(s.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},s.config.ack_policy!==ct.NotSet&&s.config.ack_policy!==ct.None)throw new ge("ordered consumer: ack_policy can only be set to 'none'",se.ApiError);if(s.config.durable_name&&s.config.durable_name.length>0)throw new ge("ordered consumer: durable_name cannot be set",se.ApiError);if(s.config.deliver_subject&&s.config.deliver_subject.length>0)throw new ge("ordered consumer: deliver_subject cannot be set",se.ApiError);if(s.config.max_deliver!==void 0&&s.config.max_deliver>1)throw new ge("ordered consumer: max_deliver cannot be set",se.ApiError);if(s.config.deliver_group&&s.config.deliver_group.length>0)throw new ge("ordered consumer: deliver_group cannot be set",se.ApiError);s.config.deliver_subject=yn(this.nc.options.inboxPrefix),s.config.ack_policy=ct.None,s.config.max_deliver=1,s.config.flow_control=!0,s.config.idle_heartbeat=s.config.idle_heartbeat||Xe(5e3),s.config.ack_wait=Xe(22*60*60*1e3),s.config.mem_storage=!0,s.config.num_replicas=1}if(s.config.ack_policy===ct.NotSet&&(s.config.ack_policy=ct.All),s.api=this,s.config=s.config||{},s.stream=s.stream?s.stream:await this.findStream(n),s.attached=!1,s.config.durable_name)try{const i=await this.consumerAPI.info(s.stream,s.config.durable_name);if(i){if(i.config.filter_subject&&i.config.filter_subject!==n)throw new Error("subject does not match consumer");const o=s.config.deliver_group??"";if(o===""&&i.push_bound===!0)throw new Error("duplicate subscription");const a=i.config.deliver_group??"";if(o!==a)throw a===""?new Error("durable requires no queue group"):new Error(`durable requires queue group '${a}'`);s.last=i,s.config=i.config,s.attached=!0,s.config.durable_name||(s.name=i.name)}}catch(i){if(i.code!=="404")throw i}return!s.attached&&s.config.filter_subject===void 0&&s.config.filter_subjects===void 0&&(s.config.filter_subject=n),s.deliver=s.config.deliver_subject||yn(this.nc.options.inboxPrefix),s}_buildTypedSubscriptionOpts(n){const r={};return r.adapter=zw(n.callbackFn===void 0),r.ingestionFilterFn=tc.ingestionFn(n.ordered),r.protocolFilterFn=(s,i=!1)=>{const o=s;return ca(o.msg)?(i||o.msg.respond(),!1):!0},!n.mack&&n.config.ack_policy!==ct.None&&(r.dispatchedFn=Ww),n.callbackFn&&(r.callback=n.callbackFn),r.max=n.max||0,r.queue=n.queue,r}async _maybeCreateConsumer(n){if(n.attached)return;if(n.isBind)throw new Error(`unable to bind - durable consumer ${n.config.durable_name} doesn't exist in ${n.stream}`);n.config=Object.assign({deliver_policy:nt.All,ack_policy:ct.Explicit,ack_wait:Xe(30*1e3),replay_policy:qr.Instant},n.config);const r=await this.consumerAPI.add(n.stream,n.config);if(Array.isArray(n.config.filter_subjects&&!Array.isArray(r.config.filter_subjects)))throw new Error("jetstream server doesn't support consumers with multiple filter subjects");n.name=r.name,n.config=r.config,n.last=r}static ingestionFn(n){return(r,s)=>{var c;const i=s;if(!r)return{ingest:!1,protocol:!1};const o=r;if(Rr(o.msg)||(c=i.monitor)==null||c.work(),la(o.msg)){const l=n?i._checkHbOrderConsumer(o.msg):!0;return n||i.info.flow_control.heartbeat_count++,{ingest:l,protocol:!0}}else if(ca(o.msg))return i.info.flow_control.fc_count++,{ingest:!0,protocol:!0};return{ingest:n?i._checkOrderedConsumer(r):!0,protocol:!1}}}}class Th extends Ow{constructor(n,r,s){super(n.nc,r,s);g(this,"js");g(this,"monitor");this.js=n,this.monitor=null,this.sub.closed.then(()=>{this.monitor&&this.monitor.cancel()})}set info(n){this.sub.info=n}get info(){return this.sub.info}_resetOrderedConsumer(n){if(this.info===null||this.sub.isClosed())return;const r=yn(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,r);const i=this.info;i.ordered_consumer_sequence.delivery_seq=0,i.flow_control.heartbeat_count=0,i.flow_control.fc_count=0,i.flow_control.consumer_restarts++,i.deliver=r,i.config.deliver_subject=r,i.config.deliver_policy=nt.StartSequence,i.config.opt_start_seq=n;const o={};o.stream_name=this.info.stream,o.config=i.config;const a=`${i.api.prefix}.CONSUMER.CREATE.${i.stream}`;this.js._request(a,o).then(c=>{const l=c;this.info.config=l.config,this.info.name=l.name}).catch(c=>{const l=new ge(`unable to recreate ordered consumer ${i.stream} at seq ${n}`,se.RequestError,c);this.sub.callback(l,{})})}_maybeSetupHbMonitoring(){var r,s;const n=((s=(r=this.info)==null?void 0:r.config)==null?void 0:s.idle_heartbeat)||0;n&&this._setupHbMonitoring(Ya(n))}_setupHbMonitoring(n,r=0){const s={cancelAfter:0,maxOut:2};r&&(s.cancelAfter=r);const i=this.sub,o=a=>{var u,f,d;const c=sw(409,`${Wt.IdleHeartbeatMissed}: ${a}`,this.sub.subject);if(!((u=this.info)==null?void 0:u.ordered))this.sub.callback(null,c);else{if(!this.js.nc.protocol.connected)return!1;const h=((d=(f=this.info)==null?void 0:f.ordered_consumer_sequence)==null?void 0:d.stream_seq)||0;return this._resetOrderedConsumer(h+1),!1}return!i.noIterator};this.monitor=new Xa(n,o,s)}_checkHbOrderConsumer(n){const r=n.headers.get(Pt.ConsumerStalledHdr);r!==""&&this.js.nc.publish(r);const s=parseInt(n.headers.get(Pt.LastConsumerSeqHdr),10),i=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,s!==i.delivery_seq&&this._resetOrderedConsumer(i.stream_seq+1),!1}_checkOrderedConsumer(n){const r=this.info.ordered_consumer_sequence,s=n.info.streamSequence,i=n.info.deliverySequence;return i!=r.delivery_seq+1?(this._resetOrderedConsumer(r.stream_seq+1),!1):(r.delivery_seq=i,r.stream_seq=s,!0)}async destroy(){this.isClosed()||await this.drain();const n=this.sub.info,r=n.config.durable_name||n.name,s=`${n.api.prefix}.CONSUMER.DELETE.${n.stream}.${r}`;await n.api._request(s)}async consumerInfo(){const n=this.sub.info,r=n.config.durable_name||n.name,s=`${n.api.prefix}.CONSUMER.INFO.${n.stream}.${r}`,i=await n.api._request(s);return n.last=i,i}}class qw extends Th{constructor(t,n,r){super(t,n,r)}pull(t={batch:1}){const{stream:n,config:r,name:s}=this.sub.info,i=r.durable_name??s,o={};if(o.batch=t.batch||1,o.no_wait=t.no_wait||!1,(t.max_bytes??0)>0){const l=this.js.nc.features.get($e.JS_PULL_MAX_BYTES);if(!l.ok)throw new Error(`max_bytes is only supported on servers ${l.min} or better`);o.max_bytes=t.max_bytes}let a=0;t.expires&&t.expires>0&&(a=t.expires,o.expires=Xe(a));let c=0;if(t.idle_heartbeat&&t.idle_heartbeat>0&&(c=t.idle_heartbeat,o.idle_heartbeat=Xe(c)),c&&a===0)throw new Error("idle_heartbeat requires expires");if(c>a)throw new Error("expires must be greater than idle_heartbeat");if(this.info){this.monitor&&this.monitor.cancel(),a&&c&&(this.monitor?this.monitor._change(c,a):this._setupHbMonitoring(c,a));const l=this.info.api,u=`${l.prefix}.CONSUMER.MSG.NEXT.${n}.${i}`,f=this.sub.subject;l.nc.publish(u,l.jc.encode(o),{reply:f})}}}function zw(e){return e?Vw:Hw}function Hw(e,t){return e?[e,null]:(e=Rr(t),e?[e,null]:[null,Is(t)])}function Vw(e,t){if(e)return[e,null];const n=Rr(t);return n!==null?[Mh(n),null]:[null,Is(t)]}function Mh(e){if(e!==null)switch(e.code){case se.JetStream404NoMessages:case se.JetStream408RequestTimeout:return null;case se.JetStream409:return iw(e)?e:null;default:return e}return null}function Ww(e){e&&e.ack()}class Gw extends Us{constructor(t,n){super(t,n)}async getMessage(t,n){Rt(t);let r=n;const{last_by_subj:s}=r;s&&(r=null);const i=r?this.jc.encode(r):Ht,o=this.opts.apiPrefix||"$JS.API",a=s?`${o}.DIRECT.GET.${t}.${s}`:`${o}.DIRECT.GET.${t}`,c=await this.nc.request(a,i),l=Rr(c);if(l)return Promise.reject(l);const u=new Rh(c);return Promise.resolve(u)}}class Rh{constructor(t){g(this,"data");g(this,"header");if(!t.headers)throw new Error("headers expected");this.data=t.data,this.header=t.headers}get subject(){return this.header.last(kr.Subject)}get seq(){const t=this.header.last(kr.Sequence);return typeof t=="string"?parseInt(t):0}get time(){return new Date(Date.parse(this.timestamp))}get timestamp(){return this.header.last(kr.TimeStamp)}get stream(){return this.header.last(kr.Stream)}json(t){return sn(t).decode(this.data)}string(){return qt.decode(this.data)}}g(Rh,"jc");class Kw extends Us{constructor(n,r){super(n,r);g(this,"streams");g(this,"consumers");g(this,"direct");this.streams=new ec(n,r),this.consumers=new Qa(n,r),this.direct=new Gw(n,r)}async getAccountInfo(){return await this._request(`${this.prefix}.INFO`)}jetstream(){return this.nc.jetstream(this.getOptions())}advisories(){const n=new dt;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(r,s)=>{if(r)throw r;try{const i=this.parseJsResponse(s),o=i.type.split("."),a=o[o.length-1];n.push({kind:a,data:i})}catch(i){n.stop(i)}}}),n}}const Jw="$SRV";class mu{constructor(t){g(this,"msg");this.msg=t}get data(){return this.msg.data}get sid(){return this.msg.sid}get subject(){return this.msg.subject}get reply(){return this.msg.reply||""}get headers(){return this.msg.headers}respond(t,n){return this.msg.respond(t,n)}respondError(t,n,r,s){var i,o;return s=s||{},s.headers=s.headers||In(),(i=s.headers)==null||i.set(Ci,`${t}`),(o=s.headers)==null||o.set(Oi,n),this.msg.respond(r,s)}json(t){return this.msg.json(t)}string(){return this.msg.string()}}class Ms{constructor(t,n="",r=""){g(this,"subject");g(this,"queue");g(this,"srv");n!==""&&Qw("service group",n);let s="";if(t instanceof Bs)this.srv=t,s="";else if(t instanceof Ms){const i=t;this.srv=i.srv,r===""&&i.queue!==""&&(r=i.queue),s=i.subject}else throw new Error("unknown ServiceGroup type");this.subject=this.calcSubject(s,n),this.queue=r}calcSubject(t,n=""){return n===""?t:t!==""?`${t}.${n}`:n}addEndpoint(t="",n){n=n||{subject:t};const r=typeof n=="function"?{handler:n,subject:t}:n;es("endpoint",t);let{subject:s,handler:i,metadata:o,queue:a}=r;s=s||t,a=a||this.queue,Yw("endpoint subject",s),s=this.calcSubject(this.subject,s);const c={name:t,subject:s,queue:a,handler:i,metadata:o};return this.srv._addEndpoint(c)}addGroup(t="",n=""){return new Ms(this,t,n)}}function Yw(e,t){if(t==="")throw new Error(`${e} cannot be empty`);if(t.indexOf(" ")!==-1)throw new Error(`${e} cannot contain spaces: '${t}'`);const n=t.split(".");n.forEach((r,s)=>{if(r===">"&&s!==n.length-1)throw new Error(`${e} cannot have internal '>': '${t}'`)})}function Qw(e,t){if(t.indexOf(" ")!==-1)throw new Error(`${e} cannot contain spaces: '${t}'`);t.split(".").forEach(r=>{if(r===">")throw new Error(`${e} name cannot contain internal '>': '${t}'`)})}class Bs{constructor(t,n={name:"",version:""}){g(this,"nc");g(this,"_id");g(this,"config");g(this,"handlers");g(this,"internal");g(this,"_stopped");g(this,"_done");g(this,"started");this.nc=t,this.config=Object.assign({},n),this.config.queue||(this.config.queue="q"),es("name",this.config.name),es("queue",this.config.queue),hr(this.config.version),this._id=$s.next(),this.internal=[],this._done=Ze(),this._stopped=!1,this.handlers=[],this.started=new Date().toISOString(),this.reset(),this.nc.closed().then(()=>{this.close().catch()}).catch(r=>{this.close(r).catch()})}static controlSubject(t,n="",r="",s){const i=s??Jw;return n===""&&r===""?`${i}.${t}`:(es("control subject name",n),r!==""?(es("control subject id",r),`${i}.${t}.${n}.${r}`):`${i}.${t}.${n}`)}get subjects(){return this.handlers.filter(t=>t.internal===!1).map(t=>t.subject)}get id(){return this._id}get name(){return this.config.name}get description(){return this.config.description??""}get version(){return this.config.version}get metadata(){return this.config.metadata}errorToHeader(t){const n=In();if(t instanceof Ai){const r=t;n.set(Oi,r.message),n.set(Ci,`${r.code}`)}else n.set(Oi,t.message),n.set(Ci,"500");return n}setupHandler(t,n=!1){const r=n?"":t.queue?t.queue:this.config.queue,{name:s,subject:i,handler:o}=t,a=t;a.internal=n,n&&this.internal.push(a),a.stats=new Xw(s,i,r),a.queue=r;const c=o?(l,u)=>{if(l){this.close(l);return}const f=Date.now();try{o(l,new mu(u))}catch(d){a.stats.countError(d),u==null||u.respond(Ht,{headers:this.errorToHeader(d)})}finally{a.stats.countLatency(f)}}:void 0;return a.sub=this.nc.subscribe(i,{callback:c,queue:r}),a.sub.closed.then(()=>{this._stopped||this.close(new Error(`required subscription ${t.subject} stopped`)).catch()}).catch(l=>{if(!this._stopped){const u=new Error(`required subscription ${t.subject} errored: ${l.message}`);u.stack=l.stack,this.close(u).catch()}}),a}info(){return{type:hs.INFO,name:this.name,id:this.id,version:this.version,description:this.description,metadata:this.metadata,endpoints:this.endpoints()}}endpoints(){return this.handlers.map(t=>{const{subject:n,metadata:r,name:s,queue:i}=t;return{subject:n,metadata:r,name:s,queue_group:i}})}async stats(){const t=[];for(const n of this.handlers){if(typeof this.config.statsHandler=="function")try{n.stats.data=await this.config.statsHandler(n)}catch(r){n.stats.countError(r)}t.push(n.stats.stats(n.qi))}return{type:hs.STATS,name:this.name,id:this.id,version:this.version,started:this.started,metadata:this.metadata,endpoints:t}}addInternalHandler(t,n){const r=`${t}`.toUpperCase();this._doAddInternalHandler(`${r}-all`,t,n),this._doAddInternalHandler(`${r}-kind`,t,n,this.name),this._doAddInternalHandler(`${r}`,t,n,this.name,this.id)}_doAddInternalHandler(t,n,r,s="",i=""){const o={};o.name=t,o.subject=Bs.controlSubject(n,s,i),o.handler=r,this.setupHandler(o,!0)}start(){const t=sn(),n=(o,a)=>o?(this.close(o),Promise.reject(o)):this.stats().then(c=>(a==null||a.respond(t.encode(c)),Promise.resolve())),r=(o,a)=>o?(this.close(o),Promise.reject(o)):(a==null||a.respond(t.encode(this.info())),Promise.resolve()),s=t.encode(this.ping()),i=(o,a)=>o?(this.close(o).then().catch(),Promise.reject(o)):(a.respond(s),Promise.resolve());return this.addInternalHandler(Vn.PING,i),this.addInternalHandler(Vn.STATS,n),this.addInternalHandler(Vn.INFO,r),this.handlers.forEach(o=>{const{subject:a}=o;typeof a=="string"&&o.handler!==null&&this.setupHandler(o)}),Promise.resolve(this)}close(t){if(this._stopped)return this._done;this._stopped=!0;let n=[];return this.nc.isClosed()||(n=this.handlers.concat(this.internal).map(r=>r.sub.drain())),Promise.allSettled(n).then(()=>{this._done.resolve(t||null)}),this._done}get stopped(){return this._done}get isStopped(){return this._stopped}stop(t){return this.close(t)}ping(){return{type:hs.PING,name:this.name,id:this.id,version:this.version,metadata:this.metadata}}reset(){if(this.started=new Date().toISOString(),this.handlers)for(const t of this.handlers)t.stats.reset(t.qi)}addGroup(t,n){return new Ms(this,t,n)}addEndpoint(t,n){return new Ms(this).addEndpoint(t,n)}_addEndpoint(t){const n=new dt;n.noIterator=typeof t.handler=="function",n.noIterator||(t.handler=(s,i)=>{s?this.stop(s).catch():n.push(new mu(i))},n.iterClosed.then(()=>{this.close().catch()}));const r=this.setupHandler(t,!1);return r.qi=n,this.handlers.push(r),n}}class Xw{constructor(t,n,r=""){g(this,"name");g(this,"subject");g(this,"average_processing_time");g(this,"num_requests");g(this,"processing_time");g(this,"num_errors");g(this,"last_error");g(this,"data");g(this,"metadata");g(this,"queue");this.name=t,this.subject=n,this.average_processing_time=0,this.num_errors=0,this.num_requests=0,this.processing_time=0,this.queue=r}reset(t){this.num_requests=0,this.processing_time=0,this.average_processing_time=0,this.num_errors=0,this.last_error=void 0,this.data=void 0;const n=t;n&&(n.time=0,n.processed=0)}countLatency(t){this.num_requests++,this.processing_time+=Xe(Date.now()-t),this.average_processing_time=Math.round(this.processing_time/this.num_requests)}countError(t){this.num_errors++,this.last_error=t.message}_stats(){const{name:t,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c,queue:l}=this;return{name:t,subject:n,average_processing_time:r,num_errors:s,num_requests:i,processing_time:o,last_error:a,data:c,queue_group:l}}stats(t){const n=t;return(n==null?void 0:n.noIterator)===!1&&(this.processing_time=n.time,this.num_requests=n.processed,this.average_processing_time=this.processing_time>0&&this.num_requests>0?this.processing_time/this.num_requests:0),this._stats()}}class Zw{constructor(t,n={strategy:bn.JitterTimer,maxWait:2e3},r){g(this,"nc");g(this,"prefix");g(this,"opts");this.nc=t,this.prefix=r,this.opts=n}ping(t="",n=""){return this.q(Vn.PING,t,n)}stats(t="",n=""){return this.q(Vn.STATS,t,n)}info(t="",n=""){return this.q(Vn.INFO,t,n)}async q(t,n="",r=""){const s=new dt,i=sn(),o=Bs.controlSubject(t,n,r,this.prefix),a=await this.nc.requestMany(o,Ht,this.opts);return(async()=>{for await(const c of a)try{const l=i.decode(c.data);s.push(l)}catch(l){s.push(()=>{s.stop(l)})}s.push(()=>{s.stop()})})().catch(c=>{s.stop(c)}),s}}class nc{constructor(t){g(this,"options");g(this,"protocol");g(this,"draining");g(this,"listeners");g(this,"_services");this.draining=!1,this.options=Jx(t),this.listeners=[]}static connect(t={}){return new Promise((n,r)=>{const s=new nc(t);Ii.connect(s.options,s).then(i=>{s.protocol=i,async function(){for await(const o of i.status())s.listeners.forEach(a=>{a.push(o)})}(),n(s)}).catch(i=>{r(i)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(t,n,r){if(this.isClosed())throw ge.errorForCode(se.ConnectionClosed);if(n&&this.isDraining()||r&&this.protocol.noMorePublishing)throw ge.errorForCode(se.ConnectionDraining);if(t=t||"",t.length===0)throw ge.errorForCode(se.BadSubject)}publish(t,n,r){this._check(t,!1,!0),this.protocol.publish(t,n,r)}subscribe(t,n={}){this._check(t,!0,!1);const r=new xh(this.protocol,t,n);return this.protocol.subscribe(r),r}_resub(t,n,r){this._check(n,!0,!1);const s=t;s.max=r,r&&(s.max=r+s.received),this.protocol.resub(s,n)}requestMany(t,n=Ht,r={maxWait:1e3,maxMessages:-1}){const s=!this.protocol.options.noAsyncTraces;try{this._check(t,!0,!0)}catch(c){return Promise.reject(c)}if(r.strategy=r.strategy||bn.Timer,r.maxWait=r.maxWait||1e3,r.maxWait<1)return Promise.reject(new ge("timeout",se.InvalidOption));const i=new dt;function o(c){i.push(()=>{i.stop(c)})}function a(c,l){c||l===null?o(c===null?void 0:c):i.push(l)}if(r.noMux){const c=s?new Error().stack:null;let l=typeof r.maxMessages=="number"&&r.maxMessages>0?r.maxMessages:-1;const u=this.subscribe(yn(this.options.inboxPrefix),{callback:(E,C)=>{var N,k;if(((N=C==null?void 0:C.data)==null?void 0:N.length)===0&&((k=C==null?void 0:C.headers)==null?void 0:k.status)===se.NoResponders&&(E=ge.errorForCode(se.NoResponders)),E){c&&(E.stack+=`

${c}`),f(E);return}a(null,C),r.strategy===bn.Count&&(l--,l===0&&f()),r.strategy===bn.JitterTimer&&(h(),d=setTimeout(()=>{f()},300)),r.strategy===bn.SentinelMsg&&C&&C.data.length===0&&f()}});u.closed.then(()=>{o()}).catch(E=>{i.stop(E)});const f=E=>{E&&i.push(()=>{throw E}),h(),u.drain().then(()=>{o()}).catch(C=>{o()})};i.iterClosed.then(()=>{h(),u==null||u.unsubscribe()}).catch(E=>{h(),u==null||u.unsubscribe()});try{this.publish(t,n,{reply:u.getSubject()})}catch(E){f(E)}let d=setTimeout(()=>{f()},r.maxWait);const h=()=>{d&&clearTimeout(d)}}else{const c=r;c.callback=a,i.iterClosed.then(()=>{l.cancel()}).catch(u=>{l.cancel(u)});const l=new nw(this.protocol.muxSubscriptions,t,c);this.protocol.request(l);try{this.publish(t,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${l.token}`,headers:r.headers})}catch(u){l.cancel(u)}}return Promise.resolve(i)}request(t,n,r={timeout:1e3,noMux:!1}){try{this._check(t,!0,!0)}catch(i){return Promise.reject(i)}const s=!this.protocol.options.noAsyncTraces;if(r.timeout=r.timeout||1e3,r.timeout<1)return Promise.reject(new ge("timeout",se.InvalidOption));if(!r.noMux&&r.reply)return Promise.reject(new ge("reply can only be used with noMux",se.InvalidOption));if(r.noMux){const i=r.reply?r.reply:yn(this.options.inboxPrefix),o=Ze(),a=s?new Error:null,c=this.subscribe(i,{max:1,timeout:r.timeout,callback:(l,u)=>{l?(a&&l.code!==se.Timeout&&(l.stack+=`

${a.stack}`),o.reject(l)):(l=_h(u),l?(a&&(l.stack+=`

${a.stack}`),o.reject(l)):o.resolve(u))}});return c.requestSubject=t,this.protocol.publish(t,n,{reply:i,headers:r.headers}),o}else{const i=new Eh(this.protocol.muxSubscriptions,t,r,s);this.protocol.request(i);try{this.publish(t,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${i.token}`,headers:r.headers})}catch(a){i.cancel(a)}const o=Promise.race([i.timer,i.deferred]);return o.catch(()=>{i.cancel()}),o}}flush(){return this.isClosed()?Promise.reject(ge.errorForCode(se.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(ge.errorForCode(se.ConnectionClosed)):this.isDraining()?Promise.reject(ge.errorForCode(se.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const t=this.protocol.getServer();return t?t.listen:""}status(){const t=new dt;return t.iterClosed.then(()=>{const n=this.listeners.indexOf(t);this.listeners.splice(n,1)}),this.listeners.push(t),t}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}async jetstreamManager(t={}){const n=new Kw(this,t);if(t.checkAPI!==!1)try{await n.getAccountInfo()}catch(r){const s=r;throw s.code===se.NoResponders&&(s.code=se.JetStreamNotEnabled),s}return n}jetstream(t={}){return new tc(this,t)}getServerVersion(){const t=this.info;return t?hr(t.version):void 0}async rtt(){if(!this.protocol._closed&&!this.protocol.connected)throw ge.errorForCode(se.Disconnect);const t=Date.now();return await this.flush(),Date.now()-t}get features(){return this.protocol.features}get services(){return this._services||(this._services=new e1(this)),this._services}reconnect(){return this.isClosed()?Promise.reject(ge.errorForCode(se.ConnectionClosed)):this.isDraining()?Promise.reject(ge.errorForCode(se.ConnectionDraining)):this.protocol.reconnect()}}class e1{constructor(t){g(this,"nc");this.nc=t}add(t){try{return new Bs(this.nc,t).start()}catch(n){return Promise.reject(n)}}client(t,n){return new Zw(this.nc,t,n)}}const t1="1.19.1",n1="nats.ws";class r1{constructor(){g(this,"version");g(this,"lang");g(this,"closeError");g(this,"connected");g(this,"done");g(this,"socket");g(this,"options");g(this,"socketClosed");g(this,"encrypted");g(this,"peeked");g(this,"yields");g(this,"signal");g(this,"closedNotification");this.version=t1,this.lang=n1,this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=Ze(),this.closedNotification=Ze()}async connect(t,n){const r=Ze();if(n.tls)return r.reject(new ge("tls",se.InvalidOption)),r;this.options=n;const s=t.src;if(n.wsFactory){const{socket:i,encrypted:o}=await n.wsFactory(t.src,n);this.socket=i,this.encrypted=o}else this.encrypted=s.indexOf("wss://")===0,this.socket=new WebSocket(s);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.isDiscarded()},this.socket.onmessage=i=>{if(this.isDiscarded())return;if(this.yields.push(new Uint8Array(i.data)),this.peeked){this.signal.resolve();return}const o=Br.concat(...this.yields),a=vx(o);if(a!==""){const c=Xx.exec(a);if(!c){n.debug&&console.error("!!!",Zs(o)),r.reject(new Error("unexpected response from server"));return}try{const l=JSON.parse(c[1]);Yx(l,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),r.resolve()}catch(l){r.reject(l);return}}},this.socket.onclose=i=>{if(this.isDiscarded())return;this.socketClosed=!0;let o;this.done||(i.wasClean||(o=new Error(i.reason)),this._closed(o))},this.socket.onerror=i=>{if(this.isDiscarded())return;const o=i,a=new ge(o.message,se.Unknown,new Error(o.error));r.reject(a)},r}disconnect(){this._closed(void 0,!0)}async _closed(t,n=!0){if(!this.isDiscarded()&&this.connected&&!this.done){if(this.closeError=t,!t)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)await Ds(100);this.done=!0;try{this.socket.close(t?1002:1e3,t?t.message:void 0)}catch{}n&&this.closedNotification.resolve(t)}}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async*iterate(){for(;;){if(this.isDiscarded())return;this.yields.length===0&&await this.signal;const t=this.yields;this.yields=[];for(let n=0;n<t.length;n++)this.options.debug&&console.info(`> ${Zs(t[n])}`),yield t[n];if(this.done)break;this.yields.length===0&&(t.length=0,this.yields=t,this.signal=Ze())}}isEncrypted(){return this.connected&&this.encrypted}send(t){if(!this.isDiscarded())try{this.socket.send(t.buffer),this.options.debug&&console.info(`< ${Zs(t)}`);return}catch(n){this.options.debug&&console.error(`!!! ${Zs(t)}: ${n}`)}}close(t){return this._closed(t,!1)}closed(){return this.closedNotification}isDiscarded(){return this.done?(this.discard(),!0):!1}discard(){var t;this.done=!0;try{(t=this.socket)==null||t.close()}catch{}}}function s1(e){/^(.*:\/\/)(.*)/.test(e)||(e=`https://${e}`);let n=new URL(e);const r=n.protocol.toLowerCase();r!=="https:"&&r!=="http"&&(e=e.replace(/^(.*:\/\/)(.*)/gm,"$2"),n=new URL(`http://${e}`));let s,i;const o=n.hostname,a=n.pathname,c=n.search||"";switch(r){case"http:":case"ws:":case"nats:":i=n.port||"80",s="ws:";break;default:i=n.port||"443",s="wss:";break}return`${s}//${o}:${i}${a}${c}`}function i1(e={}){return bx({defaultPort:443,urlParseFn:s1,factory:()=>new r1}),nc.connect(e)}const o1=oa(),a1="---",C1=kt({}),A1=kt({}),P1=kt({}),fi=kt(!1),lr=kt({}),Nr={};let To;const da=kt(),c1=async(e,t)=>{if(lr.value[e])return;if(!fi.value||!da.value){Nr[e]=t;return}let n=()=>{};lr.value[e]={pending:new Promise(i=>{n=i})};const r=Pn();r.deliverTo(yn()),r.deliverAll(),r.ackNone(),r.replayInstantly();const s=await da.value.subscribe(e,r);lr.value[e].subscription=s,n(),(async()=>{for await(const i of s){const o=o1.decode(i.data);if(o!==a1){const a=JSON.parse(o);o!==JSON.stringify(t.value[a.id])&&(t.value=Object.freeze({...t.value,[a.id]:Object.freeze(a)}))}}})()},I1=async e=>{var t,n;if(lr.value[e]){const{pending:r}=lr.value[e];r&&await r,(n=(t=lr.value[e])==null?void 0:t.subscription)==null||n.unsubscribe(),delete lr.value[e]}Nr[e]&&delete Nr[e]},pu=async()=>{await Promise.all(Object.keys(Nr).map(async e=>{await c1(e,Nr[e]),delete Nr[e]}))},l1=async()=>{To=await i1({servers:[zy],waitOnFirstConnect:!0,maxReconnectAttempts:-1}),fi.value=!0,da.value=To.jetstream(),await pu(),(async()=>{for await(const e of To.status())e.type===nn.Disconnect&&(fi.value=!1),e.type===nn.Reconnect&&(fi.value=!0,await pu())})()},rc=lp(tx);rc.use(lh);rc.use(ch);rc.mount("#app");l1();export{g1 as $,Yy as A,C1 as B,A1 as C,P1 as D,x1 as E,Ns as F,c1 as G,S1 as H,k1 as I,Nt as J,Jf as K,Ut as L,m1 as M,bb as N,Ta as O,Na as P,I1 as Q,f1 as R,h1 as S,Ib as T,v1 as U,E1 as V,_1 as W,pt as X,vs as Y,Cs as Z,ex as _,wn as a,b1 as a0,zl as a1,Je as b,We as c,ln as d,lf as e,si as f,ba as g,Zt as h,qe as i,Jt as j,Qe as k,y1 as l,tn as m,gn as n,ht as o,dr as p,Gf as q,kt as r,Ny as s,Ad as t,br as u,p1 as v,d1 as w,w1 as x,Hi as y,fi as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Home-437W_v9L.js","assets/logo-2flPyEtk.js","assets/Home-kezBv0qE.css","assets/About-PuywA62x.js","assets/SettingsContainer-JI5uXRs9.js","assets/Changelog-5mLFBIkF.js","assets/Settings-pakdyQPl.js","assets/Contact-w1z-jXXH.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-bqOBRSFv.js.map
