var Vf=Object.defineProperty;var Wf=(t,e,r)=>e in t?Vf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var d=(t,e,r)=>(Wf(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qo(t,e){const r=new Set(t.split(","));return e?s=>r.has(s.toLowerCase()):s=>r.has(s)}const Fe={},ts=[],Mt=()=>{},Gf=()=>!1,ii=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ho=t=>t.startsWith("onUpdate:"),it=Object.assign,Vo=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},zf=Object.prototype.hasOwnProperty,Ae=(t,e)=>zf.call(t,e),_e=Array.isArray,rs=t=>sn(t)==="[object Map]",oi=t=>sn(t)==="[object Set]",La=t=>sn(t)==="[object Date]",ye=t=>typeof t=="function",Qe=t=>typeof t=="string",Or=t=>typeof t=="symbol",Le=t=>t!==null&&typeof t=="object",Nl=t=>(Le(t)||ye(t))&&ye(t.then)&&ye(t.catch),Ml=Object.prototype.toString,sn=t=>Ml.call(t),Kf=t=>sn(t).slice(8,-1),Ll=t=>sn(t)==="[object Object]",Wo=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tn=qo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ai=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Jf=/-(\w)/g,er=ai(t=>t.replace(Jf,(e,r)=>r?r.toUpperCase():"")),Yf=/\B([A-Z])/g,Vr=ai(t=>t.replace(Yf,"-$1").toLowerCase()),ci=ai(t=>t.charAt(0).toUpperCase()+t.slice(1)),ji=ai(t=>t?`on${ci(t)}`:""),Ar=(t,e)=>!Object.is(t,e),kn=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},$n=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},Go=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ja;const jl=()=>ja||(ja=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zo(t){if(_e(t)){const e={};for(let r=0;r<t.length;r++){const s=t[r],n=Qe(s)?eh(s):zo(s);if(n)for(const i in n)e[i]=n[i]}return e}else if(Qe(t)||Le(t))return t}const Xf=/;(?![^(]*\))/g,Qf=/:([^]+)/,Zf=/\/\*[^]*?\*\//g;function eh(t){const e={};return t.replace(Zf,"").split(Xf).forEach(r=>{if(r){const s=r.split(Qf);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Yt(t){let e="";if(Qe(t))e=t;else if(_e(t))for(let r=0;r<t.length;r++){const s=Yt(t[r]);s&&(e+=s+" ")}else if(Le(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const th="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rh=qo(th);function Fl(t){return!!t||t===""}function sh(t,e){if(t.length!==e.length)return!1;let r=!0;for(let s=0;r&&s<t.length;s++)r=Vs(t[s],e[s]);return r}function Vs(t,e){if(t===e)return!0;let r=La(t),s=La(e);if(r||s)return r&&s?t.getTime()===e.getTime():!1;if(r=Or(t),s=Or(e),r||s)return t===e;if(r=_e(t),s=_e(e),r||s)return r&&s?sh(t,e):!1;if(r=Le(t),s=Le(e),r||s){if(!r||!s)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Vs(t[o],e[o]))return!1}}return String(t)===String(e)}function nh(t,e){return t.findIndex(r=>Vs(r,e))}const sr=t=>Qe(t)?t:t==null?"":_e(t)||Le(t)&&(t.toString===Ml||!ye(t.toString))?JSON.stringify(t,$l,2):String(t),$l=(t,e)=>e&&e.__v_isRef?$l(t,e.value):rs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[s,n],i)=>(r[Fi(s,i)+" =>"]=n,r),{})}:oi(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Fi(r))}:Or(e)?Fi(e):Le(e)&&!_e(e)&&!Ll(e)?String(e):e,Fi=(t,e="")=>{var r;return Or(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class Ul{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=At;try{return At=this,e()}finally{At=r}}}on(){At=this}off(){At=this.parent}stop(e){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function ih(t){return new Ul(t)}function oh(t,e=At){e&&e.active&&e.effects.push(t)}function Dl(){return At}function ah(t){At&&At.cleanups.push(t)}let Dr;class Ko{constructor(e,r,s,n){this.fn=e,this.trigger=r,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,oh(this,n)}get dirty(){if(this._dirtyLevel===1){Wr();for(let e=0;e<this._depsLength;e++){const r=this.deps[e];if(r.computed&&(ch(r.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),Gr()}return this._dirtyLevel>=2}set dirty(e){this._dirtyLevel=e?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=vr,r=Dr;try{return vr=!0,Dr=this,this._runnings++,Fa(this),this.fn()}finally{$a(this),this._runnings--,Dr=r,vr=e}}stop(){var e;this.active&&(Fa(this),$a(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function ch(t){return t.value}function Fa(t){t._trackId++,t._depsLength=0}function $a(t){if(t.deps&&t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Bl(t.deps[e],t);t.deps.length=t._depsLength}}function Bl(t,e){const r=t.get(e);r!==void 0&&e._trackId!==r&&(t.delete(e),t.size===0&&t.cleanup())}let vr=!0,ao=0;const ql=[];function Wr(){ql.push(vr),vr=!1}function Gr(){const t=ql.pop();vr=t===void 0?!0:t}function Jo(){ao++}function Yo(){for(ao--;!ao&&co.length;)co.shift()()}function Hl(t,e,r){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&Bl(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const co=[];function Vl(t,e,r){Jo();for(const s of t.keys())if(s._dirtyLevel<e&&t.get(s)===s._trackId){const n=s._dirtyLevel;s._dirtyLevel=e,n===0&&(s._shouldSchedule=!0,s.trigger())}Wl(t),Yo()}function Wl(t){for(const e of t.keys())e.scheduler&&e._shouldSchedule&&(!e._runnings||e.allowRecurse)&&t.get(e)===e._trackId&&(e._shouldSchedule=!1,co.push(e.scheduler))}const Gl=(t,e)=>{const r=new Map;return r.cleanup=t,r.computed=e,r},Un=new WeakMap,Br=Symbol(""),lo=Symbol("");function vt(t,e,r){if(vr&&Dr){let s=Un.get(t);s||Un.set(t,s=new Map);let n=s.get(r);n||s.set(r,n=Gl(()=>s.delete(r))),Hl(Dr,n)}}function ar(t,e,r,s,n,i){const o=Un.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(r==="length"&&_e(t)){const c=Number(s);o.forEach((l,u)=>{(u==="length"||!Or(u)&&u>=c)&&a.push(l)})}else switch(r!==void 0&&a.push(o.get(r)),e){case"add":_e(t)?Wo(r)&&a.push(o.get("length")):(a.push(o.get(Br)),rs(t)&&a.push(o.get(lo)));break;case"delete":_e(t)||(a.push(o.get(Br)),rs(t)&&a.push(o.get(lo)));break;case"set":rs(t)&&a.push(o.get(Br));break}Jo();for(const c of a)c&&Vl(c,2);Yo()}function lh(t,e){var r;return(r=Un.get(t))==null?void 0:r.get(e)}const uh=qo("__proto__,__v_isRef,__isVue"),zl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Or)),Ua=fh();function fh(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const s=Pe(this);for(let i=0,o=this.length;i<o;i++)vt(s,"get",i+"");const n=s[e](...r);return n===-1||n===!1?s[e](...r.map(Pe)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Wr(),Jo();const s=Pe(this)[e].apply(this,r);return Yo(),Gr(),s}}),t}function hh(t){const e=Pe(this);return vt(e,"has",t),e.hasOwnProperty(t)}class Kl{constructor(e=!1,r=!1){this._isReadonly=e,this._shallow=r}get(e,r,s){const n=this._isReadonly,i=this._shallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return i;if(r==="__v_raw")return s===(n?i?Oh:Ql:i?Xl:Yl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=_e(e);if(!n){if(o&&Ae(Ua,r))return Reflect.get(Ua,r,s);if(r==="hasOwnProperty")return hh}const a=Reflect.get(e,r,s);return(Or(r)?zl.has(r):uh(r))||(n||vt(e,"get",r),i)?a:ot(a)?o&&Wo(r)?a:a.value:Le(a)?n?fi(a):ui(a):a}}class Jl extends Kl{constructor(e=!1){super(!1,e)}set(e,r,s,n){let i=e[r];if(!this._shallow){const c=ls(i);if(!Dn(s)&&!ls(s)&&(i=Pe(i),s=Pe(s)),!_e(e)&&ot(i)&&!ot(s))return c?!1:(i.value=s,!0)}const o=_e(e)&&Wo(r)?Number(r)<e.length:Ae(e,r),a=Reflect.set(e,r,s,n);return e===Pe(n)&&(o?Ar(s,i)&&ar(e,"set",r,s):ar(e,"add",r,s)),a}deleteProperty(e,r){const s=Ae(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&s&&ar(e,"delete",r,void 0),n}has(e,r){const s=Reflect.has(e,r);return(!Or(r)||!zl.has(r))&&vt(e,"has",r),s}ownKeys(e){return vt(e,"iterate",_e(e)?"length":Br),Reflect.ownKeys(e)}}class dh extends Kl{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const mh=new Jl,ph=new dh,gh=new Jl(!0),Xo=t=>t,li=t=>Reflect.getPrototypeOf(t);function _n(t,e,r=!1,s=!1){t=t.__v_raw;const n=Pe(t),i=Pe(e);r||(Ar(e,i)&&vt(n,"get",e),vt(n,"get",i));const{has:o}=li(n),a=s?Xo:r?ea:Ws;if(o.call(n,e))return a(t.get(e));if(o.call(n,i))return a(t.get(i));t!==n&&t.get(e)}function bn(t,e=!1){const r=this.__v_raw,s=Pe(r),n=Pe(t);return e||(Ar(t,n)&&vt(s,"has",t),vt(s,"has",n)),t===n?r.has(t):r.has(t)||r.has(n)}function yn(t,e=!1){return t=t.__v_raw,!e&&vt(Pe(t),"iterate",Br),Reflect.get(t,"size",t)}function Da(t){t=Pe(t);const e=Pe(this);return li(e).has.call(e,t)||(e.add(t),ar(e,"add",t,t)),this}function Ba(t,e){e=Pe(e);const r=Pe(this),{has:s,get:n}=li(r);let i=s.call(r,t);i||(t=Pe(t),i=s.call(r,t));const o=n.call(r,t);return r.set(t,e),i?Ar(e,o)&&ar(r,"set",t,e):ar(r,"add",t,e),this}function qa(t){const e=Pe(this),{has:r,get:s}=li(e);let n=r.call(e,t);n||(t=Pe(t),n=r.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return n&&ar(e,"delete",t,void 0),i}function Ha(){const t=Pe(this),e=t.size!==0,r=t.clear();return e&&ar(t,"clear",void 0,void 0),r}function wn(t,e){return function(s,n){const i=this,o=i.__v_raw,a=Pe(o),c=e?Xo:t?ea:Ws;return!t&&vt(a,"iterate",Br),o.forEach((l,u)=>s.call(n,c(l),c(u),i))}}function vn(t,e,r){return function(...s){const n=this.__v_raw,i=Pe(n),o=rs(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=n[t](...s),u=r?Xo:e?ea:Ws;return!e&&vt(i,"iterate",c?lo:Br),{next(){const{value:f,done:m}=l.next();return m?{value:f,done:m}:{value:a?[u(f[0]),u(f[1])]:u(f),done:m}},[Symbol.iterator](){return this}}}}function dr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _h(){const t={get(i){return _n(this,i)},get size(){return yn(this)},has:bn,add:Da,set:Ba,delete:qa,clear:Ha,forEach:wn(!1,!1)},e={get(i){return _n(this,i,!1,!0)},get size(){return yn(this)},has:bn,add:Da,set:Ba,delete:qa,clear:Ha,forEach:wn(!1,!0)},r={get(i){return _n(this,i,!0)},get size(){return yn(this,!0)},has(i){return bn.call(this,i,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:wn(!0,!1)},s={get(i){return _n(this,i,!0,!0)},get size(){return yn(this,!0)},has(i){return bn.call(this,i,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:wn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=vn(i,!1,!1),r[i]=vn(i,!0,!1),e[i]=vn(i,!1,!0),s[i]=vn(i,!0,!0)}),[t,r,e,s]}const[bh,yh,wh,vh]=_h();function Qo(t,e){const r=e?t?vh:wh:t?yh:bh;return(s,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?s:Reflect.get(Ae(r,n)&&n in s?r:s,n,i)}const xh={get:Qo(!1,!1)},Eh={get:Qo(!1,!0)},Sh={get:Qo(!0,!1)},Yl=new WeakMap,Xl=new WeakMap,Ql=new WeakMap,Oh=new WeakMap;function Ah(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ph(t){return t.__v_skip||!Object.isExtensible(t)?0:Ah(Kf(t))}function ui(t){return ls(t)?t:Zo(t,!1,mh,xh,Yl)}function Zl(t){return Zo(t,!1,gh,Eh,Xl)}function fi(t){return Zo(t,!0,ph,Sh,Ql)}function Zo(t,e,r,s,n){if(!Le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=n.get(t);if(i)return i;const o=Ph(t);if(o===0)return t;const a=new Proxy(t,o===2?s:r);return n.set(t,a),a}function ss(t){return ls(t)?ss(t.__v_raw):!!(t&&t.__v_isReactive)}function ls(t){return!!(t&&t.__v_isReadonly)}function Dn(t){return!!(t&&t.__v_isShallow)}function eu(t){return ss(t)||ls(t)}function Pe(t){const e=t&&t.__v_raw;return e?Pe(e):t}function tu(t){return $n(t,"__v_skip",!0),t}const Ws=t=>Le(t)?ui(t):t,ea=t=>Le(t)?fi(t):t;class ru{constructor(e,r,s,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ko(()=>e(this._value),()=>Rs(this,1),()=>this.dep&&Wl(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const e=Pe(this);return(!e._cacheable||e.effect.dirty)&&Ar(e._value,e._value=e.effect.run())&&Rs(e,2),ta(e),e.effect._dirtyLevel>=1&&Rs(e,1),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Ch(t,e,r=!1){let s,n;const i=ye(t);return i?(s=t,n=Mt):(s=t.get,n=t.set),new ru(s,n,i||!n,r)}function ta(t){vr&&Dr&&(t=Pe(t),Hl(Dr,t.dep||(t.dep=Gl(()=>t.dep=void 0,t instanceof ru?t:void 0))))}function Rs(t,e=2,r){t=Pe(t);const s=t.dep;s&&Vl(s,e)}function ot(t){return!!(t&&t.__v_isRef===!0)}function at(t){return su(t,!1)}function ra(t){return su(t,!0)}function su(t,e){return ot(t)?t:new Ih(t,e)}class Ih{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Pe(e),this._value=r?e:Ws(e)}get value(){return ta(this),this._value}set value(e){const r=this.__v_isShallow||Dn(e)||ls(e);e=r?e:Pe(e),Ar(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:Ws(e),Rs(this,2))}}function Ve(t){return ot(t)?t.value:t}const Th={get:(t,e,r)=>Ve(Reflect.get(t,e,r)),set:(t,e,r,s)=>{const n=t[e];return ot(n)&&!ot(r)?(n.value=r,!0):Reflect.set(t,e,r,s)}};function nu(t){return ss(t)?t:new Proxy(t,Th)}class kh{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:s}=e(()=>ta(this),()=>Rs(this));this._get=r,this._set=s}get value(){return this._get()}set value(e){this._set(e)}}function Rh(t){return new kh(t)}class Nh{constructor(e,r,s){this._object=e,this._key=r,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return lh(Pe(this._object),this._key)}}class Mh{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Lh(t,e,r){return ot(t)?t:ye(t)?new Mh(t):Le(t)&&arguments.length>1?jh(t,e,r):at(t)}function jh(t,e,r){const s=t[e];return ot(s)?s:new Nh(t,e,r)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xr(t,e,r,s){let n;try{n=s?t(...s):t()}catch(i){hi(i,e,r)}return n}function qt(t,e,r,s){if(ye(t)){const i=xr(t,e,r,s);return i&&Nl(i)&&i.catch(o=>{hi(o,e,r)}),i}const n=[];for(let i=0;i<t.length;i++)n.push(qt(t[i],e,r,s));return n}function hi(t,e,r,s=!0){const n=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){xr(c,null,10,[t,o,a]);return}}Fh(t,r,n,s)}function Fh(t,e,r,s=!0){console.error(t)}let Gs=!1,uo=!1;const lt=[];let Jt=0;const ns=[];let gr=null,Fr=0;const iu=Promise.resolve();let sa=null;function bs(t){const e=sa||iu;return t?e.then(this?t.bind(this):t):e}function $h(t){let e=Jt+1,r=lt.length;for(;e<r;){const s=e+r>>>1,n=lt[s],i=zs(n);i<t||i===t&&n.pre?e=s+1:r=s}return e}function na(t){(!lt.length||!lt.includes(t,Gs&&t.allowRecurse?Jt+1:Jt))&&(t.id==null?lt.push(t):lt.splice($h(t.id),0,t),ou())}function ou(){!Gs&&!uo&&(uo=!0,sa=iu.then(cu))}function Uh(t){const e=lt.indexOf(t);e>Jt&&lt.splice(e,1)}function Dh(t){_e(t)?ns.push(...t):(!gr||!gr.includes(t,t.allowRecurse?Fr+1:Fr))&&ns.push(t),ou()}function Va(t,e,r=Gs?Jt+1:0){for(;r<lt.length;r++){const s=lt[r];if(s&&s.pre){if(t&&s.id!==t.uid)continue;lt.splice(r,1),r--,s()}}}function au(t){if(ns.length){const e=[...new Set(ns)].sort((r,s)=>zs(r)-zs(s));if(ns.length=0,gr){gr.push(...e);return}for(gr=e,Fr=0;Fr<gr.length;Fr++)gr[Fr]();gr=null,Fr=0}}const zs=t=>t.id==null?1/0:t.id,Bh=(t,e)=>{const r=zs(t)-zs(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function cu(t){uo=!1,Gs=!0,lt.sort(Bh);try{for(Jt=0;Jt<lt.length;Jt++){const e=lt[Jt];e&&e.active!==!1&&xr(e,null,14)}}finally{Jt=0,lt.length=0,au(),Gs=!1,sa=null,(lt.length||ns.length)&&cu()}}function qh(t,e,...r){if(t.isUnmounted)return;const s=t.vnode.props||Fe;let n=r;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:m}=s[u]||Fe;m&&(n=r.map(w=>Qe(w)?w.trim():w)),f&&(n=r.map(Go))}let a,c=s[a=ji(e)]||s[a=ji(er(e))];!c&&i&&(c=s[a=ji(Vr(e))]),c&&qt(c,t,6,n);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,qt(l,t,6,n)}}function lu(t,e,r=!1){const s=e.emitsCache,n=s.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!ye(t)){const c=l=>{const u=lu(l,e,!0);u&&(a=!0,it(o,u))};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Le(t)&&s.set(t,null),null):(_e(i)?i.forEach(c=>o[c]=null):it(o,i),Le(t)&&s.set(t,o),o)}function di(t,e){return!t||!ii(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ae(t,e[0].toLowerCase()+e.slice(1))||Ae(t,Vr(e))||Ae(t,e))}let Ye=null,mi=null;function Bn(t){const e=Ye;return Ye=t,mi=t&&t.type.__scopeId||null,e}function cy(t){mi=t}function ly(){mi=null}function ir(t,e=Ye,r){if(!e||t._n)return t;const s=(...n)=>{s._d&&tc(-1);const i=Bn(e);let o;try{o=t(...n)}finally{Bn(i),s._d&&tc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function $i(t){const{type:e,vnode:r,proxy:s,withProxy:n,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:f,data:m,setupState:w,ctx:E,inheritAttrs:T}=t;let M,j;const $=Bn(t);try{if(r.shapeFlag&4){const B=n||s,ie=B;M=Kt(u.call(ie,B,f,i,w,m,E)),j=c}else{const B=e;M=Kt(B.length>1?B(i,{attrs:c,slots:a,emit:l}):B(i,null)),j=e.props?c:Hh(c)}}catch(B){Ls.length=0,hi(B,t,1),M=je(Pr)}let z=M;if(j&&T!==!1){const B=Object.keys(j),{shapeFlag:ie}=z;B.length&&ie&7&&(o&&B.some(Ho)&&(j=Vh(j,o)),z=us(z,j))}return r.dirs&&(z=us(z),z.dirs=z.dirs?z.dirs.concat(r.dirs):r.dirs),r.transition&&(z.transition=r.transition),M=z,Bn($),M}const Hh=t=>{let e;for(const r in t)(r==="class"||r==="style"||ii(r))&&((e||(e={}))[r]=t[r]);return e},Vh=(t,e)=>{const r={};for(const s in t)(!Ho(s)||!(s.slice(9)in e))&&(r[s]=t[s]);return r};function Wh(t,e,r){const{props:s,children:n,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return s?Wa(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const m=u[f];if(o[m]!==s[m]&&!di(l,m))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Wa(s,o,l):!0:!!o;return!1}function Wa(t,e,r){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let n=0;n<s.length;n++){const i=s[n];if(e[i]!==t[i]&&!di(r,i))return!0}return!1}function Gh({vnode:t,parent:e},r){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=r,e=e.parent;else break}}const uu="components";function pi(t,e){return Kh(uu,t,!0,e)||t}const zh=Symbol.for("v-ndc");function Kh(t,e,r=!0,s=!1){const n=Ye||st;if(n){const i=n.type;if(t===uu){const a=qd(i,!1);if(a&&(a===e||a===er(e)||a===ci(er(e))))return i}const o=Ga(n[t]||i[t],e)||Ga(n.appContext[t],e);return!o&&s?i:o}}function Ga(t,e){return t&&(t[e]||t[er(e)]||t[ci(er(e))])}const Jh=t=>t.__isSuspense;function Yh(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):Dh(t)}const Xh=Symbol.for("v-scx"),Qh=()=>Lt(Xh);function Zh(t,e){return ia(t,null,e)}const xn={};function yt(t,e,r){return ia(t,e,r)}function ia(t,e,{immediate:r,deep:s,flush:n,once:i,onTrack:o,onTrigger:a}=Fe){if(e&&i){const Q=e;e=(...we)=>{Q(...we),ie()}}const c=st,l=Q=>s===!0?Q:$r(Q,s===!1?1:void 0);let u,f=!1,m=!1;if(ot(t)?(u=()=>t.value,f=Dn(t)):ss(t)?(u=()=>l(t),f=!0):_e(t)?(m=!0,f=t.some(Q=>ss(Q)||Dn(Q)),u=()=>t.map(Q=>{if(ot(Q))return Q.value;if(ss(Q))return l(Q);if(ye(Q))return xr(Q,c,2)})):ye(t)?e?u=()=>xr(t,c,2):u=()=>(w&&w(),qt(t,c,3,[E])):u=Mt,e&&s){const Q=u;u=()=>$r(Q())}let w,E=Q=>{w=z.onStop=()=>{xr(Q,c,4),w=z.onStop=void 0}},T;if(bi)if(E=Mt,e?r&&qt(e,c,3,[u(),m?[]:void 0,E]):u(),n==="sync"){const Q=Qh();T=Q.__watcherHandles||(Q.__watcherHandles=[])}else return Mt;let M=m?new Array(t.length).fill(xn):xn;const j=()=>{if(!(!z.active||!z.dirty))if(e){const Q=z.run();(s||f||(m?Q.some((we,J)=>Ar(we,M[J])):Ar(Q,M)))&&(w&&w(),qt(e,c,3,[Q,M===xn?void 0:m&&M[0]===xn?[]:M,E]),M=Q)}else z.run()};j.allowRecurse=!!e;let $;n==="sync"?$=j:n==="post"?$=()=>_t(j,c&&c.suspense):(j.pre=!0,c&&(j.id=c.uid),$=()=>na(j));const z=new Ko(u,Mt,$),B=Dl(),ie=()=>{z.stop(),B&&Vo(B.effects,z)};return e?r?j():M=z.run():n==="post"?_t(z.run.bind(z),c&&c.suspense):z.run(),T&&T.push(ie),ie}function ed(t,e,r){const s=this.proxy,n=Qe(t)?t.includes(".")?fu(s,t):()=>s[t]:t.bind(s,s);let i;ye(e)?i=e:(i=e.handler,r=e);const o=cn(this),a=ia(n,i.bind(s),r);return o(),a}function fu(t,e){const r=e.split(".");return()=>{let s=t;for(let n=0;n<r.length&&s;n++)s=s[r[n]];return s}}function $r(t,e,r=0,s){if(!Le(t)||t.__v_skip)return t;if(e&&e>0){if(r>=e)return t;r++}if(s=s||new Set,s.has(t))return t;if(s.add(t),ot(t))$r(t.value,e,r,s);else if(_e(t))for(let n=0;n<t.length;n++)$r(t[n],e,r,s);else if(oi(t)||rs(t))t.forEach(n=>{$r(n,e,r,s)});else if(Ll(t))for(const n in t)$r(t[n],e,r,s);return t}function uy(t,e){if(Ye===null)return t;const r=yi(Ye)||Ye.proxy,s=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,c=Fe]=e[n];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&$r(o),s.push({dir:i,instance:r,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Mr(t,e,r,s){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Wr(),qt(c,r,8,[t.el,a,t,e]),Gr())}}/*! #__NO_SIDE_EFFECTS__ */function fr(t,e){return ye(t)?it({name:t.name},e,{setup:t}):t}const Ns=t=>!!t.type.__asyncLoader,hu=t=>t.type.__isKeepAlive;function td(t,e){du(t,"a",e)}function rd(t,e){du(t,"da",e)}function du(t,e,r=st){const s=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(gi(e,s,r),r){let n=r.parent;for(;n&&n.parent;)hu(n.parent.vnode)&&sd(s,e,r,n),n=n.parent}}function sd(t,e,r,s){const n=gi(e,t,s,!0);oa(()=>{Vo(s[e],n)},r)}function gi(t,e,r=st,s=!1){if(r){const n=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(r.isUnmounted)return;Wr();const a=cn(r),c=qt(e,r,t,o);return a(),Gr(),c});return s?n.unshift(i):n.push(i),i}}const hr=t=>(e,r=st)=>(!bi||t==="sp")&&gi(t,(...s)=>e(...s),r),nd=hr("bm"),nn=hr("m"),id=hr("bu"),od=hr("u"),ad=hr("bum"),oa=hr("um"),cd=hr("sp"),ld=hr("rtg"),ud=hr("rtc");function fd(t,e=st){gi("ec",t,e)}function fy(t,e,r,s){let n;const i=r&&r[s];if(_e(t)||Qe(t)){n=new Array(t.length);for(let o=0,a=t.length;o<a;o++)n[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){n=new Array(t);for(let o=0;o<t;o++)n[o]=e(o+1,o,void 0,i&&i[o])}else if(Le(t))if(t[Symbol.iterator])n=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);n=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];n[a]=e(t[l],l,a,i&&i[a])}}else n=[];return r&&(r[s]=n),n}function Ui(t,e,r={},s,n){if(Ye.isCE||Ye.parent&&Ns(Ye.parent)&&Ye.parent.isCE)return e!=="default"&&(r.name=e),je("slot",r,s&&s());let i=t[e];i&&i._c&&(i._d=!1),wt();const o=i&&mu(i(r)),a=Js(Pt,{key:r.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function mu(t){return t.some(e=>Vn(e)?!(e.type===Pr||e.type===Pt&&!mu(e.children)):!0)?t:null}const fo=t=>t?Pu(t)?yi(t)||t.proxy:fo(t.parent):null,Ms=it(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fo(t.parent),$root:t=>fo(t.root),$emit:t=>t.emit,$options:t=>aa(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,na(t.update)}),$nextTick:t=>t.n||(t.n=bs.bind(t.proxy)),$watch:t=>ed.bind(t)}),Di=(t,e)=>t!==Fe&&!t.__isScriptSetup&&Ae(t,e),hd={get({_:t},e){const{ctx:r,setupState:s,data:n,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return s[e];case 2:return n[e];case 4:return r[e];case 3:return i[e]}else{if(Di(s,e))return o[e]=1,s[e];if(n!==Fe&&Ae(n,e))return o[e]=2,n[e];if((l=t.propsOptions[0])&&Ae(l,e))return o[e]=3,i[e];if(r!==Fe&&Ae(r,e))return o[e]=4,r[e];ho&&(o[e]=0)}}const u=Ms[e];let f,m;if(u)return e==="$attrs"&&vt(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(r!==Fe&&Ae(r,e))return o[e]=4,r[e];if(m=c.config.globalProperties,Ae(m,e))return m[e]},set({_:t},e,r){const{data:s,setupState:n,ctx:i}=t;return Di(n,e)?(n[e]=r,!0):s!==Fe&&Ae(s,e)?(s[e]=r,!0):Ae(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:s,appContext:n,propsOptions:i}},o){let a;return!!r[o]||t!==Fe&&Ae(t,o)||Di(e,o)||(a=i[0])&&Ae(a,o)||Ae(s,o)||Ae(Ms,o)||Ae(n.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Ae(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function za(t){return _e(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let ho=!0;function dd(t){const e=aa(t),r=t.proxy,s=t.ctx;ho=!1,e.beforeCreate&&Ka(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:m,beforeUpdate:w,updated:E,activated:T,deactivated:M,beforeDestroy:j,beforeUnmount:$,destroyed:z,unmounted:B,render:ie,renderTracked:Q,renderTriggered:we,errorCaptured:J,serverPrefetch:he,expose:be,inheritAttrs:Ce,components:Re,directives:De,filters:Je}=e;if(l&&md(l,s,null),o)for(const Ee in o){const ve=o[Ee];ye(ve)&&(s[Ee]=ve.bind(r))}if(n){const Ee=n.call(r,r);Le(Ee)&&(t.data=ui(Ee))}if(ho=!0,i)for(const Ee in i){const ve=i[Ee],tt=ye(ve)?ve.bind(r,r):ye(ve.get)?ve.get.bind(r,r):Mt,P=!ye(ve)&&ye(ve.set)?ve.set.bind(r):Mt,v=Ue({get:tt,set:P});Object.defineProperty(s,Ee,{enumerable:!0,configurable:!0,get:()=>v.value,set:ee=>v.value=ee})}if(a)for(const Ee in a)pu(a[Ee],s,r,Ee);if(c){const Ee=ye(c)?c.call(r):c;Reflect.ownKeys(Ee).forEach(ve=>{Rn(ve,Ee[ve])})}u&&Ka(u,t,"c");function Me(Ee,ve){_e(ve)?ve.forEach(tt=>Ee(tt.bind(r))):ve&&Ee(ve.bind(r))}if(Me(nd,f),Me(nn,m),Me(id,w),Me(od,E),Me(td,T),Me(rd,M),Me(fd,J),Me(ud,Q),Me(ld,we),Me(ad,$),Me(oa,B),Me(cd,he),_e(be))if(be.length){const Ee=t.exposed||(t.exposed={});be.forEach(ve=>{Object.defineProperty(Ee,ve,{get:()=>r[ve],set:tt=>r[ve]=tt})})}else t.exposed||(t.exposed={});ie&&t.render===Mt&&(t.render=ie),Ce!=null&&(t.inheritAttrs=Ce),Re&&(t.components=Re),De&&(t.directives=De)}function md(t,e,r=Mt){_e(t)&&(t=mo(t));for(const s in t){const n=t[s];let i;Le(n)?"default"in n?i=Lt(n.from||s,n.default,!0):i=Lt(n.from||s):i=Lt(n),ot(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Ka(t,e,r){qt(_e(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,r)}function pu(t,e,r,s){const n=s.includes(".")?fu(r,s):()=>r[s];if(Qe(t)){const i=e[t];ye(i)&&yt(n,i)}else if(ye(t))yt(n,t.bind(r));else if(Le(t))if(_e(t))t.forEach(i=>pu(i,e,r,s));else{const i=ye(t.handler)?t.handler.bind(r):e[t.handler];ye(i)&&yt(n,i,t)}}function aa(t){const e=t.type,{mixins:r,extends:s}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!n.length&&!r&&!s?c=e:(c={},n.length&&n.forEach(l=>qn(c,l,o,!0)),qn(c,e,o)),Le(e)&&i.set(e,c),c}function qn(t,e,r,s=!1){const{mixins:n,extends:i}=e;i&&qn(t,i,r,!0),n&&n.forEach(o=>qn(t,o,r,!0));for(const o in e)if(!(s&&o==="expose")){const a=pd[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const pd={data:Ja,props:Ya,emits:Ya,methods:Is,computed:Is,beforeCreate:ft,created:ft,beforeMount:ft,mounted:ft,beforeUpdate:ft,updated:ft,beforeDestroy:ft,beforeUnmount:ft,destroyed:ft,unmounted:ft,activated:ft,deactivated:ft,errorCaptured:ft,serverPrefetch:ft,components:Is,directives:Is,watch:_d,provide:Ja,inject:gd};function Ja(t,e){return e?t?function(){return it(ye(t)?t.call(this,this):t,ye(e)?e.call(this,this):e)}:e:t}function gd(t,e){return Is(mo(t),mo(e))}function mo(t){if(_e(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function ft(t,e){return t?[...new Set([].concat(t,e))]:e}function Is(t,e){return t?it(Object.create(null),t,e):e}function Ya(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:it(Object.create(null),za(t),za(e??{})):e}function _d(t,e){if(!t)return e;if(!e)return t;const r=it(Object.create(null),t);for(const s in e)r[s]=ft(t[s],e[s]);return r}function gu(){return{app:null,config:{isNativeTag:Gf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bd=0;function yd(t,e){return function(s,n=null){ye(s)||(s=it({},s)),n!=null&&!Le(n)&&(n=null);const i=gu(),o=new WeakSet;let a=!1;const c=i.app={_uid:bd++,_component:s,_props:n,_container:null,_context:i,_instance:null,version:Vd,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&ye(l.install)?(o.add(l),l.install(c,...u)):ye(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,f){if(!a){const m=je(s,n);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(m,l):t(m,l,f),a=!0,c._container=l,l.__vue_app__=c,yi(m.component)||m.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){Hn=c;try{return l()}finally{Hn=null}}};return c}}let Hn=null;function Rn(t,e){if(st){let r=st.provides;const s=st.parent&&st.parent.provides;s===r&&(r=st.provides=Object.create(s)),r[t]=e}}function Lt(t,e,r=!1){const s=st||Ye;if(s||Hn){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Hn._context.provides;if(n&&t in n)return n[t];if(arguments.length>1)return r&&ye(e)?e.call(s&&s.proxy):e}}function wd(t,e,r,s=!1){const n={},i={};$n(i,_i,1),t.propsDefaults=Object.create(null),_u(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);r?t.props=s?n:Zl(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function vd(t,e,r,s){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=Pe(n),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let m=u[f];if(di(t.emitsOptions,m))continue;const w=e[m];if(c)if(Ae(i,m))w!==i[m]&&(i[m]=w,l=!0);else{const E=er(m);n[E]=po(c,a,E,w,t,!1)}else w!==i[m]&&(i[m]=w,l=!0)}}}else{_u(t,e,n,i)&&(l=!0);let u;for(const f in a)(!e||!Ae(e,f)&&((u=Vr(f))===f||!Ae(e,u)))&&(c?r&&(r[f]!==void 0||r[u]!==void 0)&&(n[f]=po(c,a,f,void 0,t,!0)):delete n[f]);if(i!==a)for(const f in i)(!e||!Ae(e,f))&&(delete i[f],l=!0)}l&&ar(t,"set","$attrs")}function _u(t,e,r,s){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Tn(c))continue;const l=e[c];let u;n&&Ae(n,u=er(c))?!i||!i.includes(u)?r[u]=l:(a||(a={}))[u]=l:di(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Pe(r),l=a||Fe;for(let u=0;u<i.length;u++){const f=i[u];r[f]=po(n,c,f,l[f],t,!Ae(l,f))}}return o}function po(t,e,r,s,n,i){const o=t[r];if(o!=null){const a=Ae(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ye(c)){const{propsDefaults:l}=n;if(r in l)s=l[r];else{const u=cn(n);s=l[r]=c.call(null,e),u()}}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Vr(r))&&(s=!0))}return s}function bu(t,e,r=!1){const s=e.propsCache,n=s.get(t);if(n)return n;const i=t.props,o={},a=[];let c=!1;if(!ye(t)){const u=f=>{c=!0;const[m,w]=bu(f,e,!0);it(o,m),w&&a.push(...w)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return Le(t)&&s.set(t,ts),ts;if(_e(i))for(let u=0;u<i.length;u++){const f=er(i[u]);Xa(f)&&(o[f]=Fe)}else if(i)for(const u in i){const f=er(u);if(Xa(f)){const m=i[u],w=o[f]=_e(m)||ye(m)?{type:m}:it({},m);if(w){const E=ec(Boolean,w.type),T=ec(String,w.type);w[0]=E>-1,w[1]=T<0||E<T,(E>-1||Ae(w,"default"))&&a.push(f)}}}const l=[o,a];return Le(t)&&s.set(t,l),l}function Xa(t){return t[0]!=="$"}function Qa(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Za(t,e){return Qa(t)===Qa(e)}function ec(t,e){return _e(e)?e.findIndex(r=>Za(r,t)):ye(e)&&Za(e,t)?0:-1}const yu=t=>t[0]==="_"||t==="$stable",ca=t=>_e(t)?t.map(Kt):[Kt(t)],xd=(t,e,r)=>{if(e._n)return e;const s=ir((...n)=>ca(e(...n)),r);return s._c=!1,s},wu=(t,e,r)=>{const s=t._ctx;for(const n in t){if(yu(n))continue;const i=t[n];if(ye(i))e[n]=xd(n,i,s);else if(i!=null){const o=ca(i);e[n]=()=>o}}},vu=(t,e)=>{const r=ca(e);t.slots.default=()=>r},Ed=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Pe(e),$n(e,"_",r)):wu(e,t.slots={})}else t.slots={},e&&vu(t,e);$n(t.slots,_i,1)},Sd=(t,e,r)=>{const{vnode:s,slots:n}=t;let i=!0,o=Fe;if(s.shapeFlag&32){const a=e._;a?r&&a===1?i=!1:(it(n,e),!r&&a===1&&delete n._):(i=!e.$stable,wu(e,n)),o=e}else e&&(vu(t,e),o={default:1});if(i)for(const a in n)!yu(a)&&o[a]==null&&delete n[a]};function go(t,e,r,s,n=!1){if(_e(t)){t.forEach((m,w)=>go(m,e&&(_e(e)?e[w]:e),r,s,n));return}if(Ns(s)&&!n)return;const i=s.shapeFlag&4?yi(s.component)||s.component.proxy:s.el,o=n?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Fe?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==c&&(Qe(l)?(u[l]=null,Ae(f,l)&&(f[l]=null)):ot(l)&&(l.value=null)),ye(c))xr(c,a,12,[o,u]);else{const m=Qe(c),w=ot(c),E=t.f;if(m||w){const T=()=>{if(E){const M=m?Ae(f,c)?f[c]:u[c]:c.value;n?_e(M)&&Vo(M,i):_e(M)?M.includes(i)||M.push(i):m?(u[c]=[i],Ae(f,c)&&(f[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else m?(u[c]=o,Ae(f,c)&&(f[c]=o)):w&&(c.value=o,t.k&&(u[t.k]=o))};n||E?T():(T.id=-1,_t(T,r))}}}const _t=Yh;function Od(t){return Ad(t)}function Ad(t,e){const r=jl();r.__VUE__=!0;const{insert:s,remove:n,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:m,setScopeId:w=Mt,insertStaticContent:E}=t,T=(g,b,C,L=null,N=null,W=null,Y=void 0,H=null,K=!!b.dynamicChildren)=>{if(g===b)return;g&&!Ss(g,b)&&(L=S(g),ee(g,N,W,!0),g=null),b.patchFlag===-2&&(K=!1,b.dynamicChildren=null);const{type:q,ref:se,shapeFlag:X}=b;switch(q){case on:M(g,b,C,L);break;case Pr:j(g,b,C,L);break;case qi:g==null&&$(b,C,L,Y);break;case Pt:Re(g,b,C,L,N,W,Y,H,K);break;default:X&1?ie(g,b,C,L,N,W,Y,H,K):X&6?De(g,b,C,L,N,W,Y,H,K):(X&64||X&128)&&q.process(g,b,C,L,N,W,Y,H,K,G)}se!=null&&N&&go(se,g&&g.ref,W,b||g,!b)},M=(g,b,C,L)=>{if(g==null)s(b.el=a(b.children),C,L);else{const N=b.el=g.el;b.children!==g.children&&l(N,b.children)}},j=(g,b,C,L)=>{g==null?s(b.el=c(b.children||""),C,L):b.el=g.el},$=(g,b,C,L)=>{[g.el,g.anchor]=E(g.children,b,C,L,g.el,g.anchor)},z=({el:g,anchor:b},C,L)=>{let N;for(;g&&g!==b;)N=m(g),s(g,C,L),g=N;s(b,C,L)},B=({el:g,anchor:b})=>{let C;for(;g&&g!==b;)C=m(g),n(g),g=C;n(b)},ie=(g,b,C,L,N,W,Y,H,K)=>{b.type==="svg"?Y="svg":b.type==="math"&&(Y="mathml"),g==null?Q(b,C,L,N,W,Y,H,K):he(g,b,N,W,Y,H,K)},Q=(g,b,C,L,N,W,Y,H)=>{let K,q;const{props:se,shapeFlag:X,transition:O,dirs:R}=g;if(K=g.el=o(g.type,W,se&&se.is,se),X&8?u(K,g.children):X&16&&J(g.children,K,null,L,N,Bi(g,W),Y,H),R&&Mr(g,null,L,"created"),we(K,g,g.scopeId,Y,L),se){for(const de in se)de!=="value"&&!Tn(de)&&i(K,de,null,se[de],W,g.children,L,N,fe);"value"in se&&i(K,"value",null,se.value,W),(q=se.onVnodeBeforeMount)&&Wt(q,L,g)}R&&Mr(g,null,L,"beforeMount");const ne=Pd(N,O);ne&&O.beforeEnter(K),s(K,b,C),((q=se&&se.onVnodeMounted)||ne||R)&&_t(()=>{q&&Wt(q,L,g),ne&&O.enter(K),R&&Mr(g,null,L,"mounted")},N)},we=(g,b,C,L,N)=>{if(C&&w(g,C),L)for(let W=0;W<L.length;W++)w(g,L[W]);if(N){let W=N.subTree;if(b===W){const Y=N.vnode;we(g,Y,Y.scopeId,Y.slotScopeIds,N.parent)}}},J=(g,b,C,L,N,W,Y,H,K=0)=>{for(let q=K;q<g.length;q++){const se=g[q]=H?_r(g[q]):Kt(g[q]);T(null,se,b,C,L,N,W,Y,H)}},he=(g,b,C,L,N,W,Y)=>{const H=b.el=g.el;let{patchFlag:K,dynamicChildren:q,dirs:se}=b;K|=g.patchFlag&16;const X=g.props||Fe,O=b.props||Fe;let R;if(C&&Lr(C,!1),(R=O.onVnodeBeforeUpdate)&&Wt(R,C,b,g),se&&Mr(b,g,C,"beforeUpdate"),C&&Lr(C,!0),q?be(g.dynamicChildren,q,H,C,L,Bi(b,N),W):Y||ve(g,b,H,null,C,L,Bi(b,N),W,!1),K>0){if(K&16)Ce(H,b,X,O,C,L,N);else if(K&2&&X.class!==O.class&&i(H,"class",null,O.class,N),K&4&&i(H,"style",X.style,O.style,N),K&8){const ne=b.dynamicProps;for(let de=0;de<ne.length;de++){const xe=ne[de],Ne=X[xe],$e=O[xe];($e!==Ne||xe==="value")&&i(H,xe,Ne,$e,N,g.children,C,L,fe)}}K&1&&g.children!==b.children&&u(H,b.children)}else!Y&&q==null&&Ce(H,b,X,O,C,L,N);((R=O.onVnodeUpdated)||se)&&_t(()=>{R&&Wt(R,C,b,g),se&&Mr(b,g,C,"updated")},L)},be=(g,b,C,L,N,W,Y)=>{for(let H=0;H<b.length;H++){const K=g[H],q=b[H],se=K.el&&(K.type===Pt||!Ss(K,q)||K.shapeFlag&70)?f(K.el):C;T(K,q,se,null,L,N,W,Y,!0)}},Ce=(g,b,C,L,N,W,Y)=>{if(C!==L){if(C!==Fe)for(const H in C)!Tn(H)&&!(H in L)&&i(g,H,C[H],null,Y,b.children,N,W,fe);for(const H in L){if(Tn(H))continue;const K=L[H],q=C[H];K!==q&&H!=="value"&&i(g,H,q,K,Y,b.children,N,W,fe)}"value"in L&&i(g,"value",C.value,L.value,Y)}},Re=(g,b,C,L,N,W,Y,H,K)=>{const q=b.el=g?g.el:a(""),se=b.anchor=g?g.anchor:a("");let{patchFlag:X,dynamicChildren:O,slotScopeIds:R}=b;R&&(H=H?H.concat(R):R),g==null?(s(q,C,L),s(se,C,L),J(b.children||[],C,se,N,W,Y,H,K)):X>0&&X&64&&O&&g.dynamicChildren?(be(g.dynamicChildren,O,C,N,W,Y,H),(b.key!=null||N&&b===N.subTree)&&xu(g,b,!0)):ve(g,b,C,se,N,W,Y,H,K)},De=(g,b,C,L,N,W,Y,H,K)=>{b.slotScopeIds=H,g==null?b.shapeFlag&512?N.ctx.activate(b,C,L,Y,K):Je(b,C,L,N,W,Y,K):mt(g,b,K)},Je=(g,b,C,L,N,W,Y)=>{const H=g.component=Fd(g,L,N);if(hu(g)&&(H.ctx.renderer=G),$d(H),H.asyncDep){if(N&&N.registerDep(H,Me),!g.el){const K=H.subTree=je(Pr);j(null,K,b,C)}}else Me(H,g,b,C,N,W,Y)},mt=(g,b,C)=>{const L=b.component=g.component;if(Wh(g,b,C))if(L.asyncDep&&!L.asyncResolved){Ee(L,b,C);return}else L.next=b,Uh(L.update),L.effect.dirty=!0,L.update();else b.el=g.el,L.vnode=b},Me=(g,b,C,L,N,W,Y)=>{const H=()=>{if(g.isMounted){let{next:se,bu:X,u:O,parent:R,vnode:ne}=g;{const xt=Eu(g);if(xt){se&&(se.el=ne.el,Ee(g,se,Y)),xt.asyncDep.then(()=>{g.isUnmounted||H()});return}}let de=se,xe;Lr(g,!1),se?(se.el=ne.el,Ee(g,se,Y)):se=ne,X&&kn(X),(xe=se.props&&se.props.onVnodeBeforeUpdate)&&Wt(xe,R,se,ne),Lr(g,!0);const Ne=$i(g),$e=g.subTree;g.subTree=Ne,T($e,Ne,f($e.el),S($e),g,N,W),se.el=Ne.el,de===null&&Gh(g,Ne.el),O&&_t(O,N),(xe=se.props&&se.props.onVnodeUpdated)&&_t(()=>Wt(xe,R,se,ne),N)}else{let se;const{el:X,props:O}=b,{bm:R,m:ne,parent:de}=g,xe=Ns(b);if(Lr(g,!1),R&&kn(R),!xe&&(se=O&&O.onVnodeBeforeMount)&&Wt(se,de,b),Lr(g,!0),X&&me){const Ne=()=>{g.subTree=$i(g),me(X,g.subTree,g,N,null)};xe?b.type.__asyncLoader().then(()=>!g.isUnmounted&&Ne()):Ne()}else{const Ne=g.subTree=$i(g);T(null,Ne,C,L,g,N,W),b.el=Ne.el}if(ne&&_t(ne,N),!xe&&(se=O&&O.onVnodeMounted)){const Ne=b;_t(()=>Wt(se,de,Ne),N)}(b.shapeFlag&256||de&&Ns(de.vnode)&&de.vnode.shapeFlag&256)&&g.a&&_t(g.a,N),g.isMounted=!0,b=C=L=null}},K=g.effect=new Ko(H,Mt,()=>na(q),g.scope),q=g.update=()=>{K.dirty&&K.run()};q.id=g.uid,Lr(g,!0),q()},Ee=(g,b,C)=>{b.component=g;const L=g.vnode.props;g.vnode=b,g.next=null,vd(g,b.props,L,C),Sd(g,b.children,C),Wr(),Va(g),Gr()},ve=(g,b,C,L,N,W,Y,H,K=!1)=>{const q=g&&g.children,se=g?g.shapeFlag:0,X=b.children,{patchFlag:O,shapeFlag:R}=b;if(O>0){if(O&128){P(q,X,C,L,N,W,Y,H,K);return}else if(O&256){tt(q,X,C,L,N,W,Y,H,K);return}}R&8?(se&16&&fe(q,N,W),X!==q&&u(C,X)):se&16?R&16?P(q,X,C,L,N,W,Y,H,K):fe(q,N,W,!0):(se&8&&u(C,""),R&16&&J(X,C,L,N,W,Y,H,K))},tt=(g,b,C,L,N,W,Y,H,K)=>{g=g||ts,b=b||ts;const q=g.length,se=b.length,X=Math.min(q,se);let O;for(O=0;O<X;O++){const R=b[O]=K?_r(b[O]):Kt(b[O]);T(g[O],R,C,null,N,W,Y,H,K)}q>se?fe(g,N,W,!0,!1,X):J(b,C,L,N,W,Y,H,K,X)},P=(g,b,C,L,N,W,Y,H,K)=>{let q=0;const se=b.length;let X=g.length-1,O=se-1;for(;q<=X&&q<=O;){const R=g[q],ne=b[q]=K?_r(b[q]):Kt(b[q]);if(Ss(R,ne))T(R,ne,C,null,N,W,Y,H,K);else break;q++}for(;q<=X&&q<=O;){const R=g[X],ne=b[O]=K?_r(b[O]):Kt(b[O]);if(Ss(R,ne))T(R,ne,C,null,N,W,Y,H,K);else break;X--,O--}if(q>X){if(q<=O){const R=O+1,ne=R<se?b[R].el:L;for(;q<=O;)T(null,b[q]=K?_r(b[q]):Kt(b[q]),C,ne,N,W,Y,H,K),q++}}else if(q>O)for(;q<=X;)ee(g[q],N,W,!0),q++;else{const R=q,ne=q,de=new Map;for(q=ne;q<=O;q++){const ct=b[q]=K?_r(b[q]):Kt(b[q]);ct.key!=null&&de.set(ct.key,q)}let xe,Ne=0;const $e=O-ne+1;let xt=!1,kr=0;const Et=new Array($e);for(q=0;q<$e;q++)Et[q]=0;for(q=R;q<=X;q++){const ct=g[q];if(Ne>=$e){ee(ct,N,W,!0);continue}let pt;if(ct.key!=null)pt=de.get(ct.key);else for(xe=ne;xe<=O;xe++)if(Et[xe-ne]===0&&Ss(ct,b[xe])){pt=xe;break}pt===void 0?ee(ct,N,W,!0):(Et[pt-ne]=q+1,pt>=kr?kr=pt:xt=!0,T(ct,b[pt],C,null,N,W,Y,H,K),Ne++)}const Rr=xt?Cd(Et):ts;for(xe=Rr.length-1,q=$e-1;q>=0;q--){const ct=ne+q,pt=b[ct],Kr=ct+1<se?b[ct+1].el:L;Et[q]===0?T(null,pt,C,Kr,N,W,Y,H,K):xt&&(xe<0||q!==Rr[xe]?v(pt,C,Kr,2):xe--)}}},v=(g,b,C,L,N=null)=>{const{el:W,type:Y,transition:H,children:K,shapeFlag:q}=g;if(q&6){v(g.component.subTree,b,C,L);return}if(q&128){g.suspense.move(b,C,L);return}if(q&64){Y.move(g,b,C,G);return}if(Y===Pt){s(W,b,C);for(let X=0;X<K.length;X++)v(K[X],b,C,L);s(g.anchor,b,C);return}if(Y===qi){z(g,b,C);return}if(L!==2&&q&1&&H)if(L===0)H.beforeEnter(W),s(W,b,C),_t(()=>H.enter(W),N);else{const{leave:X,delayLeave:O,afterLeave:R}=H,ne=()=>s(W,b,C),de=()=>{X(W,()=>{ne(),R&&R()})};O?O(W,ne,de):de()}else s(W,b,C)},ee=(g,b,C,L=!1,N=!1)=>{const{type:W,props:Y,ref:H,children:K,dynamicChildren:q,shapeFlag:se,patchFlag:X,dirs:O}=g;if(H!=null&&go(H,null,C,g,!0),se&256){b.ctx.deactivate(g);return}const R=se&1&&O,ne=!Ns(g);let de;if(ne&&(de=Y&&Y.onVnodeBeforeUnmount)&&Wt(de,b,g),se&6)ge(g.component,C,L);else{if(se&128){g.suspense.unmount(C,L);return}R&&Mr(g,null,b,"beforeUnmount"),se&64?g.type.remove(g,b,C,N,G,L):q&&(W!==Pt||X>0&&X&64)?fe(q,b,C,!1,!0):(W===Pt&&X&384||!N&&se&16)&&fe(K,b,C),L&&ce(g)}(ne&&(de=Y&&Y.onVnodeUnmounted)||R)&&_t(()=>{de&&Wt(de,b,g),R&&Mr(g,null,b,"unmounted")},C)},ce=g=>{const{type:b,el:C,anchor:L,transition:N}=g;if(b===Pt){pe(C,L);return}if(b===qi){B(g);return}const W=()=>{n(C),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(g.shapeFlag&1&&N&&!N.persisted){const{leave:Y,delayLeave:H}=N,K=()=>Y(C,W);H?H(g.el,W,K):K()}else W()},pe=(g,b)=>{let C;for(;g!==b;)C=m(g),n(g),g=C;n(b)},ge=(g,b,C)=>{const{bum:L,scope:N,update:W,subTree:Y,um:H}=g;L&&kn(L),N.stop(),W&&(W.active=!1,ee(Y,g,b,C)),H&&_t(H,b),_t(()=>{g.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},fe=(g,b,C,L=!1,N=!1,W=0)=>{for(let Y=W;Y<g.length;Y++)ee(g[Y],b,C,L,N)},S=g=>g.shapeFlag&6?S(g.component.subTree):g.shapeFlag&128?g.suspense.next():m(g.anchor||g.el);let F=!1;const k=(g,b,C)=>{g==null?b._vnode&&ee(b._vnode,null,null,!0):T(b._vnode||null,g,b,null,null,null,C),F||(F=!0,Va(),au(),F=!1),b._vnode=g},G={p:T,um:ee,m:v,r:ce,mt:Je,mc:J,pc:ve,pbc:be,n:S,o:t};let le,me;return e&&([le,me]=e(G)),{render:k,hydrate:le,createApp:yd(k,le)}}function Bi({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Lr({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Pd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xu(t,e,r=!1){const s=t.children,n=e.children;if(_e(s)&&_e(n))for(let i=0;i<s.length;i++){const o=s[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=_r(n[i]),a.el=o.el),r||xu(o,a)),a.type===on&&(a.el=o.el)}}function Cd(t){const e=t.slice(),r=[0];let s,n,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(n=r[r.length-1],t[n]<l){e[s]=n,r.push(s);continue}for(i=0,o=r.length-1;i<o;)a=i+o>>1,t[r[a]]<l?i=a+1:o=a;l<t[r[i]]&&(i>0&&(e[s]=r[i-1]),r[i]=s)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function Eu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Eu(e)}const Id=t=>t.__isTeleport,Pt=Symbol.for("v-fgt"),on=Symbol.for("v-txt"),Pr=Symbol.for("v-cmt"),qi=Symbol.for("v-stc"),Ls=[];let Dt=null;function wt(t=!1){Ls.push(Dt=t?null:[])}function Td(){Ls.pop(),Dt=Ls[Ls.length-1]||null}let Ks=1;function tc(t){Ks+=t}function Su(t){return t.dynamicChildren=Ks>0?Dt||ts:null,Td(),Ks>0&&Dt&&Dt.push(t),t}function lr(t,e,r,s,n,i){return Su(ze(t,e,r,s,n,i,!0))}function Js(t,e,r,s,n){return Su(je(t,e,r,s,n,!0))}function Vn(t){return t?t.__v_isVNode===!0:!1}function Ss(t,e){return t.type===e.type&&t.key===e.key}const _i="__vInternal",Ou=({key:t})=>t??null,Nn=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ot(t)||ye(t)?{i:Ye,r:t,k:e,f:!!r}:t:null);function ze(t,e=null,r=null,s=0,n=null,i=t===Pt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ou(e),ref:e&&Nn(e),scopeId:mi,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ye};return a?(la(c,r),i&128&&t.normalize(c)):r&&(c.shapeFlag|=Qe(r)?8:16),Ks>0&&!o&&Dt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Dt.push(c),c}const je=kd;function kd(t,e=null,r=null,s=0,n=null,i=!1){if((!t||t===zh)&&(t=Pr),Vn(t)){const a=us(t,e,!0);return r&&la(a,r),Ks>0&&!i&&Dt&&(a.shapeFlag&6?Dt[Dt.indexOf(t)]=a:Dt.push(a)),a.patchFlag|=-2,a}if(Hd(t)&&(t=t.__vccOpts),e){e=Rd(e);let{class:a,style:c}=e;a&&!Qe(a)&&(e.class=Yt(a)),Le(c)&&(eu(c)&&!_e(c)&&(c=it({},c)),e.style=zo(c))}const o=Qe(t)?1:Jh(t)?128:Id(t)?64:Le(t)?4:ye(t)?2:0;return ze(t,e,r,s,n,o,i,!0)}function Rd(t){return t?eu(t)||_i in t?it({},t):t:null}function us(t,e,r=!1){const{props:s,ref:n,patchFlag:i,children:o}=t,a=e?Md(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ou(a),ref:e&&e.ref?r&&n?_e(n)?n.concat(Nn(e)):[n,Nn(e)]:Nn(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&us(t.ssContent),ssFallback:t.ssFallback&&us(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Au(t=" ",e=0){return je(on,null,t,e)}function Nd(t="",e=!1){return e?(wt(),Js(Pr,null,t)):je(Pr,null,t)}function Kt(t){return t==null||typeof t=="boolean"?je(Pr):_e(t)?je(Pt,null,t.slice()):typeof t=="object"?_r(t):je(on,null,String(t))}function _r(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:us(t)}function la(t,e){let r=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(_e(e))r=16;else if(typeof e=="object")if(s&65){const n=e.default;n&&(n._c&&(n._d=!1),la(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!(_i in e)?e._ctx=Ye:n===3&&Ye&&(Ye.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:Ye},r=32):(e=String(e),s&64?(r=16,e=[Au(e)]):r=8);t.children=e,t.shapeFlag|=r}function Md(...t){const e={};for(let r=0;r<t.length;r++){const s=t[r];for(const n in s)if(n==="class")e.class!==s.class&&(e.class=Yt([e.class,s.class]));else if(n==="style")e.style=zo([e.style,s.style]);else if(ii(n)){const i=e[n],o=s[n];o&&i!==o&&!(_e(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=s[n])}return e}function Wt(t,e,r,s=null){qt(t,e,7,[r,s])}const Ld=gu();let jd=0;function Fd(t,e,r){const s=t.type,n=(e?e.appContext:t.appContext)||Ld,i={uid:jd++,vnode:t,type:s,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bu(s,n),emitsOptions:lu(s,n),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:s.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=qh.bind(null,i),t.ce&&t.ce(i),i}let st=null;const an=()=>st||Ye;let Wn,_o;{const t=jl(),e=(r,s)=>{let n;return(n=t[r])||(n=t[r]=[]),n.push(s),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};Wn=e("__VUE_INSTANCE_SETTERS__",r=>st=r),_o=e("__VUE_SSR_SETTERS__",r=>bi=r)}const cn=t=>{const e=st;return Wn(t),t.scope.on(),()=>{t.scope.off(),Wn(e)}},rc=()=>{st&&st.scope.off(),Wn(null)};function Pu(t){return t.vnode.shapeFlag&4}let bi=!1;function $d(t,e=!1){e&&_o(e);const{props:r,children:s}=t.vnode,n=Pu(t);wd(t,r,n,e),Ed(t,s);const i=n?Ud(t,e):void 0;return e&&_o(!1),i}function Ud(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=tu(new Proxy(t.ctx,hd));const{setup:s}=r;if(s){const n=t.setupContext=s.length>1?Bd(t):null,i=cn(t);Wr();const o=xr(s,t,0,[t.props,n]);if(Gr(),i(),Nl(o)){if(o.then(rc,rc),e)return o.then(a=>{sc(t,a,e)}).catch(a=>{hi(a,t,0)});t.asyncDep=o}else sc(t,o,e)}else Cu(t,e)}function sc(t,e,r){ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Le(e)&&(t.setupState=nu(e)),Cu(t,r)}let nc;function Cu(t,e,r){const s=t.type;if(!t.render){if(!e&&nc&&!s.render){const n=s.template||aa(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=it(it({isCustomElement:i,delimiters:a},o),c);s.render=nc(n,l)}}t.render=s.render||Mt}{const n=cn(t);Wr();try{dd(t)}finally{Gr(),n()}}}function Dd(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,r){return vt(t,"get","$attrs"),e[r]}}))}function Bd(t){const e=r=>{t.exposed=r||{}};return{get attrs(){return Dd(t)},slots:t.slots,emit:t.emit,expose:e}}function yi(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(nu(tu(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ms)return Ms[r](t)},has(e,r){return r in e||r in Ms}}))}function qd(t,e=!0){return ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Hd(t){return ye(t)&&"__vccOpts"in t}const Ue=(t,e)=>Ch(t,e,bi);function wi(t,e,r){const s=arguments.length;return s===2?Le(e)&&!_e(e)?Vn(e)?je(t,null,[e]):je(t,e):je(t,null,e):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&Vn(r)&&(r=[r]),je(t,e,r))}const Vd="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Wd="http://www.w3.org/2000/svg",Gd="http://www.w3.org/1998/Math/MathML",br=typeof document<"u"?document:null,ic=br&&br.createElement("template"),zd={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,s)=>{const n=e==="svg"?br.createElementNS(Wd,t):e==="mathml"?br.createElementNS(Gd,t):br.createElement(t,r?{is:r}:void 0);return t==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:t=>br.createTextNode(t),createComment:t=>br.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>br.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,s,n,i){const o=r?r.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===i||!(n=n.nextSibling)););else{ic.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=ic.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Kd=Symbol("_vtc");function Jd(t,e,r){const s=t[Kd];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const ua=Symbol("_vod"),hy={beforeMount(t,{value:e},{transition:r}){t[ua]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Os(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:s}){!e!=!r&&(s?e?(s.beforeEnter(t),Os(t,!0),s.enter(t)):s.leave(t,()=>{Os(t,!1)}):Os(t,e))},beforeUnmount(t,{value:e}){Os(t,e)}};function Os(t,e){t.style.display=e?t[ua]:"none"}const Yd=Symbol("");function Xd(t,e,r){const s=t.style,n=s.display,i=Qe(r);if(r&&!i){if(e&&!Qe(e))for(const o in e)r[o]==null&&bo(s,o,"");for(const o in r)bo(s,o,r[o])}else if(i){if(e!==r){const o=s[Yd];o&&(r+=";"+o),s.cssText=r}}else e&&t.removeAttribute("style");ua in t&&(s.display=n)}const oc=/\s*!important$/;function bo(t,e,r){if(_e(r))r.forEach(s=>bo(t,e,s));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const s=Qd(t,e);oc.test(r)?t.setProperty(Vr(s),r.replace(oc,""),"important"):t[s]=r}}const ac=["Webkit","Moz","ms"],Hi={};function Qd(t,e){const r=Hi[e];if(r)return r;let s=er(e);if(s!=="filter"&&s in t)return Hi[e]=s;s=ci(s);for(let n=0;n<ac.length;n++){const i=ac[n]+s;if(i in t)return Hi[e]=i}return e}const cc="http://www.w3.org/1999/xlink";function Zd(t,e,r,s,n){if(s&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(cc,e.slice(6,e.length)):t.setAttributeNS(cc,e,r);else{const i=rh(e);r==null||i&&!Fl(r)?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}function em(t,e,r,s,n,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,n,i),t[e]=r??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=r;const l=a==="OPTION"?t.getAttribute("value"):t.value,u=r??"";l!==u&&(t.value=u),r==null&&t.removeAttribute(e);return}let c=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=Fl(r):r==null&&l==="string"?(r="",c=!0):l==="number"&&(r=0,c=!0)}try{t[e]=r}catch{}c&&t.removeAttribute(e)}function Iu(t,e,r,s){t.addEventListener(e,r,s)}function tm(t,e,r,s){t.removeEventListener(e,r,s)}const lc=Symbol("_vei");function rm(t,e,r,s,n=null){const i=t[lc]||(t[lc]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=sm(e);if(s){const l=i[e]=om(s,n);Iu(t,a,l,c)}else o&&(tm(t,a,o,c),i[e]=void 0)}}const uc=/(?:Once|Passive|Capture)$/;function sm(t){let e;if(uc.test(t)){e={};let s;for(;s=t.match(uc);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vr(t.slice(2)),e]}let Vi=0;const nm=Promise.resolve(),im=()=>Vi||(nm.then(()=>Vi=0),Vi=Date.now());function om(t,e){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;qt(am(s,r.value),e,5,[s])};return r.value=t,r.attached=im(),r}function am(t,e){if(_e(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(s=>n=>!n._stopped&&s&&s(n))}else return e}const fc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,cm=(t,e,r,s,n,i,o,a,c)=>{const l=n==="svg";e==="class"?Jd(t,s,l):e==="style"?Xd(t,r,s):ii(e)?Ho(e)||rm(t,e,r,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):lm(t,e,s,l))?em(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Zd(t,e,s,l))};function lm(t,e,r,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&fc(e)&&ye(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return fc(e)&&Qe(r)?!1:e in t}const hc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?r=>kn(e,r):e},Wi=Symbol("_assign"),dy={deep:!0,created(t,{value:e,modifiers:{number:r}},s){const n=oi(e);Iu(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>r?Go(Gn(o)):Gn(o));t[Wi](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,bs(()=>{t._assigning=!1})}),t[Wi]=hc(s)},mounted(t,{value:e,oldValue:r,modifiers:{number:s}}){dc(t,e,r,s)},beforeUpdate(t,e,r){t[Wi]=hc(r)},updated(t,{value:e,oldValue:r,modifiers:{number:s}}){t._assigning||dc(t,e,r,s)}};function dc(t,e,r,s){const n=t.multiple,i=_e(e);if(!(n&&!i&&!oi(e))&&!(i&&Vs(e,r))){for(let o=0,a=t.options.length;o<a;o++){const c=t.options[o],l=Gn(c);if(n)if(i){const u=typeof l;u==="string"||u==="number"?c.selected=e.includes(s?Go(l):l):c.selected=nh(e,l)>-1}else c.selected=e.has(l);else if(Vs(Gn(c),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Gn(t){return"_value"in t?t._value:t.value}const um={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},my=(t,e)=>{const r=t._withKeys||(t._withKeys={}),s=e.join(".");return r[s]||(r[s]=n=>{if(!("key"in n))return;const i=Vr(n.key);if(e.some(o=>o===i||um[o]===i))return t(n)})},fm=it({patchProp:cm},zd);let mc;function hm(){return mc||(mc=Od(fm))}const dm=(...t)=>{const e=hm().createApp(...t),{mount:r}=e;return e.mount=s=>{const n=pm(s);if(!n)return;const i=e._component;!ye(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,mm(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function mm(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function pm(t){return Qe(t)?document.querySelector(t):t}/*!
  * shared v9.9.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const zn=typeof window<"u",Ir=(t,e=!1)=>e?Symbol.for(t):Symbol(t),gm=(t,e,r)=>_m({l:t,k:e,s:r}),_m=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),et=t=>typeof t=="number"&&isFinite(t),bm=t=>ku(t)==="[object Date]",Kn=t=>ku(t)==="[object RegExp]",vi=t=>Oe(t)&&Object.keys(t).length===0,ut=Object.assign;let pc;const fa=()=>pc||(pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gc(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const ym=Object.prototype.hasOwnProperty;function Jn(t,e){return ym.call(t,e)}const Xe=Array.isArray,We=t=>typeof t=="function",ue=t=>typeof t=="string",Ge=t=>typeof t=="boolean",Te=t=>t!==null&&typeof t=="object",wm=t=>Te(t)&&We(t.then)&&We(t.catch),Tu=Object.prototype.toString,ku=t=>Tu.call(t),Oe=t=>{if(!Te(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},vm=t=>t==null?"":Xe(t)||Oe(t)&&t.toString===Tu?JSON.stringify(t,null,2):String(t);function xm(t,e=""){return t.reduce((r,s,n)=>n===0?r+s:r+e+s,"")}function ha(t){let e=t;return()=>++e}function Em(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const En=t=>!Te(t)||Xe(t);function Mn(t,e){if(En(t)||En(e))throw new Error("Invalid value");const r=[{src:t,des:e}];for(;r.length;){const{src:s,des:n}=r.pop();Object.keys(s).forEach(i=>{En(s[i])||En(n[i])?n[i]=s[i]:r.push({src:s[i],des:n[i]})})}}/*!
  * message-compiler v9.9.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Sm=/\{([0-9a-zA-Z]+)\}/g;function Om(t,...e){return e.length===1&&Am(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(Sm,(r,s)=>e.hasOwnProperty(s)?e[s]:"")}const Am=t=>t!==null&&typeof t=="object",rt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Pm={[rt.EXPECTED_TOKEN]:"Expected token: '{0}'",[rt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[rt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[rt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[rt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[rt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[rt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[rt.EMPTY_PLACEHOLDER]:"Empty placeholder",[rt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[rt.INVALID_LINKED_FORMAT]:"Invalid linked format",[rt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[rt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[rt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[rt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[rt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[rt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Ru(t,e,r={}){const{domain:s,messages:n,args:i}=r,o=Om((n||Pm)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=s,a}/*!
  * core-base v9.9.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Cm(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fa().__INTLIFY_PROD_DEVTOOLS__=!1)}const Tr=[];Tr[0]={w:[0],i:[3,0],"[":[4],o:[7]};Tr[1]={w:[1],".":[2],"[":[4],o:[7]};Tr[2]={w:[2],i:[3,0],0:[3,0]};Tr[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Tr[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Tr[5]={"'":[4,0],o:8,l:[5,0]};Tr[6]={'"':[4,0],o:8,l:[6,0]};const Im=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Tm(t){return Im.test(t)}function km(t){const e=t.charCodeAt(0),r=t.charCodeAt(t.length-1);return e===r&&(e===34||e===39)?t.slice(1,-1):t}function Rm(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Nm(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Tm(e)?km(e):"*"+e}function Mm(t){const e=[];let r=-1,s=0,n=0,i,o,a,c,l,u,f;const m=[];m[0]=()=>{o===void 0?o=a:o+=a},m[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},m[2]=()=>{m[0](),n++},m[3]=()=>{if(n>0)n--,s=4,m[0]();else{if(n=0,o===void 0||(o=Nm(o),o===!1))return!1;m[1]()}};function w(){const E=t[r+1];if(s===5&&E==="'"||s===6&&E==='"')return r++,a="\\"+E,m[0](),!0}for(;s!==null;)if(r++,i=t[r],!(i==="\\"&&w())){if(c=Rm(i),f=Tr[s],l=f[c]||f.l||8,l===8||(s=l[0],l[1]!==void 0&&(u=m[l[1]],u&&(a=i,u()===!1))))return;if(s===7)return e}}const _c=new Map;function Lm(t,e){return Te(t)?t[e]:null}function jm(t,e){if(!Te(t))return null;let r=_c.get(e);if(r||(r=Mm(e),r&&_c.set(e,r)),!r)return null;const s=r.length;let n=t,i=0;for(;i<s;){const o=n[r[i]];if(o===void 0||We(n))return null;n=o,i++}return n}const Fm=t=>t,$m=t=>"",Um="text",Dm=t=>t.length===0?"":xm(t),Bm=vm;function bc(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function qm(t){const e=et(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(et(t.named.count)||et(t.named.n))?et(t.named.count)?t.named.count:et(t.named.n)?t.named.n:e:e}function Hm(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Vm(t={}){const e=t.locale,r=qm(t),s=Te(t.pluralRules)&&ue(e)&&We(t.pluralRules[e])?t.pluralRules[e]:bc,n=Te(t.pluralRules)&&ue(e)&&We(t.pluralRules[e])?bc:void 0,i=j=>j[s(r,j.length,n)],o=t.list||[],a=j=>o[j],c=t.named||{};et(t.pluralIndex)&&Hm(r,c);const l=j=>c[j];function u(j){const $=We(t.messages)?t.messages(j):Te(t.messages)?t.messages[j]:!1;return $||(t.parent?t.parent.message(j):$m)}const f=j=>t.modifiers?t.modifiers[j]:Fm,m=Oe(t.processor)&&We(t.processor.normalize)?t.processor.normalize:Dm,w=Oe(t.processor)&&We(t.processor.interpolate)?t.processor.interpolate:Bm,E=Oe(t.processor)&&ue(t.processor.type)?t.processor.type:Um,M={list:a,named:l,plural:i,linked:(j,...$)=>{const[z,B]=$;let ie="text",Q="";$.length===1?Te(z)?(Q=z.modifier||Q,ie=z.type||ie):ue(z)&&(Q=z||Q):$.length===2&&(ue(z)&&(Q=z||Q),ue(B)&&(ie=B||ie));const we=u(j)(M),J=ie==="vnode"&&Xe(we)&&Q?we[0]:we;return Q?f(Q)(J,ie):J},message:u,type:E,interpolate:w,normalize:m,values:ut({},o,c)};return M}let Ys=null;function Wm(t){Ys=t}function Gm(t,e,r){Ys&&Ys.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:r})}const zm=Km("function:translate");function Km(t){return e=>Ys&&Ys.emit(t,e)}const Jm={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},Nu=rt.__EXTEND_POINT__,jr=ha(Nu),Xt={INVALID_ARGUMENT:Nu,INVALID_DATE_ARGUMENT:jr(),INVALID_ISO_DATE_ARGUMENT:jr(),NOT_SUPPORT_NON_STRING_MESSAGE:jr(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:jr(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:jr(),NOT_SUPPORT_LOCALE_TYPE:jr(),__EXTEND_POINT__:jr()};function or(t){return Ru(t,null,void 0)}function da(t,e){return e.locale!=null?yc(e.locale):yc(t.locale)}let Gi;function yc(t){if(ue(t))return t;if(We(t)){if(t.resolvedOnce&&Gi!=null)return Gi;if(t.constructor.name==="Function"){const e=t();if(wm(e))throw or(Xt.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Gi=e}else throw or(Xt.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw or(Xt.NOT_SUPPORT_LOCALE_TYPE)}function Ym(t,e,r){return[...new Set([r,...Xe(e)?e:Te(e)?Object.keys(e):ue(e)?[e]:[r]])]}function Mu(t,e,r){const s=ue(r)?r:Yn,n=t;n.__localeChainCache||(n.__localeChainCache=new Map);let i=n.__localeChainCache.get(s);if(!i){i=[];let o=[r];for(;Xe(o);)o=wc(i,o,e);const a=Xe(e)||!Oe(e)?e:e.default?e.default:null;o=ue(a)?[a]:a,Xe(o)&&wc(i,o,!1),n.__localeChainCache.set(s,i)}return i}function wc(t,e,r){let s=!0;for(let n=0;n<e.length&&Ge(s);n++){const i=e[n];ue(i)&&(s=Xm(t,e[n],r))}return s}function Xm(t,e,r){let s;const n=e.split("-");do{const i=n.join("-");s=Qm(t,i,r),n.splice(-1,1)}while(n.length&&s===!0);return s}function Qm(t,e,r){let s=!1;if(!t.includes(e)&&(s=!0,e)){s=e[e.length-1]!=="!";const n=e.replace(/!/g,"");t.push(n),(Xe(r)||Oe(r))&&r[n]&&(s=r[n])}return s}const Zm="9.9.0",xi=-1,Yn="en-US",vc="",xc=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function ep(){return{upper:(t,e)=>e==="text"&&ue(t)?t.toUpperCase():e==="vnode"&&Te(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ue(t)?t.toLowerCase():e==="vnode"&&Te(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ue(t)?xc(t):e==="vnode"&&Te(t)&&"__v_isVNode"in t?xc(t.children):t}}let tp,Lu;function rp(t){Lu=t}let ju;function sp(t){ju=t}let Fu=null;const np=t=>{Fu=t},ip=()=>Fu;let $u=null;const Ec=t=>{$u=t},op=()=>$u;let Sc=0;function ap(t={}){const e=We(t.onWarn)?t.onWarn:Em,r=ue(t.version)?t.version:Zm,s=ue(t.locale)||We(t.locale)?t.locale:Yn,n=We(s)?Yn:s,i=Xe(t.fallbackLocale)||Oe(t.fallbackLocale)||ue(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,o=Oe(t.messages)?t.messages:{[n]:{}},a=Oe(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},c=Oe(t.numberFormats)?t.numberFormats:{[n]:{}},l=ut({},t.modifiers||{},ep()),u=t.pluralRules||{},f=We(t.missing)?t.missing:null,m=Ge(t.missingWarn)||Kn(t.missingWarn)?t.missingWarn:!0,w=Ge(t.fallbackWarn)||Kn(t.fallbackWarn)?t.fallbackWarn:!0,E=!!t.fallbackFormat,T=!!t.unresolving,M=We(t.postTranslation)?t.postTranslation:null,j=Oe(t.processor)?t.processor:null,$=Ge(t.warnHtmlMessage)?t.warnHtmlMessage:!0,z=!!t.escapeParameter,B=We(t.messageCompiler)?t.messageCompiler:tp,ie=We(t.messageResolver)?t.messageResolver:Lu||Lm,Q=We(t.localeFallbacker)?t.localeFallbacker:ju||Ym,we=Te(t.fallbackContext)?t.fallbackContext:void 0,J=t,he=Te(J.__datetimeFormatters)?J.__datetimeFormatters:new Map,be=Te(J.__numberFormatters)?J.__numberFormatters:new Map,Ce=Te(J.__meta)?J.__meta:{};Sc++;const Re={version:r,cid:Sc,locale:s,fallbackLocale:i,messages:o,modifiers:l,pluralRules:u,missing:f,missingWarn:m,fallbackWarn:w,fallbackFormat:E,unresolving:T,postTranslation:M,processor:j,warnHtmlMessage:$,escapeParameter:z,messageCompiler:B,messageResolver:ie,localeFallbacker:Q,fallbackContext:we,onWarn:e,__meta:Ce};return Re.datetimeFormats=a,Re.numberFormats=c,Re.__datetimeFormatters=he,Re.__numberFormatters=be,__INTLIFY_PROD_DEVTOOLS__&&Gm(Re,r,Ce),Re}function ma(t,e,r,s,n){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,r,e,n);return ue(a)?a:e}else return e}function As(t,e,r){const s=t;s.__localeChainCache=new Map,t.localeFallbacker(t,r,e)}const fs=t=>Te(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t),Oc=()=>"",Nt=t=>We(t);function Ac(t,...e){const{fallbackFormat:r,postTranslation:s,unresolving:n,messageCompiler:i,fallbackLocale:o,messages:a}=t,[c,l]=yo(...e),u=Ge(l.missingWarn)?l.missingWarn:t.missingWarn,f=Ge(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,m=Ge(l.escapeParameter)?l.escapeParameter:t.escapeParameter,w=!!l.resolvedMessage,E=ue(l.default)||Ge(l.default)?Ge(l.default)?i?c:()=>c:l.default:r?i?c:()=>c:"",T=r||E!=="",M=da(t,l);m&&cp(l);let[j,$,z]=w?[c,M,a[M]||{}]:Uu(t,c,M,o,f,u),B=j,ie=c;if(!w&&!(ue(B)||fs(B)||Nt(B))&&T&&(B=E,ie=B),!w&&(!(ue(B)||fs(B)||Nt(B))||!ue($)))return n?xi:c;let Q=!1;const we=()=>{Q=!0},J=Nt(B)?B:Du(t,c,$,B,ie,we);if(Q)return B;const he=fp(t,$,z,l),be=Vm(he),Ce=lp(t,J,be),Re=s?s(Ce,c):Ce;if(__INTLIFY_PROD_DEVTOOLS__){const De={timestamp:Date.now(),key:ue(c)?c:Nt(B)?B.key:"",locale:$||(Nt(B)?B.locale:""),format:ue(B)?B:Nt(B)?B.source:"",message:Re};De.meta=ut({},t.__meta,ip()||{}),zm(De)}return Re}function cp(t){Xe(t.list)?t.list=t.list.map(e=>ue(e)?gc(e):e):Te(t.named)&&Object.keys(t.named).forEach(e=>{ue(t.named[e])&&(t.named[e]=gc(t.named[e]))})}function Uu(t,e,r,s,n,i){const{messages:o,onWarn:a,messageResolver:c,localeFallbacker:l}=t,u=l(t,s,r);let f={},m,w=null;const E="translate";for(let T=0;T<u.length&&(m=u[T],f=o[m]||{},(w=c(f,e))===null&&(w=f[e]),!(ue(w)||fs(w)||Nt(w)));T++){const M=ma(t,e,m,i,E);M!==e&&(w=M)}return[w,m,f]}function Du(t,e,r,s,n,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Nt(s)){const l=s;return l.locale=l.locale||r,l.key=l.key||e,l}if(o==null){const l=()=>s;return l.locale=r,l.key=e,l}const c=o(s,up(t,r,n,s,a,i));return c.locale=r,c.key=e,c.source=s,c}function lp(t,e,r){return e(r)}function yo(...t){const[e,r,s]=t,n={};if(!ue(e)&&!et(e)&&!Nt(e)&&!fs(e))throw or(Xt.INVALID_ARGUMENT);const i=et(e)?String(e):(Nt(e),e);return et(r)?n.plural=r:ue(r)?n.default=r:Oe(r)&&!vi(r)?n.named=r:Xe(r)&&(n.list=r),et(s)?n.plural=s:ue(s)?n.default=s:Oe(s)&&ut(n,s),[i,n]}function up(t,e,r,s,n,i){return{locale:e,key:r,warnHtmlMessage:n,onError:o=>{throw i&&i(o),o},onCacheKey:o=>gm(e,r,o)}}function fp(t,e,r,s){const{modifiers:n,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=t,m={locale:e,modifiers:n,pluralRules:i,messages:w=>{let E=o(r,w);if(E==null&&u){const[,,T]=Uu(u,w,e,a,c,l);E=o(T,w)}if(ue(E)||fs(E)){let T=!1;const j=Du(t,w,e,E,w,()=>{T=!0});return T?Oc:j}else return Nt(E)?E:Oc}};return t.processor&&(m.processor=t.processor),s.list&&(m.list=s.list),s.named&&(m.named=s.named),et(s.plural)&&(m.pluralIndex=s.plural),m}function Pc(t,...e){const{datetimeFormats:r,unresolving:s,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[c,l,u,f]=wo(...e),m=Ge(u.missingWarn)?u.missingWarn:t.missingWarn;Ge(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const w=!!u.part,E=da(t,u),T=o(t,n,E);if(!ue(c)||c==="")return new Intl.DateTimeFormat(E,f).format(l);let M={},j,$=null;const z="datetime format";for(let Q=0;Q<T.length&&(j=T[Q],M=r[j]||{},$=M[c],!Oe($));Q++)ma(t,c,j,m,z);if(!Oe($)||!ue(j))return s?xi:c;let B=`${j}__${c}`;vi(f)||(B=`${B}__${JSON.stringify(f)}`);let ie=a.get(B);return ie||(ie=new Intl.DateTimeFormat(j,ut({},$,f)),a.set(B,ie)),w?ie.formatToParts(l):ie.format(l)}const Bu=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function wo(...t){const[e,r,s,n]=t,i={};let o={},a;if(ue(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw or(Xt.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw or(Xt.INVALID_ISO_DATE_ARGUMENT)}}else if(bm(e)){if(isNaN(e.getTime()))throw or(Xt.INVALID_DATE_ARGUMENT);a=e}else if(et(e))a=e;else throw or(Xt.INVALID_ARGUMENT);return ue(r)?i.key=r:Oe(r)&&Object.keys(r).forEach(c=>{Bu.includes(c)?o[c]=r[c]:i[c]=r[c]}),ue(s)?i.locale=s:Oe(s)&&(o=s),Oe(n)&&(o=n),[i.key||"",a,i,o]}function Cc(t,e,r){const s=t;for(const n in r){const i=`${e}__${n}`;s.__datetimeFormatters.has(i)&&s.__datetimeFormatters.delete(i)}}function Ic(t,...e){const{numberFormats:r,unresolving:s,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[c,l,u,f]=vo(...e),m=Ge(u.missingWarn)?u.missingWarn:t.missingWarn;Ge(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const w=!!u.part,E=da(t,u),T=o(t,n,E);if(!ue(c)||c==="")return new Intl.NumberFormat(E,f).format(l);let M={},j,$=null;const z="number format";for(let Q=0;Q<T.length&&(j=T[Q],M=r[j]||{},$=M[c],!Oe($));Q++)ma(t,c,j,m,z);if(!Oe($)||!ue(j))return s?xi:c;let B=`${j}__${c}`;vi(f)||(B=`${B}__${JSON.stringify(f)}`);let ie=a.get(B);return ie||(ie=new Intl.NumberFormat(j,ut({},$,f)),a.set(B,ie)),w?ie.formatToParts(l):ie.format(l)}const qu=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function vo(...t){const[e,r,s,n]=t,i={};let o={};if(!et(e))throw or(Xt.INVALID_ARGUMENT);const a=e;return ue(r)?i.key=r:Oe(r)&&Object.keys(r).forEach(c=>{qu.includes(c)?o[c]=r[c]:i[c]=r[c]}),ue(s)?i.locale=s:Oe(s)&&(o=s),Oe(n)&&(o=n),[i.key||"",a,i,o]}function Tc(t,e,r){const s=t;for(const n in r){const i=`${e}__${n}`;s.__numberFormatters.has(i)&&s.__numberFormatters.delete(i)}}Cm();/*!
  * vue-i18n v9.9.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const hp="9.9.0";function dp(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fa().__INTLIFY_PROD_DEVTOOLS__=!1)}const Hu=Jm.__EXTEND_POINT__,mr=ha(Hu);mr(),mr(),mr(),mr(),mr(),mr(),mr(),mr();const Vu=Xt.__EXTEND_POINT__,gt=ha(Vu),jt={UNEXPECTED_RETURN_TYPE:Vu,INVALID_ARGUMENT:gt(),MUST_BE_CALL_SETUP_TOP:gt(),NOT_INSTALLED:gt(),NOT_AVAILABLE_IN_LEGACY_MODE:gt(),REQUIRED_VALUE:gt(),INVALID_VALUE:gt(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:gt(),NOT_INSTALLED_WITH_PROVIDE:gt(),UNEXPECTED_ERROR:gt(),NOT_COMPATIBLE_LEGACY_VUE_I18N:gt(),BRIDGE_SUPPORT_VUE_2_ONLY:gt(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:gt(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:gt(),__EXTEND_POINT__:gt()};function Ht(t,...e){return Ru(t,null,void 0)}const xo=Ir("__translateVNode"),Eo=Ir("__datetimeParts"),So=Ir("__numberParts"),mp=Ir("__setPluralRules"),pp=Ir("__injectWithOption"),Oo=Ir("__dispose");function Xs(t){if(!Te(t))return t;for(const e in t)if(Jn(t,e))if(!e.includes("."))Te(t[e])&&Xs(t[e]);else{const r=e.split("."),s=r.length-1;let n=t,i=!1;for(let o=0;o<s;o++){if(r[o]in n||(n[r[o]]={}),!Te(n[r[o]])){i=!0;break}n=n[r[o]]}i||(n[r[s]]=t[e],delete t[e]),Te(n[r[s]])&&Xs(n[r[s]])}return t}function Wu(t,e){const{messages:r,__i18n:s,messageResolver:n,flatJson:i}=e,o=Oe(r)?r:Xe(s)?{}:{[t]:{}};if(Xe(s)&&s.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(o[c]=o[c]||{},Mn(l,o[c])):Mn(l,o)}else ue(a)&&Mn(JSON.parse(a),o)}),n==null&&i)for(const a in o)Jn(o,a)&&Xs(o[a]);return o}function Gu(t){return t.type}function gp(t,e,r){let s=Te(e.messages)?e.messages:{};"__i18nGlobal"in r&&(s=Wu(t.locale.value,{messages:s,__i18n:r.__i18nGlobal}));const n=Object.keys(s);n.length&&n.forEach(i=>{t.mergeLocaleMessage(i,s[i])});{if(Te(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Te(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function kc(t){return je(on,null,t,0)}const Rc="__INTLIFY_META__",Nc=()=>[],_p=()=>!1;let Mc=0;function Lc(t){return(e,r,s,n)=>t(r,s,an()||void 0,n)}const bp=()=>{const t=an();let e=null;return t&&(e=Gu(t)[Rc])?{[Rc]:e}:null};function zu(t={},e){const{__root:r,__injectWithOption:s}=t,n=r===void 0,i=t.flatJson,o=zn?at:ra;let a=Ge(t.inheritLocale)?t.inheritLocale:!0;const c=o(r&&a?r.locale.value:ue(t.locale)?t.locale:Yn),l=o(r&&a?r.fallbackLocale.value:ue(t.fallbackLocale)||Xe(t.fallbackLocale)||Oe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),u=o(Wu(c.value,t)),f=o(Oe(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),m=o(Oe(t.numberFormats)?t.numberFormats:{[c.value]:{}});let w=r?r.missingWarn:Ge(t.missingWarn)||Kn(t.missingWarn)?t.missingWarn:!0,E=r?r.fallbackWarn:Ge(t.fallbackWarn)||Kn(t.fallbackWarn)?t.fallbackWarn:!0,T=r?r.fallbackRoot:Ge(t.fallbackRoot)?t.fallbackRoot:!0,M=!!t.fallbackFormat,j=We(t.missing)?t.missing:null,$=We(t.missing)?Lc(t.missing):null,z=We(t.postTranslation)?t.postTranslation:null,B=r?r.warnHtmlMessage:Ge(t.warnHtmlMessage)?t.warnHtmlMessage:!0,ie=!!t.escapeParameter;const Q=r?r.modifiers:Oe(t.modifiers)?t.modifiers:{};let we=t.pluralRules||r&&r.pluralRules,J;J=(()=>{n&&Ec(null);const O={version:hp,locale:c.value,fallbackLocale:l.value,messages:u.value,modifiers:Q,pluralRules:we,missing:$===null?void 0:$,missingWarn:w,fallbackWarn:E,fallbackFormat:M,unresolving:!0,postTranslation:z===null?void 0:z,warnHtmlMessage:B,escapeParameter:ie,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};O.datetimeFormats=f.value,O.numberFormats=m.value,O.__datetimeFormatters=Oe(J)?J.__datetimeFormatters:void 0,O.__numberFormatters=Oe(J)?J.__numberFormatters:void 0;const R=ap(O);return n&&Ec(R),R})(),As(J,c.value,l.value);function be(){return[c.value,l.value,u.value,f.value,m.value]}const Ce=Ue({get:()=>c.value,set:O=>{c.value=O,J.locale=c.value}}),Re=Ue({get:()=>l.value,set:O=>{l.value=O,J.fallbackLocale=l.value,As(J,c.value,O)}}),De=Ue(()=>u.value),Je=Ue(()=>f.value),mt=Ue(()=>m.value);function Me(){return We(z)?z:null}function Ee(O){z=O,J.postTranslation=O}function ve(){return j}function tt(O){O!==null&&($=Lc(O)),j=O,J.missing=$}const P=(O,R,ne,de,xe,Ne)=>{be();let $e;try{__INTLIFY_PROD_DEVTOOLS__,n||(J.fallbackContext=r?op():void 0),$e=O(J)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(J.fallbackContext=void 0)}if(ne!=="translate exists"&&et($e)&&$e===xi||ne==="translate exists"&&!$e){const[xt,kr]=R();return r&&T?de(r):xe(xt)}else{if(Ne($e))return $e;throw Ht(jt.UNEXPECTED_RETURN_TYPE)}};function v(...O){return P(R=>Reflect.apply(Ac,null,[R,...O]),()=>yo(...O),"translate",R=>Reflect.apply(R.t,R,[...O]),R=>R,R=>ue(R))}function ee(...O){const[R,ne,de]=O;if(de&&!Te(de))throw Ht(jt.INVALID_ARGUMENT);return v(R,ne,ut({resolvedMessage:!0},de||{}))}function ce(...O){return P(R=>Reflect.apply(Pc,null,[R,...O]),()=>wo(...O),"datetime format",R=>Reflect.apply(R.d,R,[...O]),()=>vc,R=>ue(R))}function pe(...O){return P(R=>Reflect.apply(Ic,null,[R,...O]),()=>vo(...O),"number format",R=>Reflect.apply(R.n,R,[...O]),()=>vc,R=>ue(R))}function ge(O){return O.map(R=>ue(R)||et(R)||Ge(R)?kc(String(R)):R)}const S={normalize:ge,interpolate:O=>O,type:"vnode"};function F(...O){return P(R=>{let ne;const de=R;try{de.processor=S,ne=Reflect.apply(Ac,null,[de,...O])}finally{de.processor=null}return ne},()=>yo(...O),"translate",R=>R[xo](...O),R=>[kc(R)],R=>Xe(R))}function k(...O){return P(R=>Reflect.apply(Ic,null,[R,...O]),()=>vo(...O),"number format",R=>R[So](...O),Nc,R=>ue(R)||Xe(R))}function G(...O){return P(R=>Reflect.apply(Pc,null,[R,...O]),()=>wo(...O),"datetime format",R=>R[Eo](...O),Nc,R=>ue(R)||Xe(R))}function le(O){we=O,J.pluralRules=we}function me(O,R){return P(()=>{if(!O)return!1;const ne=ue(R)?R:c.value,de=C(ne),xe=J.messageResolver(de,O);return fs(xe)||Nt(xe)||ue(xe)},()=>[O],"translate exists",ne=>Reflect.apply(ne.te,ne,[O,R]),_p,ne=>Ge(ne))}function g(O){let R=null;const ne=Mu(J,l.value,c.value);for(let de=0;de<ne.length;de++){const xe=u.value[ne[de]]||{},Ne=J.messageResolver(xe,O);if(Ne!=null){R=Ne;break}}return R}function b(O){const R=g(O);return R??(r?r.tm(O)||{}:{})}function C(O){return u.value[O]||{}}function L(O,R){if(i){const ne={[O]:R};for(const de in ne)Jn(ne,de)&&Xs(ne[de]);R=ne[O]}u.value[O]=R,J.messages=u.value}function N(O,R){u.value[O]=u.value[O]||{};const ne={[O]:R};for(const de in ne)Jn(ne,de)&&Xs(ne[de]);R=ne[O],Mn(R,u.value[O]),J.messages=u.value}function W(O){return f.value[O]||{}}function Y(O,R){f.value[O]=R,J.datetimeFormats=f.value,Cc(J,O,R)}function H(O,R){f.value[O]=ut(f.value[O]||{},R),J.datetimeFormats=f.value,Cc(J,O,R)}function K(O){return m.value[O]||{}}function q(O,R){m.value[O]=R,J.numberFormats=m.value,Tc(J,O,R)}function se(O,R){m.value[O]=ut(m.value[O]||{},R),J.numberFormats=m.value,Tc(J,O,R)}Mc++,r&&zn&&(yt(r.locale,O=>{a&&(c.value=O,J.locale=O,As(J,c.value,l.value))}),yt(r.fallbackLocale,O=>{a&&(l.value=O,J.fallbackLocale=O,As(J,c.value,l.value))}));const X={id:Mc,locale:Ce,fallbackLocale:Re,get inheritLocale(){return a},set inheritLocale(O){a=O,O&&r&&(c.value=r.locale.value,l.value=r.fallbackLocale.value,As(J,c.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:De,get modifiers(){return Q},get pluralRules(){return we||{}},get isGlobal(){return n},get missingWarn(){return w},set missingWarn(O){w=O,J.missingWarn=w},get fallbackWarn(){return E},set fallbackWarn(O){E=O,J.fallbackWarn=E},get fallbackRoot(){return T},set fallbackRoot(O){T=O},get fallbackFormat(){return M},set fallbackFormat(O){M=O,J.fallbackFormat=M},get warnHtmlMessage(){return B},set warnHtmlMessage(O){B=O,J.warnHtmlMessage=O},get escapeParameter(){return ie},set escapeParameter(O){ie=O,J.escapeParameter=O},t:v,getLocaleMessage:C,setLocaleMessage:L,mergeLocaleMessage:N,getPostTranslationHandler:Me,setPostTranslationHandler:Ee,getMissingHandler:ve,setMissingHandler:tt,[mp]:le};return X.datetimeFormats=Je,X.numberFormats=mt,X.rt=ee,X.te=me,X.tm=b,X.d=ce,X.n=pe,X.getDateTimeFormat=W,X.setDateTimeFormat=Y,X.mergeDateTimeFormat=H,X.getNumberFormat=K,X.setNumberFormat=q,X.mergeNumberFormat=se,X[pp]=s,X[xo]=F,X[Eo]=G,X[So]=k,X}const pa={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function yp({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((s,n)=>[...s,...n.type===Pt?n.children:[n]],[]):e.reduce((r,s)=>{const n=t[s];return n&&(r[s]=n()),r},{})}function Ku(t){return Pt}const wp=fr({name:"i18n-t",props:ut({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>et(t)||!isNaN(t)}},pa),setup(t,e){const{slots:r,attrs:s}=e,n=t.i18n||ys({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(r).filter(f=>f!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=ue(t.plural)?+t.plural:t.plural);const a=yp(e,i),c=n[xo](t.keypath,a,o),l=ut({},s),u=ue(t.tag)||Te(t.tag)?t.tag:Ku();return wi(u,l,c)}}}),jc=wp;function vp(t){return Xe(t)&&!ue(t[0])}function Ju(t,e,r,s){const{slots:n,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),ue(t.format)?o.key=t.format:Te(t.format)&&(ue(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((m,w)=>r.includes(w)?ut({},m,{[w]:t.format[w]}):m,{}));const c=s(t.value,o,a);let l=[o.key];Xe(c)?l=c.map((m,w)=>{const E=n[m.type],T=E?E({[m.type]:m.value,index:w,parts:c}):[m.value];return vp(T)&&(T[0].key=`${m.type}-${w}`),T}):ue(c)&&(l=[c]);const u=ut({},i),f=ue(t.tag)||Te(t.tag)?t.tag:Ku();return wi(f,u,l)}}const xp=fr({name:"i18n-n",props:ut({value:{type:Number,required:!0},format:{type:[String,Object]}},pa),setup(t,e){const r=t.i18n||ys({useScope:"parent",__useComponent:!0});return Ju(t,e,qu,(...s)=>r[So](...s))}}),Fc=xp,Ep=fr({name:"i18n-d",props:ut({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},pa),setup(t,e){const r=t.i18n||ys({useScope:"parent",__useComponent:!0});return Ju(t,e,Bu,(...s)=>r[Eo](...s))}}),$c=Ep;function Sp(t,e){const r=t;if(t.mode==="composition")return r.__getInstance(e)||t.global;{const s=r.__getInstance(e);return s!=null?s.__composer:t.global.__composer}}function Op(t){const e=o=>{const{instance:a,modifiers:c,value:l}=o;if(!a||!a.$)throw Ht(jt.UNEXPECTED_ERROR);const u=Sp(t,a.$),f=Uc(l);return[Reflect.apply(u.t,u,[...Dc(f)]),u]};return{created:(o,a)=>{const[c,l]=e(a);zn&&t.global===l&&(o.__i18nWatcher=yt(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=l,o.textContent=c},unmounted:o=>{zn&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const c=o.__composer,l=Uc(a);o.textContent=Reflect.apply(c.t,c,[...Dc(l)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function Uc(t){if(ue(t))return{path:t};if(Oe(t)){if(!("path"in t))throw Ht(jt.REQUIRED_VALUE,"path");return t}else throw Ht(jt.INVALID_VALUE)}function Dc(t){const{path:e,locale:r,args:s,choice:n,plural:i}=t,o={},a=s||{};return ue(r)&&(o.locale=r),et(n)&&(o.plural=n),et(i)&&(o.plural=i),[e,a,o]}function Ap(t,e,...r){const s=Oe(r[0])?r[0]:{},n=!!s.useI18nComponentName;(Ge(s.globalInstall)?s.globalInstall:!0)&&([n?"i18n":jc.name,"I18nT"].forEach(o=>t.component(o,jc)),[Fc.name,"I18nN"].forEach(o=>t.component(o,Fc)),[$c.name,"I18nD"].forEach(o=>t.component(o,$c))),t.directive("t",Op(e))}const Pp=Ir("global-vue-i18n");function Cp(t={},e){const r=Ge(t.globalInjection)?t.globalInjection:!0,s=!0,n=new Map,[i,o]=Ip(t),a=Ir("");function c(f){return n.get(f)||null}function l(f,m){n.set(f,m)}function u(f){n.delete(f)}{const f={get mode(){return"composition"},get allowComposition(){return s},async install(m,...w){if(m.__VUE_I18N_SYMBOL__=a,m.provide(m.__VUE_I18N_SYMBOL__,f),Oe(w[0])){const M=w[0];f.__composerExtend=M.__composerExtend,f.__vueI18nExtend=M.__vueI18nExtend}let E=null;r&&(E=Fp(m,f.global)),Ap(m,f,...w);const T=m.unmount;m.unmount=()=>{E&&E(),f.dispose(),T()}},get global(){return o},dispose(){i.stop()},__instances:n,__getInstance:c,__setInstance:l,__deleteInstance:u};return f}}function ys(t={}){const e=an();if(e==null)throw Ht(jt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ht(jt.NOT_INSTALLED);const r=Tp(e),s=Rp(r),n=Gu(e),i=kp(t,n);if(i==="global")return gp(s,t,n),s;if(i==="parent"){let c=Np(r,e,t.__useComponent);return c==null&&(c=s),c}const o=r;let a=o.__getInstance(e);if(a==null){const c=ut({},t);"__i18n"in n&&(c.__i18n=n.__i18n),s&&(c.__root=s),a=zu(c),o.__composerExtend&&(a[Oo]=o.__composerExtend(a)),Lp(o,e,a),o.__setInstance(e,a)}return a}function Ip(t,e,r){const s=ih();{const n=s.run(()=>zu(t));if(n==null)throw Ht(jt.UNEXPECTED_ERROR);return[s,n]}}function Tp(t){{const e=Lt(t.isCE?Pp:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ht(t.isCE?jt.NOT_INSTALLED_WITH_PROVIDE:jt.UNEXPECTED_ERROR);return e}}function kp(t,e){return vi(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Rp(t){return t.mode==="composition"?t.global:t.global.__composer}function Np(t,e,r=!1){let s=null;const n=e.root;let i=Mp(e,r);for(;i!=null;){const o=t;if(t.mode==="composition"&&(s=o.__getInstance(i)),s!=null||n===i)break;i=i.parent}return s}function Mp(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Lp(t,e,r){nn(()=>{},e),oa(()=>{const s=r;t.__deleteInstance(e);const n=s[Oo];n&&(n(),delete s[Oo])},e)}const jp=["locale","fallbackLocale","availableLocales"],Bc=["t","rt","d","n","tm","te"];function Fp(t,e){const r=Object.create(null);return jp.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i)throw Ht(jt.UNEXPECTED_ERROR);const o=ot(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(r,n,o)}),t.config.globalProperties.$i18n=r,Bc.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i||!i.value)throw Ht(jt.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${n}`,i)}),()=>{delete t.config.globalProperties.$i18n,Bc.forEach(n=>{delete t.config.globalProperties[`$${n}`]})}}dp();rp(jm);sp(Mu);if(__INTLIFY_PROD_DEVTOOLS__){const t=fa();t.__INTLIFY__=!0,Wm(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const $p={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Up=ze("path",{fill:"currentColor",d:"M19.14 12.94c.04-.3.06-.61.06-.94c0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6s-1.62 3.6-3.6 3.6"},null,-1),Dp=[Up];function Bp(t,e){return wt(),lr("svg",$p,Dp)}const qp={name:"ic-baseline-settings",render:Bp},Hp={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Vp=ze("path",{fill:"currentColor",d:"m234.5 114.38l-45.1 39.36l13.51 58.6a16 16 0 0 1-23.84 17.34l-51.11-31l-51 31a16 16 0 0 1-23.84-17.34l13.49-58.54l-45.11-39.42a16 16 0 0 1 9.11-28.06l59.46-5.15l23.21-55.36a15.95 15.95 0 0 1 29.44 0L166 81.17l59.44 5.15a16 16 0 0 1 9.11 28.06Z"},null,-1),Wp=[Vp];function Gp(t,e){return wt(),lr("svg",Hp,Wp)}const zp={name:"ph-star-fill",render:Gp},Kp={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Jp=ze("path",{fill:"currentColor",d:"m16 24l-6.09-8.6A8.14 8.14 0 0 1 16 2a8.08 8.08 0 0 1 8 8.13a8.2 8.2 0 0 1-1.8 5.13Zm0-20a6.07 6.07 0 0 0-6 6.13a6.19 6.19 0 0 0 1.49 4L16 20.52L20.63 14A6.24 6.24 0 0 0 22 10.13A6.07 6.07 0 0 0 16 4"},null,-1),Yp=ze("circle",{cx:"16",cy:"9",r:"2",fill:"currentColor"},null,-1),Xp=ze("path",{fill:"currentColor",d:"M28 12h-2v2h2v14H4V14h2v-2H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2"},null,-1),Qp=[Jp,Yp,Xp];function Zp(t,e){return wt(),lr("svg",Kp,Qp)}const eg={name:"carbon-map",render:Zp},tg={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},rg=ze("path",{fill:"currentColor",d:"M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"},null,-1),sg=[rg];function ng(t,e){return wt(),lr("svg",tg,sg)}const ig={name:"ph-magnifying-glass-bold",render:ng};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Zr=typeof window<"u";function og(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ke=Object.assign;function zi(t,e){const r={};for(const s in e){const n=e[s];r[s]=Vt(n)?n.map(t):t(n)}return r}const js=()=>{},Vt=Array.isArray,ag=/\/$/,cg=t=>t.replace(ag,"");function Ki(t,e,r="/"){let s,n={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),n=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=hg(s??e,r),{fullPath:s+(i&&"?")+i+o,path:s,query:n,hash:o}}function lg(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function qc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ug(t,e,r){const s=e.matched.length-1,n=r.matched.length-1;return s>-1&&s===n&&hs(e.matched[s],r.matched[n])&&Yu(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function hs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yu(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!fg(t[r],e[r]))return!1;return!0}function fg(t,e){return Vt(t)?Hc(t,e):Vt(e)?Hc(e,t):t===e}function Hc(t,e){return Vt(e)?t.length===e.length&&t.every((r,s)=>r===e[s]):t.length===1&&t[0]===e}function hg(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),s=t.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let i=r.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var Qs;(function(t){t.pop="pop",t.push="push"})(Qs||(Qs={}));var Fs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Fs||(Fs={}));function dg(t){if(!t)if(Zr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),cg(t)}const mg=/^[^#]+#/;function pg(t,e){return t.replace(mg,"#")+e}function gg(t,e){const r=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-r.left-(e.left||0),top:s.top-r.top-(e.top||0)}}const Ei=()=>({left:window.pageXOffset,top:window.pageYOffset});function _g(t){let e;if("el"in t){const r=t.el,s=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;e=gg(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Vc(t,e){return(history.state?history.state.position-e:-1)+t}const Ao=new Map;function bg(t,e){Ao.set(t,e)}function yg(t){const e=Ao.get(t);return Ao.delete(t),e}let wg=()=>location.protocol+"//"+location.host;function Xu(t,e){const{pathname:r,search:s,hash:n}=e,i=t.indexOf("#");if(i>-1){let a=n.includes(t.slice(i))?t.slice(i).length:1,c=n.slice(a);return c[0]!=="/"&&(c="/"+c),qc(c,"")}return qc(r,t)+s+n}function vg(t,e,r,s){let n=[],i=[],o=null;const a=({state:m})=>{const w=Xu(t,location),E=r.value,T=e.value;let M=0;if(m){if(r.value=w,e.value=m,o&&o===E){o=null;return}M=T?m.position-T.position:0}else s(w);n.forEach(j=>{j(r.value,E,{delta:M,type:Qs.pop,direction:M?M>0?Fs.forward:Fs.back:Fs.unknown})})};function c(){o=r.value}function l(m){n.push(m);const w=()=>{const E=n.indexOf(m);E>-1&&n.splice(E,1)};return i.push(w),w}function u(){const{history:m}=window;m.state&&m.replaceState(ke({},m.state,{scroll:Ei()}),"")}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function Wc(t,e,r,s=!1,n=!1){return{back:t,current:e,forward:r,replaced:s,position:window.history.length,scroll:n?Ei():null}}function xg(t){const{history:e,location:r}=window,s={value:Xu(t,r)},n={value:e.state};n.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const f=t.indexOf("#"),m=f>-1?(r.host&&document.querySelector("base")?t:t.slice(f))+c:wg()+t+c;try{e[u?"replaceState":"pushState"](l,"",m),n.value=l}catch(w){console.error(w),r[u?"replace":"assign"](m)}}function o(c,l){const u=ke({},e.state,Wc(n.value.back,c,n.value.forward,!0),l,{position:n.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=ke({},n.value,e.state,{forward:c,scroll:Ei()});i(u.current,u,!0);const f=ke({},Wc(s.value,c,null),{position:u.position+1},l);i(c,f,!1),s.value=c}return{location:s,state:n,push:a,replace:o}}function Eg(t){t=dg(t);const e=xg(t),r=vg(t,e.state,e.location,e.replace);function s(i,o=!0){o||r.pauseListeners(),history.go(i)}const n=ke({location:"",base:t,go:s,createHref:pg.bind(null,t)},e,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Sg(t){return typeof t=="string"||t&&typeof t=="object"}function Qu(t){return typeof t=="string"||typeof t=="symbol"}const pr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Zu=Symbol("");var Gc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Gc||(Gc={}));function ds(t,e){return ke(new Error,{type:t,[Zu]:!0},e)}function rr(t,e){return t instanceof Error&&Zu in t&&(e==null||!!(t.type&e))}const zc="[^/]+?",Og={sensitive:!1,strict:!1,start:!0,end:!0},Ag=/[.+*?^${}()[\]/\\]/g;function Pg(t,e){const r=ke({},Og,e),s=[];let n=r.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];r.strict&&!l.length&&(n+="/");for(let f=0;f<l.length;f++){const m=l[f];let w=40+(r.sensitive?.25:0);if(m.type===0)f||(n+="/"),n+=m.value.replace(Ag,"\\$&"),w+=40;else if(m.type===1){const{value:E,repeatable:T,optional:M,regexp:j}=m;i.push({name:E,repeatable:T,optional:M});const $=j||zc;if($!==zc){w+=10;try{new RegExp(`(${$})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${E}" (${$}): `+B.message)}}let z=T?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;f||(z=M&&l.length<2?`(?:/${z})`:"/"+z),M&&(z+="?"),n+=z,w+=20,M&&(w+=-8),T&&(w+=-20),$===".*"&&(w+=-50)}u.push(w)}s.push(u)}if(r.strict&&r.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}r.strict||(n+="/?"),r.end?n+="$":r.strict&&(n+="(?:/|$)");const o=new RegExp(n,r.sensitive?"":"i");function a(l){const u=l.match(o),f={};if(!u)return null;for(let m=1;m<u.length;m++){const w=u[m]||"",E=i[m-1];f[E.name]=w&&E.repeatable?w.split("/"):w}return f}function c(l){let u="",f=!1;for(const m of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const w of m)if(w.type===0)u+=w.value;else if(w.type===1){const{value:E,repeatable:T,optional:M}=w,j=E in l?l[E]:"";if(Vt(j)&&!T)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const $=Vt(j)?j.join("/"):j;if(!$)if(M)m.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);u+=$}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function Cg(t,e){let r=0;for(;r<t.length&&r<e.length;){const s=e[r]-t[r];if(s)return s;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ig(t,e){let r=0;const s=t.score,n=e.score;for(;r<s.length&&r<n.length;){const i=Cg(s[r],n[r]);if(i)return i;r++}if(Math.abs(n.length-s.length)===1){if(Kc(s))return 1;if(Kc(n))return-1}return n.length-s.length}function Kc(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Tg={type:0,value:""},kg=/[a-zA-Z0-9_]/;function Rg(t){if(!t)return[[]];if(t==="/")return[[Tg]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${r})/"${l}": ${w}`)}let r=0,s=r;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,c,l="",u="";function f(){l&&(r===0?i.push({type:0,value:l}):r===1||r===2||r===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function m(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),r=1):m();break;case 4:m(),r=s;break;case 1:c==="("?r=2:kg.test(c)?m():(f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:r=3:u+=c;break;case 3:f(),r=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),n}function Ng(t,e,r){const s=Pg(Rg(t.path),r),n=ke(s,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Mg(t,e){const r=[],s=new Map;e=Xc({strict:!1,end:!0,sensitive:!1},e);function n(u){return s.get(u)}function i(u,f,m){const w=!m,E=Lg(u);E.aliasOf=m&&m.record;const T=Xc(e,u),M=[E];if("alias"in u){const z=typeof u.alias=="string"?[u.alias]:u.alias;for(const B of z)M.push(ke({},E,{components:m?m.record.components:E.components,path:B,aliasOf:m?m.record:E}))}let j,$;for(const z of M){const{path:B}=z;if(f&&B[0]!=="/"){const ie=f.record.path,Q=ie[ie.length-1]==="/"?"":"/";z.path=f.record.path+(B&&Q+B)}if(j=Ng(z,f,T),m?m.alias.push(j):($=$||j,$!==j&&$.alias.push(j),w&&u.name&&!Yc(j)&&o(u.name)),E.children){const ie=E.children;for(let Q=0;Q<ie.length;Q++)i(ie[Q],j,m&&m.children[Q])}m=m||j,(j.record.components&&Object.keys(j.record.components).length||j.record.name||j.record.redirect)&&c(j)}return $?()=>{o($)}:js}function o(u){if(Qu(u)){const f=s.get(u);f&&(s.delete(u),r.splice(r.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=r.indexOf(u);f>-1&&(r.splice(f,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return r}function c(u){let f=0;for(;f<r.length&&Ig(u,r[f])>=0&&(u.record.path!==r[f].record.path||!ef(u,r[f]));)f++;r.splice(f,0,u),u.record.name&&!Yc(u)&&s.set(u.record.name,u)}function l(u,f){let m,w={},E,T;if("name"in u&&u.name){if(m=s.get(u.name),!m)throw ds(1,{location:u});T=m.record.name,w=ke(Jc(f.params,m.keys.filter($=>!$.optional).map($=>$.name)),u.params&&Jc(u.params,m.keys.map($=>$.name))),E=m.stringify(w)}else if("path"in u)E=u.path,m=r.find($=>$.re.test(E)),m&&(w=m.parse(E),T=m.record.name);else{if(m=f.name?s.get(f.name):r.find($=>$.re.test(f.path)),!m)throw ds(1,{location:u,currentLocation:f});T=m.record.name,w=ke({},f.params,u.params),E=m.stringify(w)}const M=[];let j=m;for(;j;)M.unshift(j.record),j=j.parent;return{name:T,path:E,params:w,matched:M,meta:Fg(M)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:n}}function Jc(t,e){const r={};for(const s of e)s in t&&(r[s]=t[s]);return r}function Lg(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:jg(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function jg(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const s in t.components)e[s]=typeof r=="object"?r[s]:r;return e}function Yc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Fg(t){return t.reduce((e,r)=>ke(e,r.meta),{})}function Xc(t,e){const r={};for(const s in t)r[s]=s in e?e[s]:t[s];return r}function ef(t,e){return e.children.some(r=>r===t||ef(t,r))}const tf=/#/g,$g=/&/g,Ug=/\//g,Dg=/=/g,Bg=/\?/g,rf=/\+/g,qg=/%5B/g,Hg=/%5D/g,sf=/%5E/g,Vg=/%60/g,nf=/%7B/g,Wg=/%7C/g,of=/%7D/g,Gg=/%20/g;function ga(t){return encodeURI(""+t).replace(Wg,"|").replace(qg,"[").replace(Hg,"]")}function zg(t){return ga(t).replace(nf,"{").replace(of,"}").replace(sf,"^")}function Po(t){return ga(t).replace(rf,"%2B").replace(Gg,"+").replace(tf,"%23").replace($g,"%26").replace(Vg,"`").replace(nf,"{").replace(of,"}").replace(sf,"^")}function Kg(t){return Po(t).replace(Dg,"%3D")}function Jg(t){return ga(t).replace(tf,"%23").replace(Bg,"%3F")}function Yg(t){return t==null?"":Jg(t).replace(Ug,"%2F")}function Xn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Xg(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const i=s[n].replace(rf," "),o=i.indexOf("="),a=Xn(o<0?i:i.slice(0,o)),c=o<0?null:Xn(i.slice(o+1));if(a in e){let l=e[a];Vt(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Qc(t){let e="";for(let r in t){const s=t[r];if(r=Kg(r),s==null){s!==void 0&&(e+=(e.length?"&":"")+r);continue}(Vt(s)?s.map(i=>i&&Po(i)):[s&&Po(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function Qg(t){const e={};for(const r in t){const s=t[r];s!==void 0&&(e[r]=Vt(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return e}const Zg=Symbol(""),Zc=Symbol(""),Si=Symbol(""),_a=Symbol(""),Co=Symbol("");function Ps(){let t=[];function e(s){return t.push(s),()=>{const n=t.indexOf(s);n>-1&&t.splice(n,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function yr(t,e,r,s,n){const i=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((o,a)=>{const c=f=>{f===!1?a(ds(4,{from:r,to:e})):f instanceof Error?a(f):Sg(f)?a(ds(2,{from:e,to:f})):(i&&s.enterCallbacks[n]===i&&typeof f=="function"&&i.push(f),o())},l=t.call(s&&s.instances[n],e,r,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(f=>a(f))})}function Ji(t,e,r,s){const n=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(e_(a)){const l=(a.__vccOpts||a)[e];l&&n.push(yr(l,r,s,i,o))}else{let c=a();n.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=og(l)?l.default:l;i.components[o]=u;const m=(u.__vccOpts||u)[e];return m&&yr(m,r,s,i,o)()}))}}return n}function e_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function el(t){const e=Lt(Si),r=Lt(_a),s=Ue(()=>e.resolve(Ve(t.to))),n=Ue(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],f=r.matched;if(!u||!f.length)return-1;const m=f.findIndex(hs.bind(null,u));if(m>-1)return m;const w=tl(c[l-2]);return l>1&&tl(u)===w&&f[f.length-1].path!==w?f.findIndex(hs.bind(null,c[l-2])):m}),i=Ue(()=>n.value>-1&&n_(r.params,s.value.params)),o=Ue(()=>n.value>-1&&n.value===r.matched.length-1&&Yu(r.params,s.value.params));function a(c={}){return s_(c)?e[Ve(t.replace)?"replace":"push"](Ve(t.to)).catch(js):Promise.resolve()}return{route:s,href:Ue(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const t_=fr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:el,setup(t,{slots:e}){const r=ui(el(t)),{options:s}=Lt(Si),n=Ue(()=>({[rl(t.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[rl(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&e.default(r);return t.custom?i:wi("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},i)}}}),r_=t_;function s_(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function n_(t,e){for(const r in e){const s=e[r],n=t[r];if(typeof s=="string"){if(s!==n)return!1}else if(!Vt(n)||n.length!==s.length||s.some((i,o)=>i!==n[o]))return!1}return!0}function tl(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const rl=(t,e,r)=>t??e??r,i_=fr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const s=Lt(Co),n=Ue(()=>t.route||s.value),i=Lt(Zc,0),o=Ue(()=>{let l=Ve(i);const{matched:u}=n.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=Ue(()=>n.value.matched[o.value]);Rn(Zc,Ue(()=>o.value+1)),Rn(Zg,a),Rn(Co,n);const c=at();return yt(()=>[c.value,a.value,t.name],([l,u,f],[m,w,E])=>{u&&(u.instances[f]=l,w&&w!==u&&l&&l===m&&(u.leaveGuards.size||(u.leaveGuards=w.leaveGuards),u.updateGuards.size||(u.updateGuards=w.updateGuards))),l&&u&&(!w||!hs(u,w)||!m)&&(u.enterCallbacks[f]||[]).forEach(T=>T(l))},{flush:"post"}),()=>{const l=n.value,u=t.name,f=a.value,m=f&&f.components[u];if(!m)return sl(r.default,{Component:m,route:l});const w=f.props[u],E=w?w===!0?l.params:typeof w=="function"?w(l):w:null,M=wi(m,ke({},E,e,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return sl(r.default,{Component:M,route:l})||M}}});function sl(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const o_=i_;function a_(t){const e=Mg(t.routes,t),r=t.parseQuery||Xg,s=t.stringifyQuery||Qc,n=t.history,i=Ps(),o=Ps(),a=Ps(),c=ra(pr);let l=pr;Zr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=zi.bind(null,S=>""+S),f=zi.bind(null,Yg),m=zi.bind(null,Xn);function w(S,F){let k,G;return Qu(S)?(k=e.getRecordMatcher(S),G=F):G=S,e.addRoute(G,k)}function E(S){const F=e.getRecordMatcher(S);F&&e.removeRoute(F)}function T(){return e.getRoutes().map(S=>S.record)}function M(S){return!!e.getRecordMatcher(S)}function j(S,F){if(F=ke({},F||c.value),typeof S=="string"){const b=Ki(r,S,F.path),C=e.resolve({path:b.path},F),L=n.createHref(b.fullPath);return ke(b,C,{params:m(C.params),hash:Xn(b.hash),redirectedFrom:void 0,href:L})}let k;if("path"in S)k=ke({},S,{path:Ki(r,S.path,F.path).path});else{const b=ke({},S.params);for(const C in b)b[C]==null&&delete b[C];k=ke({},S,{params:f(b)}),F.params=f(F.params)}const G=e.resolve(k,F),le=S.hash||"";G.params=u(m(G.params));const me=lg(s,ke({},S,{hash:zg(le),path:G.path})),g=n.createHref(me);return ke({fullPath:me,hash:le,query:s===Qc?Qg(S.query):S.query||{}},G,{redirectedFrom:void 0,href:g})}function $(S){return typeof S=="string"?Ki(r,S,c.value.path):ke({},S)}function z(S,F){if(l!==S)return ds(8,{from:F,to:S})}function B(S){return we(S)}function ie(S){return B(ke($(S),{replace:!0}))}function Q(S){const F=S.matched[S.matched.length-1];if(F&&F.redirect){const{redirect:k}=F;let G=typeof k=="function"?k(S):k;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=$(G):{path:G},G.params={}),ke({query:S.query,hash:S.hash,params:"path"in G?{}:S.params},G)}}function we(S,F){const k=l=j(S),G=c.value,le=S.state,me=S.force,g=S.replace===!0,b=Q(k);if(b)return we(ke($(b),{state:typeof b=="object"?ke({},le,b.state):le,force:me,replace:g}),F||k);const C=k;C.redirectedFrom=F;let L;return!me&&ug(s,G,k)&&(L=ds(16,{to:C,from:G}),v(G,G,!0,!1)),(L?Promise.resolve(L):be(C,G)).catch(N=>rr(N)?rr(N,2)?N:P(N):ve(N,C,G)).then(N=>{if(N){if(rr(N,2))return we(ke({replace:g},$(N.to),{state:typeof N.to=="object"?ke({},le,N.to.state):le,force:me}),F||C)}else N=Re(C,G,!0,g,le);return Ce(C,G,N),N})}function J(S,F){const k=z(S,F);return k?Promise.reject(k):Promise.resolve()}function he(S){const F=pe.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(S):S()}function be(S,F){let k;const[G,le,me]=c_(S,F);k=Ji(G.reverse(),"beforeRouteLeave",S,F);for(const b of G)b.leaveGuards.forEach(C=>{k.push(yr(C,S,F))});const g=J.bind(null,S,F);return k.push(g),fe(k).then(()=>{k=[];for(const b of i.list())k.push(yr(b,S,F));return k.push(g),fe(k)}).then(()=>{k=Ji(le,"beforeRouteUpdate",S,F);for(const b of le)b.updateGuards.forEach(C=>{k.push(yr(C,S,F))});return k.push(g),fe(k)}).then(()=>{k=[];for(const b of me)if(b.beforeEnter)if(Vt(b.beforeEnter))for(const C of b.beforeEnter)k.push(yr(C,S,F));else k.push(yr(b.beforeEnter,S,F));return k.push(g),fe(k)}).then(()=>(S.matched.forEach(b=>b.enterCallbacks={}),k=Ji(me,"beforeRouteEnter",S,F),k.push(g),fe(k))).then(()=>{k=[];for(const b of o.list())k.push(yr(b,S,F));return k.push(g),fe(k)}).catch(b=>rr(b,8)?b:Promise.reject(b))}function Ce(S,F,k){a.list().forEach(G=>he(()=>G(S,F,k)))}function Re(S,F,k,G,le){const me=z(S,F);if(me)return me;const g=F===pr,b=Zr?history.state:{};k&&(G||g?n.replace(S.fullPath,ke({scroll:g&&b&&b.scroll},le)):n.push(S.fullPath,le)),c.value=S,v(S,F,k,g),P()}let De;function Je(){De||(De=n.listen((S,F,k)=>{if(!ge.listening)return;const G=j(S),le=Q(G);if(le){we(ke(le,{replace:!0}),G).catch(js);return}l=G;const me=c.value;Zr&&bg(Vc(me.fullPath,k.delta),Ei()),be(G,me).catch(g=>rr(g,12)?g:rr(g,2)?(we(g.to,G).then(b=>{rr(b,20)&&!k.delta&&k.type===Qs.pop&&n.go(-1,!1)}).catch(js),Promise.reject()):(k.delta&&n.go(-k.delta,!1),ve(g,G,me))).then(g=>{g=g||Re(G,me,!1),g&&(k.delta&&!rr(g,8)?n.go(-k.delta,!1):k.type===Qs.pop&&rr(g,20)&&n.go(-1,!1)),Ce(G,me,g)}).catch(js)}))}let mt=Ps(),Me=Ps(),Ee;function ve(S,F,k){P(S);const G=Me.list();return G.length?G.forEach(le=>le(S,F,k)):console.error(S),Promise.reject(S)}function tt(){return Ee&&c.value!==pr?Promise.resolve():new Promise((S,F)=>{mt.add([S,F])})}function P(S){return Ee||(Ee=!S,Je(),mt.list().forEach(([F,k])=>S?k(S):F()),mt.reset()),S}function v(S,F,k,G){const{scrollBehavior:le}=t;if(!Zr||!le)return Promise.resolve();const me=!k&&yg(Vc(S.fullPath,0))||(G||!k)&&history.state&&history.state.scroll||null;return bs().then(()=>le(S,F,me)).then(g=>g&&_g(g)).catch(g=>ve(g,S,F))}const ee=S=>n.go(S);let ce;const pe=new Set,ge={currentRoute:c,listening:!0,addRoute:w,removeRoute:E,hasRoute:M,getRoutes:T,resolve:j,options:t,push:B,replace:ie,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Me.add,isReady:tt,install(S){const F=this;S.component("RouterLink",r_),S.component("RouterView",o_),S.config.globalProperties.$router=F,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Ve(c)}),Zr&&!ce&&c.value===pr&&(ce=!0,B(n.location).catch(le=>{}));const k={};for(const le in pr)Object.defineProperty(k,le,{get:()=>c.value[le],enumerable:!0});S.provide(Si,F),S.provide(_a,Zl(k)),S.provide(Co,c);const G=S.unmount;pe.add(S),S.unmount=function(){pe.delete(S),pe.size<1&&(l=pr,De&&De(),De=null,c.value=pr,ce=!1,Ee=!1),G()}}};function fe(S){return S.reduce((F,k)=>F.then(()=>he(k)),Promise.resolve())}return ge}function c_(t,e){const r=[],s=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>hs(l,a))?s.push(a):r.push(a));const c=t.matched[o];c&&(e.matched.find(l=>hs(l,c))||n.push(c))}return[r,s,n]}function py(){return Lt(Si)}function l_(){return Lt(_a)}function ba(t){return Dl()?(ah(t),!0):!1}function Oi(t){return typeof t=="function"?t():Ve(t)}const u_=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const f_=Object.prototype.toString,h_=t=>f_.call(t)==="[object Object]",af=()=>{};function d_(t,e){function r(...s){return new Promise((n,i)=>{Promise.resolve(t(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})).then(n).catch(i)})}return r}const cf=t=>t();function m_(t=cf){const e=at(!0);function r(){e.value=!1}function s(){e.value=!0}const n=(...i)=>{e.value&&t(...i)};return{isActive:fi(e),pause:r,resume:s,eventFilter:n}}function p_(t){return t||an()}function g_(...t){if(t.length!==1)return Lh(...t);const e=t[0];return typeof e=="function"?fi(Rh(()=>({get:e,set:af}))):at(e)}function __(t,e,r={}){const{eventFilter:s=cf,...n}=r;return yt(t,d_(s,e),n)}function b_(t,e,r={}){const{eventFilter:s,...n}=r,{eventFilter:i,pause:o,resume:a,isActive:c}=m_(s);return{stop:__(t,e,{...n,eventFilter:i}),pause:o,resume:a,isActive:c}}function ya(t,e=!0,r){p_()?nn(t,r):e?t():bs(t)}function wr(t){var e;const r=Oi(t);return(e=r==null?void 0:r.$el)!=null?e:r}const Hr=u_?window:void 0;function nl(...t){let e,r,s,n;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,s,n]=t,e=Hr):[e,r,s,n]=t,!e)return af;Array.isArray(r)||(r=[r]),Array.isArray(s)||(s=[s]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,f,m,w)=>(u.addEventListener(f,m,w),()=>u.removeEventListener(f,m,w)),c=yt(()=>[wr(e),Oi(n)],([u,f])=>{if(o(),!u)return;const m=h_(f)?{...f}:f;i.push(...r.flatMap(w=>s.map(E=>a(u,w,E,m))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return ba(l),l}function y_(){const t=at(!1);return an()&&nn(()=>{t.value=!0}),t}function lf(t){const e=y_();return Ue(()=>(e.value,!!t()))}function w_(t,e={}){const{window:r=Hr}=e,s=lf(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let n;const i=at(!1),o=l=>{i.value=l.matches},a=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",o):n.removeListener(o))},c=Zh(()=>{s.value&&(a(),n=r.matchMedia(Oi(t)),"addEventListener"in n?n.addEventListener("change",o):n.addListener(o),i.value=n.matches)});return ba(()=>{c(),a(),n=void 0}),i}const Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},On="__vueuse_ssr_handlers__",v_=x_();function x_(){return On in Sn||(Sn[On]=Sn[On]||{}),Sn[On]}function uf(t,e){return v_[t]||e}function E_(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const S_={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},il="vueuse-storage";function Io(t,e,r,s={}){var n;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:f=Hr,eventFilter:m,onError:w=he=>{console.error(he)},initOnMounted:E}=s,T=(u?ra:at)(typeof e=="function"?e():e);if(!r)try{r=uf("getDefaultStorage",()=>{var he;return(he=Hr)==null?void 0:he.localStorage})()}catch(he){w(he)}if(!r)return T;const M=Oi(e),j=E_(M),$=(n=s.serializer)!=null?n:S_[j],{pause:z,resume:B}=b_(T,()=>ie(T.value),{flush:i,deep:o,eventFilter:m});return f&&a&&ya(()=>{nl(f,"storage",J),nl(f,il,we),E&&J()}),E||J(),T;function ie(he){try{if(he==null)r.removeItem(t);else{const be=$.write(he),Ce=r.getItem(t);Ce!==be&&(r.setItem(t,be),f&&f.dispatchEvent(new CustomEvent(il,{detail:{key:t,oldValue:Ce,newValue:be,storageArea:r}})))}}catch(be){w(be)}}function Q(he){const be=he?he.newValue:r.getItem(t);if(be==null)return c&&M!=null&&r.setItem(t,$.write(M)),M;if(!he&&l){const Ce=$.read(be);return typeof l=="function"?l(Ce,M):j==="object"&&!Array.isArray(Ce)?{...M,...Ce}:Ce}else return typeof be!="string"?be:$.read(be)}function we(he){J(he.detail)}function J(he){if(!(he&&he.storageArea!==r)){if(he&&he.key==null){T.value=M;return}if(!(he&&he.key!==t)){z();try{(he==null?void 0:he.newValue)!==$.write(T.value)&&(T.value=Q(he))}catch(be){w(be)}finally{he?bs(B):B()}}}}}function O_(t){return w_("(prefers-color-scheme: dark)",t)}function A_(t={}){const{selector:e="html",attribute:r="class",initialValue:s="auto",window:n=Hr,storage:i,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:c,emitAuto:l,disableTransition:u=!0}=t,f={auto:"",light:"light",dark:"dark",...t.modes||{}},m=O_({window:n}),w=Ue(()=>m.value?"dark":"light"),E=c||(o==null?g_(s):Io(o,s,i,{window:n,listenToStorageChanges:a})),T=Ue(()=>E.value==="auto"?w.value:E.value),M=uf("updateHTMLAttrs",(B,ie,Q)=>{const we=typeof B=="string"?n==null?void 0:n.document.querySelector(B):wr(B);if(!we)return;let J;if(u&&(J=n.document.createElement("style"),J.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),n.document.head.appendChild(J)),ie==="class"){const he=Q.split(/\s/g);Object.values(f).flatMap(be=>(be||"").split(/\s/g)).filter(Boolean).forEach(be=>{he.includes(be)?we.classList.add(be):we.classList.remove(be)})}else we.setAttribute(ie,Q);u&&(n.getComputedStyle(J).opacity,document.head.removeChild(J))});function j(B){var ie;M(e,r,(ie=f[B])!=null?ie:B)}function $(B){t.onChanged?t.onChanged(B,j):j(B)}yt(T,$,{flush:"post",immediate:!0}),ya(()=>$(T.value));const z=Ue({get(){return l?E.value:T.value},set(B){E.value=B}});try{return Object.assign(z,{store:E,system:w,state:T})}catch{return z}}function P_(t,e,r={}){const{window:s=Hr,...n}=r;let i;const o=lf(()=>s&&"ResizeObserver"in s),a=()=>{i&&(i.disconnect(),i=void 0)},c=Ue(()=>Array.isArray(t)?t.map(f=>wr(f)):[wr(t)]),l=yt(c,f=>{if(a(),o.value&&s){i=new ResizeObserver(e);for(const m of f)m&&i.observe(m,n)}},{immediate:!0,flush:"post",deep:!0}),u=()=>{a(),l()};return ba(u),{isSupported:o,stop:u}}function gy(t,e={width:0,height:0},r={}){const{window:s=Hr,box:n="content-box"}=r,i=Ue(()=>{var f,m;return(m=(f=wr(t))==null?void 0:f.namespaceURI)==null?void 0:m.includes("svg")}),o=at(e.width),a=at(e.height),{stop:c}=P_(t,([f])=>{const m=n==="border-box"?f.borderBoxSize:n==="content-box"?f.contentBoxSize:f.devicePixelContentBoxSize;if(s&&i.value){const w=wr(t);if(w){const E=s.getComputedStyle(w);o.value=Number.parseFloat(E.width),a.value=Number.parseFloat(E.height)}}else if(m){const w=Array.isArray(m)?m:[m];o.value=w.reduce((E,{inlineSize:T})=>E+T,0),a.value=w.reduce((E,{blockSize:T})=>E+T,0)}else o.value=f.contentRect.width,a.value=f.contentRect.height},r);ya(()=>{const f=wr(t);f&&(o.value="offsetWidth"in f?f.offsetWidth:e.width,a.value="offsetHeight"in f?f.offsetHeight:e.height)});const l=yt(()=>wr(t),f=>{o.value=f?e.width:0,a.value=f?e.height:0});function u(){c(),l()}return{width:o,height:a,stop:u}}const To="kiel_live",C_={liteMode:Io(`${To}.lite`,!1),lastLocation:Io(`${To}.last_location`,{center:[10.1283,54.3166],zoom:14,pitch:0,bearing:0})};function ff(){return C_}const I_={class:"flex w-full justify-center border-t-1 border-gray-200 dark:border-gray-800 dark:bg-dark-400 dark:text-gray-300 shadow-top"},T_={class:"flex w-full justify-around max-w-96"},k_={class:"mt-auto text-xs"},R_={class:"mt-auto text-xs"},N_={class:"mt-auto text-xs"},M_={class:"mt-auto text-xs"},L_=fr({__name:"AppBarBottom",setup(t){const{t:e}=ys(),{liteMode:r}=ff(),s=l_(),n=Ue(()=>s.name==="favorites"?"favorites":s.meta.settings?"settings":"map");return(i,o)=>{const a=ig,c=pi("router-link"),l=eg,u=zp,f=qp;return wt(),lr("nav",I_,[ze("div",T_,[Ve(r)?(wt(),Js(c,{key:0,to:{name:"search"},class:Yt(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":n.value==="map"}]),"aria-label":Ve(e)("search")},{default:ir(()=>[je(a,{class:"w-6 h-6 mb-1"}),ze("span",k_,sr(Ve(e)("search")),1)]),_:1},8,["class","aria-label"])):(wt(),Js(c,{key:1,to:{name:"home"},class:Yt(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":n.value==="map"}]),"aria-label":Ve(e)("map")},{default:ir(()=>[je(l,{class:"w-6 h-6 mb-1"}),ze("span",R_,sr(Ve(e)("map")),1)]),_:1},8,["class","aria-label"])),je(c,{to:{name:"favorites"},class:Yt(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":n.value==="favorites"}]),"aria-label":Ve(e)("favorites")},{default:ir(()=>[je(u,{class:"w-6 h-6 mb-1"}),ze("span",N_,sr(Ve(e)("favorites")),1)]),_:1},8,["class","aria-label"]),je(c,{to:{name:"settings-about"},class:Yt(["flex flex-col items-center w-1/3 p-2",{"text-red-700 dark:text-red-500":n.value==="settings"}]),"aria-label":Ve(e)("settings")},{default:ir(()=>[je(f,{class:"w-6 h-6 mb-1"}),ze("span",M_,sr(Ve(e)("settings")),1)]),_:1},8,["class","aria-label"])])])}}});var wa={};(function t(e,r,s,n){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),v=P.getContext("2d");v.fillRect(0,0,1,1);var ee=P.transferToImageBitmap();try{v.createPattern(ee,"no-repeat")}catch{return!1}return!0}();function c(){}function l(P){var v=r.exports.Promise,ee=v!==void 0?v:e.Promise;return typeof ee=="function"?new ee(P):(P(c,c),null)}var u=function(P,v){return{transform:function(ee){if(P)return ee;if(v.has(ee))return v.get(ee);var ce=new OffscreenCanvas(ee.width,ee.height),pe=ce.getContext("2d");return pe.drawImage(ee,0,0),v.set(ee,ce),ce},clear:function(){v.clear()}}}(a,new Map),f=function(){var P=Math.floor(16.666666666666668),v,ee,ce={},pe=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(v=function(ge){var fe=Math.random();return ce[fe]=requestAnimationFrame(function S(F){pe===F||pe+P-1<F?(pe=F,delete ce[fe],ge()):ce[fe]=requestAnimationFrame(S)}),fe},ee=function(ge){ce[ge]&&cancelAnimationFrame(ce[ge])}):(v=function(ge){return setTimeout(ge,P)},ee=function(ge){return clearTimeout(ge)}),{frame:v,cancel:ee}}(),m=function(){var P,v,ee={};function ce(pe){function ge(fe,S){pe.postMessage({options:fe||{},callback:S})}pe.init=function(S){var F=S.transferControlToOffscreen();pe.postMessage({canvas:F},[F])},pe.fire=function(S,F,k){if(v)return ge(S,null),v;var G=Math.random().toString(36).slice(2);return v=l(function(le){function me(g){g.data.callback===G&&(delete ee[G],pe.removeEventListener("message",me),v=null,u.clear(),k(),le())}pe.addEventListener("message",me),ge(S,G),ee[G]=me.bind(null,{data:{callback:G}})}),v},pe.reset=function(){pe.postMessage({reset:!0});for(var S in ee)ee[S](),delete ee[S]}}return function(){if(P)return P;if(!s&&i){var pe=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([pe])))}catch(ge){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",ge),null}ce(P)}return P}}(),w={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(P,v){return v?v(P):P}function T(P){return P!=null}function M(P,v,ee){return E(P&&T(P[v])?P[v]:w[v],ee)}function j(P){return P<0?0:Math.floor(P)}function $(P,v){return Math.floor(Math.random()*(v-P))+P}function z(P){return parseInt(P,16)}function B(P){return P.map(ie)}function ie(P){var v=String(P).replace(/[^0-9a-f]/gi,"");return v.length<6&&(v=v[0]+v[0]+v[1]+v[1]+v[2]+v[2]),{r:z(v.substring(0,2)),g:z(v.substring(2,4)),b:z(v.substring(4,6))}}function Q(P){var v=M(P,"origin",Object);return v.x=M(v,"x",Number),v.y=M(v,"y",Number),v}function we(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function J(P){var v=P.getBoundingClientRect();P.width=v.width,P.height=v.height}function he(P){var v=document.createElement("canvas");return v.style.position="fixed",v.style.top="0px",v.style.left="0px",v.style.pointerEvents="none",v.style.zIndex=P,v}function be(P,v,ee,ce,pe,ge,fe,S,F){P.save(),P.translate(v,ee),P.rotate(ge),P.scale(ce,pe),P.arc(0,0,1,fe,S,F),P.restore()}function Ce(P){var v=P.angle*(Math.PI/180),ee=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-v+(.5*ee-Math.random()*ee),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function Re(P,v){v.x+=Math.cos(v.angle2D)*v.velocity+v.drift,v.y+=Math.sin(v.angle2D)*v.velocity+v.gravity,v.velocity*=v.decay,v.flat?(v.wobble=0,v.wobbleX=v.x+10*v.scalar,v.wobbleY=v.y+10*v.scalar,v.tiltSin=0,v.tiltCos=0,v.random=1):(v.wobble+=v.wobbleSpeed,v.wobbleX=v.x+10*v.scalar*Math.cos(v.wobble),v.wobbleY=v.y+10*v.scalar*Math.sin(v.wobble),v.tiltAngle+=.1,v.tiltSin=Math.sin(v.tiltAngle),v.tiltCos=Math.cos(v.tiltAngle),v.random=Math.random()+2);var ee=v.tick++/v.totalTicks,ce=v.x+v.random*v.tiltCos,pe=v.y+v.random*v.tiltSin,ge=v.wobbleX+v.random*v.tiltCos,fe=v.wobbleY+v.random*v.tiltSin;if(P.fillStyle="rgba("+v.color.r+", "+v.color.g+", "+v.color.b+", "+(1-ee)+")",P.beginPath(),o&&v.shape.type==="path"&&typeof v.shape.path=="string"&&Array.isArray(v.shape.matrix))P.fill(Ee(v.shape.path,v.shape.matrix,v.x,v.y,Math.abs(ge-ce)*.1,Math.abs(fe-pe)*.1,Math.PI/10*v.wobble));else if(v.shape.type==="bitmap"){var S=Math.PI/10*v.wobble,F=Math.abs(ge-ce)*.1,k=Math.abs(fe-pe)*.1,G=v.shape.bitmap.width*v.scalar,le=v.shape.bitmap.height*v.scalar,me=new DOMMatrix([Math.cos(S)*F,Math.sin(S)*F,-Math.sin(S)*k,Math.cos(S)*k,v.x,v.y]);me.multiplySelf(new DOMMatrix(v.shape.matrix));var g=P.createPattern(u.transform(v.shape.bitmap),"no-repeat");g.setTransform(me),P.globalAlpha=1-ee,P.fillStyle=g,P.fillRect(v.x-G/2,v.y-le/2,G,le),P.globalAlpha=1}else if(v.shape==="circle")P.ellipse?P.ellipse(v.x,v.y,Math.abs(ge-ce)*v.ovalScalar,Math.abs(fe-pe)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI):be(P,v.x,v.y,Math.abs(ge-ce)*v.ovalScalar,Math.abs(fe-pe)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI);else if(v.shape==="star")for(var b=Math.PI/2*3,C=4*v.scalar,L=8*v.scalar,N=v.x,W=v.y,Y=5,H=Math.PI/Y;Y--;)N=v.x+Math.cos(b)*L,W=v.y+Math.sin(b)*L,P.lineTo(N,W),b+=H,N=v.x+Math.cos(b)*C,W=v.y+Math.sin(b)*C,P.lineTo(N,W),b+=H;else P.moveTo(Math.floor(v.x),Math.floor(v.y)),P.lineTo(Math.floor(v.wobbleX),Math.floor(pe)),P.lineTo(Math.floor(ge),Math.floor(fe)),P.lineTo(Math.floor(ce),Math.floor(v.wobbleY));return P.closePath(),P.fill(),v.tick<v.totalTicks}function De(P,v,ee,ce,pe){var ge=v.slice(),fe=P.getContext("2d"),S,F,k=l(function(G){function le(){S=F=null,fe.clearRect(0,0,ce.width,ce.height),u.clear(),pe(),G()}function me(){s&&!(ce.width===n.width&&ce.height===n.height)&&(ce.width=P.width=n.width,ce.height=P.height=n.height),!ce.width&&!ce.height&&(ee(P),ce.width=P.width,ce.height=P.height),fe.clearRect(0,0,ce.width,ce.height),ge=ge.filter(function(g){return Re(fe,g)}),ge.length?S=f.frame(me):le()}S=f.frame(me),F=le});return{addFettis:function(G){return ge=ge.concat(G),k},canvas:P,promise:k,reset:function(){S&&f.cancel(S),F&&F()}}}function Je(P,v){var ee=!P,ce=!!M(v||{},"resize"),pe=!1,ge=M(v,"disableForReducedMotion",Boolean),fe=i&&!!M(v||{},"useWorker"),S=fe?m():null,F=ee?we:J,k=P&&S?!!P.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,le;function me(b,C,L){for(var N=M(b,"particleCount",j),W=M(b,"angle",Number),Y=M(b,"spread",Number),H=M(b,"startVelocity",Number),K=M(b,"decay",Number),q=M(b,"gravity",Number),se=M(b,"drift",Number),X=M(b,"colors",B),O=M(b,"ticks",Number),R=M(b,"shapes"),ne=M(b,"scalar"),de=!!M(b,"flat"),xe=Q(b),Ne=N,$e=[],xt=P.width*xe.x,kr=P.height*xe.y;Ne--;)$e.push(Ce({x:xt,y:kr,angle:W,spread:Y,startVelocity:H,color:X[Ne%X.length],shape:R[$(0,R.length)],ticks:O,decay:K,gravity:q,drift:se,scalar:ne,flat:de}));return le?le.addFettis($e):(le=De(P,$e,F,C,L),le.promise)}function g(b){var C=ge||M(b,"disableForReducedMotion",Boolean),L=M(b,"zIndex",Number);if(C&&G)return l(function(H){H()});ee&&le?P=le.canvas:ee&&!P&&(P=he(L),document.body.appendChild(P)),ce&&!k&&F(P);var N={width:P.width,height:P.height};S&&!k&&S.init(P),k=!0,S&&(P.__confetti_initialized=!0);function W(){if(S){var H={getBoundingClientRect:function(){if(!ee)return P.getBoundingClientRect()}};F(H),S.postMessage({resize:{width:H.width,height:H.height}});return}N.width=N.height=null}function Y(){le=null,ce&&(pe=!1,e.removeEventListener("resize",W)),ee&&P&&(document.body.removeChild(P),P=null,k=!1)}return ce&&!pe&&(pe=!0,e.addEventListener("resize",W,!1)),S?S.fire(b,N,Y):me(b,N,Y)}return g.reset=function(){S&&S.reset(),le&&le.reset()},g}var mt;function Me(){return mt||(mt=Je(null,{useWorker:!0,resize:!0})),mt}function Ee(P,v,ee,ce,pe,ge,fe){var S=new Path2D(P),F=new Path2D;F.addPath(S,new DOMMatrix(v));var k=new Path2D;return k.addPath(F,new DOMMatrix([Math.cos(fe)*pe,Math.sin(fe)*pe,-Math.sin(fe)*ge,Math.cos(fe)*ge,ee,ce])),k}function ve(P){if(!o)throw new Error("path confetti are not supported in this browser");var v,ee;typeof P=="string"?v=P:(v=P.path,ee=P.matrix);var ce=new Path2D(v),pe=document.createElement("canvas"),ge=pe.getContext("2d");if(!ee){for(var fe=1e3,S=fe,F=fe,k=0,G=0,le,me,g=0;g<fe;g+=2)for(var b=0;b<fe;b+=2)ge.isPointInPath(ce,g,b,"nonzero")&&(S=Math.min(S,g),F=Math.min(F,b),k=Math.max(k,g),G=Math.max(G,b));le=k-S,me=G-F;var C=10,L=Math.min(C/le,C/me);ee=[L,0,0,L,-Math.round(le/2+S)*L,-Math.round(me/2+F)*L]}return{type:"path",path:v,matrix:ee}}function tt(P){var v,ee=1,ce="#000000",pe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?v=P:(v=P.text,ee="scalar"in P?P.scalar:ee,pe="fontFamily"in P?P.fontFamily:pe,ce="color"in P?P.color:ce);var ge=10*ee,fe=""+ge+"px "+pe,S=new OffscreenCanvas(ge,ge),F=S.getContext("2d");F.font=fe;var k=F.measureText(v),G=Math.ceil(k.actualBoundingBoxRight+k.actualBoundingBoxLeft),le=Math.ceil(k.actualBoundingBoxAscent+k.actualBoundingBoxDescent),me=2,g=k.actualBoundingBoxLeft+me,b=k.actualBoundingBoxAscent+me;G+=me+me,le+=me+me,S=new OffscreenCanvas(G,le),F=S.getContext("2d"),F.font=fe,F.fillStyle=ce,F.fillText(v,g,b);var C=1/ee;return{type:"bitmap",bitmap:S.transferToImageBitmap(),matrix:[C,0,0,C,-G*C/2,-le*C/2]}}r.exports=function(){return Me().apply(this,arguments)},r.exports.reset=function(){Me().reset()},r.exports.create=Je,r.exports.shapeFromPath=ve,r.exports.shapeFromText=tt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),wa,!1);const j_=wa.exports;wa.exports.create;const F_=["href"],Yi="border-1 hover:border-gray-300 dark:border-gray-400 dark:hover:border-gray-500 rounded p-2 flex items-center justify-center cursor-pointer",$_=fr({__name:"Button",props:{to:{},href:{}},setup(t){return(e,r)=>{const s=pi("router-link");return e.to?(wt(),Js(s,{key:0,class:Yt(Yi),to:e.to},{default:ir(()=>[Ui(e.$slots,"default")]),_:3},8,["to"])):e.href?(wt(),lr("a",{key:1,href:e.href,target:"_blank",rel:"noopener noreferrer",class:Yt(Yi)},[Ui(e.$slots,"default")],8,F_)):(wt(),lr("button",{key:2,type:"button",class:Yt(Yi)},[Ui(e.$slots,"default")]))}}}),ol=atob("YW5kcm9pZEBqdTYwLmRl"),_y="28.01.2024 17:15:35",by="https://boomerang.ju60.de/share/z8KAHmGY/Kiel%20Live",hf="https://tiles.ju60.de",yy=`${hf}/styles/gray-matter/style.json`,wy=`${hf}/styles/bright-matter/style.json`,U_="wss://api.kiel-live.ju60.de/",D_={class:"m-2 flex flex-col rounded-md p-4 bg-white border-1 border-gray-200 shadow-xl z-20 md:w-104 dark:bg-dark-400 dark:text-gray-300 dark:border-dark-800"},B_={class:"flex flex-col text-center gap-4"},q_={class:"text-xl mb-2"},H_=["href"],V_={href:"https://www.instagram.com/kiel.live/",target:"_blank",class:"underline"},W_={class:"flex flex-row w-full justify-center mt-8"},al="kiel-live-version-v1",Xi="2.0.0",G_=fr({__name:"UpdateNotice",setup(t){const e=at(localStorage.getItem(al)),r=Ue(()=>e.value!==null&&e.value!==Xi),{t:s}=ys();nn(async()=>{const i=localStorage.getItem("version");i!==null&&(e.value=i,localStorage.removeItem("version"))}),yt(r,()=>{if(!r.value)return;const i=3*1e3,o=Date.now()+i,a=setInterval(()=>{if(o-Date.now()<=0){clearInterval(a);return}j_({particleCount:100,spread:70,origin:{y:1.1},startVelocity:90,zIndex:2e3})},250)},{immediate:!0});function n(){localStorage.setItem(al,Xi),e.value=Xi}return(i,o)=>{const a=pi("i18n-t");return r.value?(wt(),lr("div",{key:0,class:"flex fixed top-0 left-0 right-0 bottom-0 bg-gray-900 bg-opacity-80 z-1000 justify-center items-center",onClick:n},[ze("div",D_,[ze("div",B_,[ze("span",q_,sr(Ve(s)("update_title")),1),ze("span",null,sr(Ve(s)("update_msg")),1),je(a,{keypath:"feedback",tag:"span"},{email:ir(()=>[ze("a",{href:`mailto:${Ve(ol)}`,class:"underline"},sr(Ve(ol)),9,H_)]),instagram:ir(()=>[ze("a",V_,sr(Ve(s)("instagram")),1)]),_:1})]),ze("div",W_,[je($_,{onClick:n},{default:ir(()=>[Au(sr(Ve(s)("nice")),1)]),_:1})])])])):Nd("",!0)}}}),z_=t=>A_({storageKey:`${To}.theme`,...t}),K_={class:"app flex flex-col m-auto w-full h-full bg-white text-black dark:bg-dark-400 dark:text-gray-300"},J_={class:"flex flex-grow min-h-0"},Y_=fr({__name:"App",setup(t){z_();const{locale:e}=ys();return yt(e,()=>{document.documentElement.setAttribute("lang",e.value)},{immediate:!0}),(r,s)=>{const n=pi("router-view");return wt(),lr("div",K_,[ze("main",J_,[je(n)]),je(L_,{class:"mt-auto flex-shrink-0"}),je(G_)])}}}),X_=(t,e)=>{const r=t.__vccOpts||t;for(const[s,n]of e)r[s]=n;return r},Q_=X_(Y_,[["__scopeId","data-v-376ff901"]]),Z_="modulepreload",e0=function(t){return"/"+t},cl={},Gt=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link");n=Promise.all(r.map(o=>{if(o=e0(o),o in cl)return;cl[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!s)for(let f=i.length-1;f>=0;f--){const m=i[f];if(m.href===o&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Z_,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},t0=(t,e)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))})};function r0(){return navigator.language.split("-")[0]}const df=r0(),mf=Cp({legacy:!1,locale:df}),s0=async t=>{const{default:e}=await t0(Object.assign({"./locales/de.json":()=>Gt(()=>import("./de-q3yeAvTp.js"),__vite__mapDeps([])),"./locales/en.json":()=>Gt(()=>import("./en-jgVR6dY0.js"),__vite__mapDeps([]))}),`./locales/${t}.json`);return mf.global.setLocaleMessage(t,e),bs()};s0(df);let Qi=!0;const n0=[{path:"/",name:"home",component:()=>Gt(()=>import("./Home-RJsxRnve.js"),__vite__mapDeps([0,1,2]))},{path:"/map/:markerType/:markerId",name:"map-marker",component:()=>Gt(()=>import("./Home-RJsxRnve.js"),__vite__mapDeps([0,1,2])),props:!0},{path:"/search",name:"search",component:()=>Gt(()=>import("./Home-RJsxRnve.js"),__vite__mapDeps([0,1,2]))},{path:"/favorites",name:"favorites",component:()=>Gt(()=>import("./Home-RJsxRnve.js"),__vite__mapDeps([0,1,2]))},{path:"/settings/about",name:"settings-about",component:()=>Gt(()=>import("./About-zPg47Quc.js"),__vite__mapDeps([3,1,4])),meta:{settings:!0}},{path:"/settings/changelog",name:"settings-changelog",component:()=>Gt(()=>import("./Changelog-xT6IMDjR.js"),__vite__mapDeps([5,4])),meta:{settings:!0}},{path:"/settings/settings",name:"settings-settings",component:()=>Gt(()=>import("./Settings-mt8MmOaf.js"),__vite__mapDeps([6,4])),meta:{settings:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Gt(()=>import("./NotFound-jFuCbkf-.js"),__vite__mapDeps([]))}],pf=a_({history:Eg(),routes:n0}),{liteMode:i0}=ff();pf.beforeEach((t,e,r)=>{if(t.name==="home"&&(Qi||i0.value)){Qi=!1,r({name:"favorites"});return}Qi=!1,r()});const Tt=new Uint8Array(0),zr=new TextEncoder,Ct=new TextDecoder;function o0(...t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].length;const r=new Uint8Array(e);let s=0;for(let n=0;n<t.length;n++)r.set(t[n],s),s+=t[n].length;return r}function $s(...t){const e=[];for(let r=0;r<t.length;r++)e.push(zr.encode(t[r]));return e.length===0?Tt:e.length===1?e[0]:o0(...e)}function ll(t){return!t||t.length===0?"":Ct.decode(t)}const ul="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",fl=36,a0=0xcfd41b9100000,hl=33,c0=333,dl=22;function l0(t){for(let e=0;e<t.length;e++)t[e]=Math.floor(Math.random()*255)}function u0(t){var e;(e=globalThis==null?void 0:globalThis.crypto)!=null&&e.getRandomValues?globalThis.crypto.getRandomValues(t):l0(t)}class f0{constructor(){d(this,"buf");d(this,"seq");d(this,"inc");this.buf=new Uint8Array(dl),this.init()}init(){this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(Math.random()*a0),this.inc=Math.floor(Math.random()*(c0-hl)+hl)}setPre(){const e=new Uint8Array(12);u0(e);for(let r=0;r<12;r++){const s=e[r]%36;this.buf[r]=ul.charCodeAt(s)}}fillSeq(){let e=this.seq;for(let r=dl-1;r>=12;r--)this.buf[r]=ul.charCodeAt(e%fl),e=Math.floor(e/fl)}next(){return this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}const ln=new f0;var Ut;(function(t){t.Disconnect="disconnect",t.Reconnect="reconnect",t.Update="update",t.LDM="ldm",t.Error="error"})(Ut||(Ut={}));var is;(function(t){t.Reconnecting="reconnecting",t.PingTimer="pingTimer",t.StaleConnection="staleConnection",t.ClientInitiatedReconnect="client initiated reconnect"})(is||(is={}));var Z;(function(t){t.ApiError="BAD API",t.BadAuthentication="BAD_AUTHENTICATION",t.BadCreds="BAD_CREDS",t.BadHeader="BAD_HEADER",t.BadJson="BAD_JSON",t.BadPayload="BAD_PAYLOAD",t.BadSubject="BAD_SUBJECT",t.Cancelled="CANCELLED",t.ConnectionClosed="CONNECTION_CLOSED",t.ConnectionDraining="CONNECTION_DRAINING",t.ConnectionRefused="CONNECTION_REFUSED",t.ConnectionTimeout="CONNECTION_TIMEOUT",t.Disconnect="DISCONNECT",t.InvalidOption="INVALID_OPTION",t.InvalidPayload="INVALID_PAYLOAD",t.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",t.NoResponders="503",t.NotFunction="NOT_FUNC",t.RequestError="REQUEST_ERROR",t.ServerOptionNotAvailable="SERVER_OPT_NA",t.SubClosed="SUB_CLOSED",t.SubDraining="SUB_DRAINING",t.Timeout="TIMEOUT",t.Tls="TLS",t.Unknown="UNKNOWN_ERROR",t.WssRequired="WSS_REQUIRED",t.JetStreamInvalidAck="JESTREAM_INVALID_ACK",t.JetStream404NoMessages="404",t.JetStream408RequestTimeout="408",t.JetStream409MaxAckPendingExceeded="409",t.JetStream409="409",t.JetStreamNotEnabled="503",t.JetStreamIdleHeartBeat="IDLE_HEARTBEAT",t.AuthorizationViolation="AUTHORIZATION_VIOLATION",t.AuthenticationExpired="AUTHENTICATION_EXPIRED",t.ProtocolError="NATS_PROTOCOL_ERR",t.PermissionsViolation="PERMISSIONS_VIOLATION",t.AuthenticationTimeout="AUTHENTICATION_TIMEOUT"})(Z||(Z={}));function h0(t){return typeof t.code=="string"}class gf{constructor(){d(this,"messages");this.messages=new Map,this.messages.set(Z.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(Z.BadJson,"Bad JSON"),this.messages.set(Z.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(e){return d0.getMessage(e)}getMessage(e){return this.messages.get(e)||e}}const d0=new gf;class oe extends Error{constructor(r,s,n){super(r);d(this,"name");d(this,"message");d(this,"code");d(this,"permissionContext");d(this,"chainedError");d(this,"api_error");this.name="NatsError",this.message=r,this.code=s,this.chainedError=n}static errorForCode(r,s){const n=gf.getMessage(r);return new oe(n,r,s)}isAuthError(){return this.code===Z.AuthenticationExpired||this.code===Z.AuthorizationViolation}isAuthTimeout(){return this.code===Z.AuthenticationTimeout}isPermissionError(){return this.code===Z.PermissionsViolation}isProtocolError(){return this.code===Z.ProtocolError}isJetStreamError(){return this.api_error!==void 0}jsError(){return this.api_error?this.api_error:null}}var Ot;(function(t){t[t.Exact=0]="Exact",t[t.CanonicalMIME=1]="CanonicalMIME",t[t.IgnoreCase=2]="IgnoreCase"})(Ot||(Ot={}));var Qt;(function(t){t.Timer="timer",t.Count="count",t.JitterTimer="jitterTimer",t.SentinelMsg="sentinelMsg"})(Qt||(Qt={}));var Us;(function(t){t.STATS="io.nats.micro.v1.stats_response",t.INFO="io.nats.micro.v1.info_response",t.PING="io.nats.micro.v1.ping_response"})(Us||(Us={}));const Qn="Nats-Service-Error",Zn="Nats-Service-Error-Code";class ei extends Error{constructor(r,s){super(s);d(this,"code");this.code=r}static isServiceError(r){return ei.toServiceError(r)!==null}static toServiceError(r){var n,i;const s=((n=r==null?void 0:r.headers)==null?void 0:n.get(Zn))||"";if(s!==""){const o=parseInt(s)||400,a=((i=r==null?void 0:r.headers)==null?void 0:i.get(Qn))||"";return new ei(o,a.length?a:s)}return null}}function Zt(t=""){if(t=t||"_INBOX",typeof t!="string")throw new Error("prefix must be a string");return t.split(".").forEach(e=>{if(e==="*"||e===">")throw new Error(`inbox prefixes cannot have wildcards '${t}'`)}),`${t}.${ln.next()}`}const ko="127.0.0.1";var Er;(function(t){t.PING="PING",t.STATS="STATS",t.INFO="INFO"})(Er||(Er={}));function Ai(t,...e){for(let r=0;r<e.length;r++){const s=e[r];Object.keys(s).forEach(function(n){t[n]=s[n]})}return t}function An(t){return Ct.decode(t).replace(/\n/g,"␊").replace(/\r/g,"␍")}function ms(t,e=!0){const r=e?oe.errorForCode(Z.Timeout):null;let s,n;const i=new Promise((o,a)=>{s={cancel:()=>{n&&clearTimeout(n)}},n=setTimeout(()=>{a(r===null?oe.errorForCode(Z.Timeout):r)},t)});return Object.assign(i,s)}function un(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function He(){let t={};const e=new Promise((r,s)=>{t={resolve:r,reject:s}});return Object.assign(e,t)}function _f(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function m0(t){return t===0?0:Math.floor(t/2+Math.random()*t)}function bf(t=[0,250,250,500,500,3e3,5e3]){Array.isArray(t)||(t=[0,250,250,500,500,3e3,5e3]);const e=t.length-1;return{backoff(r){return m0(r>e?t[e]:t[r])}}}class ps{constructor(){d(this,"buffers");d(this,"byteLength");this.buffers=[],this.byteLength=0}static concat(...e){let r=0;for(let i=0;i<e.length;i++)r+=e[i].length;const s=new Uint8Array(r);let n=0;for(let i=0;i<e.length;i++)s.set(e[i],n),n+=e[i].length;return s}static fromAscii(e){return e||(e=""),zr.encode(e)}static toAscii(e){return Ct.decode(e)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const e=new Uint8Array(this.byteLength);let r=0;for(let s=0;s<this.buffers.length;s++)e.set(this.buffers[s],r),r+=this.buffers[s].length;this.buffers.length=0,this.buffers.push(e)}}shift(){if(this.buffers.length){const e=this.buffers.shift();if(e)return this.byteLength-=e.length,e}return new Uint8Array(0)}drain(e){if(this.buffers.length){this.pack();const r=this.buffers.pop();if(r){const s=this.byteLength;(e===void 0||e>s)&&(e=s);const n=r.subarray(0,e);return s>e&&this.buffers.push(r.subarray(e)),this.byteLength=s-e,n}}return new Uint8Array(0)}fill(e,...r){e&&(this.buffers.push(e),this.byteLength+=e.length);for(let s=0;s<r.length;s++)r[s]&&r[s].length&&(this.buffers.push(r[s]),this.byteLength+=r[s].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}let It;function p0(t){It=t}function yf(){return It!==void 0&&It.defaultPort!==void 0?It.defaultPort:4222}function Zi(){return It!==void 0&&It.urlParseFn?It.urlParseFn:void 0}function g0(){if(!It||typeof It.factory!="function")throw new Error("transport fn is not set");return It.factory()}function wf(){return It!==void 0&&It.dnsResolveFn?It.dnsResolveFn:void 0}const Ln=`\r
`,ti=ps.fromAscii(Ln),_0=new Uint8Array(ti)[0],b0=new Uint8Array(ti)[1];function y0(t){for(let e=0;e<t.length;e++){const r=e+1;if(t.byteLength>r&&t[e]===_0&&t[r]===b0)return r+1}return 0}function w0(t){const e=y0(t);if(e>0){const s=new Uint8Array(t).slice(0,e);return Ct.decode(s)}return""}const v0=4,vf=48,x0=65,E0=97;function S0(t,e,r,s){const n=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((o,a)=>{n[a]=o}),n[12]=t,n[13]=e,n[14]=r,n[15]=s,n}function Ro(t){return O0(t)!==void 0}function O0(t){for(let e=0;e<t.length;e++)switch(t[e]){case".":return xf(t);case":":return A0(t)}}function xf(t){const e=new Uint8Array(4);for(let r=0;r<4;r++){if(t.length===0)return;if(r>0){if(t[0]!==".")return;t=t.substring(1)}const{n:s,c:n,ok:i}=P0(t);if(!i||s>255)return;t=t.substring(n),e[r]=s}return S0(e[0],e[1],e[2],e[3])}function A0(t){const e=new Uint8Array(16);let r=-1;if(t.length>=2&&t[0]===":"&&t[1]===":"&&(r=0,t=t.substring(2),t.length===0))return e;let s=0;for(;s<16;){const{n,c:i,ok:o}=C0(t);if(!o||n>65535)return;if(i<t.length&&t[i]==="."){if(r<0&&s!=12||s+4>16)return;const a=xf(t);if(a===void 0)return;e[s]=a[12],e[s+1]=a[13],e[s+2]=a[14],e[s+3]=a[15],t="",s+=v0;break}if(e[s]=n>>8,e[s+1]=n,s+=2,t=t.substring(i),t.length===0)break;if(t[0]!==":"||t.length==1)return;if(t=t.substring(1),t[0]===":"){if(r>=0)return;if(r=s,t=t.substring(1),t.length===0)break}}if(t.length===0){if(s<16){if(r<0)return;const n=16-s;for(let i=s-1;i>=r;i--)e[i+n]=e[i];for(let i=r+n-1;i>=r;i--)e[i]=0}else if(r>=0)return;return e}}function P0(t){let e=0,r=0;for(e=0;e<t.length&&48<=t.charCodeAt(e)&&t.charCodeAt(e)<=57;e++)if(r=r*10+(t.charCodeAt(e)-vf),r>=16777215)return{n:16777215,c:e,ok:!1};return e===0?{n:0,c:0,ok:!1}:{n:r,c:e,ok:!0}}function C0(t){let e=0,r=0;for(r=0;r<t.length;r++){if(48<=t.charCodeAt(r)&&t.charCodeAt(r)<=57)e*=16,e+=t.charCodeAt(r)-vf;else if(97<=t.charCodeAt(r)&&t.charCodeAt(r)<=102)e*=16,e+=t.charCodeAt(r)-E0+10;else if(65<=t.charCodeAt(r)&&t.charCodeAt(r)<=70)e*=16,e+=t.charCodeAt(r)-x0+10;else break;if(e>=16777215)return{n:0,c:r,ok:!1}}return r===0?{n:0,c:r,ok:!1}:{n:e,c:r,ok:!0}}function I0(t){return t.indexOf(".")!==-1?!0:t.indexOf("[")!==-1||t.indexOf("::")!==-1?!1:t.split(":").length<=2}function No(t){return!I0(t)}function T0(t){const e="::FFFF:",r=t.toUpperCase().indexOf(e);if(r!==-1&&t.indexOf(".")!==-1){let s=t.substring(r+e.length);return s=s.replace("[",""),s.replace("]","")}return t}function k0(t){t=t.trim(),t.match(/^(.*:\/\/)(.*)/m)&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2")),t=T0(t),No(t)&&t.indexOf("[")===-1&&(t=`[${t}]`);const e=No(t)?t.match(/(]:)(\d+)/):t.match(/(:)(\d+)/),r=e&&e.length===3&&e[1]&&e[2]?parseInt(e[2]):4222,s=r===80?"https":"http",n=new URL(`${s}://${t}`);n.port=`${r}`;let i=n.hostname;return i.charAt(0)==="["&&(i=i.substring(1,i.length-1)),{listen:n.host,hostname:i,port:r}}class Ds{constructor(e,r=!1){d(this,"src");d(this,"listen");d(this,"hostname");d(this,"port");d(this,"didConnect");d(this,"reconnects");d(this,"lastConnect");d(this,"gossiped");d(this,"tlsName");d(this,"resolves");this.src=e,this.tlsName="";const s=k0(e);this.listen=s.listen,this.hostname=s.hostname,this.port=s.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=r}toString(){return this.listen}async resolve(e){if(!e.fn)return[this];const r=[];if(Ro(this.hostname))return[this];{const s=await e.fn(this.hostname);e.debug&&console.log(`resolve ${this.hostname} = ${s.join(",")}`);for(const n of s){const i=this.port===80?"https":"http",o=new URL(`${i}://${No(n)?"["+n+"]":n}`);o.port=`${this.port}`;const a=new Ds(o.host,!1);a.tlsName=this.hostname,r.push(a)}}return e.randomize&&_f(r),this.resolves=r,r}}class R0{constructor(e=[],r={}){d(this,"firstSelect");d(this,"servers");d(this,"currentServer");d(this,"tlsName");d(this,"randomize");this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=r.randomize||!1;const s=Zi();e&&(e.forEach(n=>{n=s?s(n):n,this.servers.push(new Ds(n))}),this.randomize&&(this.servers=_f(this.servers))),this.servers.length===0&&this.addServer(`${ko}:${yf()}`,!1),this.currentServer=this.servers[0]}clear(){this.servers.length=0}updateTLSName(){const e=this.getCurrentServer();Ro(e.hostname)||(this.tlsName=e.hostname,this.servers.forEach(r=>{r.gossiped&&(r.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(e,r=!1){const s=Zi();e=s?s(e):e;const n=new Ds(e,r);Ro(n.hostname)&&(n.tlsName=this.tlsName),this.servers.push(n)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const e=this.servers.shift();return e&&(this.servers.push(e),this.currentServer=e),e}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(e){if(e){const r=this.servers.indexOf(e);this.servers.splice(r,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(e){const r=[];let s=[];const n=Zi(),i=new Map;e.connect_urls&&e.connect_urls.length>0&&e.connect_urls.forEach(a=>{a=n?n(a):a;const c=new Ds(a,!0);i.set(a,c)});const o=[];return this.servers.forEach((a,c)=>{const l=a.listen;a.gossiped&&this.currentServer.listen!==l&&i.get(l)===void 0&&o.push(c),i.delete(l)}),o.reverse(),o.forEach(a=>{const c=this.servers.splice(a,1);s=s.concat(c[0].listen)}),i.forEach((a,c)=>{this.servers.push(a),r.push(c)}),{added:r,deleted:s}}}class nt{constructor(){d(this,"inflight");d(this,"processed");d(this,"received");d(this,"noIterator");d(this,"iterClosed");d(this,"done");d(this,"signal");d(this,"yields");d(this,"filtered");d(this,"pendingFiltered");d(this,"ingestionFilterFn");d(this,"protocolFilterFn");d(this,"dispatchedFn");d(this,"ctx");d(this,"_data");d(this,"err");d(this,"time");d(this,"yielding");this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=He(),this.yields=[],this.iterClosed=He(),this.time=0,this.yielding=!1}[Symbol.asyncIterator](){return this.iterate()}push(e){if(this.done)return;if(typeof e=="function"){this.yields.push(e),this.signal.resolve();return}const{ingest:r,protocol:s}=this.ingestionFilterFn?this.ingestionFilterFn(e,this.ctx||this):{ingest:!0,protocol:!1};r&&(s&&(this.filtered++,this.pendingFiltered++),this.yields.push(e),this.signal.resolve())}async*iterate(){if(this.noIterator)throw new oe("unsupported iterator",Z.ApiError);if(this.yielding)throw new oe("already yielding",Z.ApiError);this.yielding=!0;try{for(;;){if(this.yields.length===0&&await this.signal,this.err)throw this.err;const e=this.yields;this.inflight=e.length,this.yields=[];for(let r=0;r<e.length;r++){if(typeof e[r]=="function"){const n=e[r];try{n()}catch(i){throw i}if(this.err)throw this.err;continue}if(this.protocolFilterFn?this.protocolFilterFn(e[r]):!0){this.processed++;const n=Date.now();yield e[r],this.time=Date.now()-n,this.dispatchedFn&&e[r]&&this.dispatchedFn(e[r])}else this.pendingFiltered--;this.inflight--}if(this.done)break;this.yields.length===0&&(e.length=0,this.yields=e,this.signal=He())}}finally{this.stop()}}stop(e){this.done||(this.err=e,this.done=!0,this.signal.resolve(),this.iterClosed.resolve())}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}function ml(t){let s=!0;const n=new Array(t.length);for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o===58||o<33||o>126)throw new oe(`'${t[i]}' is not a valid character for a header key`,Z.BadHeader);s&&97<=o&&o<=122?o-=32:!s&&65<=o&&o<=90&&(o+=32),n[i]=o,s=o==45}return String.fromCharCode(...n)}function ur(t=0,e=""){if(t===0&&e!==""||t>0&&e==="")throw new Error("setting status requires both code and description");return new Sr(t,e)}const eo="NATS/1.0";class Sr{constructor(e=0,r=""){d(this,"_code");d(this,"headers");d(this,"_description");this._code=e,this._description=r,this.headers=new Map}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(e){if(e&&this.headers.size===e.headers.size&&this._code===e._code){for(const[r,s]of this.headers){const n=e.values(r);if(s.length!==n.length)return!1;const i=[...s].sort(),o=[...n].sort();for(let a=0;a<i.length;a++)if(i[a]!==o[a])return!1}return!0}return!1}static decode(e){const r=new Sr,n=Ct.decode(e).split(`\r
`),i=n[0];if(i!==eo){let o=i.replace(eo,"").trim();if(o.length>0){r._code=parseInt(o,10),isNaN(r._code)&&(r._code=0);const a=r._code.toString();o=o.replace(a,""),r._description=o.trim()}}return n.length>=1&&n.slice(1).map(o=>{if(o){const a=o.indexOf(":");if(a>-1){const c=o.slice(0,a),l=o.slice(a+1).trim();r.append(c,l)}}}),r}toString(){if(this.headers.size===0&&this._code===0)return"";let e=eo;this._code>0&&this._description!==""&&(e+=` ${this._code} ${this._description}`);for(const[r,s]of this.headers)for(let n=0;n<s.length;n++)e=`${e}\r
${r}: ${s[n]}`;return`${e}\r
\r
`}encode(){return zr.encode(this.toString())}static validHeaderValue(e){if(/[\r\n]/.test(e))throw new oe("invalid header value - \\r and \\n are not allowed.",Z.BadHeader);return e.trim()}keys(){const e=[];for(const r of this.headers.keys())e.push(r);return e}findKeys(e,r=Ot.Exact){const s=this.keys();switch(r){case Ot.Exact:return s.filter(n=>n===e);case Ot.CanonicalMIME:return e=ml(e),s.filter(n=>n===e);default:{const n=e.toLowerCase();return s.filter(i=>n===i.toLowerCase())}}}get(e,r=Ot.Exact){const s=this.findKeys(e,r);if(s.length){const n=this.headers.get(s[0]);if(n)return Array.isArray(n)?n[0]:n}return""}last(e,r=Ot.Exact){const s=this.findKeys(e,r);if(s.length){const n=this.headers.get(s[0]);if(n)return Array.isArray(n)?n[n.length-1]:n}return""}has(e,r=Ot.Exact){return this.findKeys(e,r).length>0}set(e,r,s=Ot.Exact){this.delete(e,s),this.append(e,r,s)}append(e,r,s=Ot.Exact){const n=ml(e);s===Ot.CanonicalMIME&&(e=n);const i=this.findKeys(e,s);e=i.length>0?i[0]:e;const o=Sr.validHeaderValue(r);let a=this.headers.get(e);a||(a=[],this.headers.set(e,a)),a.push(o)}values(e,r=Ot.Exact){const s=[];return this.findKeys(e,r).forEach(i=>{const o=this.headers.get(i);o&&s.push(...o)}),s}delete(e,r=Ot.Exact){this.findKeys(e,r).forEach(n=>{this.headers.delete(n)})}get hasError(){return this._code>=300}get status(){return`${this._code} ${this._description}`.trim()}toRecord(){const e={};return this.keys().forEach(r=>{e[r]=this.values(r)}),e}get code(){return this._code}get description(){return this._description}static fromRecord(e){const r=new Sr;for(const s in e)r.headers.set(s,e[s]);return r}}function Mo(){return{encode(t){return zr.encode(t)},decode(t){return Ct.decode(t)}}}function Bt(t){return{encode(e){try{return e===void 0&&(e=null),zr.encode(JSON.stringify(e))}catch(r){throw oe.errorForCode(Z.BadJson,r)}},decode(e){try{return JSON.parse(Ct.decode(e),t)}catch(r){throw oe.errorForCode(Z.BadJson,r)}}}}function Ef(t){var e;return t&&t.data.length===0&&((e=t.headers)==null?void 0:e.code)===503?oe.errorForCode(Z.NoResponders):null}class va{constructor(e,r,s){d(this,"_headers");d(this,"_msg");d(this,"_rdata");d(this,"_reply");d(this,"_subject");d(this,"publisher");this._msg=e,this._rdata=r,this.publisher=s}get subject(){return this._subject?this._subject:(this._subject=Ct.decode(this._msg.subject),this._subject)}get reply(){return this._reply?this._reply:(this._reply=Ct.decode(this._msg.reply),this._reply)}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const e=this._rdata.subarray(0,this._msg.hdr);this._headers=Sr.decode(e)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(e=Tt,r){return this.reply?(this.publisher.publish(this.reply,e,r),!0):!1}size(){var n;const e=this._msg.subject.length,r=((n=this._msg.reply)==null?void 0:n.length)||0,s=this._msg.size===-1?0:this._msg.size;return e+r+s}json(e){return Bt(e).decode(this.data)}string(){return Ct.decode(this.data)}}d(va,"jc");class N0{constructor(){d(this,"baseInbox");d(this,"reqs");this.reqs=new Map}size(){return this.reqs.size}init(e){return this.baseInbox=`${Zt(e)}.`,this.baseInbox}add(e){isNaN(e.received)||(e.received=0),this.reqs.set(e.token,e)}get(e){return this.reqs.get(e)}cancel(e){this.reqs.delete(e.token)}getToken(e){const r=e.subject||"";return r.indexOf(this.baseInbox)===0?r.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(e,r){if(r&&r.permissionContext){if(e)return this.all().forEach(n=>{n.resolver(r,{})}),!0;const s=r.permissionContext;if(s.operation==="publish"){const n=this.all().find(i=>i.requestSubject===s.subject);if(n)return n.resolver(r,{}),!0}}return!1}dispatcher(){return(e,r)=>{const s=this.getToken(r);if(s){const n=this.get(s);n&&(e===null&&r.headers&&(e=Ef(r)),n.resolver(e,r))}}}close(){const e=oe.errorForCode(Z.Timeout);this.reqs.forEach(r=>{r.resolver(e,{})})}}class M0{constructor(e,r,s){d(this,"ph");d(this,"interval");d(this,"maxOut");d(this,"timer");d(this,"pendings");this.ph=e,this.interval=r,this.maxOut=s,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(e){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),e&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:is.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut){this.cancel(!0);return}const e=He();this.ph.flush(e).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(e),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(e=>(e.resolve(),!1))}}class L0 extends Error{constructor(e){super(e),this.name="AssertionError"}}function j0(t,e="Assertion failed."){if(!t)throw new L0(e)}const pl=32*1024,to=2**32-2;function Pn(t,e,r=0){const s=e.byteLength-r;return t.byteLength>s&&(t=t.subarray(0,s)),e.set(t,r),t.byteLength}class ro{constructor(e){d(this,"_buf");d(this,"_off");if(this._off=0,e==null){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(e)}bytes(e={copy:!0}){return e.copy===!1?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(e){if(e===0){this.reset();return}if(e<0||e>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+e)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(e){const r=this._buf.byteLength;return e<=this.capacity-r?(this._reslice(r+e),r):-1}_reslice(e){j0(e<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,e)}readByte(){const e=new Uint8Array(1);return this.read(e)?e[0]:null}read(e){if(this.empty())return this.reset(),e.byteLength===0?0:null;const r=Pn(this._buf.subarray(this._off),e);return this._off+=r,r}writeByte(e){return this.write(Uint8Array.of(e))}writeString(e){return this.write(zr.encode(e))}write(e){const r=this._grow(e.byteLength);return Pn(e,this._buf,r)}_grow(e){const r=this.length;r===0&&this._off!==0&&this.reset();const s=this._tryGrowByReslice(e);if(s>=0)return s;const n=this.capacity;if(e<=Math.floor(n/2)-r)Pn(this._buf.subarray(this._off),this._buf);else{if(n+e>to)throw new Error("The buffer cannot be grown beyond the maximum size.");{const i=new Uint8Array(Math.min(2*n+e,to));Pn(this._buf.subarray(this._off),i),this._buf=i}}return this._off=0,this._reslice(Math.min(r+e,to)),r}grow(e){if(e<0)throw Error("Buffer._grow: negative count");const r=this._grow(e);this._reslice(r)}readFrom(e){let r=0;const s=new Uint8Array(pl);for(;;){const n=this.capacity-this.length<pl,i=n?s:new Uint8Array(this._buf.buffer,this.length),o=e.read(i);if(o===null)return r;n?this.write(i.subarray(0,o)):this._reslice(this.length+o),r+=o}}}var ht;(function(t){t[t.OK=0]="OK",t[t.ERR=1]="ERR",t[t.MSG=2]="MSG",t[t.INFO=3]="INFO",t[t.PING=4]="PING",t[t.PONG=5]="PONG"})(ht||(ht={}));function gl(){const t={};return t.sid=-1,t.hdr=-1,t.size=-1,t}const F0=48;class _l{constructor(e){d(this,"dispatcher");d(this,"state");d(this,"as");d(this,"drop");d(this,"hdr");d(this,"ma");d(this,"argBuf");d(this,"msgBuf");this.dispatcher=e,this.state=te.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(e){let r;for(r=0;r<e.length;r++){const s=e[r];switch(this.state){case te.OP_START:switch(s){case re.M:case re.m:this.state=te.OP_M,this.hdr=-1,this.ma=gl();break;case re.H:case re.h:this.state=te.OP_H,this.hdr=0,this.ma=gl();break;case re.P:case re.p:this.state=te.OP_P;break;case re.PLUS:this.state=te.OP_PLUS;break;case re.MINUS:this.state=te.OP_MINUS;break;case re.I:case re.i:this.state=te.OP_I;break;default:throw this.fail(e.subarray(r))}break;case te.OP_H:switch(s){case re.M:case re.m:this.state=te.OP_M;break;default:throw this.fail(e.subarray(r))}break;case te.OP_M:switch(s){case re.S:case re.s:this.state=te.OP_MS;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MS:switch(s){case re.G:case re.g:this.state=te.OP_MSG;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MSG:switch(s){case re.SPACE:case re.TAB:this.state=te.OP_MSG_SPC;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MSG_SPC:switch(s){case re.SPACE:case re.TAB:continue;default:this.state=te.MSG_ARG,this.as=r}break;case te.MSG_ARG:switch(s){case re.CR:this.drop=1;break;case re.NL:{const n=this.argBuf?this.argBuf.bytes():e.subarray(this.as,r-this.drop);this.processMsgArgs(n),this.drop=0,this.as=r+1,this.state=te.MSG_PAYLOAD,r=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(s)}break;case te.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const n=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:ht.MSG,msg:this.ma,data:n}),this.argBuf=void 0,this.msgBuf=void 0,this.state=te.MSG_END}else{let n=this.ma.size-this.msgBuf.length;const i=e.length-r;i<n&&(n=i),n>0?(this.msgBuf.write(e.subarray(r,r+n)),r=r+n-1):this.msgBuf.writeByte(s)}else r-this.as>=this.ma.size&&(this.dispatcher.push({kind:ht.MSG,msg:this.ma,data:e.subarray(this.as,r)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=te.MSG_END);break;case te.MSG_END:switch(s){case re.NL:this.drop=0,this.as=r+1,this.state=te.OP_START;break;default:continue}break;case te.OP_PLUS:switch(s){case re.O:case re.o:this.state=te.OP_PLUS_O;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PLUS_O:switch(s){case re.K:case re.k:this.state=te.OP_PLUS_OK;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PLUS_OK:switch(s){case re.NL:this.dispatcher.push({kind:ht.OK}),this.drop=0,this.state=te.OP_START;break}break;case te.OP_MINUS:switch(s){case re.E:case re.e:this.state=te.OP_MINUS_E;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MINUS_E:switch(s){case re.R:case re.r:this.state=te.OP_MINUS_ER;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MINUS_ER:switch(s){case re.R:case re.r:this.state=te.OP_MINUS_ERR;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MINUS_ERR:switch(s){case re.SPACE:case re.TAB:this.state=te.OP_MINUS_ERR_SPC;break;default:throw this.fail(e.subarray(r))}break;case te.OP_MINUS_ERR_SPC:switch(s){case re.SPACE:case re.TAB:continue;default:this.state=te.MINUS_ERR_ARG,this.as=r}break;case te.MINUS_ERR_ARG:switch(s){case re.CR:this.drop=1;break;case re.NL:{let n;this.argBuf?(n=this.argBuf.bytes(),this.argBuf=void 0):n=e.subarray(this.as,r-this.drop),this.dispatcher.push({kind:ht.ERR,data:n}),this.drop=0,this.as=r+1,this.state=te.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(s))}break;case te.OP_P:switch(s){case re.I:case re.i:this.state=te.OP_PI;break;case re.O:case re.o:this.state=te.OP_PO;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PO:switch(s){case re.N:case re.n:this.state=te.OP_PON;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PON:switch(s){case re.G:case re.g:this.state=te.OP_PONG;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PONG:switch(s){case re.NL:this.dispatcher.push({kind:ht.PONG}),this.drop=0,this.state=te.OP_START;break}break;case te.OP_PI:switch(s){case re.N:case re.n:this.state=te.OP_PIN;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PIN:switch(s){case re.G:case re.g:this.state=te.OP_PING;break;default:throw this.fail(e.subarray(r))}break;case te.OP_PING:switch(s){case re.NL:this.dispatcher.push({kind:ht.PING}),this.drop=0,this.state=te.OP_START;break}break;case te.OP_I:switch(s){case re.N:case re.n:this.state=te.OP_IN;break;default:throw this.fail(e.subarray(r))}break;case te.OP_IN:switch(s){case re.F:case re.f:this.state=te.OP_INF;break;default:throw this.fail(e.subarray(r))}break;case te.OP_INF:switch(s){case re.O:case re.o:this.state=te.OP_INFO;break;default:throw this.fail(e.subarray(r))}break;case te.OP_INFO:switch(s){case re.SPACE:case re.TAB:this.state=te.OP_INFO_SPC;break;default:throw this.fail(e.subarray(r))}break;case te.OP_INFO_SPC:switch(s){case re.SPACE:case re.TAB:continue;default:this.state=te.INFO_ARG,this.as=r}break;case te.INFO_ARG:switch(s){case re.CR:this.drop=1;break;case re.NL:{let n;this.argBuf?(n=this.argBuf.bytes(),this.argBuf=void 0):n=e.subarray(this.as,r-this.drop),this.dispatcher.push({kind:ht.INFO,data:n}),this.drop=0,this.as=r+1,this.state=te.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(s)}break;default:throw this.fail(e.subarray(r))}}(this.state===te.MSG_ARG||this.state===te.MINUS_ERR_ARG||this.state===te.INFO_ARG)&&!this.argBuf&&(this.argBuf=new ro(e.subarray(this.as,r-this.drop))),this.state===te.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new ro(e.subarray(this.as)))}cloneMsgArg(){const e=this.ma.subject.length,r=this.ma.reply?this.ma.reply.length:0,s=new Uint8Array(e+r);s.set(this.ma.subject),this.ma.reply&&s.set(this.ma.reply,e),this.argBuf=new ro(s),this.ma.subject=s.subarray(0,e),this.ma.reply&&(this.ma.reply=s.subarray(e))}processMsgArgs(e){if(this.hdr>=0)return this.processHeaderMsgArgs(e);const r=[];let s=-1;for(let n=0;n<e.length;n++)switch(e[n]){case re.SPACE:case re.TAB:case re.CR:case re.NL:s>=0&&(r.push(e.subarray(s,n)),s=-1);break;default:s<0&&(s=n)}switch(s>=0&&r.push(e.subarray(s)),r.length){case 3:this.ma.subject=r[0],this.ma.sid=this.protoParseInt(r[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(r[2]);break;case 4:this.ma.subject=r[0],this.ma.sid=this.protoParseInt(r[1]),this.ma.reply=r[2],this.ma.size=this.protoParseInt(r[3]);break;default:throw this.fail(e,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(e,"processMsgArgs Bad or Missing Size Error")}fail(e,r=""){return r?r=`${r} [${this.state}]`:r=`parse error [${this.state}]`,new Error(`${r}: ${Ct.decode(e)}`)}processHeaderMsgArgs(e){const r=[];let s=-1;for(let n=0;n<e.length;n++)switch(e[n]){case re.SPACE:case re.TAB:case re.CR:case re.NL:s>=0&&(r.push(e.subarray(s,n)),s=-1);break;default:s<0&&(s=n)}switch(s>=0&&r.push(e.subarray(s)),r.length){case 4:this.ma.subject=r[0],this.ma.sid=this.protoParseInt(r[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(r[2]),this.ma.size=this.protoParseInt(r[3]);break;case 5:this.ma.subject=r[0],this.ma.sid=this.protoParseInt(r[1]),this.ma.reply=r[2],this.ma.hdr=this.protoParseInt(r[3]),this.ma.size=this.protoParseInt(r[4]);break;default:throw this.fail(e,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(e){if(e.length===0)return-1;let r=0;for(let s=0;s<e.length;s++){if(e[s]<48||e[s]>57)return-1;r=r*10+(e[s]-F0)}return r}}var te;(function(t){t[t.OP_START=0]="OP_START",t[t.OP_PLUS=1]="OP_PLUS",t[t.OP_PLUS_O=2]="OP_PLUS_O",t[t.OP_PLUS_OK=3]="OP_PLUS_OK",t[t.OP_MINUS=4]="OP_MINUS",t[t.OP_MINUS_E=5]="OP_MINUS_E",t[t.OP_MINUS_ER=6]="OP_MINUS_ER",t[t.OP_MINUS_ERR=7]="OP_MINUS_ERR",t[t.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",t[t.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",t[t.OP_M=10]="OP_M",t[t.OP_MS=11]="OP_MS",t[t.OP_MSG=12]="OP_MSG",t[t.OP_MSG_SPC=13]="OP_MSG_SPC",t[t.MSG_ARG=14]="MSG_ARG",t[t.MSG_PAYLOAD=15]="MSG_PAYLOAD",t[t.MSG_END=16]="MSG_END",t[t.OP_H=17]="OP_H",t[t.OP_P=18]="OP_P",t[t.OP_PI=19]="OP_PI",t[t.OP_PIN=20]="OP_PIN",t[t.OP_PING=21]="OP_PING",t[t.OP_PO=22]="OP_PO",t[t.OP_PON=23]="OP_PON",t[t.OP_PONG=24]="OP_PONG",t[t.OP_I=25]="OP_I",t[t.OP_IN=26]="OP_IN",t[t.OP_INF=27]="OP_INF",t[t.OP_INFO=28]="OP_INFO",t[t.OP_INFO_SPC=29]="OP_INFO_SPC",t[t.INFO_ARG=30]="INFO_ARG"})(te||(te={}));var re;(function(t){t[t.CR=13]="CR",t[t.E=69]="E",t[t.e=101]="e",t[t.F=70]="F",t[t.f=102]="f",t[t.G=71]="G",t[t.g=103]="g",t[t.H=72]="H",t[t.h=104]="h",t[t.I=73]="I",t[t.i=105]="i",t[t.K=75]="K",t[t.k=107]="k",t[t.M=77]="M",t[t.m=109]="m",t[t.MINUS=45]="MINUS",t[t.N=78]="N",t[t.n=110]="n",t[t.NL=10]="NL",t[t.O=79]="O",t[t.o=111]="o",t[t.P=80]="P",t[t.p=112]="p",t[t.PLUS=43]="PLUS",t[t.R=82]="R",t[t.r=114]="r",t[t.S=83]="S",t[t.s=115]="s",t[t.SPACE=32]="SPACE",t[t.TAB=9]="TAB"})(re||(re={}));function qr(t=""){const e=t.match(/(\d+).(\d+).(\d+)/);if(e)return{major:parseInt(e[1]),minor:parseInt(e[2]),micro:parseInt(e[3])};throw new Error(`'${t}' is not a semver value`)}function Lo(t,e){return t.major<e.major?-1:t.major>e.major?1:t.minor<e.minor?-1:t.minor>e.minor?1:t.micro<e.micro?-1:t.micro>e.micro?1:0}var Ie;(function(t){t.JS_KV="js_kv",t.JS_OBJECTSTORE="js_objectstore",t.JS_PULL_MAX_BYTES="js_pull_max_bytes",t.JS_NEW_CONSUMER_CREATE_API="js_new_consumer_create",t.JS_ALLOW_DIRECT="js_allow_direct",t.JS_MULTIPLE_CONSUMER_FILTER="js_multiple_consumer_filter",t.JS_SIMPLIFICATION="js_simplification",t.JS_STREAM_CONSUMER_METADATA="js_stream_consumer_metadata",t.JS_CONSUMER_FILTER_SUBJECTS="js_consumer_filter_subjects",t.JS_STREAM_FIRST_SEQ="js_stream_first_seq",t.JS_STREAM_SUBJECT_TRANSFORM="js_stream_subject_transform",t.JS_STREAM_SOURCE_SUBJECT_TRANSFORM="js_stream_source_subject_transform",t.JS_STREAM_COMPRESSION="js_stream_compression",t.JS_DEFAULT_CONSUMER_LIMITS="js_default_consumer_limits"})(Ie||(Ie={}));class $0{constructor(e){d(this,"server");d(this,"features");d(this,"disabled");this.features=new Map,this.disabled=[],this.update(e)}resetDisabled(){this.disabled.length=0,this.update(this.server)}disable(e){this.disabled.push(e),this.update(this.server)}isDisabled(e){return this.disabled.indexOf(e)!==-1}update(e){typeof e=="string"&&(e=qr(e)),this.server=e,this.set(Ie.JS_KV,"2.6.2"),this.set(Ie.JS_OBJECTSTORE,"2.6.3"),this.set(Ie.JS_PULL_MAX_BYTES,"2.8.3"),this.set(Ie.JS_NEW_CONSUMER_CREATE_API,"2.9.0"),this.set(Ie.JS_ALLOW_DIRECT,"2.9.0"),this.set(Ie.JS_MULTIPLE_CONSUMER_FILTER,"2.10.0"),this.set(Ie.JS_SIMPLIFICATION,"2.9.4"),this.set(Ie.JS_STREAM_CONSUMER_METADATA,"2.10.0"),this.set(Ie.JS_CONSUMER_FILTER_SUBJECTS,"2.10.0"),this.set(Ie.JS_STREAM_FIRST_SEQ,"2.10.0"),this.set(Ie.JS_STREAM_SUBJECT_TRANSFORM,"2.10.0"),this.set(Ie.JS_STREAM_SOURCE_SUBJECT_TRANSFORM,"2.10.0"),this.set(Ie.JS_STREAM_COMPRESSION,"2.10.0"),this.set(Ie.JS_DEFAULT_CONSUMER_LIMITS,"2.10.0"),this.disabled.forEach(r=>{this.features.delete(r)})}set(e,r){this.features.set(e,{min:r,ok:Lo(this.server,qr(r))>=0})}get(e){return this.features.get(e)||{min:"unknown",ok:!1}}supports(e){var r;return((r=this.get(e))==null?void 0:r.ok)||!1}require(e){return typeof e=="string"&&(e=qr(e)),Lo(this.server,e)>=0}}(function(t){var e=function(h,_){this.hi=h|0,this.lo=_|0},r=function(h){var _,p=new Float64Array(16);if(h)for(_=0;_<h.length;_++)p[_]=h[_];return p},s=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=r(),a=r([1]),c=r([56129,1]),l=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(h,_){return h<<_|h>>>32-_}function T(h,_){var p=h[_+3]&255;return p=p<<8|h[_+2]&255,p=p<<8|h[_+1]&255,p<<8|h[_+0]&255}function M(h,_){var p=h[_]<<24|h[_+1]<<16|h[_+2]<<8|h[_+3],y=h[_+4]<<24|h[_+5]<<16|h[_+6]<<8|h[_+7];return new e(p,y)}function j(h,_,p){var y;for(y=0;y<4;y++)h[_+y]=p&255,p>>>=8}function $(h,_,p){h[_]=p.hi>>24&255,h[_+1]=p.hi>>16&255,h[_+2]=p.hi>>8&255,h[_+3]=p.hi&255,h[_+4]=p.lo>>24&255,h[_+5]=p.lo>>16&255,h[_+6]=p.lo>>8&255,h[_+7]=p.lo&255}function z(h,_,p,y,x){var A,D=0;for(A=0;A<x;A++)D|=h[_+A]^p[y+A];return(1&D-1>>>8)-1}function B(h,_,p,y){return z(h,_,p,y,16)}function ie(h,_,p,y){return z(h,_,p,y,32)}function Q(h,_,p,y,x){var A=new Uint32Array(16),D=new Uint32Array(16),V=new Uint32Array(16),I=new Uint32Array(4),U,ae,Se;for(U=0;U<4;U++)D[5*U]=T(y,4*U),D[1+U]=T(p,4*U),D[6+U]=T(_,4*U),D[11+U]=T(p,16+4*U);for(U=0;U<16;U++)V[U]=D[U];for(U=0;U<20;U++){for(ae=0;ae<4;ae++){for(Se=0;Se<4;Se++)I[Se]=D[(5*ae+4*Se)%16];for(I[1]^=E(I[0]+I[3]|0,7),I[2]^=E(I[1]+I[0]|0,9),I[3]^=E(I[2]+I[1]|0,13),I[0]^=E(I[3]+I[2]|0,18),Se=0;Se<4;Se++)A[4*ae+(ae+Se)%4]=I[Se]}for(Se=0;Se<16;Se++)D[Se]=A[Se]}if(x){for(U=0;U<16;U++)D[U]=D[U]+V[U]|0;for(U=0;U<4;U++)D[5*U]=D[5*U]-T(y,4*U)|0,D[6+U]=D[6+U]-T(_,4*U)|0;for(U=0;U<4;U++)j(h,4*U,D[5*U]),j(h,16+4*U,D[6+U])}else for(U=0;U<16;U++)j(h,4*U,D[U]+V[U]|0)}function we(h,_,p,y){return Q(h,_,p,y,!1),0}function J(h,_,p,y){return Q(h,_,p,y,!0),0}var he=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function be(h,_,p,y,x,A,D){var V=new Uint8Array(16),I=new Uint8Array(64),U,ae;if(!x)return 0;for(ae=0;ae<16;ae++)V[ae]=0;for(ae=0;ae<8;ae++)V[ae]=A[ae];for(;x>=64;){for(we(I,V,D,he),ae=0;ae<64;ae++)h[_+ae]=(p?p[y+ae]:0)^I[ae];for(U=1,ae=8;ae<16;ae++)U=U+(V[ae]&255)|0,V[ae]=U&255,U>>>=8;x-=64,_+=64,p&&(y+=64)}if(x>0)for(we(I,V,D,he),ae=0;ae<x;ae++)h[_+ae]=(p?p[y+ae]:0)^I[ae];return 0}function Ce(h,_,p,y,x){return be(h,_,null,0,p,y,x)}function Re(h,_,p,y,x){var A=new Uint8Array(32);return J(A,y,x,he),Ce(h,_,p,y.subarray(16),A)}function De(h,_,p,y,x,A,D){var V=new Uint8Array(32);return J(V,A,D,he),be(h,_,p,y,x,A.subarray(16),V)}function Je(h,_){var p,y=0;for(p=0;p<17;p++)y=y+(h[p]+_[p]|0)|0,h[p]=y&255,y>>>=8}var mt=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function Me(h,_,p,y,x,A){var D,V,I,U,ae=new Uint32Array(17),Se=new Uint32Array(17),Be=new Uint32Array(17),Ft=new Uint32Array(17),Xr=new Uint32Array(17);for(I=0;I<17;I++)Se[I]=Be[I]=0;for(I=0;I<16;I++)Se[I]=A[I];for(Se[3]&=15,Se[4]&=252,Se[7]&=15,Se[8]&=252,Se[11]&=15,Se[12]&=252,Se[15]&=15;x>0;){for(I=0;I<17;I++)Ft[I]=0;for(I=0;I<16&&I<x;++I)Ft[I]=p[y+I];for(Ft[I]=1,y+=I,x-=I,Je(Be,Ft),V=0;V<17;V++)for(ae[V]=0,I=0;I<17;I++)ae[V]=ae[V]+Be[I]*(I<=V?Se[V-I]:320*Se[V+17-I]|0)|0|0;for(V=0;V<17;V++)Be[V]=ae[V];for(U=0,I=0;I<16;I++)U=U+Be[I]|0,Be[I]=U&255,U>>>=8;for(U=U+Be[16]|0,Be[16]=U&3,U=5*(U>>>2)|0,I=0;I<16;I++)U=U+Be[I]|0,Be[I]=U&255,U>>>=8;U=U+Be[16]|0,Be[16]=U}for(I=0;I<17;I++)Xr[I]=Be[I];for(Je(Be,mt),D=-(Be[16]>>>7)|0,I=0;I<17;I++)Be[I]^=D&(Xr[I]^Be[I]);for(I=0;I<16;I++)Ft[I]=A[I+16];for(Ft[16]=0,Je(Be,Ft),I=0;I<16;I++)h[_+I]=Be[I];return 0}function Ee(h,_,p,y,x,A){var D=new Uint8Array(16);return Me(D,0,p,y,x,A),B(h,_,D,0)}function ve(h,_,p,y,x){var A;if(p<32)return-1;for(De(h,0,_,0,p,y,x),Me(h,16,h,32,p-32,h),A=0;A<16;A++)h[A]=0;return 0}function tt(h,_,p,y,x){var A,D=new Uint8Array(32);if(p<32||(Re(D,0,32,y,x),Ee(_,16,_,32,p-32,D)!==0))return-1;for(De(h,0,_,0,p,y,x),A=0;A<32;A++)h[A]=0;return 0}function P(h,_){var p;for(p=0;p<16;p++)h[p]=_[p]|0}function v(h){var _,p;for(p=0;p<16;p++)h[p]+=65536,_=Math.floor(h[p]/65536),h[(p+1)*(p<15?1:0)]+=_-1+37*(_-1)*(p===15?1:0),h[p]-=_*65536}function ee(h,_,p){for(var y,x=~(p-1),A=0;A<16;A++)y=x&(h[A]^_[A]),h[A]^=y,_[A]^=y}function ce(h,_){var p,y,x,A=r(),D=r();for(p=0;p<16;p++)D[p]=_[p];for(v(D),v(D),v(D),y=0;y<2;y++){for(A[0]=D[0]-65517,p=1;p<15;p++)A[p]=D[p]-65535-(A[p-1]>>16&1),A[p-1]&=65535;A[15]=D[15]-32767-(A[14]>>16&1),x=A[15]>>16&1,A[14]&=65535,ee(D,A,1-x)}for(p=0;p<16;p++)h[2*p]=D[p]&255,h[2*p+1]=D[p]>>8}function pe(h,_){var p=new Uint8Array(32),y=new Uint8Array(32);return ce(p,h),ce(y,_),ie(p,0,y,0)}function ge(h){var _=new Uint8Array(32);return ce(_,h),_[0]&1}function fe(h,_){var p;for(p=0;p<16;p++)h[p]=_[2*p]+(_[2*p+1]<<8);h[15]&=32767}function S(h,_,p){var y;for(y=0;y<16;y++)h[y]=_[y]+p[y]|0}function F(h,_,p){var y;for(y=0;y<16;y++)h[y]=_[y]-p[y]|0}function k(h,_,p){var y,x,A=new Float64Array(31);for(y=0;y<31;y++)A[y]=0;for(y=0;y<16;y++)for(x=0;x<16;x++)A[y+x]+=_[y]*p[x];for(y=0;y<15;y++)A[y]+=38*A[y+16];for(y=0;y<16;y++)h[y]=A[y];v(h),v(h)}function G(h,_){k(h,_,_)}function le(h,_){var p=r(),y;for(y=0;y<16;y++)p[y]=_[y];for(y=253;y>=0;y--)G(p,p),y!==2&&y!==4&&k(p,p,_);for(y=0;y<16;y++)h[y]=p[y]}function me(h,_){var p=r(),y;for(y=0;y<16;y++)p[y]=_[y];for(y=250;y>=0;y--)G(p,p),y!==1&&k(p,p,_);for(y=0;y<16;y++)h[y]=p[y]}function g(h,_,p){var y=new Uint8Array(32),x=new Float64Array(80),A,D,V=r(),I=r(),U=r(),ae=r(),Se=r(),Be=r();for(D=0;D<31;D++)y[D]=_[D];for(y[31]=_[31]&127|64,y[0]&=248,fe(x,p),D=0;D<16;D++)I[D]=x[D],ae[D]=V[D]=U[D]=0;for(V[0]=ae[0]=1,D=254;D>=0;--D)A=y[D>>>3]>>>(D&7)&1,ee(V,I,A),ee(U,ae,A),S(Se,V,U),F(V,V,U),S(U,I,ae),F(I,I,ae),G(ae,Se),G(Be,V),k(V,U,V),k(U,I,Se),S(Se,V,U),F(V,V,U),G(I,V),F(U,ae,Be),k(V,U,c),S(V,V,ae),k(U,U,V),k(V,ae,Be),k(ae,I,x),G(I,Se),ee(V,I,A),ee(U,ae,A);for(D=0;D<16;D++)x[D+16]=V[D],x[D+32]=U[D],x[D+48]=I[D],x[D+64]=ae[D];var Ft=x.subarray(32),Xr=x.subarray(16);return le(Ft,Ft),k(Xr,Xr,Ft),ce(h,Xr),0}function b(h,_){return g(h,_,i)}function C(h,_){return s(_,32),b(h,_)}function L(h,_,p){var y=new Uint8Array(32);return g(y,p,_),J(h,n,y,he)}var N=ve,W=tt;function Y(h,_,p,y,x,A){var D=new Uint8Array(32);return L(D,x,A),N(h,_,p,y,D)}function H(h,_,p,y,x,A){var D=new Uint8Array(32);return L(D,x,A),W(h,_,p,y,D)}function K(){var h=0,_=0,p=0,y=0,x=65535,A,D,V;for(V=0;V<arguments.length;V++)A=arguments[V].lo,D=arguments[V].hi,h+=A&x,_+=A>>>16,p+=D&x,y+=D>>>16;return _+=h>>>16,p+=_>>>16,y+=p>>>16,new e(p&x|y<<16,h&x|_<<16)}function q(h,_){return new e(h.hi>>>_,h.lo>>>_|h.hi<<32-_)}function se(){var h=0,_=0,p;for(p=0;p<arguments.length;p++)h^=arguments[p].lo,_^=arguments[p].hi;return new e(_,h)}function X(h,_){var p,y,x=32-_;return _<32?(p=h.hi>>>_|h.lo<<x,y=h.lo>>>_|h.hi<<x):_<64&&(p=h.lo>>>_|h.hi<<x,y=h.hi>>>_|h.lo<<x),new e(p,y)}function O(h,_,p){var y=h.hi&_.hi^~h.hi&p.hi,x=h.lo&_.lo^~h.lo&p.lo;return new e(y,x)}function R(h,_,p){var y=h.hi&_.hi^h.hi&p.hi^_.hi&p.hi,x=h.lo&_.lo^h.lo&p.lo^_.lo&p.lo;return new e(y,x)}function ne(h){return se(X(h,28),X(h,34),X(h,39))}function de(h){return se(X(h,14),X(h,18),X(h,41))}function xe(h){return se(X(h,1),X(h,8),q(h,7))}function Ne(h){return se(X(h,19),X(h,61),q(h,6))}var $e=[new e(1116352408,3609767458),new e(1899447441,602891725),new e(3049323471,3964484399),new e(3921009573,2173295548),new e(961987163,4081628472),new e(1508970993,3053834265),new e(2453635748,2937671579),new e(2870763221,3664609560),new e(3624381080,2734883394),new e(310598401,1164996542),new e(607225278,1323610764),new e(1426881987,3590304994),new e(1925078388,4068182383),new e(2162078206,991336113),new e(2614888103,633803317),new e(3248222580,3479774868),new e(3835390401,2666613458),new e(4022224774,944711139),new e(264347078,2341262773),new e(604807628,2007800933),new e(770255983,1495990901),new e(1249150122,1856431235),new e(1555081692,3175218132),new e(1996064986,2198950837),new e(2554220882,3999719339),new e(2821834349,766784016),new e(2952996808,2566594879),new e(3210313671,3203337956),new e(3336571891,1034457026),new e(3584528711,2466948901),new e(113926993,3758326383),new e(338241895,168717936),new e(666307205,1188179964),new e(773529912,1546045734),new e(1294757372,1522805485),new e(1396182291,2643833823),new e(1695183700,2343527390),new e(1986661051,1014477480),new e(2177026350,1206759142),new e(2456956037,344077627),new e(2730485921,1290863460),new e(2820302411,3158454273),new e(3259730800,3505952657),new e(3345764771,106217008),new e(3516065817,3606008344),new e(3600352804,1432725776),new e(4094571909,1467031594),new e(275423344,851169720),new e(430227734,3100823752),new e(506948616,1363258195),new e(659060556,3750685593),new e(883997877,3785050280),new e(958139571,3318307427),new e(1322822218,3812723403),new e(1537002063,2003034995),new e(1747873779,3602036899),new e(1955562222,1575990012),new e(2024104815,1125592928),new e(2227730452,2716904306),new e(2361852424,442776044),new e(2428436474,593698344),new e(2756734187,3733110249),new e(3204031479,2999351573),new e(3329325298,3815920427),new e(3391569614,3928383900),new e(3515267271,566280711),new e(3940187606,3454069534),new e(4118630271,4000239992),new e(116418474,1914138554),new e(174292421,2731055270),new e(289380356,3203993006),new e(460393269,320620315),new e(685471733,587496836),new e(852142971,1086792851),new e(1017036298,365543100),new e(1126000580,2618297676),new e(1288033470,3409855158),new e(1501505948,4234509866),new e(1607167915,987167468),new e(1816402316,1246189591)];function xt(h,_,p){var y=[],x=[],A=[],D=[],V,I,U;for(I=0;I<8;I++)y[I]=A[I]=M(h,8*I);for(var ae=0;p>=128;){for(I=0;I<16;I++)D[I]=M(_,8*I+ae);for(I=0;I<80;I++){for(U=0;U<8;U++)x[U]=A[U];for(V=K(A[7],de(A[4]),O(A[4],A[5],A[6]),$e[I],D[I%16]),x[7]=K(V,ne(A[0]),R(A[0],A[1],A[2])),x[3]=K(x[3],V),U=0;U<8;U++)A[(U+1)%8]=x[U];if(I%16===15)for(U=0;U<16;U++)D[U]=K(D[U],D[(U+9)%16],xe(D[(U+1)%16]),Ne(D[(U+14)%16]))}for(I=0;I<8;I++)A[I]=K(A[I],y[I]),y[I]=A[I];ae+=128,p-=128}for(I=0;I<8;I++)$(h,8*I,y[I]);return p}var kr=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function Et(h,_,p){var y=new Uint8Array(64),x=new Uint8Array(256),A,D=p;for(A=0;A<64;A++)y[A]=kr[A];for(xt(y,_,p),p%=128,A=0;A<256;A++)x[A]=0;for(A=0;A<p;A++)x[A]=_[D-p+A];for(x[p]=128,p=256-128*(p<112?1:0),x[p-9]=0,$(x,p-8,new e(D/536870912|0,D<<3)),xt(y,x,p),A=0;A<64;A++)h[A]=y[A];return 0}function Rr(h,_){var p=r(),y=r(),x=r(),A=r(),D=r(),V=r(),I=r(),U=r(),ae=r();F(p,h[1],h[0]),F(ae,_[1],_[0]),k(p,p,ae),S(y,h[0],h[1]),S(ae,_[0],_[1]),k(y,y,ae),k(x,h[3],_[3]),k(x,x,u),k(A,h[2],_[2]),S(A,A,A),F(D,y,p),F(V,A,x),S(I,A,x),S(U,y,p),k(h[0],D,V),k(h[1],U,I),k(h[2],I,V),k(h[3],D,U)}function ct(h,_,p){var y;for(y=0;y<4;y++)ee(h[y],_[y],p)}function pt(h,_){var p=r(),y=r(),x=r();le(x,_[2]),k(p,_[0],x),k(y,_[1],x),ce(h,y),h[31]^=ge(p)<<7}function Kr(h,_,p){var y,x;for(P(h[0],o),P(h[1],a),P(h[2],a),P(h[3],o),x=255;x>=0;--x)y=p[x/8|0]>>(x&7)&1,ct(h,_,y),Rr(_,h),Rr(h,h),ct(h,_,y)}function dn(h,_){var p=[r(),r(),r(),r()];P(p[0],f),P(p[1],m),P(p[2],a),k(p[3],f,m),Kr(h,p,_)}function Ci(h,_,p){var y=new Uint8Array(64),x=[r(),r(),r(),r()],A;for(p||s(_,32),Et(y,_,32),y[0]&=248,y[31]&=127,y[31]|=64,dn(x,y),pt(h,x),A=0;A<32;A++)_[A+32]=h[A];return 0}var mn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ii(h,_){var p,y,x,A;for(y=63;y>=32;--y){for(p=0,x=y-32,A=y-12;x<A;++x)_[x]+=p-16*_[y]*mn[x-(y-32)],p=Math.floor((_[x]+128)/256),_[x]-=p*256;_[x]+=p,_[y]=0}for(p=0,x=0;x<32;x++)_[x]+=p-(_[31]>>4)*mn[x],p=_[x]>>8,_[x]&=255;for(x=0;x<32;x++)_[x]-=p*mn[x];for(y=0;y<32;y++)_[y+1]+=_[y]>>8,h[y]=_[y]&255}function Ti(h){var _=new Float64Array(64),p;for(p=0;p<64;p++)_[p]=h[p];for(p=0;p<64;p++)h[p]=0;Ii(h,_)}function ka(h,_,p,y){var x=new Uint8Array(64),A=new Uint8Array(64),D=new Uint8Array(64),V,I,U=new Float64Array(64),ae=[r(),r(),r(),r()];Et(x,y,32),x[0]&=248,x[31]&=127,x[31]|=64;var Se=p+64;for(V=0;V<p;V++)h[64+V]=_[V];for(V=0;V<32;V++)h[32+V]=x[32+V];for(Et(D,h.subarray(32),p+32),Ti(D),dn(ae,D),pt(h,ae),V=32;V<64;V++)h[V]=y[V];for(Et(A,h,p+64),Ti(A),V=0;V<64;V++)U[V]=0;for(V=0;V<32;V++)U[V]=D[V];for(V=0;V<32;V++)for(I=0;I<32;I++)U[V+I]+=A[V]*x[I];return Ii(h.subarray(32),U),Se}function Df(h,_){var p=r(),y=r(),x=r(),A=r(),D=r(),V=r(),I=r();return P(h[2],a),fe(h[1],_),G(x,h[1]),k(A,x,l),F(x,x,h[2]),S(A,h[2],A),G(D,A),G(V,D),k(I,V,D),k(p,I,x),k(p,p,A),me(p,p),k(p,p,x),k(p,p,A),k(p,p,A),k(h[0],p,A),G(y,h[0]),k(y,y,A),pe(y,x)&&k(h[0],h[0],w),G(y,h[0]),k(y,y,A),pe(y,x)?-1:(ge(h[0])===_[31]>>7&&F(h[0],o,h[0]),k(h[3],h[0],h[1]),0)}function ki(h,_,p,y){var x,A=new Uint8Array(32),D=new Uint8Array(64),V=[r(),r(),r(),r()],I=[r(),r(),r(),r()];if(p<64||Df(I,y))return-1;for(x=0;x<p;x++)h[x]=_[x];for(x=0;x<32;x++)h[x+32]=y[x];if(Et(D,h,p),Ti(D),Kr(V,I,D),dn(I,_.subarray(32)),Rr(V,I),pt(A,V),p-=64,ie(_,0,A,0)){for(x=0;x<p;x++)h[x]=0;return-1}for(x=0;x<p;x++)h[x]=_[x+64];return p}var Ri=32,pn=24,ws=32,Jr=16,vs=32,gn=32,xs=32,Es=32,Ni=32,Ra=pn,Bf=ws,qf=Jr,tr=64,Nr=32,Yr=64,Mi=32,Li=64;t.lowlevel={crypto_core_hsalsa20:J,crypto_stream_xor:De,crypto_stream:Re,crypto_stream_salsa20_xor:be,crypto_stream_salsa20:Ce,crypto_onetimeauth:Me,crypto_onetimeauth_verify:Ee,crypto_verify_16:B,crypto_verify_32:ie,crypto_secretbox:ve,crypto_secretbox_open:tt,crypto_scalarmult:g,crypto_scalarmult_base:b,crypto_box_beforenm:L,crypto_box_afternm:N,crypto_box:Y,crypto_box_open:H,crypto_box_keypair:C,crypto_hash:Et,crypto_sign:ka,crypto_sign_keypair:Ci,crypto_sign_open:ki,crypto_secretbox_KEYBYTES:Ri,crypto_secretbox_NONCEBYTES:pn,crypto_secretbox_ZEROBYTES:ws,crypto_secretbox_BOXZEROBYTES:Jr,crypto_scalarmult_BYTES:vs,crypto_scalarmult_SCALARBYTES:gn,crypto_box_PUBLICKEYBYTES:xs,crypto_box_SECRETKEYBYTES:Es,crypto_box_BEFORENMBYTES:Ni,crypto_box_NONCEBYTES:Ra,crypto_box_ZEROBYTES:Bf,crypto_box_BOXZEROBYTES:qf,crypto_sign_BYTES:tr,crypto_sign_PUBLICKEYBYTES:Nr,crypto_sign_SECRETKEYBYTES:Yr,crypto_sign_SEEDBYTES:Mi,crypto_hash_BYTES:Li,gf:r,D:l,L:mn,pack25519:ce,unpack25519:fe,M:k,A:S,S:G,Z:F,pow2523:me,add:Rr,set25519:P,modL:Ii,scalarmult:Kr,scalarbase:dn};function Na(h,_){if(h.length!==Ri)throw new Error("bad key size");if(_.length!==pn)throw new Error("bad nonce size")}function Hf(h,_){if(h.length!==xs)throw new Error("bad public key size");if(_.length!==Es)throw new Error("bad secret key size")}function St(){for(var h=0;h<arguments.length;h++)if(!(arguments[h]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ma(h){for(var _=0;_<h.length;_++)h[_]=0}t.randomBytes=function(h){var _=new Uint8Array(h);return s(_,h),_},t.secretbox=function(h,_,p){St(h,_,p),Na(p,_);for(var y=new Uint8Array(ws+h.length),x=new Uint8Array(y.length),A=0;A<h.length;A++)y[A+ws]=h[A];return ve(x,y,y.length,_,p),x.subarray(Jr)},t.secretbox.open=function(h,_,p){St(h,_,p),Na(p,_);for(var y=new Uint8Array(Jr+h.length),x=new Uint8Array(y.length),A=0;A<h.length;A++)y[A+Jr]=h[A];return y.length<32||tt(x,y,y.length,_,p)!==0?null:x.subarray(ws)},t.secretbox.keyLength=Ri,t.secretbox.nonceLength=pn,t.secretbox.overheadLength=Jr,t.scalarMult=function(h,_){if(St(h,_),h.length!==gn)throw new Error("bad n size");if(_.length!==vs)throw new Error("bad p size");var p=new Uint8Array(vs);return g(p,h,_),p},t.scalarMult.base=function(h){if(St(h),h.length!==gn)throw new Error("bad n size");var _=new Uint8Array(vs);return b(_,h),_},t.scalarMult.scalarLength=gn,t.scalarMult.groupElementLength=vs,t.box=function(h,_,p,y){var x=t.box.before(p,y);return t.secretbox(h,_,x)},t.box.before=function(h,_){St(h,_),Hf(h,_);var p=new Uint8Array(Ni);return L(p,h,_),p},t.box.after=t.secretbox,t.box.open=function(h,_,p,y){var x=t.box.before(p,y);return t.secretbox.open(h,_,x)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var h=new Uint8Array(xs),_=new Uint8Array(Es);return C(h,_),{publicKey:h,secretKey:_}},t.box.keyPair.fromSecretKey=function(h){if(St(h),h.length!==Es)throw new Error("bad secret key size");var _=new Uint8Array(xs);return b(_,h),{publicKey:_,secretKey:new Uint8Array(h)}},t.box.publicKeyLength=xs,t.box.secretKeyLength=Es,t.box.sharedKeyLength=Ni,t.box.nonceLength=Ra,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(h,_){if(St(h,_),_.length!==Yr)throw new Error("bad secret key size");var p=new Uint8Array(tr+h.length);return ka(p,h,h.length,_),p},t.sign.open=function(h,_){if(St(h,_),_.length!==Nr)throw new Error("bad public key size");var p=new Uint8Array(h.length),y=ki(p,h,h.length,_);if(y<0)return null;for(var x=new Uint8Array(y),A=0;A<x.length;A++)x[A]=p[A];return x},t.sign.detached=function(h,_){for(var p=t.sign(h,_),y=new Uint8Array(tr),x=0;x<y.length;x++)y[x]=p[x];return y},t.sign.detached.verify=function(h,_,p){if(St(h,_,p),_.length!==tr)throw new Error("bad signature size");if(p.length!==Nr)throw new Error("bad public key size");var y=new Uint8Array(tr+h.length),x=new Uint8Array(tr+h.length),A;for(A=0;A<tr;A++)y[A]=_[A];for(A=0;A<h.length;A++)y[A+tr]=h[A];return ki(x,y,y.length,p)>=0},t.sign.keyPair=function(){var h=new Uint8Array(Nr),_=new Uint8Array(Yr);return Ci(h,_),{publicKey:h,secretKey:_}},t.sign.keyPair.fromSecretKey=function(h){if(St(h),h.length!==Yr)throw new Error("bad secret key size");for(var _=new Uint8Array(Nr),p=0;p<_.length;p++)_[p]=h[32+p];return{publicKey:_,secretKey:new Uint8Array(h)}},t.sign.keyPair.fromSeed=function(h){if(St(h),h.length!==Mi)throw new Error("bad seed size");for(var _=new Uint8Array(Nr),p=new Uint8Array(Yr),y=0;y<32;y++)p[y]=h[y];return Ci(_,p,!0),{publicKey:_,secretKey:p}},t.sign.publicKeyLength=Nr,t.sign.secretKeyLength=Yr,t.sign.seedLength=Mi,t.sign.signatureLength=tr,t.hash=function(h){St(h);var _=new Uint8Array(Li);return Et(_,h,h.length),_},t.hash.hashLength=Li,t.verify=function(h,_){return St(h,_),h.length===0||_.length===0||h.length!==_.length?!1:z(h,0,_,0,h.length)===0},t.setPRNG=function(h){s=h},function(){var h=typeof globalThis<"u"?globalThis.crypto||globalThis.msCrypto:null;if(h&&h.getRandomValues){var _=65536;t.setPRNG(function(p,y){var x,A=new Uint8Array(y);for(x=0;x<y;x+=_)h.getRandomValues(A.subarray(x,x+Math.min(y-x,_)));for(x=0;x<y;x++)p[x]=A[x];Ma(A)})}else typeof require<"u"&&(h=require("crypto"),h&&h.randomBytes&&t.setPRNG(function(p,y){var x,A=h.randomBytes(y);for(x=0;x<y;x++)p[x]=A[x];Ma(A)}))}()})(typeof module<"u"&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const Cn=typeof module<"u"&&module.exports?module.exports:globalThis.nacl;Cn.sign.keyPair.fromSeed,Cn.sign.detached,Cn.sign.detached.verify,Cn.randomBytes;var bl;(function(t){t.InvalidPrefixByte="nkeys: invalid prefix byte",t.InvalidKey="nkeys: invalid key",t.InvalidPublicKey="nkeys: invalid public key",t.InvalidSeedLen="nkeys: invalid seed length",t.InvalidSeed="nkeys: invalid seed",t.InvalidEncoding="nkeys: invalid encoded key",t.InvalidSignature="nkeys: signature verification failed",t.CannotSign="nkeys: cannot sign, no private key available",t.PublicKeyOnly="nkeys: no seed or private key available",t.InvalidChecksum="nkeys: invalid checksum",t.SerializationError="nkeys: serialization error",t.ApiError="nkeys: api error",t.ClearedPair="nkeys: pair is cleared"})(bl||(bl={}));var yl;(function(t){t[t.Seed=144]="Seed",t[t.Private=120]="Private",t[t.Operator=112]="Operator",t[t.Server=104]="Server",t[t.Cluster=16]="Cluster",t[t.Account=0]="Account",t[t.User=160]="User"})(yl||(yl={}));function U0(t){return e=>{let r={};return t.forEach(s=>{const n=s(e)||{};r=Object.assign(r,n)}),r}}function D0(){return()=>{}}function B0(t,e){return()=>{const r=typeof t=="function"?t():t,s=typeof e=="function"?e():e;return{user:r,pass:s}}}function q0(t){return()=>({auth_token:typeof t=="function"?t():t})}const Sf=2*60*1e3,H0=2,Of=2*1e3;function V0(){return{maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:Sf,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:Of,tls:void 0,verbose:!1,waitOnFirstConnect:!1,ignoreAuthErrorAbort:!1}}function W0(t){const e=[];return typeof t.authenticator=="function"&&e.push(t.authenticator),Array.isArray(t.authenticator)&&e.push(...t.authenticator),t.token&&e.push(q0(t.token)),t.user&&e.push(B0(t.user,t.pass)),e.length===0?D0():U0(e)}function G0(t){const e=`${ko}:${yf()}`;if(t=t||{servers:[e]},t.servers=t.servers||[],typeof t.servers=="string"&&(t.servers=[t.servers]),t.servers.length>0&&t.port)throw new oe("port and servers options are mutually exclusive",Z.InvalidOption);t.servers.length===0&&t.port&&(t.servers=[`${ko}:${t.port}`]),t.servers&&t.servers.length===0&&(t.servers=[e]);const r=Ai(V0(),t);if(r.authenticator=W0(r),["reconnectDelayHandler","authenticator"].forEach(s=>{if(r[s]&&typeof r[s]!="function")throw new oe(`${s} option should be a function`,Z.NotFunction)}),r.reconnectDelayHandler||(r.reconnectDelayHandler=()=>{let s=r.tls?r.reconnectJitterTLS:r.reconnectJitter;return s&&(s++,s=Math.floor(Math.random()*s)),r.reconnectTimeWait+s}),r.inboxPrefix)try{Zt(r.inboxPrefix)}catch(s){throw new oe(s.message,Z.ApiError)}if(r.resolve&&typeof wf()!="function")throw new oe("'resolve' is not supported on this client",Z.InvalidOption);return r}function z0(t,e){const{proto:r,tls_required:s,tls_available:n}=t;if((r===void 0||r<1)&&e.noEcho)throw new oe("noEcho",Z.ServerOptionNotAvailable);const i=s||n||!1;if(e.tls&&!i)throw new oe("tls",Z.ServerOptionNotAvailable)}const K0=1024*32,J0=/^INFO\s+([^\r\n]+)\r\n/i,Y0=$s(`PONG\r
`),wl=$s(`PING\r
`);class X0{constructor(e,r,s){d(this,"echo");d(this,"no_responders");d(this,"protocol");d(this,"verbose");d(this,"pedantic");d(this,"jwt");d(this,"nkey");d(this,"sig");d(this,"user");d(this,"pass");d(this,"auth_token");d(this,"tls_required");d(this,"name");d(this,"lang");d(this,"version");d(this,"headers");this.protocol=1,this.version=e.version,this.lang=e.lang,this.echo=r.noEcho?!1:void 0,this.verbose=r.verbose,this.pedantic=r.pedantic,this.tls_required=r.tls?!0:void 0,this.name=r.name;const n=(r&&typeof r.authenticator=="function"?r.authenticator(s):{})||{};Ai(this,n)}}class Af extends nt{constructor(r,s,n={}){var o;super();d(this,"sid");d(this,"queue");d(this,"draining");d(this,"max");d(this,"subject");d(this,"drained");d(this,"protocol");d(this,"timer");d(this,"info");d(this,"cleanupFn");d(this,"closed");d(this,"requestSubject");Ai(this,n),this.protocol=r,this.subject=s,this.draining=!1,this.noIterator=typeof n.callback=="function",this.closed=He();const i=!((o=r.options)!=null&&o.noAsyncTraces);n.timeout&&(this.timer=ms(n.timeout,i),this.timer.then(()=>{this.timer=void 0}).catch(a=>{this.stop(a),this.noIterator&&this.callback(a,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(r){if(this.noIterator){const s=this.callback,n=r.ingestionFilterFn?r.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),i=r.protocolFilterFn?r.protocolFilterFn:()=>!0,o=r.dispatchedFn?r.dispatchedFn:()=>{};this.callback=(a,c)=>{const{ingest:l}=n(c);l&&i(c)&&(s(a,c),o(c))}}else this.protocolFilterFn=r.protocolFilterFn,this.dispatchedFn=r.dispatchedFn}callback(r,s){this.cancelTimeout(),r?this.stop(r):this.push(s)}close(){if(!this.isClosed()){this.cancelTimeout();const r=()=>{if(this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch{}this.closed.resolve()};this.noIterator?r():this.push(r)}}unsubscribe(r){this.protocol.unsubscribe(this,r)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(oe.errorForCode(Z.ConnectionClosed)):this.isClosed()?Promise.reject(oe.errorForCode(Z.SubClosed)):(this.drained||(this.draining=!0,this.protocol.unsub(this),this.drained=this.protocol.flush(He()).then(()=>{this.protocol.subscriptions.cancel(this)}).catch(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class Q0{constructor(){d(this,"mux");d(this,"subs");d(this,"sidCounter");this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(e){return this.sidCounter++,e.sid=this.sidCounter,this.subs.set(e.sid,e),e}setMux(e){return this.mux=e,e}getMux(){return this.mux}get(e){return this.subs.get(e)}resub(e){return this.sidCounter++,this.subs.delete(e.sid),e.sid=this.sidCounter,this.subs.set(e.sid,e),e}all(){return Array.from(this.subs.values())}cancel(e){e&&(e.close(),this.subs.delete(e.sid))}handleError(e){if(e&&e.permissionContext){const r=e.permissionContext,s=this.all();let n;if(r.operation==="subscription"&&(n=s.find(i=>i.subject===r.subject)),r.operation==="publish"&&(n=s.find(i=>i.requestSubject===r.subject)),n)return n.callback(e,{}),n.close(),this.subs.delete(n.sid),n!==this.mux}return!1}close(){this.subs.forEach(e=>{e.close()})}}class ri{constructor(e,r){d(this,"connected");d(this,"connectedOnce");d(this,"infoReceived");d(this,"info");d(this,"muxSubscriptions");d(this,"options");d(this,"outbound");d(this,"pongs");d(this,"subscriptions");d(this,"transport");d(this,"noMorePublishing");d(this,"connectError");d(this,"publisher");d(this,"_closed");d(this,"closed");d(this,"listeners");d(this,"heartbeats");d(this,"parser");d(this,"outMsgs");d(this,"inMsgs");d(this,"outBytes");d(this,"inBytes");d(this,"pendingLimit");d(this,"lastError");d(this,"abortReconnect");d(this,"servers");d(this,"server");d(this,"features");d(this,"connectPromise");this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=K0,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=e,this.publisher=r,this.subscriptions=new Q0,this.muxSubscriptions=new N0,this.outbound=new ps,this.pongs=[],this.pendingLimit=e.pendingLimit||this.pendingLimit,this.features=new $0({major:0,minor:0,micro:0}),this.connectPromise=null;const s=typeof e.servers=="string"?[e.servers]:e.servers;this.servers=new R0(s,{randomize:!e.noRandomize}),this.closed=He(),this.parser=new _l(this),this.heartbeats=new M0(this,this.options.pingInterval||Sf,this.options.maxPingOut||H0)}resetOutbound(){this.outbound.reset();const e=this.pongs;this.pongs=[];const r=oe.errorForCode(Z.Disconnect);r.stack="",e.forEach(s=>{s.reject(r)}),this.parser=new _l(this),this.infoReceived=!1}dispatchStatus(e){this.listeners.forEach(r=>{r.push(e)})}status(){const e=new nt;return this.listeners.push(e),e}prepare(){this.transport&&this.transport.discard(),this.info=void 0,this.resetOutbound();const e=He();return e.catch(()=>{}),this.pongs.unshift(e),this.connectError=r=>{e.reject(r)},this.transport=g0(),this.transport.closed().then(async r=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError||this.lastError);return}}),e}disconnect(){this.dispatchStatus({type:is.StaleConnection,data:""}),this.transport.disconnect()}reconnect(){return this.connected&&(this.dispatchStatus({type:is.ClientInitiatedReconnect,data:""}),this.transport.disconnect()),Promise.resolve()}async disconnected(e){this.dispatchStatus({type:Ut.Disconnect,data:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{var r;this.dispatchStatus({type:Ut.Reconnect,data:this.servers.getCurrentServer().toString()}),((r=this.lastError)==null?void 0:r.code)===Z.AuthenticationExpired&&(this.lastError=void 0)}).catch(r=>{this._close(r)}):await this._close(e)}async dial(e){const r=this.prepare();let s;try{s=ms(this.options.timeout||2e4);const n=this.transport.connect(e,this.options);await Promise.race([n,s]),(async()=>{try{for await(const i of this.transport)this.parser.parse(i)}catch(i){console.log("reader closed",i)}})().then()}catch(n){r.reject(n)}try{await Promise.race([s,r]),s&&s.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(n){throw s&&s.cancel(),await this.transport.close(n),n}}async _doDial(e){const r=await e.resolve({fn:wf(),debug:this.options.debug,randomize:!this.options.noRandomize});let s=null;for(const n of r)try{s=null,this.dispatchStatus({type:is.Reconnecting,data:n.toString()}),await this.dial(n);return}catch(i){s=i}throw s}dialLoop(){return this.connectPromise===null&&(this.connectPromise=this.dodialLoop(),this.connectPromise.then(()=>{}).catch(()=>{}).finally(()=>{this.connectPromise=null})),this.connectPromise}async dodialLoop(){let e;for(;;){this._closed&&this.servers.clear();const r=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():Of;let s=r;const n=this.selectServer();if(!n||this.abortReconnect)throw e||(this.lastError?this.lastError:oe.errorForCode(Z.ConnectionRefused));const i=Date.now();if(n.lastConnect===0||n.lastConnect+r<=i){n.lastConnect=Date.now();try{await this._doDial(n);break}catch(o){if(e=o,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}n.reconnects++;const a=this.options.maxReconnectAttempts||0;a!==-1&&n.reconnects>=a&&this.servers.removeCurrentServer()}}else s=Math.min(s,n.lastConnect+r-i),await un(s)}}static async connect(e,r){const s=new ri(e,r);return await s.dialLoop(),s}static toError(e){const r=e?e.toLowerCase():"";if(r.indexOf("permissions violation")!==-1){const s=new oe(e,Z.PermissionsViolation),n=e.match(/(Publish|Subscription) to "(\S+)"/);return n&&(s.permissionContext={operation:n[1].toLowerCase(),subject:n[2]}),s}else return r.indexOf("authorization violation")!==-1?new oe(e,Z.AuthorizationViolation):r.indexOf("user authentication expired")!==-1?new oe(e,Z.AuthenticationExpired):r.indexOf("authentication timeout")!==-1?new oe(e,Z.AuthenticationTimeout):new oe(e,Z.ProtocolError)}processMsg(e,r){if(this.inMsgs++,this.inBytes+=r.length,!this.subscriptions.sidCounter)return;const s=this.subscriptions.get(e.sid);s&&(s.received+=1,s.callback&&s.callback(null,new va(e,r,this)),s.max!==void 0&&s.received>=s.max&&s.unsubscribe())}processError(e){const r=ll(e),s=ri.toError(r),n={type:Ut.Error,data:s.code};if(s.isPermissionError()){let i=!1;if(s.permissionContext){n.permissionContext=s.permissionContext;const o=this.subscriptions.getMux();i=(o==null?void 0:o.subject)===s.permissionContext.subject}this.subscriptions.handleError(s),this.muxSubscriptions.handleError(i,s),i&&this.subscriptions.setMux(null)}this.dispatchStatus(n),this.handleError(s)}handleError(e){e.isAuthError()?this.handleAuthError(e):e.isProtocolError()?this.lastError=e:e.isAuthTimeout()&&(this.lastError=e),e.isPermissionError()||(this.lastError=e)}handleAuthError(e){this.lastError&&e.code===this.lastError.code&&this.options.ignoreAuthErrorAbort===!1&&(this.abortReconnect=!0),this.connectError?this.connectError(e):this.disconnect()}processPing(){this.transport.send(Y0)}processPong(){const e=this.pongs.shift();e&&e.resolve()}processInfo(e){const r=JSON.parse(ll(e));this.info=r;const s=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(r);if(!this.infoReceived){this.features.update(qr(r.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:i,lang:o}=this.transport;try{const a=new X0({version:i,lang:o},this.options,r.nonce);r.headers&&(a.headers=!0,a.no_responders=!0);const c=JSON.stringify(a);this.transport.send($s(`CONNECT ${c}${Ln}`)),this.transport.send(wl)}catch(a){this._close(a)}}s&&this.dispatchStatus({type:Ut.Update,data:s}),(r.ldm!==void 0?r.ldm:!1)&&this.dispatchStatus({type:Ut.LDM,data:this.servers.getCurrentServer().toString()})}push(e){switch(e.kind){case ht.MSG:{const{msg:r,data:s}=e;this.processMsg(r,s);break}case ht.OK:break;case ht.ERR:this.processError(e.data);break;case ht.PING:this.processPing();break;case ht.PONG:this.processPong();break;case ht.INFO:this.processInfo(e.data);break}}sendCommand(e,...r){const s=this.outbound.length();let n;typeof e=="string"?n=$s(e):n=e,this.outbound.fill(n,...r),s===0?queueMicrotask(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(e,r=Tt,s){let n;if(r instanceof Uint8Array)n=r;else if(typeof r=="string")n=zr.encode(r);else throw oe.errorForCode(Z.BadPayload);let i=n.length;s=s||{},s.reply=s.reply||"";let o=Tt,a=0;if(s.headers){if(this.info&&!this.info.headers)throw new oe("headers",Z.ServerOptionNotAvailable);o=s.headers.encode(),a=o.length,i=n.length+a}if(this.info&&i>this.info.max_payload)throw oe.errorForCode(Z.MaxPayloadExceeded);this.outBytes+=i,this.outMsgs++;let c;s.headers?(s.reply?c=`HPUB ${e} ${s.reply} ${a} ${i}\r
`:c=`HPUB ${e} ${a} ${i}\r
`,this.sendCommand(c,o,n,ti)):(s.reply?c=`PUB ${e} ${s.reply} ${i}\r
`:c=`PUB ${e} ${i}\r
`,this.sendCommand(c,n,ti))}request(e){return this.initMux(),this.muxSubscriptions.add(e),e}subscribe(e){return this.subscriptions.add(e),this._subunsub(e),e}_sub(e){e.queue?this.sendCommand(`SUB ${e.subject} ${e.queue} ${e.sid}\r
`):this.sendCommand(`SUB ${e.subject} ${e.sid}\r
`)}_subunsub(e){return this._sub(e),e.max&&this.unsubscribe(e,e.max),e}unsubscribe(e,r){this.unsub(e,r),(e.max===void 0||e.received>=e.max)&&this.subscriptions.cancel(e)}unsub(e,r){!e||this.isClosed()||(r?this.sendCommand(`UNSUB ${e.sid} ${r}\r
`):this.sendCommand(`UNSUB ${e.sid}\r
`),e.max=r)}resub(e,r){!e||this.isClosed()||(e.subject=r,this.subscriptions.resub(e),this._sub(e))}flush(e){return e||(e=He()),this.pongs.push(e),this.outbound.fill(wl),this.flushPending(),e}sendSubscriptions(){const e=[];this.subscriptions.all().forEach(r=>{const s=r;s.queue?e.push(`SUB ${s.subject} ${s.queue} ${s.sid}${Ln}`):e.push(`SUB ${s.subject} ${s.sid}${Ln}`)}),e.length&&this.transport.send($s(e.join("")))}async _close(e){this._closed||(this.heartbeats.cancel(),this.connectError&&(this.connectError(e),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close(),this.listeners.forEach(r=>{r.stop()}),this._closed=!0,await this.transport.close(e),await this.closed.resolve(e))}close(){return this._close()}isClosed(){return this._closed}drain(){const e=this.subscriptions.all(),r=[];return e.forEach(s=>{r.push(s.drain())}),Promise.all(r).then(async()=>(this.noMorePublishing=!0,await this.flush(),this.close())).catch(()=>{})}flushPending(){if(!(!this.infoReceived||!this.connected)&&this.outbound.size()){const e=this.outbound.drain();this.transport.send(e)}}initMux(){if(!this.subscriptions.getMux()){const r=this.muxSubscriptions.init(this.options.inboxPrefix),s=new Af(this,`${r}*`);s.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(s),this.subscribe(s)}}selectServer(){const e=this.servers.selectServer();if(e!==void 0)return this.server=e,this.server}getServer(){return this.server}}class Pf{constructor(e,r,s=!0){d(this,"token");d(this,"received");d(this,"ctx");d(this,"requestSubject");d(this,"mux");this.mux=e,this.requestSubject=r,this.received=0,this.token=ln.next(),s&&(this.ctx=new Error)}}class Z0 extends Pf{constructor(r,s,n={maxWait:1e3}){super(r,s);d(this,"callback");d(this,"done");d(this,"timer");d(this,"max");d(this,"opts");if(this.opts=n,typeof this.opts.callback!="function")throw new Error("callback is required");this.callback=this.opts.callback,this.max=typeof n.maxMessages=="number"&&n.maxMessages>0?n.maxMessages:-1,this.done=He(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},n.maxWait)}cancel(r){r&&this.callback(r,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(r,s){r?(this.ctx&&(r.stack+=`

${this.ctx.stack}`),this.cancel(r)):(this.callback(null,s),this.opts.strategy===Qt.Count&&(this.max--,this.max===0&&this.cancel()),this.opts.strategy===Qt.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},this.opts.jitter||300)),this.opts.strategy===Qt.SentinelMsg&&s&&s.data.length===0&&this.cancel())}}class Cf extends Pf{constructor(r,s,n={timeout:1e3},i=!0){super(r,s,i);d(this,"deferred");d(this,"timer");this.deferred=He(),this.timer=ms(n.timeout,i)}resolver(r,s){this.timer&&this.timer.cancel(),r?(this.ctx&&(r.stack+=`

${this.ctx.stack}`),this.deferred.reject(r)):this.deferred.resolve(s),this.cancel()}cancel(r){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(r||oe.errorForCode(Z.Cancelled))}}function os(t){return xa("durable",t)}function bt(t){return xa("stream",t)}function xa(t,e=""){if(e==="")throw Error(`${t} name required`);return[".","*",">","/","\\"," ","	",`
`,"\r"].forEach(s=>{if(e.indexOf(s)!==-1){switch(s){case`
`:s="\\n";break;case"\r":s="\\r";break;case"	":s="\\t";break}throw Error(`invalid ${t} name - ${t} name cannot contain '${s}'`)}}),""}function Ts(t,e=""){if(e==="")throw Error(`${t} name required`);const r=eb(e);if(r.length)throw new Error(`invalid ${t} name - ${t} name ${r}`)}function eb(t=""){if(t==="")throw Error("name required");const e=/^[-\w]+$/g;if(t.match(e)===null){for(const s of t.split(""))if(s.match(e)===null)return`cannot contain '${s}'`}return""}function qe(t){return t*1e6}function Ea(t){return Math.floor(t/1e6)}function jo(t){if(t.data.length>0)return!1;const e=t.headers;return e?e.code>=100&&e.code<200:!1}function Fo(t){var e;return jo(t)&&((e=t.headers)==null?void 0:e.description)==="Idle Heartbeat"}function tb(t,e,r){const s=ur(t,e),n={hdr:1,sid:0,size:0},i=new va(n,Tt,{});return i._headers=s,i._subject=r,i}function as(t){if(t.data.length!==0)return null;const e=t.headers;return e?If(e.code,e.description):null}var Rt;(function(t){t.MaxBatchExceeded="exceeded maxrequestbatch of",t.MaxExpiresExceeded="exceeded maxrequestexpires of",t.MaxBytesExceeded="exceeded maxrequestmaxbytes of",t.MaxMessageSizeExceeded="message size exceeds maxbytes",t.PushConsumer="consumer is push based",t.MaxWaitingExceeded="exceeded maxwaiting",t.IdleHeartbeatMissed="idle heartbeats missed",t.ConsumerDeleted="consumer deleted"})(Rt||(Rt={}));function rb(t){return t.code!==Z.JetStream409?!1:[Rt.MaxBatchExceeded,Rt.MaxExpiresExceeded,Rt.MaxBytesExceeded,Rt.MaxMessageSizeExceeded,Rt.PushConsumer,Rt.IdleHeartbeatMissed,Rt.ConsumerDeleted].find(r=>t.message.indexOf(r)!==-1)!==void 0}function If(t,e=""){if(t<300)return null;switch(e=e.toLowerCase(),t){case 404:return new oe(e,Z.JetStream404NoMessages);case 408:return new oe(e,Z.JetStream408RequestTimeout);case 409:{const r=e.startsWith(Rt.IdleHeartbeatMissed)?Z.JetStreamIdleHeartBeat:Z.JetStream409;return new oe(e,r)}case 503:return oe.errorForCode(Z.JetStreamNotEnabled,new Error(e));default:return e===""&&(e=Z.Unknown),new oe(e,`${t}`)}}const sb="$JS.API";function nb(t){return t=t||{},t.domain&&(t.apiPrefix=`$JS.${t.domain}.API`,delete t.domain),Ai({apiPrefix:sb,timeout:5e3},t)}class fn{constructor(e,r){d(this,"nc");d(this,"opts");d(this,"prefix");d(this,"timeout");d(this,"jc");this.nc=e,this.opts=nb(r),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=Bt()}getOptions(){return Object.assign({},this.opts)}_parseOpts(){let e=this.opts.apiPrefix;if(!e||e.length===0)throw new Error("invalid empty prefix");e[e.length-1]==="."&&(e=e.substr(0,e.length-1)),this.opts.apiPrefix=e}async _request(e,r=null,s){s=s||{},s.timeout=this.timeout;let n=Tt;r&&(n=this.jc.encode(r));const i=await this.nc.request(e,n,s);return this.parseJsResponse(i)}async findStream(e){const r={subject:e},n=await this._request(`${this.prefix}.STREAM.NAMES`,r);if(!n.streams||n.streams.length!==1)throw new Error("no stream matches subject");return n.streams[0]}getConnection(){return this.nc}parseJsResponse(e){const r=this.jc.decode(e.data),s=r;if(s.error){const n=If(s.error.code,s.error.description);if(n!==null)throw n.api_error=s.error,n}return r}}class ib{static encode(e){if(typeof e=="string")return btoa(e);const r=Array.from(e);return btoa(String.fromCharCode(...r))}static decode(e,r=!1){const s=atob(e);return r?Uint8Array.from(s,n=>n.charCodeAt(0)):s}}class Bs{static encode(e){return Bs.toB64URLEncoding(ib.encode(e))}static decode(e,r=!1){return Bs.decode(Bs.fromB64URLEncoding(e),r)}static toB64URLEncoding(e){return e.replace(/\+/g,"-").replace(/\//g,"_")}static fromB64URLEncoding(e){return e.replace(/_/g,"/").replace(/-/g,"+")}}var $o;(function(t){t.Limits="limits",t.Interest="interest",t.Workqueue="workqueue"})($o||($o={}));var Zs;(function(t){t.Old="old",t.New="new"})(Zs||(Zs={}));var Uo;(function(t){t.File="file",t.Memory="memory"})(Uo||(Uo={}));var Ke;(function(t){t.All="all",t.Last="last",t.New="new",t.StartSequence="by_start_sequence",t.StartTime="by_start_time",t.LastPerSubject="last_per_subject"})(Ke||(Ke={}));var Ze;(function(t){t.None="none",t.All="all",t.Explicit="explicit",t.NotSet=""})(Ze||(Ze={}));var gs;(function(t){t.Instant="instant",t.Original="original"})(gs||(gs={}));var Cr;(function(t){t.None="none",t.S2="s2"})(Cr||(Cr={}));var si;(function(t){t.CreateOrUpdate="",t.Update="update",t.Create="create"})(si||(si={}));function ob(t,e={}){return Object.assign({name:t,deliver_policy:Ke.All,ack_policy:Ze.Explicit,ack_wait:qe(30*1e3),replay_policy:gs.Instant},e)}var vl;(function(t){t.API="api_audit",t.StreamAction="stream_action",t.ConsumerAction="consumer_action",t.SnapshotCreate="snapshot_create",t.SnapshotComplete="snapshot_complete",t.RestoreCreate="restore_create",t.RestoreComplete="restore_complete",t.MaxDeliver="max_deliver",t.Terminated="terminated",t.Ack="consumer_ack",t.StreamLeaderElected="stream_leader_elected",t.StreamQuorumLost="stream_quorum_lost",t.ConsumerLeaderElected="consumer_leader_elected",t.ConsumerQuorumLost="consumer_quorum_lost"})(vl||(vl={}));var dt;(function(t){t.StreamSourceHdr="Nats-Stream-Source",t.LastConsumerSeqHdr="Nats-Last-Consumer",t.LastStreamSeqHdr="Nats-Last-Stream",t.ConsumerStalledHdr="Nats-Consumer-Stalled",t.MessageSizeHdr="Nats-Msg-Size",t.RollupHdr="Nats-Rollup",t.RollupValueSubject="sub",t.RollupValueAll="all",t.PendingMessagesHdr="Nats-Pending-Messages",t.PendingBytesHdr="Nats-Pending-Bytes"})(dt||(dt={}));var $t;(function(t){t.LastValue="",t.AllHistory="history",t.UpdatesOnly="updates"})($t||($t={}));var es;(function(t){t.Stream="Nats-Stream",t.Sequence="Nats-Sequence",t.TimeStamp="Nats-Time-Stamp",t.Subject="Nats-Subject"})(es||(es={}));var xl;(function(t){t.Stream="Nats-Stream",t.Subject="Nats-Subject",t.Sequence="Nats-Sequence",t.LastSequence="Nats-Last-Sequence",t.Size="Nats-Msg-Size"})(xl||(xl={}));const kt="KV_";class ab{constructor(e){d(this,"config");d(this,"ordered");d(this,"mack");d(this,"stream");d(this,"callbackFn");d(this,"max");d(this,"qname");d(this,"isBind");d(this,"filters");this.stream="",this.mack=!1,this.ordered=!1,this.config=ob("",e||{})}getOpts(){var r;const e={};if(e.config=Object.assign({},this.config),e.config.filter_subject&&(this.filterSubject(e.config.filter_subject),e.config.filter_subject=void 0),e.config.filter_subjects&&((r=e.config.filter_subjects)==null||r.forEach(s=>{this.filterSubject(s)}),e.config.filter_subjects=void 0),e.mack=this.mack,e.stream=this.stream,e.callbackFn=this.callbackFn,e.max=this.max,e.queue=this.qname,e.ordered=this.ordered,e.config.ack_policy=e.ordered?Ze.None:e.config.ack_policy,e.isBind=e.isBind||!1,this.filters)switch(this.filters.length){case 0:break;case 1:e.config.filter_subject=this.filters[0];break;default:e.config.filter_subjects=this.filters}return e}description(e){return this.config.description=e,this}deliverTo(e){return this.config.deliver_subject=e,this}durable(e){return os(e),this.config.durable_name=e,this}startSequence(e){if(e<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=Ke.StartSequence,this.config.opt_start_seq=e,this}startTime(e){return this.config.deliver_policy=Ke.StartTime,this.config.opt_start_time=e.toISOString(),this}deliverAll(){return this.config.deliver_policy=Ke.All,this}deliverLastPerSubject(){return this.config.deliver_policy=Ke.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=Ke.Last,this}deliverNew(){return this.config.deliver_policy=Ke.New,this}startAtTimeDelta(e){return this.startTime(new Date(Date.now()-e)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=Ze.None,this}ackAll(){return this.config.ack_policy=Ze.All,this}ackExplicit(){return this.config.ack_policy=Ze.Explicit,this}ackWait(e){return this.config.ack_wait=qe(e),this}maxDeliver(e){return this.config.max_deliver=e,this}filterSubject(e){return this.filters=this.filters||[],this.filters.push(e),this}replayInstantly(){return this.config.replay_policy=gs.Instant,this}replayOriginal(){return this.config.replay_policy=gs.Original,this}sample(e){if(e=Math.trunc(e),e<0||e>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${e}%`,this}limit(e){return this.config.rate_limit_bps=e,this}maxWaiting(e){return this.config.max_waiting=e,this}maxAckPending(e){return this.config.max_ack_pending=e,this}idleHeartbeat(e){return this.config.idle_heartbeat=qe(e),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(e){return this.queue(e),this}manualAck(){return this.mack=!0,this}maxMessages(e){return this.max=e,this}callback(e){return this.callbackFn=e,this}queue(e){return this.qname=e,this.config.deliver_group=e,this}orderedConsumer(){return this.ordered=!0,this}bind(e,r){return this.stream=e,this.config.durable_name=r,this.isBind=!0,this}bindStream(e){return this.stream=e,this}inactiveEphemeralThreshold(e){return this.config.inactive_threshold=qe(e),this}maxPullBatch(e){return this.config.max_batch=e,this}maxPullRequestExpires(e){return this.config.max_expires=qe(e),this}memory(){return this.config.mem_storage=!0,this}numReplicas(e){return this.config.num_replicas=e,this}}function cr(t){return new ab(t)}function El(t){return typeof t.getOpts=="function"}function Sl(t){const e=t.length;let r=t.indexOf("=");r===-1&&(r=e);const s=r===e?0:4-r%4;return[r,s]}function cb(t,e,r=!1){function s(o,a){return Math.floor((o+a)*3/4-a)}function n(o){return t[o>>18&63]+t[o>>12&63]+t[o>>6&63]+t[o&63]}function i(o,a,c){const l=new Array((c-a)/3);for(let u=a,f=0;u<c;u+=3)l[f++]=n((o[u]<<16)+(o[u+1]<<8)+o[u+2]);return l.join("")}return{byteLength(o){return s.apply(null,Sl(o))},toUint8Array(o){const[a,c]=Sl(o),l=new Uint8Array(s(a,c)),u=c?a-4:a;let f,m=0,w;for(w=0;w<u;w+=4)f=e[o.charCodeAt(w)]<<18|e[o.charCodeAt(w+1)]<<12|e[o.charCodeAt(w+2)]<<6|e[o.charCodeAt(w+3)],l[m++]=f>>16&255,l[m++]=f>>8&255,l[m++]=f&255;return c===2?(f=e[o.charCodeAt(w)]<<2|e[o.charCodeAt(w+1)]>>4,l[m++]=f&255):c===1&&(f=e[o.charCodeAt(w)]<<10|e[o.charCodeAt(w+1)]<<4|e[o.charCodeAt(w+2)]>>2,l[m++]=f>>8&255,l[m++]=f&255),l},fromUint8Array(o){const c=o.length,l=c%3,u=c-l,f=new Array(Math.ceil(u/16383)+(l?1:0));let m=0,w;for(let T=0;T<u;T+=16383)w=T+16383,f[m++]=i(o,T,w>u?u:w);let E;return l===1?(E=o[u],f[m]=t[E>>2]+t[E<<4&63],r||(f[m]+="==")):l===2&&(E=o[u]<<8|o[u+1]&255,f[m]=t[E>>10]+t[E>>4&63]+t[E<<2&63],r||(f[m]+="=")),f.join("")}}}const Tf=[],kf=[],so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let t=0,e=so.length;t<e;++t)Tf[t]=so[t],kf[so.charCodeAt(t)]=t;const{byteLength:vy,toUint8Array:lb,fromUint8Array:ub}=cb(Tf,kf,!0),fb=new TextDecoder,hb=new TextEncoder;function db(t){return t.reduce((e,r)=>`${e}${r<16?"0":""}${r.toString(16)}`,"")}function mb(t){const e=t.length;if(e%2||!/^[0-9a-fA-F]+$/.test(t))throw new TypeError("Invalid hex string.");t=t.toLowerCase();const r=new Uint8Array(Math.floor(e/2)),s=e/2;for(let n=0;n<s;++n)r[n]=parseInt(t.substr(n*2,2),16);return r}function pb(t,e="utf8"){if(/^utf-?8$/i.test(e))return fb.decode(t);if(/^base64$/i.test(e))return ub(t);if(/^hex(?:adecimal)?$/i.test(e))return db(t);throw new TypeError("Unsupported string encoding.")}function gb(t,e="utf8"){if(/^utf-?8$/i.test(e))return hb.encode(t);if(/^base64$/i.test(e))return lb(t);if(/^hex(?:adecimal)?$/i.test(e))return mb(t);throw new TypeError("Unsupported string encoding.")}class Ol{constructor(){d(this,"hashSize",32);d(this,"_buf");d(this,"_bufIdx");d(this,"_count");d(this,"_K");d(this,"_H");d(this,"_finalized");this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(e,r){if(e===null)throw new TypeError("msg must be a string or Uint8Array.");typeof e=="string"&&(e=gb(e,r));for(let n=0,i=e.length;n<i;n++)this._buf[this._bufIdx++]=e[n],this._bufIdx===64&&(this._transform(),this._bufIdx=0);const s=this._count;return(s[0]+=e.length<<3)<e.length<<3&&s[1]++,s[1]+=e.length>>>29,this}digest(e){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const r=this._buf;let s=this._bufIdx;for(r[s++]=128;s!==56;)s===64&&(this._transform(),s=0),r[s++]=0;const n=this._count;r[56]=n[1]>>>24&255,r[57]=n[1]>>>16&255,r[58]=n[1]>>>8&255,r[59]=n[1]>>>0&255,r[60]=n[0]>>>24&255,r[61]=n[0]>>>16&255,r[62]=n[0]>>>8&255,r[63]=n[0]>>>0&255,this._transform();const i=new Uint8Array(32);for(let o=0;o<8;o++)i[(o<<2)+0]=this._H[o]>>>24&255,i[(o<<2)+1]=this._H[o]>>>16&255,i[(o<<2)+2]=this._H[o]>>>8&255,i[(o<<2)+3]=this._H[o]>>>0&255;return this.init(),e?pb(i,e):i}_transform(){const e=this._H;let r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],a=e[5],c=e[6],l=e[7];const u=new Uint32Array(16);let f;for(f=0;f<16;f++)u[f]=this._buf[(f<<2)+3]|this._buf[(f<<2)+2]<<8|this._buf[(f<<2)+1]<<16|this._buf[f<<2]<<24;for(f=0;f<64;f++){let m;if(f<16)m=u[f];else{let w=u[f+1&15],E=u[f+14&15];m=u[f&15]=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+u[f&15]+u[f+9&15]|0}m=m+l+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(c^o&(a^c))+this._K[f]|0,l=c,c=a,a=o,o=i+m,i=n,n=s,s=r,r=m+(s&n^i&(s^n))+(s>>>2^s>>>13^s>>>22^s<<30^s<<19^s<<10)|0}e[0]=e[0]+r|0,e[1]=e[1]+s|0,e[2]=e[2]+n|0,e[3]=e[3]+i|0,e[4]=e[4]+o|0,e[5]=e[5]+a|0,e[6]=e[6]+c|0,e[7]=e[7]+l|0}}class ks{constructor(e,r,s,n){d(this,"err");d(this,"offset");d(this,"pageInfo");d(this,"subject");d(this,"jsm");d(this,"filter");d(this,"payload");if(!e)throw new Error("subject is required");this.subject=e,this.jsm=s,this.offset=0,this.pageInfo={},this.filter=r,this.payload=n||{}}async next(){if(this.err)return[];if(this.pageInfo&&this.offset>=this.pageInfo.total)return[];const e={offset:this.offset};this.payload&&Object.assign(e,this.payload);try{const r=await this.jsm._request(this.subject,e,{timeout:this.jsm.timeout});return this.pageInfo=r,this.offset+=this.countResponse(r),this.filter(r)}catch(r){throw this.err=r,r}}countResponse(e){var r;switch(e==null?void 0:e.type){case"io.nats.jetstream.api.v1.stream_names_response":case"io.nats.jetstream.api.v1.stream_list_response":return e.streams.length;case"io.nats.jetstream.api.v1.consumer_list_response":return e.consumers.length;default:return console.error(`jslister.ts: unknown API response for paged output: ${e==null?void 0:e.type}`),((r=e.streams)==null?void 0:r.length)||0}return 0}async*[Symbol.asyncIterator](){let e=await this.next();for(;e.length>0;){for(const r of e)yield r;e=await this.next()}}}class Sa extends fn{constructor(e,r){super(e,r)}async add(e,r,s=si.Create){if(bt(e),r.deliver_group&&r.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(r.deliver_group&&r.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const n={};n.config=r,n.stream_name=e,n.action=s,n.config.durable_name&&os(n.config.durable_name);const i=this.nc;let{min:o,ok:a}=i.features.get(Ie.JS_NEW_CONSUMER_CREATE_API);const c=r.name===""?void 0:r.name;if(c&&!a)throw new Error(`consumer 'name' requires server ${o}`);if(c)try{xa("name",c)}catch(m){const w=m.message,E=w.indexOf("cannot contain");throw E!==-1?new Error(`consumer 'name' ${w.substring(E)}`):m}let l,u="";if(Array.isArray(r.filter_subjects)){const{min:m,ok:w}=i.features.get(Ie.JS_MULTIPLE_CONSUMER_FILTER);if(!w)throw new Error(`consumer 'filter_subjects' requires server ${m}`);a=!1}if(r.metadata){const{min:m,ok:w}=i.features.get(Ie.JS_STREAM_CONSUMER_METADATA);if(!w)throw new Error(`consumer 'metadata' requires server ${m}`)}if(a&&(u=r.name??r.durable_name??""),u!==""){let m=r.filter_subject??void 0;m===">"&&(m=void 0),l=m!==void 0?`${this.prefix}.CONSUMER.CREATE.${e}.${u}.${m}`:`${this.prefix}.CONSUMER.CREATE.${e}.${u}`}else l=r.durable_name?`${this.prefix}.CONSUMER.DURABLE.CREATE.${e}.${r.durable_name}`:`${this.prefix}.CONSUMER.CREATE.${e}`;return await this._request(l,n)}async update(e,r,s){const n=await this.info(e,r),i=s;return this.add(e,Object.assign(n.config,i),si.Update)}async info(e,r){return bt(e),os(r),await this._request(`${this.prefix}.CONSUMER.INFO.${e}.${r}`)}async delete(e,r){return bt(e),os(r),(await this._request(`${this.prefix}.CONSUMER.DELETE.${e}.${r}`)).success}list(e){bt(e);const r=n=>n.consumers,s=`${this.prefix}.CONSUMER.LIST.${e}`;return new ks(s,r,this)}}const Al=Uint8Array.of(43,65,67,75),_b=Uint8Array.of(45,78,65,75),Cs=Uint8Array.of(43,87,80,73),bb=Uint8Array.of(43,78,88,84),yb=Uint8Array.of(43,84,69,82,77),wb=Uint8Array.of(32);function en(t){return new xb(t)}function vb(t){const e=t.split(".");if(e.length===9&&e.splice(2,0,"_",""),e.length<11||e[0]!=="$JS"||e[1]!=="ACK")throw new Error("not js message");const r={};return r.domain=e[2]==="_"?"":e[2],r.account_hash=e[3],r.stream=e[4],r.consumer=e[5],r.redeliveryCount=parseInt(e[6],10),r.redelivered=r.redeliveryCount>1,r.streamSequence=parseInt(e[7],10),r.deliverySequence=parseInt(e[8],10),r.timestampNanos=parseInt(e[9],10),r.pending=parseInt(e[10],10),r}class xb{constructor(e){d(this,"msg");d(this,"di");d(this,"didAck");this.msg=e,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=vb(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(e){this.didAck||(this.didAck=!this.isWIP(e),this.msg.respond(e))}isWIP(e){return e.length===4&&e[0]===Cs[0]&&e[1]===Cs[1]&&e[2]===Cs[2]&&e[3]===Cs[3]}async ackAck(){var e;if(!this.didAck&&(this.didAck=!0,this.msg.reply)){const s=this.msg.publisher,n=!((e=s.options)!=null&&e.noAsyncTraces),i=new Cf(s.muxSubscriptions,this.msg.reply,{timeout:1e3},n);s.request(i);try{s.publish(this.msg.reply,Al,{reply:`${s.muxSubscriptions.baseInbox}${i.token}`})}catch(o){i.cancel(o)}try{return await Promise.race([i.timer,i.deferred]),!0}catch(o){i.cancel(o)}}return!1}ack(){this.doAck(Al)}nak(e){let r=_b;e&&(r=Mo().encode(`-NAK ${JSON.stringify({delay:qe(e)})}`)),this.doAck(r)}working(){this.doAck(Cs)}next(e,r={batch:1}){const s={};s.batch=r.batch||1,s.no_wait=r.no_wait||!1,r.expires&&r.expires>0&&(s.expires=qe(r.expires));const n=Bt().encode(s),i=ps.concat(bb,wb,n),o=e?{reply:e}:void 0;this.msg.respond(i,o)}term(e=""){let r=yb;(e==null?void 0:e.length)>0&&(r=Mo().encode(`+TERM ${e}`)),this.doAck(r)}json(){return this.msg.json()}string(){return this.msg.string()}}function Qr(t,e,r=!1){if(r===!0&&!t)throw oe.errorForCode(Z.ApiError,new Error(`${e} is not a function`));if(t&&typeof t!="function")throw oe.errorForCode(Z.ApiError,new Error(`${e} is not a function`))}class Eb extends nt{constructor(r,s,n){super();d(this,"sub");d(this,"adapter");d(this,"subIterDone");Qr(n.adapter,"adapter",!0),this.adapter=n.adapter,n.callback&&Qr(n.callback,"callback"),this.noIterator=typeof n.callback=="function",n.ingestionFilterFn&&(Qr(n.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=n.ingestionFilterFn),n.protocolFilterFn&&(Qr(n.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=n.protocolFilterFn),n.dispatchedFn&&(Qr(n.dispatchedFn,"dispatchedFn"),this.dispatchedFn=n.dispatchedFn),n.cleanupFn&&Qr(n.cleanupFn,"cleanupFn");let i=(u,f)=>{this.callback(u,f)};if(n.callback){const u=n.callback;i=(f,m)=>{const[w,E]=this.adapter(f,m);if(w){u(w,null);return}const{ingest:T}=this.ingestionFilterFn?this.ingestionFilterFn(E,this):{ingest:!0};T&&(!this.protocolFilterFn||this.protocolFilterFn(E))&&(u(w,E),this.dispatchedFn&&E&&this.dispatchedFn(E))}}const{max:o,queue:a,timeout:c}=n,l={queue:a,timeout:c,callback:i};o&&o>0&&(l.max=o),this.sub=r.subscribe(s,l),n.cleanupFn&&(this.sub.cleanupFn=n.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=He(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(async u=>{await u.closed,this.stop()})(this.sub).then().catch()}unsubscribe(r){this.sub.unsubscribe(r)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(r,s){this.sub.cancelTimeout();const[n,i]=this.adapter(r,s);n&&this.stop(n),i&&this.push(i)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}class Oa{constructor(e,r,s={maxOut:2}){d(this,"interval");d(this,"maxOut");d(this,"cancelAfter");d(this,"timer");d(this,"autoCancelTimer");d(this,"last");d(this,"missed");d(this,"count");d(this,"callback");this.interval=e,this.maxOut=(s==null?void 0:s.maxOut)||2,this.cancelAfter=(s==null?void 0:s.cancelAfter)||0,this.last=Date.now(),this.missed=0,this.count=0,this.callback=r,this._schedule()}cancel(){this.autoCancelTimer&&clearTimeout(this.autoCancelTimer),this.timer&&clearInterval(this.timer),this.timer=0,this.autoCancelTimer=0}work(){this.last=Date.now(),this.missed=0}_change(e,r=0,s=2){this.interval=e,this.maxOut=s,this.cancelAfter=r,this.restart()}restart(){this.cancel(),this._schedule()}_schedule(){this.cancelAfter>0&&(this.autoCancelTimer=setTimeout(()=>{this.cancel()},this.cancelAfter)),this.timer=setInterval(()=>{if(this.count++,Date.now()-this.last>this.interval&&this.missed++,this.missed>=this.maxOut)try{this.callback(this.missed)===!0&&this.cancel()}catch(e){console.log(e)}},this.interval)}}var zt;(function(t){t[t.Unset=-1]="Unset",t[t.Consume=0]="Consume",t[t.Fetch=1]="Fetch"})(zt||(zt={}));var _s;(function(t){t.HeartbeatsMissed="heartbeats_missed",t.ConsumerNotFound="consumer_not_found",t.OrderedConsumerRecreated="ordered_consumer_recreated"})(_s||(_s={}));var qs;(function(t){t.DebugEvent="debug",t.Discard="discard",t.Next="next"})(qs||(qs={}));class no extends nt{constructor(r,s,n=!1){super();d(this,"consumer");d(this,"opts");d(this,"sub");d(this,"monitor");d(this,"pending");d(this,"inbox");d(this,"refilling");d(this,"stack");d(this,"pong");d(this,"callback");d(this,"timeout");d(this,"cleanupHandler");d(this,"listeners");d(this,"statusIterator");d(this,"forOrderedConsumer");d(this,"resetHandler");this.consumer=r,this.opts=this.parseOptions(s,n),this.callback=s.callback||null,this.noIterator=typeof this.callback=="function",this.monitor=null,this.pong=null,this.pending={msgs:0,bytes:0,requests:0},this.refilling=n,this.stack=new Error().stack.split(`
`).slice(1).join(`
`),this.timeout=null,this.inbox=Zt(r.api.nc.options.inboxPrefix),this.listeners=[],this.forOrderedConsumer=!1,this.start()}start(){const{max_messages:r,max_bytes:s,idle_heartbeat:n,threshold_bytes:i,threshold_messages:o}=this.opts;this.closed().then(()=>{if(this.cleanupHandler)try{this.cleanupHandler()}catch{}});const{sub:a}=this;a&&a.unsubscribe(),this.sub=this.consumer.api.nc.subscribe(this.inbox,{callback:(c,l)=>{var f,m,w,E;if(c){this.stop();return}if((f=this.monitor)==null||f.work(),l.subject===this.inbox){if(Fo(l))return;const T=(m=l.headers)==null?void 0:m.code,M=((E=(w=l.headers)==null?void 0:w.description)==null?void 0:E.toLowerCase())||"unknown",{msgsLeft:j,bytesLeft:$}=this.parseDiscard(l.headers);if(j>0||$>0)this.pending.msgs-=j,this.pending.bytes-=$,this.pending.requests--,this.notify(qs.Discard,{msgsLeft:j,bytesLeft:$});else{const z=()=>{const B=new oe(M,`${T}`);return B.stack+=`

${this.stack}`,B};if(T===400){const B=z();this._push(()=>{this.stop(B)})}else if(T===409&&M==="consumer deleted"){const B=z();this.stop(B)}else this.notify(qs.DebugEvent,`${T} ${M}`)}}else this._push(en(l)),this.received++,this.pending.msgs&&this.pending.msgs--,this.pending.bytes&&(this.pending.bytes-=l.size());if(this.pending.msgs===0&&this.pending.bytes===0&&(this.pending.requests=0),this.refilling){if(r&&this.pending.msgs<=o||s&&this.pending.bytes<=i){const T=this.pullOptions();this.pull(T)}}else this.pending.requests===0&&this._push(()=>{this.stop()})}}),this.sub.closed.then(()=>{this.sub.draining&&this._push(()=>{this.stop()})}),n&&(this.monitor=new Oa(n,c=>(this.notify(_s.HeartbeatsMissed,c),this.resetPending().then(()=>{}).catch(()=>{}),!1),{maxOut:2})),(async()=>{var l;const c=this.consumer.api.nc.status();this.statusIterator=c;for await(const u of c)switch(u.type){case Ut.Disconnect:(l=this.monitor)==null||l.cancel();break;case Ut.Reconnect:this.resetPending().then(f=>{var m;f&&((m=this.monitor)==null||m.restart())}).catch(()=>{});break}})(),this.pull(this.pullOptions())}_push(r){if(!this.callback)super.push(r);else{const s=typeof r=="function"?r:null;try{s?s():this.callback(r)}catch(n){this.stop(n)}}}notify(r,s){this.listeners.length>0&&this.listeners.forEach(n=>{n.done||n.push({type:r,data:s})})}async resetPending(){let r=0;const s=bf();let n=0;for(;;){if(this.consumer.api.nc.isClosed())return console.error("aborting resetPending - connection is closed"),!1;try{return await this.consumer.info(),r=0,this.pending.msgs=0,this.pending.bytes=0,this.pending.requests=0,this.pull(this.pullOptions()),!0}catch(i){if(i.message==="consumer not found"){if(r++,this.notify(_s.ConsumerNotFound,r),this.resetHandler)try{this.resetHandler()}catch{}if(this.forOrderedConsumer)return!1}else r=0;const o=s.backoff(n);await Promise.race([un(o),this.consumer.api.nc.closed()]),n++}}}pull(r){this.pending.bytes+=r.max_bytes??0,this.pending.msgs+=r.batch??0,this.pending.requests++;const s=this.consumer.api.nc;this._push(()=>{s.publish(`${this.consumer.api.prefix}.CONSUMER.MSG.NEXT.${this.consumer.stream}.${this.consumer.name}`,this.consumer.api.jc.encode(r),{reply:this.inbox}),this.notify(qs.Next,r)})}pullOptions(){const r=this.opts.max_messages-this.pending.msgs,s=this.opts.max_bytes-this.pending.bytes,n=qe(this.opts.idle_heartbeat),i=qe(this.opts.expires);return{batch:r,max_bytes:s,idle_heartbeat:n,expires:i}}parseDiscard(r){const s={msgsLeft:0,bytesLeft:0},n=r==null?void 0:r.get(dt.PendingMessagesHdr);n&&(s.msgsLeft=parseInt(n));const i=r==null?void 0:r.get(dt.PendingBytesHdr);return i&&(s.bytesLeft=parseInt(i)),s}trackTimeout(r){this.timeout=r}close(){return this.stop(),this.iterClosed}closed(){return this.iterClosed}clearTimers(){var r,s;(r=this.monitor)==null||r.cancel(),this.monitor=null,(s=this.timeout)==null||s.cancel(),this.timeout=null}setCleanupHandler(r){this.cleanupHandler=r}stop(r){var s,n;(s=this.sub)==null||s.unsubscribe(),this.clearTimers(),(n=this.statusIterator)==null||n.stop(),this._push(()=>{super.stop(r),this.listeners.forEach(i=>{i.stop()})})}parseOptions(r,s=!1){const n=r||{};if(n.max_messages=n.max_messages||0,n.max_bytes=n.max_bytes||0,n.max_messages!==0&&n.max_bytes!==0)throw new Error("only specify one of max_messages or max_bytes");if(n.max_messages===0&&(n.max_messages=100),n.expires=n.expires||3e4,n.expires<1e3)throw new Error("expires should be at least 1000ms");if(n.idle_heartbeat=n.idle_heartbeat||n.expires/2,n.idle_heartbeat=n.idle_heartbeat>3e4?3e4:n.idle_heartbeat,s){const i=Math.round(n.max_messages*.75)||1;n.threshold_messages=n.threshold_messages||i;const o=Math.round(n.max_bytes*.75)||1;n.threshold_bytes=n.threshold_bytes||o}return n}status(){const r=new nt;return this.listeners.push(r),Promise.resolve(r)}}class Pl extends nt{constructor(){super();d(this,"src");d(this,"listeners");this.listeners=[]}setSource(r){this.src&&(this.src.resetHandler=void 0,this.src.setCleanupHandler(),this.src.stop()),this.src=r,this.src.setCleanupHandler(()=>{this.close().catch()}),(async()=>{const s=await this.src.status();for await(const n of s)this.notify(n.type,n.data)})().catch(()=>{})}notify(r,s){this.listeners.length>0&&this.listeners.forEach(n=>{n.done||n.push({type:r,data:s})})}stop(r){var s;(s=this.src)==null||s.stop(r),super.stop(r),this.listeners.forEach(n=>{n.stop()})}close(){return this.stop(),this.iterClosed}status(){const r=new nt;return this.listeners.push(r),Promise.resolve(r)}}class Rf{constructor(e,r){d(this,"api");d(this,"_info");d(this,"stream");d(this,"name");this.api=e,this._info=r,this.stream=r.stream_name,this.name=r.name}consume(e={max_messages:100,expires:3e4}){return Promise.resolve(new no(this,e,!0))}fetch(e={max_messages:100,expires:3e4}){const r=new no(this,e,!1),s=Math.round(r.opts.expires*1.05),n=ms(s);return r.closed().then(()=>{n.cancel()}),n.catch(()=>{r.close().catch()}),r.trackTimeout(n),Promise.resolve(r)}next(e={expires:3e4}){const r=He(),s=e;s.max_messages=1;const n=new no(this,s,!1),i=Math.round(n.opts.expires*1.05);i>=6e4&&(async()=>{for await(const a of await n.status())if(a.type===_s.HeartbeatsMissed&&a.data>=2){r.reject(new Error("consumer missed heartbeats"));break}})().catch(),(async()=>{for await(const a of n){r.resolve(a);break}})().catch();const o=ms(i);return n.closed().then(()=>{r.resolve(null),o.cancel()}).catch(a=>{r.reject(a)}),o.catch(a=>{r.resolve(null),n.close().catch()}),n.trackTimeout(o),r}delete(){const{stream_name:e,name:r}=this._info;return this.api.delete(e,r)}info(e=!1){if(e)return Promise.resolve(this._info);const{stream_name:r,name:s}=this._info;return this.api.info(r,s).then(n=>(this._info=n,this._info))}}class Sb{constructor(e,r,s={}){d(this,"api");d(this,"consumerOpts");d(this,"consumer");d(this,"opts");d(this,"cursor");d(this,"stream");d(this,"namePrefix");d(this,"serial");d(this,"currentConsumer");d(this,"userCallback");d(this,"iter");d(this,"type");d(this,"startSeq");this.api=e,this.stream=r,this.cursor={stream_seq:1,deliver_seq:0},this.namePrefix=ln.next(),this.serial=0,this.currentConsumer=null,this.userCallback=null,this.iter=null,this.type=zt.Unset,this.consumerOpts=s,this.startSeq=this.consumerOpts.opt_start_seq||0,this.cursor.stream_seq=this.startSeq>0?this.startSeq-1:0}getConsumerOpts(e){this.serial++;const r=`${this.namePrefix}_${this.serial}`;e=e===0?1:e;const s={name:r,deliver_policy:Ke.StartSequence,opt_start_seq:e,ack_policy:Ze.None,inactive_threshold:qe(5*60*1e3),num_replicas:1};return this.consumerOpts.headers_only===!0&&(s.headers_only=!0),Array.isArray(this.consumerOpts.filterSubjects)&&(s.filter_subjects=this.consumerOpts.filterSubjects),typeof this.consumerOpts.filterSubjects=="string"&&(s.filter_subject=this.consumerOpts.filterSubjects),e===this.startSeq+1&&(s.deliver_policy=this.consumerOpts.deliver_policy||Ke.StartSequence,(this.consumerOpts.deliver_policy===Ke.LastPerSubject||this.consumerOpts.deliver_policy===Ke.New||this.consumerOpts.deliver_policy===Ke.Last)&&(delete s.opt_start_seq,s.deliver_policy=this.consumerOpts.deliver_policy),s.deliver_policy===Ke.LastPerSubject&&typeof s.filter_subjects>"u"&&typeof s.filter_subject>"u"&&(s.filter_subject=">"),this.consumerOpts.opt_start_time&&(delete s.opt_start_seq,s.deliver_policy=Ke.StartTime,s.opt_start_time=this.consumerOpts.opt_start_time),this.consumerOpts.inactive_threshold&&(s.inactive_threshold=qe(this.consumerOpts.inactive_threshold))),s}async resetConsumer(e=0){var i,o;(i=this.consumer)==null||i.delete().catch(()=>{}),e=e===0?1:e,this.cursor.deliver_seq=0;const r=this.getConsumerOpts(e);r.max_deliver=1,r.mem_storage=!0;const s=bf();let n;for(let a=0;;a++)try{n=await this.api.add(this.stream,r),(o=this.iter)==null||o.notify(_s.OrderedConsumerRecreated,n.name);break}catch(c){if(e===0&&a>=30)throw c;await un(s.backoff(a+1))}return n}internalHandler(e){return r=>{var n;if(this.serial!==e)return;const s=r.info.deliverySequence;if(s!==this.cursor.deliver_seq+1){this.reset(this.opts);return}this.cursor.deliver_seq=s,this.cursor.stream_seq=r.info.streamSequence,this.userCallback?this.userCallback(r):(n=this.iter)==null||n.push(r)}}async reset(e={max_messages:100,expires:3e4},r=!1){this.currentConsumer=await this.resetConsumer(this.cursor.stream_seq+1),this.iter===null&&(this.iter=new Pl),this.consumer=new Rf(this.api,this.currentConsumer);const s=e;s.callback=this.internalHandler(this.serial);let n=null;if(this.type===zt.Fetch&&r)n=await this.consumer.fetch(e);else if(this.type===zt.Consume)n=await this.consumer.consume(e);else return Promise.reject("reset called with unset consumer type");const i=n;return i.forOrderedConsumer=!0,i.resetHandler=()=>{this.reset(this.opts)},this.iter.setSource(i),this.iter}consume(e={max_messages:100,expires:3e4}){if(this.type===zt.Fetch)return Promise.reject(new Error("ordered consumer initialized as fetch"));if(this.type===zt.Consume)return Promise.reject(new Error("ordered consumer doesn't support concurrent consume"));const{callback:r}=e;return r&&(this.userCallback=r),this.type=zt.Consume,this.opts=e,this.reset(e)}fetch(e={max_messages:100,expires:3e4}){var s;if(this.type===zt.Consume)return Promise.reject(new Error("ordered consumer already initialized as consume"));if(((s=this.iter)==null?void 0:s.done)===!1)return Promise.reject(new Error("ordered consumer doesn't support concurrent fetch"));const{callback:r}=e;return r&&(this.userCallback=r),this.type=zt.Fetch,this.opts=e,this.iter=new Pl,this.reset(e,!0)}async next(e={expires:3e4}){const r=He(),s=e;return s.max_messages=1,s.callback=i=>{this.userCallback=null,r.resolve(i)},(await this.fetch(s)).iterClosed.then(()=>{r.resolve(null)}).catch(i=>{r.reject(i)}),r}delete(){return this.currentConsumer?this.api.delete(this.stream,this.currentConsumer.name).then(e=>Promise.resolve(e)).catch(e=>Promise.reject(e)).finally(()=>{this.currentConsumer=null}):Promise.resolve(!1)}async info(e){return this.currentConsumer==null?(this.currentConsumer=await this.resetConsumer(this.serial),Promise.resolve(this.currentConsumer)):e&&this.currentConsumer?Promise.resolve(this.currentConsumer):this.api.info(this.stream,this.currentConsumer.name)}}function In(t){if(t===void 0)return;const{domain:e}=t;if(e===void 0)return t;const r=Object.assign({},t);if(delete r.domain,e==="")return r;if(r.external)throw new Error("domain and external are both set");return r.external={api:`$JS.${e}.API`},r}var nr;const Aa="OBJ_";class Nf{constructor(e){d(this,"api");d(this,"notified");this.api=e,this.notified=!1}checkVersion(){const e=this.api.nc.features.get(Ie.JS_SIMPLIFICATION);return e.ok?Promise.resolve():Promise.reject(new Error(`consumers framework is only supported on servers ${e.min} or better`))}async get(e,r={}){return typeof r=="object"?this.ordered(e,r):(await this.checkVersion(),this.api.info(e,r).then(s=>s.config.deliver_subject!==void 0?Promise.reject(new Error("push consumer not supported")):new Rf(this.api,s)).catch(s=>Promise.reject(s)))}async ordered(e,r){await this.checkVersion();const s=this.api;return new Pa(s.nc,s.opts).info(e).then(i=>Promise.resolve(new Sb(this.api,e,r))).catch(i=>Promise.reject(i))}}class Pi{constructor(e,r){d(this,"api");d(this,"_info");this.api=e,this._info=r}get name(){return this._info.config.name}alternates(){return this.info().then(e=>e.alternates?e.alternates:[])}async best(){if(await this.info(),this._info.alternates){const e=await this.api.info(this._info.alternates[0].name);return new Pi(this.api,e)}else return this}info(e=!1,r){return e?Promise.resolve(this._info):this.api.info(this.name,r).then(s=>(this._info=s,this._info))}getConsumer(e){return new Nf(new Sa(this.api.nc,this.api.opts)).get(this.name,e)}getMessage(e){return this.api.getMessage(this.name,e)}deleteMessage(e,r){return this.api.deleteMessage(this.name,e,r)}}function Mf(){return{key:{encode(t){return t},decode(t){return t}},value:{encode(t){return t},decode(t){return t}}}}function Ob(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:Mf(),storage:Uo.File}}const ni="KV-Operation",Cl="$KV",Ab=/^[-/=.\w]+$/,Pb=/^[-/=.>*\w]+$/,Cb=/^[-\w]+$/;function Ib(t){if(t.startsWith(".")||t.endsWith(".")||!Ab.test(t))throw new Error(`invalid key: ${t}`)}function Tb(t){if(t.startsWith(".")||t.endsWith(".")||!Pb.test(t))throw new Error(`invalid key: ${t}`)}function kb(t){if(t.startsWith(".")||t.endsWith("."))throw new Error(`invalid key: ${t}`);const e=t.split(".");let r=!1;for(let s=0;s<e.length;s++)switch(e[s]){case"*":r=!0;break;case">":if(s!==e.length-1)throw new Error(`invalid key: ${t}`);r=!0;break}return r}function jn(t){if(!Cb.test(t))throw new Error(`invalid bucket name: ${t}`)}(function(t){t.MsgIdHdr="Nats-Msg-Id",t.ExpectedStreamHdr="Nats-Expected-Stream",t.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",t.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",t.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence"})(nr||(nr={}));class tn{constructor(e,r,s){d(this,"js");d(this,"jsm");d(this,"stream");d(this,"bucket");d(this,"direct");d(this,"codec");d(this,"prefix");d(this,"editPrefix");d(this,"useJsPrefix");d(this,"_prefixLen");d(this,"validateKey",Ib);d(this,"validateSearchKey",Tb);d(this,"hasWildcards",kb);jn(e),this.js=r,this.jsm=s,this.bucket=e,this.prefix=Cl,this.editPrefix="",this.useJsPrefix=!1,this._prefixLen=0}static async create(e,r,s={}){jn(r);const n=await e.jetstreamManager(),i=new tn(r,e,n);return await i.init(s),i}static async bind(e,r,s={}){const n=await e.jetstreamManager(),i=await n.streams.info(`${kt}${r}`);jn(i.config.name);const o=new tn(r,e,n);return Object.assign(o,i),o.codec=s.codec||Mf(),o.direct=i.config.allow_direct??!1,o.initializePrefixes(i),o}async init(e={}){const r=Object.assign(Ob(),e);this.codec=r.codec;const s={};this.stream=s.name=e.streamName??this.bucketName(),s.retention=$o.Limits,s.max_msgs_per_subject=r.history,r.maxBucketSize&&(r.max_bytes=r.maxBucketSize),r.max_bytes&&(s.max_bytes=r.max_bytes),s.max_msg_size=r.maxValueSize,s.storage=r.storage;const n=e.placementCluster??"";if(n&&(e.placement={},e.placement.cluster=n,e.placement.tags=[]),e.placement&&(s.placement=e.placement),e.republish&&(s.republish=e.republish),e.description&&(s.description=e.description),e.mirror){const f=Object.assign({},e.mirror);f.name.startsWith(kt)||(f.name=`${kt}${f.name}`),s.mirror=f,s.mirror_direct=!0}else if(e.sources){const f=e.sources.map(m=>{const w=Object.assign({},m);w.name.startsWith(kt)||(w.name=`${kt}${w.name}`)});s.sources=f}else s.subjects=[this.subjectForBucket()];e.metadata&&(s.metadata=e.metadata),typeof e.compression=="boolean"&&(s.compression=e.compression?Cr.S2:Cr.None);const i=this.js.nc,o=i.getServerVersion(),a=o?Lo(o,qr("2.7.2"))>=0:!1;s.discard=a?Zs.New:Zs.Old;const{ok:c,min:l}=i.features.get(Ie.JS_ALLOW_DIRECT);if(!c&&e.allow_direct===!0){const f=o?`${o.major}.${o.minor}.${o.micro}`:"unknown";return Promise.reject(new Error(`allow_direct is not available on server version ${f} - requires ${l}`))}e.allow_direct=typeof e.allow_direct=="boolean"?e.allow_direct:c,s.allow_direct=e.allow_direct,this.direct=s.allow_direct,s.num_replicas=r.replicas,r.ttl&&(s.max_age=qe(r.ttl)),s.allow_rollup_hdrs=!0;let u;try{u=await this.jsm.streams.info(s.name),!u.config.allow_direct&&this.direct===!0&&(this.direct=!1)}catch(f){if(f.message==="stream not found")u=await this.jsm.streams.add(s);else throw f}this.initializePrefixes(u)}initializePrefixes(e){this._prefixLen=0,this.prefix=`$KV.${this.bucket}`,this.useJsPrefix=this.js.apiPrefix!=="$JS.API";const{mirror:r}=e.config;if(r){let s=r.name;if(s.startsWith(kt)&&(s=s.substring(kt.length)),r.external&&r.external.api!==""){const n=r.name.substring(kt.length);this.useJsPrefix=!1,this.prefix=`$KV.${n}`,this.editPrefix=`${r.external.api}.$KV.${s}`}else this.editPrefix=this.prefix}}bucketName(){return this.stream??`${kt}${this.bucket}`}subjectForBucket(){return`${this.prefix}.${this.bucket}.>`}subjectForKey(e,r=!1){const s=[];return r?(this.useJsPrefix&&s.push(this.js.apiPrefix),this.editPrefix!==""?s.push(this.editPrefix):s.push(this.prefix)):this.prefix&&s.push(this.prefix),s.push(e),s.join(".")}fullKeyName(e){return this.prefix!==""?`${this.prefix}.${e}`:`${Cl}.${this.bucket}.${e}`}get prefixLen(){return this._prefixLen===0&&(this._prefixLen=this.prefix.length+1),this._prefixLen}encodeKey(e){const r=[];for(const s of e.split("."))switch(s){case">":case"*":r.push(s);break;default:r.push(this.codec.key.encode(s));break}return r.join(".")}decodeKey(e){const r=[];for(const s of e.split("."))switch(s){case">":case"*":r.push(s);break;default:r.push(this.codec.key.decode(s));break}return r.join(".")}close(){return Promise.resolve()}dataLen(e,r){const s=r&&r.get(dt.MessageSizeHdr)||"";return s!==""?parseInt(s,10):e.length}smToEntry(e){return new Lb(this.bucket,this.prefixLen,e)}jmToEntry(e){const r=this.decodeKey(e.subject.substring(this.prefixLen));return new jb(this.bucket,r,e)}async create(e,r){var i;let s;try{const o=await this.put(e,r,{previousSeq:0});return Promise.resolve(o)}catch(o){if(s=o,((i=o==null?void 0:o.api_error)==null?void 0:i.err_code)!==10071)return Promise.reject(o)}let n=0;try{const o=await this.get(e);return(o==null?void 0:o.operation)==="DEL"||(o==null?void 0:o.operation)==="PURGE"?(n=o!==null?o.revision:0,this.update(e,r,n)):Promise.reject(s)}catch(o){return Promise.reject(o)}}update(e,r,s){if(s<=0)throw new Error("version must be greater than 0");return this.put(e,r,{previousSeq:s})}async put(e,r,s={}){var o,a;const n=this.encodeKey(e);this.validateKey(n);const i={};if(s.previousSeq!==void 0){const c=ur();i.headers=c,c.set(nr.ExpectedLastSubjectSequenceHdr,`${s.previousSeq}`)}try{return(await this.js.publish(this.subjectForKey(n,!0),r,i)).seq}catch(c){const l=c;return l.isJetStreamError()?(l.message=(o=l.api_error)==null?void 0:o.description,l.code=`${(a=l.api_error)==null?void 0:a.code}`,Promise.reject(l)):Promise.reject(c)}}async get(e,r){const s=this.encodeKey(e);this.validateKey(s);let n={last_by_subj:this.subjectForKey(s)};r&&r.revision>0&&(n={seq:r.revision});let i;try{this.direct?i=await this.jsm.direct.getMessage(this.bucketName(),n):i=await this.jsm.streams.getMessage(this.bucketName(),n);const o=this.smToEntry(i);return o.key!==s?null:o}catch(o){if(o.code===Z.JetStream404NoMessages)return null;throw o}}purge(e){return this._deleteOrPurge(e,"PURGE")}delete(e){return this._deleteOrPurge(e,"DEL")}async purgeDeletes(e=30*60*1e3){const r=He(),s=[],n=await this.watch({key:">",initializedFn:()=>{r.resolve()}});(async()=>{for await(const c of n)(c.operation==="DEL"||c.operation==="PURGE")&&s.push(c)})().then(),await r,n.stop();const i=Date.now()-e,o=s.map(c=>{const l=this.subjectForKey(c.key);return c.created.getTime()>=i?this.jsm.streams.purge(this.stream,{filter:l,keep:1}):this.jsm.streams.purge(this.stream,{filter:l,keep:0})}),a=await Promise.all(o);return a.unshift({success:!0,purged:0}),a.reduce((c,l)=>(c.purged+=l.purged,c))}async _deleteOrPurge(e,r){if(!this.hasWildcards(e))return this._doDeleteOrPurge(e,r);const s=await this.keys(e),n=[];for await(const i of s)n.push(this._doDeleteOrPurge(i,r)),n.length===100&&(await Promise.all(n),n.length=0);n.length>0&&await Promise.all(n)}async _doDeleteOrPurge(e,r){const s=this.encodeKey(e);this.validateKey(s);const n=ur();n.set(ni,r),r==="PURGE"&&n.set(dt.RollupHdr,dt.RollupValueSubject),await this.js.publish(this.subjectForKey(s,!0),Tt,{headers:n})}_buildCC(e,r,s={}){const n=this.encodeKey(e);this.validateSearchKey(e);let i=Ke.LastPerSubject;return r===$t.AllHistory&&(i=Ke.All),r===$t.UpdatesOnly&&(i=Ke.New),Object.assign({deliver_policy:i,ack_policy:Ze.None,filter_subject:this.fullKeyName(n),flow_control:!0,idle_heartbeat:qe(5*1e3)},s)}remove(e){return this.purge(e)}async history(e={}){const r=e.key??">",s=new nt,n={};n.headers_only=e.headers_only||!1;let i;i=()=>{s.stop()};let o=0;const a=this._buildCC(r,$t.AllHistory,n),c=a.filter_subject,l=cr(a);l.bindStream(this.stream),l.orderedConsumer(),l.callback((f,m)=>{if(f){s.stop(f);return}if(m){const w=this.jmToEntry(m);s.push(w),s.received++,(i&&o>0&&s.received>=o||m.info.pending===0)&&(s.push(i),i=void 0)}});const u=await this.js.subscribe(c,l);if(i){const{info:{last:f}}=u,m=f.num_pending+f.delivered.consumer_seq;if(m===0||s.received>=m)try{i()}catch(w){s.stop(w)}finally{i=void 0}else o=m}return s._data=u,s.iterClosed.then(()=>{u.unsubscribe()}),u.closed.then(()=>{s.stop()}).catch(f=>{s.stop(f)}),s}async watch(e={}){const r=e.key??">",s=new nt,n={};n.headers_only=e.headers_only||!1;let i=$t.LastValue;e.include===$t.AllHistory?i=$t.AllHistory:e.include===$t.UpdatesOnly&&(i=$t.UpdatesOnly);const o=e.ignoreDeletes===!0;let a=e.initializedFn,c=0;const l=this._buildCC(r,i,n),u=l.filter_subject,f=cr(l);f.bindStream(this.stream),f.orderedConsumer(),f.callback((w,E)=>{if(w){s.stop(w);return}if(E){const T=this.jmToEntry(E);if(o&&T.operation==="DEL")return;s.push(T),s.received++,a&&(c>0&&s.received>=c||E.info.pending===0)&&(s.push(a),a=void 0)}});const m=await this.js.subscribe(u,f);if(a){const{info:{last:w}}=m,E=w.num_pending+w.delivered.consumer_seq;if(E===0||s.received>=E)try{a()}catch(T){s.stop(T)}finally{a=void 0}else c=E}return s._data=m,s.iterClosed.then(()=>{m.unsubscribe()}),m.closed.then(()=>{s.stop()}).catch(w=>{s.stop(w)}),s}async keys(e=">"){const r=new nt,s=this._buildCC(e,$t.LastValue,{headers_only:!0}),n=s.filter_subject,i=cr(s);i.bindStream(this.stream),i.orderedConsumer();const o=await this.js.subscribe(n,i);return(async()=>{var c;for await(const l of o){const u=(c=l.headers)==null?void 0:c.get(ni);if(u!=="DEL"&&u!=="PURGE"){const f=this.decodeKey(l.subject.substring(this.prefixLen));r.push(f)}l.info.pending===0&&o.unsubscribe()}})().then(()=>{r.stop()}).catch(c=>{r.stop(c)}),o.info.last.num_pending===0&&o.unsubscribe(),r}purgeBucket(e){return this.jsm.streams.purge(this.bucketName(),e)}destroy(){return this.jsm.streams.delete(this.bucketName())}async status(){var i;const r=((i=this.js.nc.info)==null?void 0:i.cluster)??"",s=this.bucketName(),n=await this.jsm.streams.info(s);return new Lf(n,r)}}class Lf{constructor(e,r=""){d(this,"si");d(this,"cluster");this.si=e,this.cluster=r}get bucket(){return this.si.config.name.startsWith(kt)?this.si.config.name.substring(kt.length):this.si.config.name}get values(){return this.si.state.messages}get history(){return this.si.config.max_msgs_per_subject}get ttl(){return Ea(this.si.config.max_age)}get bucket_location(){return this.cluster}get backingStore(){return this.si.config.storage}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get description(){return this.si.config.description??""}get maxBucketSize(){return this.si.config.max_bytes}get maxValueSize(){return this.si.config.max_msg_size}get max_bytes(){return this.si.config.max_bytes}get placement(){return this.si.config.placement||{cluster:"",tags:[]}}get placementCluster(){var e;return((e=this.si.config.placement)==null?void 0:e.cluster)??""}get republish(){return this.si.config.republish??{src:"",dest:""}}get streamInfo(){return this.si}get size(){return this.si.state.bytes}get metadata(){return this.si.config.metadata??{}}get compression(){return this.si.config.compression?this.si.config.compression!==Cr.None:!1}}const Il="SHA-256=";function Rb(t){return jn(t),`${Aa}${t}`}function Nb(t){return t.startsWith(Aa)?t.substring(4):t}class Do{constructor(e){d(this,"si");d(this,"backingStore");this.si=e,this.backingStore="JetStream"}get bucket(){return Nb(this.si.config.name)}get description(){return this.si.config.description??""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}get metadata(){return this.si.config.metadata}get compression(){return this.si.config.compression?this.si.config.compression!==Cr.None:!1}}class Pa extends fn{constructor(e,r){super(e,r)}checkStreamConfigVersions(e){const r=this.nc;if(e.metadata){const{min:n,ok:i}=r.features.get(Ie.JS_STREAM_CONSUMER_METADATA);if(!i)throw new Error(`stream 'metadata' requires server ${n}`)}if(e.first_seq){const{min:n,ok:i}=r.features.get(Ie.JS_STREAM_FIRST_SEQ);if(!i)throw new Error(`stream 'first_seq' requires server ${n}`)}if(e.subject_transform){const{min:n,ok:i}=r.features.get(Ie.JS_STREAM_SUBJECT_TRANSFORM);if(!i)throw new Error(`stream 'subject_transform' requires server ${n}`)}if(e.compression){const{min:n,ok:i}=r.features.get(Ie.JS_STREAM_COMPRESSION);if(!i)throw new Error(`stream 'compression' requires server ${n}`)}if(e.consumer_limits){const{min:n,ok:i}=r.features.get(Ie.JS_DEFAULT_CONSUMER_LIMITS);if(!i)throw new Error(`stream 'consumer_limits' requires server ${n}`)}function s(n,i){var a;if((((a=i.subject_transforms)==null?void 0:a.length)||0)>0){const{min:c,ok:l}=r.features.get(Ie.JS_STREAM_SOURCE_SUBJECT_TRANSFORM);if(!l)throw new Error(`${n} 'subject_transforms' requires server ${c}`)}}e.sources&&e.sources.forEach(n=>{s("stream sources",n)}),e.mirror&&s("stream mirror",e.mirror)}async add(e={}){var n;this.checkStreamConfigVersions(e),bt(e.name),e.mirror=In(e.mirror),e.sources=(n=e.sources)==null?void 0:n.map(In);const s=await this._request(`${this.prefix}.STREAM.CREATE.${e.name}`,e);return this._fixInfo(s),s}async delete(e){return bt(e),(await this._request(`${this.prefix}.STREAM.DELETE.${e}`)).success}async update(e,r={}){var a;if(typeof e=="object"){const c=e;e=c.name,r=c,console.trace("\x1B[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1B[0m")}this.checkStreamConfigVersions(r),bt(e);const s=await this.info(e),n=Object.assign(s.config,r);n.mirror=In(n.mirror),n.sources=(a=n.sources)==null?void 0:a.map(In);const o=await this._request(`${this.prefix}.STREAM.UPDATE.${e}`,n);return this._fixInfo(o),o}async info(e,r){bt(e);const s=`${this.prefix}.STREAM.INFO.${e}`;let i=await this._request(s,r),{total:o,limit:a}=i,c=i.state.subjects?Object.getOwnPropertyNames(i.state.subjects).length:1;if(o&&o>c){const l=[i],u=r||{};let f=0;for(;o>c;){f++,u.offset=a*f;const w=await this._request(s,u);o=w.total,l.push(w);const E=Object.getOwnPropertyNames(w.state.subjects).length;if(c+=E,E<a)break}let m={};for(let w=0;w<l.length;w++)i=l[w],i.state.subjects&&(m=Object.assign(m,i.state.subjects));i.offset=0,i.total=0,i.limit=0,i.state.subjects=m}return this._fixInfo(i),i}list(e=""){const r=e!=null&&e.length?{subject:e}:{},s=i=>{const o=i;return o.streams.forEach(a=>{this._fixInfo(a)}),o.streams},n=`${this.prefix}.STREAM.LIST`;return new ks(n,s,this,r)}_fixInfo(e){e.config.sealed=e.config.sealed||!1,e.config.deny_delete=e.config.deny_delete||!1,e.config.deny_purge=e.config.deny_purge||!1,e.config.allow_rollup_hdrs=e.config.allow_rollup_hdrs||!1}async purge(e,r){if(r){const{keep:n,seq:i}=r;if(typeof n=="number"&&typeof i=="number")throw new Error("can specify one of keep or seq")}return bt(e),await this._request(`${this.prefix}.STREAM.PURGE.${e}`,r)}async deleteMessage(e,r,s=!0){bt(e);const n={seq:r};return s||(n.no_erase=!0),(await this._request(`${this.prefix}.STREAM.MSG.DELETE.${e}`,n)).success}async getMessage(e,r){bt(e);const n=await this._request(`${this.prefix}.STREAM.MSG.GET.${e}`,r);return new jf(n)}find(e){return this.findStream(e)}listKvs(){const e=s=>{var c;const i=s.streams.filter(l=>l.config.name.startsWith(kt));i.forEach(l=>{this._fixInfo(l)});let o="";return i.length&&(o=((c=this.nc.info)==null?void 0:c.cluster)??""),i.map(l=>new Lf(l,o))},r=`${this.prefix}.STREAM.LIST`;return new ks(r,e,this)}listObjectStores(){const e=s=>{const i=s.streams.filter(a=>a.config.name.startsWith(Aa));return i.forEach(a=>{this._fixInfo(a)}),i.map(a=>new Do(a))},r=`${this.prefix}.STREAM.LIST`;return new ks(r,e,this)}names(e=""){const r=e!=null&&e.length?{subject:e}:{},s=i=>i.streams,n=`${this.prefix}.STREAM.NAMES`;return new ks(n,s,this,r)}async get(e){const r=await this.info(e);return Promise.resolve(new Pi(this,r))}}class jf{constructor(e){d(this,"_header");d(this,"smr");this.smr=e}get subject(){return this.smr.message.subject}get seq(){return this.smr.message.seq}get timestamp(){return this.smr.message.time}get time(){return new Date(Date.parse(this.timestamp))}get data(){return this.smr.message.data?this._parse(this.smr.message.data):Tt}get header(){if(!this._header)if(this.smr.message.hdrs){const e=this._parse(this.smr.message.hdrs);this._header=Sr.decode(e)}else this._header=ur();return this._header}_parse(e){const r=atob(e),s=r.length,n=new Uint8Array(s);for(let i=0;i<s;i++)n[i]=r.charCodeAt(i);return n}json(e){return Bt(e).decode(this.data)}string(){return Ct.decode(this.data)}}d(jf,"jc");class Mb{constructor(e){d(this,"api");this.api=e}get(e){return this.api.info(e).then(r=>new Pi(this.api,r))}}class Lb{constructor(e,r,s){d(this,"bucket");d(this,"sm");d(this,"prefixLen");this.bucket=e,this.prefixLen=r,this.sm=s}get key(){return this.sm.subject.substring(this.prefixLen)}get value(){return this.sm.data}get delta(){return 0}get created(){return this.sm.time}get revision(){return this.sm.seq}get operation(){return this.sm.header.get(ni)||"PUT"}get length(){const e=this.sm.header.get(dt.MessageSizeHdr)||"";return e!==""?parseInt(e,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class jb{constructor(e,r,s){d(this,"bucket");d(this,"key");d(this,"sm");this.bucket=e,this.key=r,this.sm=s}get value(){return this.sm.data}get created(){return new Date(Ea(this.sm.info.timestampNanos))}get revision(){return this.sm.seq}get operation(){var e;return((e=this.sm.headers)==null?void 0:e.get(ni))||"PUT"}get delta(){return this.sm.info.pending}get length(){var r;const e=((r=this.sm.headers)==null?void 0:r.get(dt.MessageSizeHdr))||"";return e!==""?parseInt(e,10):this.sm.data.length}json(){return this.sm.json()}string(){return this.sm.string()}}class io{constructor(e){d(this,"info");d(this,"hdrs");this.info=e}get name(){return this.info.name}get description(){return this.info.description??""}get headers(){return this.hdrs||(this.hdrs=Sr.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){return this.info.deleted??!1}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}get revision(){return this.info.revision}get metadata(){return this.info.metadata||{}}isLink(){var e,r;return((e=this.info.options)==null?void 0:e.link)!==void 0&&((r=this.info.options)==null?void 0:r.link)!==null}}function Tl(t){const e={name:t.name,description:t.description??"",options:t.options,metadata:t.metadata};if(t.headers){const r=t.headers;e.headers=r.toRecord()}return e}function Fb(){return new ReadableStream({pull(t){t.enqueue(new Uint8Array(0)),t.close()}})}class Hs{constructor(e,r,s){d(this,"jsm");d(this,"js");d(this,"stream");d(this,"name");this.name=e,this.jsm=r,this.js=s}_checkNotEmpty(e){return!e||e.length===0?{name:e,error:new Error("name cannot be empty")}:{name:e}}async info(e){const r=await this.rawInfo(e);return r?new io(r):null}async list(){const e=[],r=await this.watch({ignoreDeletes:!0,includeHistory:!0});for await(const s of r){if(s===null)break;e.push(s)}return Promise.resolve(e)}async rawInfo(e){const{name:r,error:s}=this._checkNotEmpty(e);if(s)return Promise.reject(s);const n=this._metaSubject(r);try{const i=await this.jsm.streams.getMessage(this.stream,{last_by_subj:n}),a=Bt().decode(i.data);return a.revision=i.seq,a}catch(i){return i.code==="404"?null:Promise.reject(i)}}async _si(e){try{return await this.jsm.streams.info(this.stream,e)}catch(r){return r.code==="404"?null:Promise.reject(r)}}async seal(){let e=await this._si();return e===null?Promise.reject(new Error("object store not found")):(e.config.sealed=!0,e=await this.jsm.streams.update(this.stream,e.config),Promise.resolve(new Do(e)))}async status(e){const r=await this._si(e);return r===null?Promise.reject(new Error("object store not found")):Promise.resolve(new Do(r))}destroy(){return this.jsm.streams.delete(this.stream)}async _put(e,r,s){var B;const n=this.js.getOptions();s=s||{timeout:n.timeout},s.timeout=s.timeout||n.timeout,s.previousRevision=s.previousRevision??void 0;const{timeout:i,previousRevision:o}=s,a=this.js.nc.info,c=(a==null?void 0:a.max_payload)||1024;e=e||{},e.options=e.options||{};let l=((B=e.options)==null?void 0:B.max_chunk_size)||128*1024;l=l>c?c:l,e.options.max_chunk_size=l;const u=await this.info(e.name),{name:f,error:m}=this._checkNotEmpty(e.name);if(m)return Promise.reject(m);const w=ln.next(),E=this._chunkSubject(w),T=this._metaSubject(f),M=Object.assign({bucket:this.name,nuid:w,size:0,chunks:0},Tl(e)),j=He(),$=[],z=new ps;try{const ie=r?r.getReader():null,Q=new Ol;for(;;){const{done:we,value:J}=ie?await ie.read():{done:!0,value:void 0};if(we){if(z.size()>0){const Je=z.drain();Q.update(Je),M.chunks++,M.size+=Je.length,$.push(this.js.publish(E,Je,{timeout:i}))}await Promise.all($),$.length=0,M.mtime=new Date().toISOString();const he=Q.digest("base64"),be=he.length%3,Ce=be>0?"=".repeat(be):"";M.digest=`${Il}${he}${Ce}`,M.deleted=!1;const Re=ur();typeof o=="number"&&Re.set(nr.ExpectedLastSubjectSequenceHdr,`${o}`),Re.set(dt.RollupHdr,dt.RollupValueSubject);const De=await this.js.publish(T,Bt().encode(M),{headers:Re,timeout:i});if(M.revision=De.seq,u)try{await this.jsm.streams.purge(this.stream,{filter:`$O.${this.name}.C.${u.nuid}`})}catch{}j.resolve(new io(M));break}if(J)for(z.fill(J);z.size()>l;){M.chunks++,M.size+=l;const he=z.drain(e.options.max_chunk_size);Q.update(he),$.push(this.js.publish(E,he,{timeout:i}))}}}catch(ie){await this.jsm.streams.purge(this.stream,{filter:E}),j.reject(ie)}return j}putBlob(e,r,s){function n(i){return new ReadableStream({pull(o){o.enqueue(i),o.close()}})}return r===null&&(r=new Uint8Array(0)),this.put(e,n(r),s)}put(e,r,s){var n;return(n=e==null?void 0:e.options)!=null&&n.link?Promise.reject(new Error("link cannot be set when putting the object in bucket")):this._put(e,r,s)}async getBlob(e){async function r(i){const o=new ps,a=i.getReader();for(;;){const{done:c,value:l}=await a.read();if(c)return o.drain();l&&l.length&&o.fill(l)}}const s=await this.get(e);if(s===null)return Promise.resolve(null);const n=await Promise.all([s.error,r(s.data)]);return n[0]?Promise.reject(n[0]):Promise.resolve(n[1])}async get(e){const r=await this.rawInfo(e);if(r===null||r.deleted)return Promise.resolve(null);if(r.options&&r.options.link){const u=r.options.link.name||"";if(u==="")throw new Error("link is a bucket");return(r.options.link.bucket!==this.name?await Hs.create(this.js,r.options.link.bucket):this).get(u)}const s=He(),n={info:new io(r),error:s};if(r.size===0)return n.data=Fb(),s.resolve(null),Promise.resolve(n);let i;const o=cr();o.orderedConsumer();const a=new Ol,c=`$O.${this.name}.C.${r.nuid}`,l=await this.js.subscribe(c,o);return(async()=>{for await(const u of l)if(u.data.length>0&&(a.update(u.data),i.enqueue(u.data)),u.info.pending===0){const f=a.digest("base64"),m=f.length%3,w=m>0?"=".repeat(m):"",E=`${Il}${f}${w}`;E!==r.digest?i.error(new Error(`received a corrupt object, digests do not match received: ${r.digest} calculated ${E}`)):i.close(),l.unsubscribe()}})().then(()=>{s.resolve()}).catch(u=>{i.error(u),s.reject(u)}),n.data=new ReadableStream({start(u){i=u},cancel(){l.unsubscribe()}}),n}linkStore(e,r){if(!(r instanceof Hs))return Promise.reject("bucket required");const s=r,{name:n,error:i}=this._checkNotEmpty(e);if(i)return Promise.reject(i);const o={name:n,options:{link:{bucket:s.name}}};return this._put(o,null)}async link(e,r){const{name:s,error:n}=this._checkNotEmpty(e);if(n)return Promise.reject(n);if(r.deleted)return Promise.reject(new Error("src object is deleted"));if(r.isLink())return Promise.reject(new Error("src object is a link"));const i=await this.rawInfo(e);if(i!==null&&!i.deleted)return Promise.reject(new Error("an object already exists with that name"));const o={bucket:r.bucket,name:r.name},a={name:s,bucket:r.bucket,options:{link:o}};await this.js.publish(this._metaSubject(e),JSON.stringify(a));const c=await this.info(e);return Promise.resolve(c)}async delete(e){const r=await this.rawInfo(e);if(r===null)return Promise.resolve({purged:0,success:!1});r.deleted=!0,r.size=0,r.chunks=0,r.digest="";const s=Bt(),n=ur();return n.set(dt.RollupHdr,dt.RollupValueSubject),await this.js.publish(this._metaSubject(r.name),s.encode(r),{headers:n}),this.jsm.streams.purge(this.stream,{filter:this._chunkSubject(r.nuid)})}async update(e,r={}){const s=await this.rawInfo(e);if(s===null)return Promise.reject(new Error("object not found"));if(s.deleted)return Promise.reject(new Error("cannot update meta for a deleted object"));r.name=r.name??s.name;const{name:n,error:i}=this._checkNotEmpty(r.name);if(i)return Promise.reject(i);if(e!==r.name){const c=await this.info(r.name);if(c&&!c.deleted)return Promise.reject(new Error("an object already exists with that name"))}r.name=n;const o=Object.assign({},s,Tl(r)),a=await this.js.publish(this._metaSubject(o.name),JSON.stringify(o));return e!==r.name&&await this.jsm.streams.purge(this.stream,{filter:this._metaSubject(e)}),Promise.resolve(a)}async watch(e={}){e.includeHistory=e.includeHistory??!1,e.ignoreDeletes=e.ignoreDeletes??!1;let r=!1;const s=new nt,n=this._metaSubjectAll();try{await this.jsm.streams.getMessage(this.stream,{last_by_subj:n})}catch(c){c.code==="404"?(s.push(null),r=!0):s.stop(c)}const i=Bt(),o=cr();o.orderedConsumer(),e.includeHistory?o.deliverLastPerSubject():(r=!0,o.deliverNew()),o.callback((c,l)=>{var u;if(c){s.stop(c);return}if(l!==null){const f=i.decode(l.data);f.deleted&&e.ignoreDeletes===!0||s.push(f),((u=l.info)==null?void 0:u.pending)===0&&!r&&(r=!0,s.push(null))}});const a=await this.js.subscribe(n,o);return s._data=a,s.iterClosed.then(()=>{a.unsubscribe()}),a.closed.then(()=>{s.stop()}).catch(c=>{s.stop(c)}),s}_chunkSubject(e){return`$O.${this.name}.C.${e}`}_metaSubject(e){return`$O.${this.name}.M.${Bs.encode(e)}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}async init(e={}){try{this.stream=Rb(this.name)}catch(n){return Promise.reject(n)}const r=(e==null?void 0:e.ttl)||0;delete e.ttl;const s=Object.assign({max_age:r},e);s.name=this.stream,s.allow_direct=!0,s.allow_rollup_hdrs=!0,s.discard=Zs.New,s.subjects=[`$O.${this.name}.C.>`,`$O.${this.name}.M.>`],e.placement&&(s.placement=e.placement),e.metadata&&(s.metadata=e.metadata),typeof e.compression=="boolean"&&(s.compression=e.compression?Cr.S2:Cr.None);try{await this.jsm.streams.info(s.name)}catch(n){n.message==="stream not found"&&await this.jsm.streams.add(s)}}static async create(e,r,s={}){const n=await e.jetstreamManager(),i=new Hs(r,n,e);return await i.init(s),Promise.resolve(i)}}class $b{constructor(e){d(this,"js");d(this,"jsm");this.js=e}kv(e,r={}){const s=this.js,{ok:n,min:i}=s.nc.features.get(Ie.JS_KV);return n?r.bindOnly?tn.bind(this.js,e):tn.create(this.js,e,r):Promise.reject(new Error(`kv is only supported on servers ${i} or better`))}os(e,r={}){var o;if(typeof((o=crypto==null?void 0:crypto.subtle)==null?void 0:o.digest)!="function")return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const s=this.js,{ok:n,min:i}=s.nc.features.get(Ie.JS_OBJECTSTORE);return n?Hs.create(this.js,e,r):Promise.reject(new Error(`objectstore is only supported on servers ${i} or better`))}}class Ca extends fn{constructor(r,s){super(r,s);d(this,"consumers");d(this,"streams");d(this,"consumerAPI");d(this,"streamAPI");this.consumerAPI=new Sa(r,s),this.streamAPI=new Pa(r,s),this.consumers=new Nf(this.consumerAPI),this.streams=new Mb(this.streamAPI)}jetstreamManager(r){const s=Object.assign({checkAPI:r},this.opts);return this.nc.jetstreamManager(s)}get apiPrefix(){return this.prefix}get views(){return new $b(this)}async publish(r,s=Tt,n){n=n||{},n.expect=n.expect||{};const i=(n==null?void 0:n.headers)||ur();n&&(n.msgID&&i.set(nr.MsgIdHdr,n.msgID),n.expect.lastMsgID&&i.set(nr.ExpectedLastMsgIdHdr,n.expect.lastMsgID),n.expect.streamName&&i.set(nr.ExpectedStreamHdr,n.expect.streamName),typeof n.expect.lastSequence=="number"&&i.set(nr.ExpectedLastSeqHdr,`${n.expect.lastSequence}`),typeof n.expect.lastSubjectSequence=="number"&&i.set(nr.ExpectedLastSubjectSequenceHdr,`${n.expect.lastSubjectSequence}`));const o=n.timeout||this.timeout,a={};o&&(a.timeout=o),n&&(a.headers=i);let{retries:c,retry_delay:l}=n;c=c||1,l=l||250;let u;for(let m=0;m<c;m++)try{u=await this.nc.request(r,s,a);break}catch(w){if(w.code==="503"&&m+1<c)await un(l);else throw w}const f=this.parseJsResponse(u);if(f.stream==="")throw oe.errorForCode(Z.JetStreamInvalidAck);return f.duplicate=f.duplicate?f.duplicate:!1,f}async pull(r,s,n=0){bt(r),os(s);let i=this.timeout;n>i&&(i=n),n=n<0?0:qe(n);const o={batch:1,no_wait:n===0,expires:n},a=await this.nc.request(`${this.prefix}.CONSUMER.MSG.NEXT.${r}.${s}`,this.jc.encode(o),{noMux:!0,timeout:i}),c=as(a);if(c)throw c;return en(a)}fetch(r,s,n={}){bt(r),os(s);let i=null;const o=(n.max_bytes??0)>0;let a=0;const c=o?n.max_bytes:0;let l=null;const u={};if(u.batch=n.batch||1,c){const $=this.nc.features.get(Ie.JS_PULL_MAX_BYTES);if(!$.ok)throw new Error(`max_bytes is only supported on servers ${$.min} or better`);u.max_bytes=c}u.no_wait=n.no_wait||!1,u.no_wait&&u.expires&&(u.expires=0);const f=n.expires||0;if(f&&(u.expires=qe(f)),f===0&&u.no_wait===!1)throw new Error("expires or no_wait is required");const m=n.idle_heartbeat||0;m&&(u.idle_heartbeat=qe(m),n.delay_heartbeat===!0&&(u.idle_heartbeat=qe(m*4)));const w=new nt,E=u.batch;let T=0;w.protocolFilterFn=($,z=!1)=>Fo($.msg)?(l==null||l.work(),!1):!0,w.dispatchedFn=$=>{if($){if(o&&(a+=$.data.length),T++,i&&$.info.pending===0)return;(w.getPending()===1&&$.info.pending===0||E===T||c>0&&a>=c)&&w.stop()}};const M=Zt(this.nc.options.inboxPrefix),j=this.nc.subscribe(M,{max:n.batch,callback:($,z)=>{$===null&&($=as(z)),$!==null?(i&&(i.cancel(),i=null),h0($)?w.stop($f($)===null?void 0:$):w.stop($)):(l==null||l.work(),w.received++,w.push(en(z)))}});return f&&(i=ms(f),i.catch(()=>{j.isClosed()||(j.drain().catch(()=>{}),i=null),l&&l.cancel()})),(async()=>{try{m&&(l=new Oa(m,$=>(w.push(()=>{w.err=new oe(`${Rt.IdleHeartbeatMissed}: ${$}`,Z.JetStreamIdleHeartBeat)}),!0)))}catch{}await j.closed,i!==null&&(i.cancel(),i=null),l&&l.cancel(),w.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${r}.${s}`,this.jc.encode(u),{reply:M}),w}async pullSubscribe(r,s=cr()){const n=await this._processOptions(r,s);if(n.ordered)throw new Error("pull subscribers cannot be be ordered");if(n.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const i=n.config.ack_policy;if(i===Ze.None||i===Ze.All)throw new Error("ack policy for pull consumers must be explicit");const o=this._buildTypedSubscriptionOpts(n),a=new Ub(this,n.deliver,o);a.info=n;try{await this._maybeCreateConsumer(n)}catch(c){throw a.unsubscribe(),c}return a}async subscribe(r,s=cr()){const n=await this._processOptions(r,s);if(!n.isBind&&!n.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const i=this._buildTypedSubscriptionOpts(n),o=new Ff(this,n.deliver,i);o.info=n;try{await this._maybeCreateConsumer(n)}catch(a){throw o.unsubscribe(),a}return o._maybeSetupHbMonitoring(),o}async _processOptions(r,s=cr()){const n=El(s)?s.getOpts():s;if(n.isBind=El(s)?s.isBind:!1,n.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},n.ordered){if(n.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},n.config.ack_policy!==Ze.NotSet&&n.config.ack_policy!==Ze.None)throw new oe("ordered consumer: ack_policy can only be set to 'none'",Z.ApiError);if(n.config.durable_name&&n.config.durable_name.length>0)throw new oe("ordered consumer: durable_name cannot be set",Z.ApiError);if(n.config.deliver_subject&&n.config.deliver_subject.length>0)throw new oe("ordered consumer: deliver_subject cannot be set",Z.ApiError);if(n.config.max_deliver!==void 0&&n.config.max_deliver>1)throw new oe("ordered consumer: max_deliver cannot be set",Z.ApiError);if(n.config.deliver_group&&n.config.deliver_group.length>0)throw new oe("ordered consumer: deliver_group cannot be set",Z.ApiError);n.config.deliver_subject=Zt(this.nc.options.inboxPrefix),n.config.ack_policy=Ze.None,n.config.max_deliver=1,n.config.flow_control=!0,n.config.idle_heartbeat=n.config.idle_heartbeat||qe(5e3),n.config.ack_wait=qe(22*60*60*1e3),n.config.mem_storage=!0,n.config.num_replicas=1}if(n.config.ack_policy===Ze.NotSet&&(n.config.ack_policy=Ze.All),n.api=this,n.config=n.config||{},n.stream=n.stream?n.stream:await this.findStream(r),n.attached=!1,n.config.durable_name)try{const i=await this.consumerAPI.info(n.stream,n.config.durable_name);if(i){if(i.config.filter_subject&&i.config.filter_subject!==r)throw new Error("subject does not match consumer");const o=n.config.deliver_group??"";if(o===""&&i.push_bound===!0)throw new Error("duplicate subscription");const a=i.config.deliver_group??"";if(o!==a)throw a===""?new Error("durable requires no queue group"):new Error(`durable requires queue group '${a}'`);n.last=i,n.config=i.config,n.attached=!0,n.config.durable_name||(n.name=i.name)}}catch(i){if(i.code!=="404")throw i}return!n.attached&&n.config.filter_subject===void 0&&n.config.filter_subjects===void 0&&(n.config.filter_subject=r),n.deliver=n.config.deliver_subject||Zt(this.nc.options.inboxPrefix),n}_buildTypedSubscriptionOpts(r){const s={};return s.adapter=Db(r.callbackFn===void 0),s.ingestionFilterFn=Ca.ingestionFn(r.ordered),s.protocolFilterFn=(n,i=!1)=>{const o=n;return jo(o.msg)?(i||o.msg.respond(),!1):!0},!r.mack&&r.config.ack_policy!==Ze.None&&(s.dispatchedFn=Hb),r.callbackFn&&(s.callback=r.callbackFn),s.max=r.max||0,s.queue=r.queue,s}async _maybeCreateConsumer(r){if(r.attached)return;if(r.isBind)throw new Error(`unable to bind - durable consumer ${r.config.durable_name} doesn't exist in ${r.stream}`);r.config=Object.assign({deliver_policy:Ke.All,ack_policy:Ze.Explicit,ack_wait:qe(30*1e3),replay_policy:gs.Instant},r.config);const s=await this.consumerAPI.add(r.stream,r.config);if(Array.isArray(r.config.filter_subjects&&!Array.isArray(s.config.filter_subjects)))throw new Error("jetstream server doesn't support consumers with multiple filter subjects");r.name=s.name,r.config=s.config,r.last=s}static ingestionFn(r){return(s,n)=>{var c;const i=n;if(!s)return{ingest:!1,protocol:!1};const o=s;if(as(o.msg)||(c=i.monitor)==null||c.work(),Fo(o.msg)){const l=r?i._checkHbOrderConsumer(o.msg):!0;return r||i.info.flow_control.heartbeat_count++,{ingest:l,protocol:!0}}else if(jo(o.msg))return i.info.flow_control.fc_count++,{ingest:!0,protocol:!0};return{ingest:r?i._checkOrderedConsumer(s):!0,protocol:!1}}}}class Ff extends Eb{constructor(r,s,n){super(r.nc,s,n);d(this,"js");d(this,"monitor");this.js=r,this.monitor=null,this.sub.closed.then(()=>{this.monitor&&this.monitor.cancel()})}set info(r){this.sub.info=r}get info(){return this.sub.info}_resetOrderedConsumer(r){if(this.info===null||this.sub.isClosed())return;const s=Zt(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,s);const i=this.info;i.ordered_consumer_sequence.delivery_seq=0,i.flow_control.heartbeat_count=0,i.flow_control.fc_count=0,i.flow_control.consumer_restarts++,i.deliver=s,i.config.deliver_subject=s,i.config.deliver_policy=Ke.StartSequence,i.config.opt_start_seq=r;const o={};o.stream_name=this.info.stream,o.config=i.config;const a=`${i.api.prefix}.CONSUMER.CREATE.${i.stream}`;this.js._request(a,o).then(c=>{const l=c;this.info.config=l.config,this.info.name=l.name}).catch(c=>{const l=new oe(`unable to recreate ordered consumer ${i.stream} at seq ${r}`,Z.RequestError,c);this.sub.callback(l,{})})}_maybeSetupHbMonitoring(){var s,n;const r=((n=(s=this.info)==null?void 0:s.config)==null?void 0:n.idle_heartbeat)||0;r&&this._setupHbMonitoring(Ea(r))}_setupHbMonitoring(r,s=0){const n={cancelAfter:0,maxOut:2};s&&(n.cancelAfter=s);const i=this.sub,o=a=>{var u,f,m;const c=tb(409,`${Rt.IdleHeartbeatMissed}: ${a}`,this.sub.subject);if(!((u=this.info)==null?void 0:u.ordered))this.sub.callback(null,c);else{if(!this.js.nc.protocol.connected)return!1;const w=((m=(f=this.info)==null?void 0:f.ordered_consumer_sequence)==null?void 0:m.stream_seq)||0;return this._resetOrderedConsumer(w+1),!1}return!i.noIterator};this.monitor=new Oa(r,o,n)}_checkHbOrderConsumer(r){const s=r.headers.get(dt.ConsumerStalledHdr);s!==""&&this.js.nc.publish(s);const n=parseInt(r.headers.get(dt.LastConsumerSeqHdr),10),i=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,n!==i.delivery_seq&&this._resetOrderedConsumer(i.stream_seq+1),!1}_checkOrderedConsumer(r){const s=this.info.ordered_consumer_sequence,n=r.info.streamSequence,i=r.info.deliverySequence;return i!=s.delivery_seq+1?(this._resetOrderedConsumer(s.stream_seq+1),!1):(s.delivery_seq=i,s.stream_seq=n,!0)}async destroy(){this.isClosed()||await this.drain();const r=this.sub.info,s=r.config.durable_name||r.name,n=`${r.api.prefix}.CONSUMER.DELETE.${r.stream}.${s}`;await r.api._request(n)}async consumerInfo(){const r=this.sub.info,s=r.config.durable_name||r.name,n=`${r.api.prefix}.CONSUMER.INFO.${r.stream}.${s}`,i=await r.api._request(n);return r.last=i,i}}class Ub extends Ff{constructor(e,r,s){super(e,r,s)}pull(e={batch:1}){const{stream:r,config:s,name:n}=this.sub.info,i=s.durable_name??n,o={};if(o.batch=e.batch||1,o.no_wait=e.no_wait||!1,(e.max_bytes??0)>0){const l=this.js.nc.features.get(Ie.JS_PULL_MAX_BYTES);if(!l.ok)throw new Error(`max_bytes is only supported on servers ${l.min} or better`);o.max_bytes=e.max_bytes}let a=0;e.expires&&e.expires>0&&(a=e.expires,o.expires=qe(a));let c=0;if(e.idle_heartbeat&&e.idle_heartbeat>0&&(c=e.idle_heartbeat,o.idle_heartbeat=qe(c)),c&&a===0)throw new Error("idle_heartbeat requires expires");if(c>a)throw new Error("expires must be greater than idle_heartbeat");if(this.info){this.monitor&&this.monitor.cancel(),a&&c&&(this.monitor?this.monitor._change(c,a):this._setupHbMonitoring(c,a));const l=this.info.api,u=`${l.prefix}.CONSUMER.MSG.NEXT.${r}.${i}`,f=this.sub.subject;l.nc.publish(u,l.jc.encode(o),{reply:f})}}}function Db(t){return t?qb:Bb}function Bb(t,e){return t?[t,null]:(t=as(e),t?[t,null]:[null,en(e)])}function qb(t,e){if(t)return[t,null];const r=as(e);return r!==null?[$f(r),null]:[null,en(e)]}function $f(t){if(t!==null)switch(t.code){case Z.JetStream404NoMessages:case Z.JetStream408RequestTimeout:return null;case Z.JetStream409:return rb(t)?t:null;default:return t}return null}function Hb(t){t&&t.ack()}class Vb extends fn{constructor(e,r){super(e,r)}async getMessage(e,r){bt(e);let s=r;const{last_by_subj:n}=s;n&&(s=null);const i=s?this.jc.encode(s):Tt,o=this.opts.apiPrefix||"$JS.API",a=n?`${o}.DIRECT.GET.${e}.${n}`:`${o}.DIRECT.GET.${e}`,c=await this.nc.request(a,i),l=as(c);if(l)return Promise.reject(l);const u=new Uf(c);return Promise.resolve(u)}}class Uf{constructor(e){d(this,"data");d(this,"header");if(!e.headers)throw new Error("headers expected");this.data=e.data,this.header=e.headers}get subject(){return this.header.last(es.Subject)}get seq(){const e=this.header.last(es.Sequence);return typeof e=="string"?parseInt(e):0}get time(){return new Date(Date.parse(this.timestamp))}get timestamp(){return this.header.last(es.TimeStamp)}get stream(){return this.header.last(es.Stream)}json(e){return Bt(e).decode(this.data)}string(){return Ct.decode(this.data)}}d(Uf,"jc");class Wb extends fn{constructor(r,s){super(r,s);d(this,"streams");d(this,"consumers");d(this,"direct");this.streams=new Pa(r,s),this.consumers=new Sa(r,s),this.direct=new Vb(r,s)}async getAccountInfo(){return await this._request(`${this.prefix}.INFO`)}jetstream(){return this.nc.jetstream(this.getOptions())}advisories(){const r=new nt;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(s,n)=>{if(s)throw s;try{const i=this.parseJsResponse(n),o=i.type.split("."),a=o[o.length-1];r.push({kind:a,data:i})}catch(i){r.stop(i)}}}),r}}const Gb="$SRV";class kl{constructor(e){d(this,"msg");this.msg=e}get data(){return this.msg.data}get sid(){return this.msg.sid}get subject(){return this.msg.subject}get reply(){return this.msg.reply||""}get headers(){return this.msg.headers}respond(e,r){return this.msg.respond(e,r)}respondError(e,r,s,n){var i,o;return n=n||{},n.headers=n.headers||ur(),(i=n.headers)==null||i.set(Zn,`${e}`),(o=n.headers)==null||o.set(Qn,r),this.msg.respond(s,n)}json(e){return this.msg.json(e)}string(){return this.msg.string()}}class rn{constructor(e,r="",s=""){d(this,"subject");d(this,"queue");d(this,"srv");r!==""&&Kb("service group",r);let n="";if(e instanceof hn)this.srv=e,n="";else if(e instanceof rn){const i=e;this.srv=i.srv,s===""&&i.queue!==""&&(s=i.queue),n=i.subject}else throw new Error("unknown ServiceGroup type");this.subject=this.calcSubject(n,r),this.queue=s}calcSubject(e,r=""){return r===""?e:e!==""?`${e}.${r}`:r}addEndpoint(e="",r){r=r||{subject:e};const s=typeof r=="function"?{handler:r,subject:e}:r;Ts("endpoint",e);let{subject:n,handler:i,metadata:o,queue:a}=s;n=n||e,a=a||this.queue,zb("endpoint subject",n),n=this.calcSubject(this.subject,n);const c={name:e,subject:n,queue:a,handler:i,metadata:o};return this.srv._addEndpoint(c)}addGroup(e="",r=""){return new rn(this,e,r)}}function zb(t,e){if(e==="")throw new Error(`${t} cannot be empty`);if(e.indexOf(" ")!==-1)throw new Error(`${t} cannot contain spaces: '${e}'`);const r=e.split(".");r.forEach((s,n)=>{if(s===">"&&n!==r.length-1)throw new Error(`${t} cannot have internal '>': '${e}'`)})}function Kb(t,e){if(e.indexOf(" ")!==-1)throw new Error(`${t} cannot contain spaces: '${e}'`);e.split(".").forEach(s=>{if(s===">")throw new Error(`${t} name cannot contain internal '>': '${e}'`)})}class hn{constructor(e,r={name:"",version:""}){d(this,"nc");d(this,"_id");d(this,"config");d(this,"handlers");d(this,"internal");d(this,"_stopped");d(this,"_done");d(this,"started");this.nc=e,this.config=Object.assign({},r),this.config.queue||(this.config.queue="q"),Ts("name",this.config.name),Ts("queue",this.config.queue),qr(this.config.version),this._id=ln.next(),this.internal=[],this._done=He(),this._stopped=!1,this.handlers=[],this.started=new Date().toISOString(),this.reset(),this.nc.closed().then(()=>{this.close().catch()}).catch(s=>{this.close(s).catch()})}static controlSubject(e,r="",s="",n){const i=n??Gb;return r===""&&s===""?`${i}.${e}`:(Ts("control subject name",r),s!==""?(Ts("control subject id",s),`${i}.${e}.${r}.${s}`):`${i}.${e}.${r}`)}get subjects(){return this.handlers.filter(e=>e.internal===!1).map(e=>e.subject)}get id(){return this._id}get name(){return this.config.name}get description(){return this.config.description??""}get version(){return this.config.version}get metadata(){return this.config.metadata}errorToHeader(e){const r=ur();if(e instanceof ei){const s=e;r.set(Qn,s.message),r.set(Zn,`${s.code}`)}else r.set(Qn,e.message),r.set(Zn,"500");return r}setupHandler(e,r=!1){const s=r?"":e.queue?e.queue:this.config.queue,{name:n,subject:i,handler:o}=e,a=e;a.internal=r,r&&this.internal.push(a),a.stats=new Jb(n,i,s),a.queue=s;const c=o?(l,u)=>{if(l){this.close(l);return}const f=Date.now();try{o(l,new kl(u))}catch(m){a.stats.countError(m),u==null||u.respond(Tt,{headers:this.errorToHeader(m)})}finally{a.stats.countLatency(f)}}:void 0;return a.sub=this.nc.subscribe(i,{callback:c,queue:s}),a.sub.closed.then(()=>{this._stopped||this.close(new Error(`required subscription ${e.subject} stopped`)).catch()}).catch(l=>{if(!this._stopped){const u=new Error(`required subscription ${e.subject} errored: ${l.message}`);u.stack=l.stack,this.close(u).catch()}}),a}info(){return{type:Us.INFO,name:this.name,id:this.id,version:this.version,description:this.description,metadata:this.metadata,endpoints:this.endpoints()}}endpoints(){return this.handlers.map(e=>{const{subject:r,metadata:s,name:n,queue:i}=e;return{subject:r,metadata:s,name:n,queue_group:i}})}async stats(){const e=[];for(const r of this.handlers){if(typeof this.config.statsHandler=="function")try{r.stats.data=await this.config.statsHandler(r)}catch(s){r.stats.countError(s)}e.push(r.stats.stats(r.qi))}return{type:Us.STATS,name:this.name,id:this.id,version:this.version,started:this.started,metadata:this.metadata,endpoints:e}}addInternalHandler(e,r){const s=`${e}`.toUpperCase();this._doAddInternalHandler(`${s}-all`,e,r),this._doAddInternalHandler(`${s}-kind`,e,r,this.name),this._doAddInternalHandler(`${s}`,e,r,this.name,this.id)}_doAddInternalHandler(e,r,s,n="",i=""){const o={};o.name=e,o.subject=hn.controlSubject(r,n,i),o.handler=s,this.setupHandler(o,!0)}start(){const e=Bt(),r=(o,a)=>o?(this.close(o),Promise.reject(o)):this.stats().then(c=>(a==null||a.respond(e.encode(c)),Promise.resolve())),s=(o,a)=>o?(this.close(o),Promise.reject(o)):(a==null||a.respond(e.encode(this.info())),Promise.resolve()),n=e.encode(this.ping()),i=(o,a)=>o?(this.close(o).then().catch(),Promise.reject(o)):(a.respond(n),Promise.resolve());return this.addInternalHandler(Er.PING,i),this.addInternalHandler(Er.STATS,r),this.addInternalHandler(Er.INFO,s),this.handlers.forEach(o=>{const{subject:a}=o;typeof a=="string"&&o.handler!==null&&this.setupHandler(o)}),Promise.resolve(this)}close(e){if(this._stopped)return this._done;this._stopped=!0;let r=[];return this.nc.isClosed()||(r=this.handlers.concat(this.internal).map(s=>s.sub.drain())),Promise.allSettled(r).then(()=>{this._done.resolve(e||null)}),this._done}get stopped(){return this._done}get isStopped(){return this._stopped}stop(e){return this.close(e)}ping(){return{type:Us.PING,name:this.name,id:this.id,version:this.version,metadata:this.metadata}}reset(){if(this.started=new Date().toISOString(),this.handlers)for(const e of this.handlers)e.stats.reset(e.qi)}addGroup(e,r){return new rn(this,e,r)}addEndpoint(e,r){return new rn(this).addEndpoint(e,r)}_addEndpoint(e){const r=new nt;r.noIterator=typeof e.handler=="function",r.noIterator||(e.handler=(n,i)=>{n?this.stop(n).catch():r.push(new kl(i))},r.iterClosed.then(()=>{this.close().catch()}));const s=this.setupHandler(e,!1);return s.qi=r,this.handlers.push(s),r}}class Jb{constructor(e,r,s=""){d(this,"name");d(this,"subject");d(this,"average_processing_time");d(this,"num_requests");d(this,"processing_time");d(this,"num_errors");d(this,"last_error");d(this,"data");d(this,"metadata");d(this,"queue");this.name=e,this.subject=r,this.average_processing_time=0,this.num_errors=0,this.num_requests=0,this.processing_time=0,this.queue=s}reset(e){this.num_requests=0,this.processing_time=0,this.average_processing_time=0,this.num_errors=0,this.last_error=void 0,this.data=void 0;const r=e;r&&(r.time=0,r.processed=0)}countLatency(e){this.num_requests++,this.processing_time+=qe(Date.now()-e),this.average_processing_time=Math.round(this.processing_time/this.num_requests)}countError(e){this.num_errors++,this.last_error=e.message}_stats(){const{name:e,subject:r,average_processing_time:s,num_errors:n,num_requests:i,processing_time:o,last_error:a,data:c,queue:l}=this;return{name:e,subject:r,average_processing_time:s,num_errors:n,num_requests:i,processing_time:o,last_error:a,data:c,queue_group:l}}stats(e){const r=e;return(r==null?void 0:r.noIterator)===!1&&(this.processing_time=r.time,this.num_requests=r.processed,this.average_processing_time=this.processing_time>0&&this.num_requests>0?this.processing_time/this.num_requests:0),this._stats()}}class Yb{constructor(e,r={strategy:Qt.JitterTimer,maxWait:2e3},s){d(this,"nc");d(this,"prefix");d(this,"opts");this.nc=e,this.prefix=s,this.opts=r}ping(e="",r=""){return this.q(Er.PING,e,r)}stats(e="",r=""){return this.q(Er.STATS,e,r)}info(e="",r=""){return this.q(Er.INFO,e,r)}async q(e,r="",s=""){const n=new nt,i=Bt(),o=hn.controlSubject(e,r,s,this.prefix),a=await this.nc.requestMany(o,Tt,this.opts);return(async()=>{for await(const c of a)try{const l=i.decode(c.data);n.push(l)}catch(l){n.push(()=>{n.stop(l)})}n.push(()=>{n.stop()})})().catch(c=>{n.stop(c)}),n}}class Ia{constructor(e){d(this,"options");d(this,"protocol");d(this,"draining");d(this,"listeners");d(this,"_services");this.draining=!1,this.options=G0(e),this.listeners=[]}static connect(e={}){return new Promise((r,s)=>{const n=new Ia(e);ri.connect(n.options,n).then(i=>{n.protocol=i,async function(){for await(const o of i.status())n.listeners.forEach(a=>{a.push(o)})}(),r(n)}).catch(i=>{s(i)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(e,r,s){if(this.isClosed())throw oe.errorForCode(Z.ConnectionClosed);if(r&&this.isDraining()||s&&this.protocol.noMorePublishing)throw oe.errorForCode(Z.ConnectionDraining);if(e=e||"",e.length===0)throw oe.errorForCode(Z.BadSubject)}publish(e,r,s){this._check(e,!1,!0),this.protocol.publish(e,r,s)}subscribe(e,r={}){this._check(e,!0,!1);const s=new Af(this.protocol,e,r);return this.protocol.subscribe(s),s}_resub(e,r,s){this._check(r,!0,!1);const n=e;n.max=s,s&&(n.max=s+n.received),this.protocol.resub(n,r)}requestMany(e,r=Tt,s={maxWait:1e3,maxMessages:-1}){const n=!this.protocol.options.noAsyncTraces;try{this._check(e,!0,!0)}catch(c){return Promise.reject(c)}if(s.strategy=s.strategy||Qt.Timer,s.maxWait=s.maxWait||1e3,s.maxWait<1)return Promise.reject(new oe("timeout",Z.InvalidOption));const i=new nt;function o(c){i.push(()=>{i.stop(c)})}function a(c,l){c||l===null?o(c===null?void 0:c):i.push(l)}if(s.noMux){const c=n?new Error().stack:null;let l=typeof s.maxMessages=="number"&&s.maxMessages>0?s.maxMessages:-1;const u=this.subscribe(Zt(this.options.inboxPrefix),{callback:(E,T)=>{var M,j;if(((M=T==null?void 0:T.data)==null?void 0:M.length)===0&&((j=T==null?void 0:T.headers)==null?void 0:j.status)===Z.NoResponders&&(E=oe.errorForCode(Z.NoResponders)),E){c&&(E.stack+=`

${c}`),f(E);return}a(null,T),s.strategy===Qt.Count&&(l--,l===0&&f()),s.strategy===Qt.JitterTimer&&(w(),m=setTimeout(()=>{f()},300)),s.strategy===Qt.SentinelMsg&&T&&T.data.length===0&&f()}});u.closed.then(()=>{o()}).catch(E=>{i.stop(E)});const f=E=>{E&&i.push(()=>{throw E}),w(),u.drain().then(()=>{o()}).catch(T=>{o()})};i.iterClosed.then(()=>{w(),u==null||u.unsubscribe()}).catch(E=>{w(),u==null||u.unsubscribe()});try{this.publish(e,r,{reply:u.getSubject()})}catch(E){f(E)}let m=setTimeout(()=>{f()},s.maxWait);const w=()=>{m&&clearTimeout(m)}}else{const c=s;c.callback=a,i.iterClosed.then(()=>{l.cancel()}).catch(u=>{l.cancel(u)});const l=new Z0(this.protocol.muxSubscriptions,e,c);this.protocol.request(l);try{this.publish(e,r,{reply:`${this.protocol.muxSubscriptions.baseInbox}${l.token}`,headers:s.headers})}catch(u){l.cancel(u)}}return Promise.resolve(i)}request(e,r,s={timeout:1e3,noMux:!1}){try{this._check(e,!0,!0)}catch(i){return Promise.reject(i)}const n=!this.protocol.options.noAsyncTraces;if(s.timeout=s.timeout||1e3,s.timeout<1)return Promise.reject(new oe("timeout",Z.InvalidOption));if(!s.noMux&&s.reply)return Promise.reject(new oe("reply can only be used with noMux",Z.InvalidOption));if(s.noMux){const i=s.reply?s.reply:Zt(this.options.inboxPrefix),o=He(),a=n?new Error:null,c=this.subscribe(i,{max:1,timeout:s.timeout,callback:(l,u)=>{l?(a&&l.code!==Z.Timeout&&(l.stack+=`

${a.stack}`),o.reject(l)):(l=Ef(u),l?(a&&(l.stack+=`

${a.stack}`),o.reject(l)):o.resolve(u))}});return c.requestSubject=e,this.protocol.publish(e,r,{reply:i,headers:s.headers}),o}else{const i=new Cf(this.protocol.muxSubscriptions,e,s,n);this.protocol.request(i);try{this.publish(e,r,{reply:`${this.protocol.muxSubscriptions.baseInbox}${i.token}`,headers:s.headers})}catch(a){i.cancel(a)}const o=Promise.race([i.timer,i.deferred]);return o.catch(()=>{i.cancel()}),o}}flush(){return this.isClosed()?Promise.reject(oe.errorForCode(Z.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(oe.errorForCode(Z.ConnectionClosed)):this.isDraining()?Promise.reject(oe.errorForCode(Z.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const e=this.protocol.getServer();return e?e.listen:""}status(){const e=new nt;return e.iterClosed.then(()=>{const r=this.listeners.indexOf(e);this.listeners.splice(r,1)}),this.listeners.push(e),e}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}async jetstreamManager(e={}){const r=new Wb(this,e);if(e.checkAPI!==!1)try{await r.getAccountInfo()}catch(s){const n=s;throw n.code===Z.NoResponders&&(n.code=Z.JetStreamNotEnabled),n}return r}jetstream(e={}){return new Ca(this,e)}getServerVersion(){const e=this.info;return e?qr(e.version):void 0}async rtt(){if(!this.protocol._closed&&!this.protocol.connected)throw oe.errorForCode(Z.Disconnect);const e=Date.now();return await this.flush(),Date.now()-e}get features(){return this.protocol.features}get services(){return this._services||(this._services=new Xb(this)),this._services}reconnect(){return this.isClosed()?Promise.reject(oe.errorForCode(Z.ConnectionClosed)):this.isDraining()?Promise.reject(oe.errorForCode(Z.ConnectionDraining)):this.protocol.reconnect()}}class Xb{constructor(e){d(this,"nc");this.nc=e}add(e){try{return new hn(this.nc,e).start()}catch(r){return Promise.reject(r)}}client(e,r){return new Yb(this.nc,e,r)}}const Qb="1.19.1",Zb="nats.ws";class ey{constructor(){d(this,"version");d(this,"lang");d(this,"closeError");d(this,"connected");d(this,"done");d(this,"socket");d(this,"options");d(this,"socketClosed");d(this,"encrypted");d(this,"peeked");d(this,"yields");d(this,"signal");d(this,"closedNotification");this.version=Qb,this.lang=Zb,this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=He(),this.closedNotification=He()}async connect(e,r){const s=He();if(r.tls)return s.reject(new oe("tls",Z.InvalidOption)),s;this.options=r;const n=e.src;if(r.wsFactory){const{socket:i,encrypted:o}=await r.wsFactory(e.src,r);this.socket=i,this.encrypted=o}else this.encrypted=n.indexOf("wss://")===0,this.socket=new WebSocket(n);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.isDiscarded()},this.socket.onmessage=i=>{if(this.isDiscarded())return;if(this.yields.push(new Uint8Array(i.data)),this.peeked){this.signal.resolve();return}const o=ps.concat(...this.yields),a=w0(o);if(a!==""){const c=J0.exec(a);if(!c){r.debug&&console.error("!!!",An(o)),s.reject(new Error("unexpected response from server"));return}try{const l=JSON.parse(c[1]);z0(l,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),s.resolve()}catch(l){s.reject(l);return}}},this.socket.onclose=i=>{if(this.isDiscarded())return;this.socketClosed=!0;let o;this.done||(i.wasClean||(o=new Error(i.reason)),this._closed(o))},this.socket.onerror=i=>{if(this.isDiscarded())return;const o=i,a=new oe(o.message,Z.Unknown,new Error(o.error));s.reject(a)},s}disconnect(){this._closed(void 0,!0)}async _closed(e,r=!0){if(!this.isDiscarded()&&this.connected&&!this.done){if(this.closeError=e,!e)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)await un(100);this.done=!0;try{this.socket.close(e?1002:1e3,e?e.message:void 0)}catch{}r&&this.closedNotification.resolve(e)}}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async*iterate(){for(;;){if(this.isDiscarded())return;this.yields.length===0&&await this.signal;const e=this.yields;this.yields=[];for(let r=0;r<e.length;r++)this.options.debug&&console.info(`> ${An(e[r])}`),yield e[r];if(this.done)break;this.yields.length===0&&(e.length=0,this.yields=e,this.signal=He())}}isEncrypted(){return this.connected&&this.encrypted}send(e){if(!this.isDiscarded())try{this.socket.send(e.buffer),this.options.debug&&console.info(`< ${An(e)}`);return}catch(r){this.options.debug&&console.error(`!!! ${An(e)}: ${r}`)}}close(e){return this._closed(e,!1)}closed(){return this.closedNotification}isDiscarded(){return this.done?(this.discard(),!0):!1}discard(){var e;this.done=!0;try{(e=this.socket)==null||e.close()}catch{}}}function ty(t){/^(.*:\/\/)(.*)/.test(t)||(t=`https://${t}`);let r=new URL(t);const s=r.protocol.toLowerCase();s!=="https:"&&s!=="http"&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2"),r=new URL(`http://${t}`));let n,i;const o=r.hostname,a=r.pathname,c=r.search||"";switch(s){case"http:":case"ws:":case"nats:":i=r.port||"80",n="ws:";break;default:i=r.port||"443",n="wss:";break}return`${n}//${o}:${i}${a}${c}`}function ry(t={}){return p0({defaultPort:443,urlParseFn:ty,factory:()=>new ey}),Ia.connect(t)}const sy=Mo(),ny="---",xy=at({}),Ey=at({}),Sy=at({}),Fn=at(!1),Ur=at({}),cs={};let oo;const Bo=at(),iy=async(t,e)=>{if(Ur.value[t])return;if(!Fn.value||!Bo.value){cs[t]=e;return}let r=()=>{};Ur.value[t]={pending:new Promise(i=>{r=i})};const s=cr();s.deliverTo(Zt()),s.deliverAll(),s.ackNone(),s.replayInstantly();const n=await Bo.value.subscribe(t,s);Ur.value[t].subscription=n,r(),(async()=>{for await(const i of n){const o=sy.decode(i.data);if(o!==ny){const a=JSON.parse(o);o!==JSON.stringify(e.value[a.id])&&(e.value=Object.freeze({...e.value,[a.id]:Object.freeze(a)}))}}})()},Oy=async t=>{var e,r;if(Ur.value[t]){const{pending:s}=Ur.value[t];s&&await s,(r=(e=Ur.value[t])==null?void 0:e.subscription)==null||r.unsubscribe(),delete Ur.value[t]}cs[t]&&delete cs[t]},Rl=async()=>{await Promise.all(Object.keys(cs).map(async t=>{await iy(t,cs[t]),delete cs[t]}))},oy=async()=>{oo=await ry({servers:[U_],waitOnFirstConnect:!0,maxReconnectAttempts:-1}),Fn.value=!0,Bo.value=oo.jetstream(),await Rl(),(async()=>{for await(const t of oo.status())t.type===Ut.Disconnect&&(Fn.value=!1),t.type===Ut.Reconnect&&(Fn.value=!0,await Rl())})()},Ta=dm(Q_);Ta.use(pf);Ta.use(mf);Ta.mount("#app");oy();export{z_ as A,xy as B,Ey as C,Sy as D,gy as E,nn as F,iy as G,yy as H,wy as I,yt as J,ff as K,Pt as L,fy as M,zp as N,oa as O,Au as P,Oy as Q,cy as R,ly as S,ig as T,ol as U,by as V,_y as W,dy as X,ot as Y,X_ as _,lr as a,ze as b,Ue as c,fr as d,Nd as e,Ui as f,zo as g,Gt as h,l_ as i,py as j,je as k,ir as l,Ve as m,Yt as n,wt as o,my as p,sr as q,at as r,Js as s,Lh as t,ys as u,hy as v,uy as w,$_ as x,pi as y,Fn as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Home-RJsxRnve.js","assets/logo-2flPyEtk.js","assets/Home-WPbVYY7h.css","assets/About-zPg47Quc.js","assets/SettingsContainer-dS3oPJ3L.js","assets/Changelog-xT6IMDjR.js","assets/Settings-mt8MmOaf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index--zTPrhf4.js.map
